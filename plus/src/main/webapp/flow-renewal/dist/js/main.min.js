"use strict";var Bottom={initSetting:function(){var i=$("#bottomToolList").find("#quickGuideMenu");Often.isFunc(Func.CLOUD.QUICK_GUIDE)?(i.css("display","block"),QuickGuide.drawQuickGuide()):i.css("display","none")},addClickEvent:function(){$("#bottomToolList").off("click").on("click",function(i){var t=$(i.target),e=t.findUp(".js-btn-help-talk"),n=t.findUp(".js-tool-item"),i=t.findUp(".js-quick-button");if(0<e.length&&function(t){if(""!==_ONE_COLABO_SRNO)return t();Ajax.executeApi(RestApi.GET.FLOW_ONE_PROJ,{},function(i){""!==i.ONE_COLABO_SRNO?(_ONE_COLABO_SRNO=i.ONE_COLABO_SRNO,t()):Often.toast("error",i18next.t("front.alert.noColaboProject"))})}(function(){QuickGuide.closeQuickGuide(),""===$.trim($("#allUpgradeStep").html())?ViewChanger.loadPageJson({code:"detail",first:_ONE_COLABO_SRNO}):Upgrade.drawCloseConfirm(function(){ViewChanger.loadPageJson({code:"detail",first:_ONE_COLABO_SRNO})})}),0<n.length){n=n.attr("data-code");if("write"===n)return PostPopup.openRegistrationView(ViewChanger.getProjectSrno(),DetailCode.WRITE,!0);if("quick"!==n)return}return 0<i.length?QuickGuide.openQuickGuide():0<t.findUp(".js-quick-close").length?QuickGuide.closeQuickGuide():void 0})}};
"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var DatePicker=function(){var e,n,a;return{makeFlatPickr:function(t){if(function(t){e=$(event.target).findUp(".js-pickr-layer"),n=Often.null2Void(t.inputObj&&t.inputObj.start),a=Often.null2Void(t.inputObj&&t.inputObj.end)}(t),!(n&&0!==n.length||a&&0!==a.length)||e.hasClass("active"))return!1;DatePickerEvent.createDateFickr(t)},checkOverDate:function(t,e){var n=0<t.findUp(".js-start-flatpickr").length;Tz.momentConversion("convertOnly","type19",moment())>e&&!n?t.addClass("deadline-exceeded"):t.removeClass("deadline-exceeded")}}}(),DatePickerEvent=function(){var l,r,n,c,s,f;return{createDateFickr:function(t){!function(t){(function(t){l=$(event.target).findUp(".js-pickr-layer"),r=l.clone(),n=Often.null2Void(t.inputObj&&t.inputObj.start),c=Often.null2Void(t.inputObj&&t.inputObj.end)})(t),f=function(t){var e=l.hasClass("js-start-flatpickr"),n=Often.null2Void(t.startDate,0),a=Often.null2Void(t.endDate,0);return{option:{dateVer:t.dateVer||!1,allDay:t.allDay||!1,rescheduling:t.rescheduling||!1,enableTime:t.enableTime||!1},data:{startDate:n,endDate:a},callback:{closeCallback:t.callback&&t.callback.close,removeCallback:t.callback&&t.callback.remove},boolean:{isStartDate:e,isNoneDate:"-"===Tz.momentTimeZone(e?n:a,void 0),isFullDate:e?8<n.length:8<a.length}}}(t),Internationalization.initDatePicker()}(t);var e=f.boolean.isStartDate?n:c;flatpickr(e,$.extend({},{onReady:a,onOpen:o,onValueUpdate:i,onClose:u},function(t){var e=t.findUp("#detailUl").hasClass("card"),n=f.boolean.isNoneDate,a=f.boolean.isStartDate,o=f.data.startDate,i=f.data.endDate,i={shorthandCurrentMonth:!0,minuteIncrement:1,defaultDate:n?"":Tz.momentConversion("convertOnly","type19",a?o:i)},t={appendTo:t[0],position:function(){}};return $.extend({},i,e?t:{})}(l),t)).open(),s.find(".flatpickr-hour, .flatpickr-minute").off("keydown").on("keydown",function(t){s.is(":visible")&&(KeyCheck.isKey(t,"ENTER")&&(t.stopPropagation(),t.preventDefault(),s.find(".flatpickr-confirm").focus(),s.find(".flatpickr-confirm").click()),KeyCheck.isKey(t,"ESC")&&(t.stopPropagation(),t.preventDefault(),p(r)))})}};function a(t,e,n){(s=$(n.calendarContainer)).find(".flatpickr-time .numInput").prop("readonly","readonly");var a=f.boolean.isStartDate,o=f.data.startDate,i=f.data.endDate;n.config.minDate=a?"":o,l.parents(".js-popup-before").find(".js-post-nav:visible").hasClass("task")&&i&&(n.config.maxDate=a?i:""),f.option.dateVer&&DatePickerHtml.addTimeButton(s,f.boolean.isFullDate),f.option.allDay&&s.find(".flatpickr-time").hide(),f.callback.removeCallback&&DatePickerHtml.addRemoveButton(s,c,f.callback.removeCallback)}function o(){var t,e;f.option.enableTime&&Often.isFunc(Func.CLOUD.EDIT_TIME_TEXT)&&(e=(t=s).find(".flatpickr-time .flatpickr-hour"),t=t.find(".flatpickr-time .flatpickr-minute"),function(t){$(t).removeAttr("readonly"),$(t).off("keydown").keydown(function(t){13===t.keycode&&t.stopPropagation()}),$(t).off("keyup").keyup(function(){$(t).val($(t).val().replace(/[^0-9]/gi,"")),23<$(t).val()&&$(t).val("23"),($(t).val()<0||2<$(t).val().length)&&$(t.val("00"))})}(e),function(t){$(t).removeAttr("readonly"),$(t).off("keydown").keydown(function(t){13===t.keycode&&t.stopPropagation()}),$(t).off("keyup").keyup(function(){$(t).val($(t).val().replace(/[^0-9]/gi,"")),59<$(t).val()&&$(t).val("59"),($(t).val()<0||2<$(t).val().length)&&$(t.val("00"))})}(t))}function i(t,e,n){var a,o=f.boolean.isStartDate,i=f.option.dateVer;o?f.data.startDate=Tz.momentConversion("convertOnly","type19",e):f.data.endDate=Tz.momentConversion("convertOnly","type19",e),i&&(a=s.hasClass("on-date"),o?f.data.startDate=e.substr(0,a?12:8):f.data.endDate=e.substr(0,a?12:8)),d(n)||i&&(i=$(event.target),!$(event.currentTarget).hasClass("flatpickr-days")||0<i.findUp(".flatpickr-time:visible").length||0<i.findUp(".js-flatpickr-time-button").length||n.close())}function u(t,e,n){p(r),e&&0!==e.length&&(d(n)||(function(t){var e=f.boolean.isStartDate,n=f.data.startDate,a=f.data.endDate,o=f.option.rescheduling?function(t,e,n,a){n=new Date(Tz.momentConversion("convertOnly","type1",n).replace(/-/gi,"/")),t=new Date(Tz.momentConversion("convertOnly","type1",t).replace(/-/gi,"/")),e=new Date(Tz.momentConversion("convertOnly","type1",e).replace(/-/gi,"/"));a&&(e.setFullYear(e.getFullYear()-(n.getFullYear()-t.getFullYear())),e.setMonth(e.getMonth()-(n.getMonth()-t.getMonth())),e.setDate(e.getDate()-(n.getDate()-t.getDate())),e.setHours(t.getHours()+1),e.setMinutes(t.getMinutes()));return{startDate:Often.getDateFormat(t),endDate:Often.getDateFormat(e)}}(n,a,t.config.defaultDate,e):e?n:a,i=!0;"object"===_typeof(t.config.defaultDate)?SentryMonitor.captureException(t.config.defaultDate):i=(e?n:a)===t.config.defaultDate.substr(0,f.boolean.isFullDate?12:8);t=f.callback.closeCallback;"function"==typeof t&&t(r,o,i)}(n),setTimeout(function(){n.destroy()},200)))}function d(t){var e=f.data.startDate,n=f.data.endDate;if(PostPopup.getData().POST_CODE!==DetailCode.SCHEDULE&&0!==e.length&&0!==n.length){e=Tz.momentConversion("convertOnly","type19",e);return Tz.momentConversion("convertOnly","type19",n)<e&&(t.setDate(t.config.defaultDate),Often.toast("error",i18next.t("front.datePicker.wrongDate")),1)}}function p(t){l.after(t),l.remove(),$(".flatpickr-calendar").remove()}}(),DatePickerHtml={addTimeButton:function(a,t){var e="<div class='js-flatpickr-time-layer'><div class='js-flatpickr-date-button js-flatpickr-time-button'><button type='button' class='flatpickr-button'>   <span class='create-icon-box small'>       <i class='icons-clock'></i>   </span></button><div class='flatpickr-text'>"+i18next.t("front.deviceManagement.setTime")+"</div></div></div>";a.find(".flatpickr-time").append("<button type='button' class='js-flatpickr-close-button js-flatpickr-time-button' style='display: inline-block;' ></button>"),Often.isFunc(Func.CLOUD.TASK_START_TIME)&&a.find(".flatpickr-innerContainer").after(e);function o(t,e){if(a.find(".time24hr").css("display",e?"inline-block":"none"),t.find(e?".js-flatpickr-date-button":".js-flatpickr-close-button").addClass("d-none"),t.find(e?".js-flatpickr-close-button":".js-flatpickr-date-button").removeClass("d-none"),e)return a.addClass("on-date");a.removeClass("on-date")}o(a.find(".js-flatpickr-time-layer"),t),a.off("click").on("click",function(t){t.stopPropagation();var e=$(t.target),n=e.findUp(".js-flatpickr-time-button"),e=0<e.findUp(".js-flatpickr-date-button").length;n&&0!==n.length&&(t.preventDefault(),o(a,e))})},addRemoveButton:function(t,e,n){t.append("<div class='js-flatpickr-remove-button dueDate-remove-button' style='cursor: pointer'><i class='icons-calendar'></i> 마감일 삭제</div>"),"function"==typeof n&&n(t,e)}};
"use strict";var Detail=function(){var e,c,O,d,s,T,R,_={PG_NO:1,PG_PER_CNT:30,PREV_YN:"Y",NEXT_YN:"Y",COLABO_SRNO:0,RENEWAL_YN:"Y",MORE_BUTTON:!1},r=[],E=!1;return{showDetailView:function(e,t,n){var i=Number(n)===TINY_URL_MOVE.POST;CONNECT_PROJECT_SRNO=Often.null2Void(e),CONNECT_POST_SRNO=i?"":Often.null2Void(t),CONNECT_REMARK_SRNO=i?"":Often.null2Void(n),_.COLABO_SRNO=CONNECT_PROJECT_SRNO,_.SEARCH_COMMT_SRNO=CONNECT_POST_SRNO,_.SRCH_COLABO_REMARK_SRNO=CONNECT_REMARK_SRNO,a(),DetailHeader.drawTempProjectHeaderItem(e),o(e,function(){l(),i&&PostPopup.togglePostView(e,t,"","",!0)}),DetailEvent.resetFilter(T),ProjectSearch.hideSearchProjectList(),Participant.drawProjectParticipantItems(e,!0),RecentProject.reloadRecentProject()},drawPostInfo:o,drawPostList:l,drawHashtagPostList:function(){a(),ListHelper.initPageData(_,s),n()},closeSettingUl:function(){$(".js-setting-ul").fadeOut(200)},closeFeedFilter:function(){$("#feedTypeButton").find(".js-feed-filter-layer").fadeOut(200)},updateOnePostElement:function(n,e,t){var i=$("#detailUl"),a=i.find("#post-"+t);"POST"===n||"EDIT"===n?PostPopup.getPostData(e,t,"",!1,function(){var e=Often.null2Void(T.find(".js-feed-filter-layer").find(".check-menu-item.on").attr("data-code")),t=PostPopup.getData().POST_RECORD;""!==e&&t[0].TMPL_TYPE!==e||(t=$(PostComponent.getHtmlByPostRecord(t)),i.find("#noDetailData").remove(),t.find(".js-remark-area").off("keydown keyup").on({keydown:ItemRemark.keyDownRemarkInput,keyup:ItemRemark.keyUpRemarkInput}),ItemSubtask.initEdit(t),"POST"===n?(i.prepend(t),DetailEvent.applySummarySlickImage()):(a.after(t),DetailEvent.applySummarySlickImage(),a.remove()))}):"DELETE"===n&&(PostPopup.removePopup(),UpdateElements.autoUpdateElem())},clickPostMore:function(){"list"===LocalUtil.getFeedType()&&(_.SEARCH_COMMT_SRNO=Often.null2Void(r[0].COLABO_COMMT_SRNO));_.COMMT_RGSN_DTTM=Often.null2Void(r[0].COMMT_RGSN_DTTM,r[0].RGSR_DTTM),_.ORDER_TYPE="P",_.MORE_BUTTON=!0,e.find(".highlight").removeClass("highlight"),p()},executeProjectSettingInfo:function(e,t){Ajax.executeApi(RenewalApi.GET.ACT_PROJECT_INFO,{COLABO_SRNO:e,GUBUN:"SETTING"},function(e){e=Often.null2Void(e.PROJECT_SETTING&&e.PROJECT_SETTING[0],{});LocalUtil.setLocalJson("POP_PROJECT_SETTING",e),"function"==typeof t&&t(e)})},getProjectSrno:f,setProjectSrno:function(e){_.COLABO_SRNO=e},getPostRecord:function(){return r},getPostStatus:function(){return $("#postPopup").find(".js-popup-before").attr("data-code")},setFeedType:N,togglePostFilter:u};function a(){e=$("#detailLayer"),c=e.find("#detailTimeline"),O=c.find("#postTimeline"),d=c.find("#createPostArea"),T=c.find("#projectFeedArea"),s=T.find("#detailUl"),R=T.find("#postMoreBtn")}function o(s,r){ViewChanger.isPage("detail")&&(a(),R.css("display","none"),O.scrollTop(0).css("z-index","-1"),Ajax.executeApi(RenewalApi.GET.ACT_PROJECT_INFO,_,function(e){var t=Often.null2Void(e.PROJECT_SETTING&&e.PROJECT_SETTING[0],{}),n=Often.null2Void(e.PIN_RECORD,[]),i=Often.null2Void(e.TAG_RECORD,[]),a=Often.null2Void(e.TASK_REPORT_RECORD,[]),o=Often.null2Void(e.ALARM_RECORD,""),l=Often.null2Void(e.ALARM_COUNT,0),e=Often.null2Void(t.VIEW_TYPE,"F");t.LABEL_SRNOS=LocalUtil.getLocalValue("CURRENT_PROJECT_SETTING","LABEL_SRNOS"),LocalUtil.setLocalJson("CURRENT_PROJECT_SETTING",t),LocalUtil.setLocalJson("POP_PROJECT_SETTING",t),LocalUtil.setLocal("FEED_TYPE","F"===e?"card":"list"),r&&function(){var e=Often.isFunc(Func.CLOUD.POST_VIEW_SELECT);N(e?LocalUtil.getFeedType():"card");var t=$("#feedTypeButton");e?(t.find(".feed-type-button.card").css("display","inline-block"),t.find(".feed-type-button.list").css("display","inline-block")):(t.find(".feed-type-button.card").css("display","none"),t.find(".feed-type-button.list").css("display","none"));t.find(".check-menu-item").removeClass("on"),t.find(".check-menu-item:eq(0)").addClass("on"),t.find(".js-feed-filter-button").removeClass("active")}(),"function"==typeof r&&r(),DetailHeader.drawProjectHeaderItem(t),Alarm.drawProjectAlarmItems(s,o,l,!0),PinPost.drawProjectPinPostItemsByRecord(n),HashTag.drawProjectHashtagItemsByRecord(i),TaskReport.drawTaskReport(a),i=d,a=t.TMPL_TYPE,u(i.find("#createPostUl"),a),Authority.changeCreatePostAreaByAuthority(i),Participant.drawJoinParticipantItem(s,!0),O.css("z-index",""),DetailEvent.addClickEventOnDetailView(),a=t.COLABO_SRNO,i=t.BG_COLOR_CD,t=t.TTL,Ajax.executeApi(RestApi.POST.COLABO_USER_HISTORY_C001,{COLABO_SRNO:a,BG_COLOR_CD:i,TTL:Often.null2Void(t,"-")})}))}function u(e,t){t=t||LocalUtil.getLocalValue("CURRENT_PROJECT_SETTING","TMPL_TYPE");var n=e.find(".post-filter, .js-post-type-item");if(""===t)return n.css("display","block");var i=[{code:"todo",text:i18next.t("dictionary.todo")},{code:"schedule",text:i18next.t("dictionary.schedule")},{code:"task",text:i18next.t("dictionary.task")},{code:"write2",text:i18next.t("dictionary.article")}],a="createPostUl"===e.attr("id"),o=e.hasClass("create-post-nav"),l="";t.split(",").forEach(function(e){var t,n;1!==Number(e)&&(n=Number(e)-2,t=$.extend({v:e},i[n]),n="",a?n+='<li class="post-filter" data-post-code="{v}"><i class="icons-{code}"></i><span>{text}</span></li>':o&&(n+='<li class="js-post-type-item" data-post-code="{v}"><button type="button" class="create-tab tab-{code}" role="tab"><i class="icons-{code}"></i><span>{text}</span></button></li>'),5===Number(e)&&(t.v=1),l+=ListHelper.replaceJson(n,t))}),e.empty().html(l)}function l(e){a(),e?ListHelper.initPageData(_,""):(ListHelper.initPageData(_,s),AlarmUpdate.removeNewUpdate()),_.ORDER_TYPE="N",p()}function p(){var o,t,l=_.MORE_BUTTON;l&&"N"===_.PREV_YN||!l&&"N"===_.NEXT_YN||(E=!l&&""!==_.SEARCH_COMMT_SRNO,o="list"===LocalUtil.getFeedType(),(t=$.extend({},_,i(E||l))).packetOption=Ajax.OPTION.PREVENT_EXECUTE,Ajax.executeApi(t.API_KEY,t,function(e){var n=1===_.PG_NO,i=e[t.RECORD_NAME],a=0<i.length&&(!o||E)?i[0].MORE_YN:"N";s.drawListHelper({pageData:_,prevYn:n?a:l?e.NEXT_YN:_.PREV_YN,nextYn:(l?_:e).NEXT_YN,records:i,noDataHtml:ListHelper.getNoDataHtml("POST"),reverse:l,targetObj:{scroll:c},callback:{click:DetailEvent.clickDetailUl,item:function(e){return PostComponent.getHtmlByPostRecord(e,l)},scroll:function(){_.ORDER_TYPE="N";var e=r[r.length-1];if(!e)return SentryMonitor.captureException(r);e=Often.null2Void(e.COMMT_RGSN_DTTM,e.RGSR_DTTM);0<r.length&&(_.COMMT_RGSN_DTTM=e),p()},final:function(e){(function(e,t,n){r=e?t:n?t.reverse().concat(r):r.concat(t)})(n,i,l),DetailEvent.applySummarySlickImage(),ItemRemark.addEventOnRemarkInput(),ItemSubtask.initEdit(s),l&&(_.MORE_BUTTON=!1,_.SEARCH_COMMT_SRNO="",R.css("display","Y"===_.PREV_YN?"block":"none"));var t;n&&(0!==r.length&&!s.hasClass("list")&&o?s.addClass("list"):0===r.length&&s.removeClass("list"),s.css("display","block"),R.css("display",E&&"Y"===a?"block":"none"),function(e){e.off("keyup").on("keyup",function(e){SubtaskKeyEvent.keyUpSubtaskInput(e)}),e.off("keydown").on("keydown",function(e){SubtaskKeyEvent.KeyDownSubtaskInput(e)})}(e),E&&(E=!1,_.SEARCH_COMMT_SRNO="",_.SRCH_COLABO_REMARK_SRNO="",i&&10===i.length&&(_.NEXT_YN="Y"),function(e){var t=s.children("li.detail-item:first");e&&t.find(".js-post-nav").addClass("highlight");e=t.offset()&&t.offset().top,t=$(window).innerHeight()-c.outerHeight(!0),t=e-t-46;c.animate({scrollTop:t},400,"swing")}(!0),o&&PostPopup.togglePostView(CONNECT_PROJECT_SRNO,CONNECT_POST_SRNO,CONNECT_REMARK_SRNO,DetailEvent.applySummarySlickImage)),t=s.find(".detail-item").length,0<r.length&&"N"===_.NEXT_YN&&0===t&&e.prepend(ListHelper.getNoDataHtml("POST")))}}})}))}function f(){return""!==Often.null2Void(_.COLABO_SRNO)?_.COLABO_SRNO:(_.COLABO_SRNO=LocalUtil.getLocalValue("CURRENT_PROJECT_SETTING","COLABO_SRNO"),LocalUtil.getLocalValue("CURRENT_PROJECT_SETTING","COLABO_SRNO"))}function N(e){var t=$("#feedTypeButton");t.find(".feed-type-button").removeClass("on"),t.find(".feed-type-button."+e).addClass("on"),$("#detailUl").attr("class","post-group "+e)}function n(){var t;"N"!==_.NEXT_YN&&(t=i(),Ajax.executeApi(t.API_KEY,$.extend({},_,t),function(e){s.drawListHelper({pageData:_,nextYn:e.NEXT_YN,records:e[t.RECORD_NAME],targetObj:{scroll:c},callback:{click:DetailEvent.clickDetailUl,item:PostComponent.getHtmlByPostRecord,scroll:n,final:function(){ItemRemark.addEventOnRemarkInput()}}}),s.removeClass("d-none")}))}function i(e){var t,n,i=Often.null2Void(c.find("#hashtagUl").find(".hashtag.on:eq(0)").text(),c.find("#allPostsFilterTitle").text()),a=""!==(i=-1<i.indexOf("#")?i.replace("#",""):""),o="list"===LocalUtil.getFeedType(),l=Often.null2Void(T.find(".js-feed-filter-layer").find(".check-menu-item.on").attr("data-code")),s=f(),r=LocalUtil.getProjectOpenYn(),o=a?o?(t=RenewalApi.GET.ACT_POST_LIST,n="DETAIL","POST_RECORD"):(t=RestApi.GET.COLABO2_AT_ME_R101,n="HASH","COMMT_REC"):e||_.COMMT_RGSN_DTTM?o?(t=RestApi.GET.COLABO2_R104,n="NEWLIST","LIST_REC"):(t=RestApi.GET.COLABO2_R104,n="","COMMT_REC"):o?(t=RenewalApi.GET.ACT_POST_LIST,n="DETAIL","POST_RECORD"):(t=RestApi.GET.COLABO2_R104,n="","COMMT_REC");return{API_KEY:t,GUBUN:n,TMPL_TYPE:l,TAG_NM:i,COLABO_SRNO:s,RECORD_NAME:o,OPEN_YN:r}}}();
"use strict";var InvitationPopup=function(){var e=window.location.search;Often.isFunc("INVITATION_POPUP")&&e.indexOf("FAVORITE")<0?$(".js-temporary-popup").remove():($(".detail-popup-type-1").css("height","368"),$(".js-new-invitation-popup").remove());var a="Y"===LocalUtil.getLocalValue("ONLY_BUY_SETTING","DVSN_TREE_YN"),r=StatusCode.UN_BFLOW.GUEST===LocalUtil.getLocalValue("ONLY_BUY_SETTING","STTS"),n=-1<e.indexOf("CHAT"),e=-1<e.indexOf("NEW_CHAT"),i=$("#invitePopup"),o=$("#teamInviteLayer"),c=$("#organizationDetailLayer"),s=$("#departmentName span"),p=$("#existEmplData ul"),l=$("#inviteSearchArea"),d=$("#inviteOrgChart"),u=$("#inviteGroup"),m=$("#membersListForInvitation ul"),f=$("#inviteTargetList"),t=$("#teamInviteHeader"),_=$("#blankInviteTarget"),g=$("#countFinalElement"),v="employee",C=0,E="",O="",R=[],h=[],T=[],y=[],N="",P={PG_NO:1,NEXT_YN:"Y"},b={chat:e?"새 채팅":"대화상대 초대",project:"참여자 초대",manager:"담당자 변경",participant:"참석자 변경"},S={chat:"이름, 소속, 전화번호 검색",project:"이름, 소속, 전화번호 검색",manager:"담당자명 검색",participant:"참석자명 검색"},U={chat:"none",project:"inline-block",manager:"none",participant:"none"},L={chat:"초대하기",project:"초대하기",manager:"확인",participant:"확인"};return{openInvitationPopup:function(e,t,n){k(n),ce(!0),r?(x("partner"),$(".js-partners").text("연락처"),$(".js-employees").remove(),v="partner",ce(),j("list"),M()):function(e){x(e?"remove":"employee"),(a?A:D)()}(t),ae(e),re(),de()},openManagerPopup:function(e,t){O=e,E=t,k("manager"),ce(!0),x("remove"),ce(),j("list"),H(),ae(!0),re(),de()},openParticipantPopup:function(e){O=e,k("participant"),ce(!0),x("remove"),ce(),j("list"),H(),ae(!0),re(),de()},closePopupLayout:ie,isIdExistInArray:ne,retrieveAllArray:function(){console.log("************** Invitation Array ************"),console.log("초대될 사용자"),R.forEach(function(e){return console.log(e)}),console.log("초대될 부서"),h.forEach(function(e){return console.log(e)}),console.log("초대될 그룹 \n"),T.forEach(function(e){return console.log(e)}),console.log("임시 배열 \n"),y.forEach(function(e){return console.log(e)}),console.log("************** Invitation Array End ************"),console.log("************** Others ************"),console.log("현재 레이어: "+v),console.log("현재 팝업: "+N),console.log("게스트 여부: "+r),console.log("업무번호: "+E),console.log("게시글 번호: "+O),console.log("************ Others End ***********")},countElements:z};function k(e){return e?N=e:n?N="chat":void(N="project")}function A(){v="employeeOrg",ce(),j("chart"),Organization.initPage(d,c,!0,o,l,l,142)}function D(){v="employeeList",ce(),j("list"),M("J")}function I(){v="group",ce(),j("group"),l.off("keydown").off("keyup").on("keydown",se),Ajax.executeApi("FLOW_GROUP_R001",$.extend({},P,{RENEWAL_YN:"Y"}),function(e){u.drawListHelper({pageData:P,nextYn:e.NEXT_YN,records:e.GROUP_REC,callback:{item:J}})})}function j(e){var t=o.find(".project-invite-employee-case"),n=o.find(".project-invite-ouside-case"),a=u.parent(),r=d.parent();switch(e){case"chart":t.removeClass("d-none"),r.removeClass("d-none"),a.addClass("d-none"),n.addClass("d-none");break;case"list":n.removeClass("d-none"),t.addClass("d-none");break;case"group":t.removeClass("d-none"),a.removeClass("d-none"),n.addClass("d-none"),r.addClass("d-none"),c.css("display","none").addClass("d-none")}}function x(e){var t=o.find(".project-invite-popup-navi");switch(t.css("display","inherit"),e){case"remove":t.css("display","none");break;case"employee":t.find("li").removeClass("on"),t.find(".js-employees").addClass("on");break;case"partner":t.find("li").removeClass("on"),t.find(".js-partners").addClass("on");break;case"group":t.find("li").removeClass("on"),t.find(".js-groups").addClass("on")}}function M(t){l.off("keydown").on("keydown",se),Ajax.executeApi(RestApi.GET.COLABO2_CHAT_CNPL_R001,$.extend({},P,{FLOW_USER_YN:"Y",GUBUN:t,SRCH_WORD:l.val()}),function(e){m.drawListHelper({pageData:P,nextYn:e.NEXT_YN,records:e.CNPL_LIST,callback:{item:W,scroll:function(){M(t)}}})})}function G(){Ajax.executeApi("FLOW_FAV_GROUP_R002",$.extend({},P,{SRCH_WD:l.val()}),function(e){var t=0!==e.FAV_GROUP_REC.length;o.find("#nullEmplData").css("display",t?"none":"block"),X(!0,l.val()),p.drawListHelper({pageData:P,nextYn:e.NEXT_YN,records:e.FAV_GROUP_REC,callback:{item:W,scroll:G}})})}function H(){l.off("keydown").on("keydown",pe);var e={packetOption:2,COLABO_SRNO:le(),SRCH_WORD:l.val(),SORT_DESC:"N"};Ajax.executeApi("COLABO2_SENDIENCE_R101",$.extend({},e,P),function(e){m.drawListHelper({pageData:P,nextYn:e.NEXT_YN,records:e.SENDIENCE_REC,callback:{item:W,scroll:H,final:function(){var e;"manager"===N&&0===y.length?(e={COLABO_SRNO:le(),COLABO_COMMT_SRNO:O,TMPL_TYPE:4},WorkerPopup.getPostWorkerRecord(e,K)):"participant"===N&&0===y.length?(e={COLABO_SRNO:le(),COLABO_COMMT_SRNO:O,TMPL_TYPE:3},WorkerPopup.getPostWorkerRecord(e,K)):K(R,!0)}}})})}function B(){var e={COLABO_SRNO:le(),COLABO_COMMT_SRNO:O,INSERT_ATD_REC:me(R),DELETE_ATD_REC:me(y)};Ajax.executeApi("FLOW_SCHD_ATD_U001",e,function(){UpdateElements.autoUpdateElem({PROJECT_SRNO:le(),POST_SRNO:O,SCHEDULE_DATA:{OBJECT:"ATTENDENCE",ATTENDENCE_REC:me(R)}}),UpdateElements.autoUpdateElem({PROJECT_SRNO:le(),POST_SRNO:O,REMARK_UPDATE:!0})}),Often.toast("success","참석자가 변경되었습니다.")}function w(){var e=[{id:_USER_ID,type:"U"}],e={COLABO_SRNO:le(),SENDIENCE_REC:e.concat(R,h,T).map(function(e){return{RCVR_ID:e.id,RCVR_NM:e.name,RCVR_GB:e.type}}),packetOption:Ajax.OPTION.PREVENT_EXECUTE};Ajax.executeApi(RestApi.POST.COLABO2_SENDIENCE_C001,e,function(){Participant.drawProjectParticipantItems(le(),!0,function(){UpdateElements.autoUpdateElem({ONLY_POST:!0}),Often.toast("success",i18next.t("front.alert.invitedToProject"))})})}function F(){OpenUtil.openMessengerByInvite(Often.null2Void(ROOM_SRNO),ue(R,"member"),ue(h,"dept"),ue(T,"group"))}function Y(){var e={OBJECT:"WORKER",TASK_SRNO:E,WORKER_REC:R.map(function(e){return{WORKER_ID:e.id,WORKER_NM:e.name,USE_INTT_ID:e.use_intt_id,PRFL_PHTG:e.imagePath}})};Ajax.executeApi("FLOW_TASK_WORKER_U002",e,function(){UpdateElements.autoUpdateElem({PROJECT_SRNO:le(),POST_SRNO:O,TASK_DATA:e})})}function V(e){var t=$("#inviteTargetListElement").html(),e=ListHelper.replaceJson(t,$.extend({},e,{image:ListHelper.setProfile(e.profileImagePath),groupClass:"member"!==e.type?"group-item":""}));f.append(e)}function W(e){var n=$("#emplListItemForInvitation").html(),a="";return"manager"!==N&&"participant"!==N||(e=e.map(function(e){return{USER_ID:e.RCVR_USER_ID,PRFL_PHTG:e.PRFL_PHTG,FLNM:e.RCVR_USER_NM,USE_INTT_ID:e.RCVR_USE_INTT_ID,STATUS:e.STATUS,JBCL_NM:e.JBCL_NM,DVSN_NM:e.RCVR_DVSN_NM,CMNM:e.RCVR_CORP_NM}})),$.each(e,function(e,t){a+=ListHelper.replaceJson(n,$.extend({},t,{image:ListHelper.setProfile(t.PRFL_PHTG),status:_IsMini?"mini-mode-"+MiniState.getStatusName(t.STATUS):"",id:Member.getIdentifier(t.USER_ID),active:ne(t.USER_ID,"member")?"active":"",use_intt_id:t.USE_INTT_ID}))}),a}function J(e){var n=$("#groupListItemForInvitation").html(),a="";return $.each(e,function(e,t){a+=ListHelper.replaceJson(n,$.extend({},t,{GROUP_NM:t.GROUP_NM,GROUP_CD:t.GROUP_CD,active:ne(t.GROUP_CD,"group")?"coperate-check-type-2":"coperate-check-type-1"}))}),a}function K(e){var n=1<arguments.length&&void 0!==arguments[1]&&arguments[1];$.each(e,function(e,t){t=n?t:{profileImagePath:t.PRFL_PHTG,id:t.USER_ID,name:t.USER_NM,type:"member",identifyCode:t.USE_INTT_ID};if(ne(t.id,"member"))return!0;m.find(".js-member-item[data-id = '"+t.id+"']").addClass("active"),Z(t,"member"),Z(t,"temp"),V(t)})}function X(e,t){c.css("display","block").removeClass("d-none"),p.empty(),""!==t?s.text(e?"'"+t+"' 검색결과":t):s.text("")}function z(e){var t=!!e,n="manager"===N?"front.common.countMembers":"front.common.selectedTarget",a=i.find(".project-invite-selected-num"),e=t?e:Q();g.text(0===e?"":i18next.t(n,{count:e})),0===e?(_.removeClass("d-none"),a.css("display","none")):(_.addClass("d-none"),a.css("display","flex"))}function Q(){return R.concat(h,T).length}function q(e){f.find("li[data-id='"+e+"']").remove()}function Z(e,t){if(!ne(e,t)){switch(t){case"member":R.push({id:e.id,type:e.gubun,name:e.name,imagePath:e.profileImagePath,identifyCode:e.use_intt_id});break;case"dept":h.push({id:e.id,type:e.gubun,name:e.name});break;case"group":T.push({id:e.id,type:e.gubun,name:e.name});break;case"temp":y.push({id:e.id,type:e.gubun,name:e.name})}z()}}function ee(e,t){switch(t){case"member":R=te(R,e);break;case"dept":h=te(h,e);break;case"group":T=te(T,e)}z()}function te(e,t){return e.filter(function(e){return e.id!==t})}function ne(e,t){var n;switch(t){case"member":n=R;break;case"dept":n=h;break;case"group":n=T;break;default:return!1}return-1<n.map(function(e){return e.id}).indexOf(e)}function ae(e){var t=o.parents(".js-dimmed-area");e?t.addClass("dimmed").css("display","block"):t.removeClass("dimmed").css("display","none"),i.off("click").on("click",_e)}function re(){t.text(b[N]),i.find(".js-back-menu").css("display",U[N]),$("#inviteMembers").text(L[N]),l.attr("placeholder",S[N]),i.css("display","block"),o.fadeIn(200).off("click").on("click",fe)}function ie(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0],t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=[],a=[];y.forEach(function(e){return n.push(e.id)}),R.forEach(function(e){return a.push(e.id)});var r=!function(e,t){var n=e.length;if(n===t.length){e.sort(),t.sort();for(var a=0;a<n;a++)if(e[a]!==t[a])return;return 1}}(n,a),i=0!==Q()&&!t&&("project"===N||"chat"===N);r&&(("manager"===N||"participant"===N)&&!t)||i?PopupDraw.drawConfirm({contents:{main:{manager:"변경된 담당자가 있습니다, 나가시겠습니까?",participant:"변경된 참석자가 있습니다. 나가시겠습니까?",chat:"선택된 참석자가 있습니다. 나가시겠습니까?",project:"선택된 참석자가 있습니다. 나가시겠습니까?"}[N]},callback:{submit:function(){oe(e,t)}}}):oe(e,t)}function oe(e,t){e=0<arguments.length&&void 0!==e&&e;if(n&&!(1<arguments.length?t:void 0))return self.close();n||(o.fadeOut(200),i.fadeOut(200),e||($("#inviteMainLayer").css("display","none"),$("#inviteLayer").fadeOut(200)))}function ce(e){e&&(f.empty(),R=[],h=[],T=[],y=[]),m.empty(),u.empty(),d.empty(),s.text(""),p.empty(),l.val("").off("click"),o.find("#nullEmplData").css("display","none"),$(".js-search-text").addClass("d-none"),_.removeClass("d-none"),ListHelper.initPageData(P),z(0),c.css("height","240px"),d.parent().css("height","")}function se(){ListHelper.initPageData(P),C&&clearTimeout(C),C=setTimeout(function(){switch(v){case"employeeList":m.empty(),M("J");break;case"partner":m.empty(),M("F");break;case"group":m.empty(),c.css("display","block"),G()}},200)}function pe(){ListHelper.initPageData(P),C&&clearTimeout(C),C=setTimeout(function(){m.empty(),H()},200)}function le(){return $("#postPopup").is(":visible")?LocalUtil.getLocalValue("POP_PROJECT_SETTING").COLABO_SRNO:Detail.getProjectSrno()}function de(){o.removeClass("js-manager-layer").removeClass("js-participant-layer"),"manager"===N?o.addClass("js-manager-layer"):"participant"===N&&o.addClass("js-participant-layer")}function ue(e,t){return e.map(function(e){switch(t){case"member":return{IN_RCVR_USER_ID:e.id};case"dept":return{DVSN_CD:e.id};case"group":return{GROUP_CD:e.id}}})}function me(e){return e.map(function(e){return{ATTENDENCE_ID:e.id,ATTENDENCE_NM:e.name,PRFL_PHTG:e.imagePath,RQST_USE_INTT_ID:e.use_intt_id}})}function fe(e){e=$(e.target);(0!==e.findUp(".js-employees").length?(x("employee"),(a?A:D)(),1):0!==e.findUp(".js-partners").length?(ListHelper.initPageData(P),x("partner"),v="partner",ce(),j("list"),M("F"),1):0!==e.findUp(".js-groups").length?(ListHelper.initPageData(P),x("group"),I(),1):function(e){var t=e.findUp(".js-member-item");if(0===t.length)return!1;e=t.attr("data-id");ne(e,"member")?(t.removeClass("active"),ee(e,"member"),q(e)):(e={id:e,name:t.attr("data-name"),gubun:t.attr("rcvr_gb"),profileImagePath:t.attr("profile-image"),use_intt_id:t.attr("use_intt_id"),type:"member"},t.addClass("active"),Z(e,"member"),V(e));return!0}(e))||function(e){var t=e.findUp(".js-dvsn-select");if(0===t.length)return!1;var n=e.findUp(".department-item"),e=n.attr("dvsn-cd");ne(e,"dept")?(t.removeClass("coperate-check-type-2").addClass("coperate-check-type-1"),ee(e,"dept"),q(e)):(n={id:e,name:n.attr("dvsn-nm"),gubun:"ED",type:"dept"},t.removeClass("coperate-check-type-1").addClass("coperate-check-type-2"),Z(n,"dept"),V(n));return!0}(e)||function(e){var t=e.findUp(".js-group-select");if(0===t.length)return!1;var n=e.findUp(".js-group-item"),e=n.attr("data-groupCd");ne(e,"group")?(t.removeClass("coperate-check-type-2").addClass("coperate-check-type-1"),ee(e,"group"),q(e)):(n={id:e,name:n.attr("data-name"),type:"group",gubun:"GP"},t.removeClass("coperate-check-type-1").addClass("coperate-check-type-2"),Z(n,"group"),V(n));return!0}(e)||(0!==e.findUp(".closeInviteLayerBtn").length?(ie(),1):0!==e.findUp(".returnMainBtn").length?(ie(!0),1):function(e){if(0===e.findUp(".removeMemberItem").length)return!1;var e=e.findUp(".js-invite-target"),t=e.attr("data-id"),e=e.attr("data-type");switch(e){case"member":$(".project-invite-choiceList [data-id='"+t+"']").removeClass("active");break;case"dept":$("#inviteOrgChart [dvsn-cd='"+t+"']").find(".js-dvsn-select").removeClass("coperate-check-type-2").addClass("coperate-check-type-1");break;case"group":$("#inviteGroup [data-groupcd='"+t+"']").find(".js-group-select").removeClass("coperate-check-type-2").addClass("coperate-check-type-1")}return ee(t,e),q(t),!0}(e))||(0!==e.findUp(".project-invite-team_close").length?(d.parent().css("height",""),c.css("display","none"),1):function(e){e=e.findUp(".js-group-item");return 0!==e.length&&(X(!1,e.attr("data-name")),function n(a){Ajax.executeApi("FLOW_GROUP_MEMBER_R001",$.extend({},P,{GROUP_CD:a}),function(e){var t=0!==e.MEMBER_REC.length;o.find("#nullEmplData").css("display",t?"none":"block"),p.drawListHelper({pageData:P,nextYn:e.NEXT_YN,records:e.MEMBER_REC,callback:{item:W,scroll:function(){n(a)}}})})}(e.attr("data-groupCd")),!0)}(e))||(0!==e.findUp(".js-select-all").length?($("#existEmplData li").each(function(e,t){var n=$(t).attr("data-id"),a=$(t).attr("data-name"),r=$(t).attr("rcvr_gb"),i=$(t).attr("profile-image"),o=ne(n,"member");$(t).addClass("active"),o||(Z(i={id:n,name:a,gubun:r,type:"member",profileImagePath:i},"member"),V(i))}),1):function(e){if(0===e.findUp("#removeAllElements").length)return!1;f.empty(),R=[],h=[],T=[],i.find(".coperate-check-type-2").removeClass("coperate-check-type-2").addClass("coperate-check-type-1"),i.find(".js-member-item").removeClass("active"),z(0)}(e))||0!==e.findUp("#inviteMembers").length&&(0!==R.concat(h,T).length||"manager"===N||"participant"===N?(function(e,t,n,a){switch(N){case"project":e();break;case"chat":t();break;case"manager":n();break;case"participant":a();break;default:Often.toast("error","오류가 발생했습니다.")}}(w,F,Y,B),ie(!1,!0)):Often.toast("error","참여자를 선택해 주세요"))}function _e(e){var t=$(e.target),e=0!==t.findUp(".removeMemberItem").length;return 0===t.findUp("#teamInviteLayer").length&&!e&&!n&&(ie(),!0)}}();
"use strict";var InvitePopup=function(){var p,u,r={JOIN:"Y",WAIT:"W",NONE:"N"};return{checkInviteAndAction:function(t){""!==Often.null2Void(CONNECT_INVITE_KEY)?n(t):"function"==typeof t&&t(!0)},openInvitePopup:n,makeInvitePopup:e,clearInvitePopup:f};function n(n){Ajax.executeApi(RestApi.GET.COLABO2_INVT_R001,{INVT_KEY:CONNECT_INVITE_KEY},function(t){e(t,n)})}function e(n,t){if(""===(p=Often.null2Void(n.COLABO_SRNO,"")))return location.href="errorpage.act";var e=Often.null2Void(n.PASS_YN,r.NONE);if("C"!==e&&e!==r.WAIT){if(e===r.JOIN)return""===Often.null2Void(p)?void 0:void ViewChanger.loadPageJson({code:"detail",first:p});"function"==typeof t&&t();var i,o,a="Y"===n.JNNG_ATHZ_YN,o=(i=n,o=$($("#sentInvitationPopup").html()),e=ImageUtil.removeDomain("PROFILE",i.PRFL_PHTG),t="Y"===i.JNNG_ATHZ_YN,o.find(".js-prfl").css("background-image","url("+e+")"),o.find(".js-title").text(i.TTL),o.find(".js-name").text(i.FLNM),o.find(".js-count").text(i18next.t("front.invitePopup.participating",{count:i.SENDIENCE_CNT})),o.find("#acceptBtn").text(i18next.t(t?"front.invitePopup.requestToJoin":"front.invitePopup.accept")),o.attr("id","mainInvitePopup"));o.off("click").on("click",function(t){var n=$(t.target),e=($(this),n.findUp(".btn-close")),i=n.findUp(".back-area"),t=n.findUp(".contents-area"),n=n.findUp("#acceptBtn");if(0<e.length||0<i.length&&0===t.length)return f();0<n.length&&(f(),a?(JoinProject.updateJoinStatus(p,"",JoinStatus.REQUEST_JOIN),c(r.WAIT)):JoinProject.updateJoinStatus(p,"",JoinStatus.APPLY_JOIN))}),$("body").append(o),(u=$("#mainInvitePopup")).fadeIn(200)}else PopupDraw.drawConfirm({contents:{main:i18next.t("front.common.requestingToJoin"),cancel:i18next.t("front.common.cancelApplication")},callback:{cancel:function(){c(r.NONE),PopupDraw.closePopup(),JoinProject.updateJoinStatus(p,_USER_ID,JoinStatus.CANCEL_REQUEST_JOIN,PopupDraw.closePopup())}}});function c(t){$("#openProjectList").find(".project-item[value="+n.COLABO_SRNO+"]").attr("PASS_YN",t)}}function f(){CONNECT_INVITE_KEY="",u.fadeOut("200",function(){u.remove()})}}();
"use strict";var Left=function(){var t,n=!1;return{initView:function(){var t=$("#leftArea");t.find("#leftMenuGantt").css("display",Often.isFunc(Func.CLOUD.GANTT)?"block":"none"),t.find("#RecentProjectButton").parent("li").css("display",Often.isFunc(Func.CLOUD.BLOCK_WEB_LNB_PROJ_LIST)?"none":"block"),Often.isFunc(Func.CLOUD.BLOCK_WEB_LNB_EXCEPT_BOOKMARK)&&["task","gantt","schd","file","mention","mypost"].forEach(function(e){t.find(".left-menu-item[data-code="+e+"]").css("display","none")})},addClickEvent:function(){var e=$("#leftArea");e.off("click").on("click",o),e.find("#leftFilterBtn").off("click").on("click",LeftFilter.toggleLeftFilter);var t=setTimeout(function(){"N"===LocalUtil.getLeftFoldCollectYn()&&e.find(".left-menu-item[data-code=collect-more]").trigger("click"),"Y"===LocalUtil.getLeftFoldRecentYn()&&e.find("#RecentProjectButton").trigger("click"),"Y"===LocalUtil.getLeftFoldLabelYn()&&($("#allLabelLeftButton").addClass("active"),$("#allLabelUl").css("display","block")),clearTimeout(t)},500);$("#leftScroll").off("scroll").on("scroll",AllLabel.clearLayer)},closeProjectMorePopup:d,controlProjectMore:s};function a(e){e.preventDefault(),function(e){e=$(e.target);0===e.findUp(".left-menu-item").length&&0===e.findUp(".recent-project-item").length&&0===e.findUp(".label-item").length||$("#totalProjectEditBar").is(":visible")&&ProjectSetting.closeTotalProjectEditBar()}(e);var t=$(e.target),n=t.findUp(".js-logo"),a=t.findUp("#projectMakeButton"),o=0!==t.findUp(".js-project-more-layer").length&&t.is("li")?t.find(".left-menu-item"):t.findUp(".left-menu-item"),l="Y"===LocalUtil.getBuyManger(),c="Y"===LocalUtil.getSerpYn(),i="F"===LocalUtil.getLocalValue("ONLY_BUY_SETTING","STTS");if(0<n.length)return ViewChanger.loadPageJson({code:"main"}),void RecentProject.reloadRecentProject();if(0<a.length)return ProjectMake.openPopup(e);if(0<o.length){var r=o.attr("data-code");switch(r){case"main":ViewChanger.loadPageJson({code:r}),RecentProject.reloadRecentProject();break;case"open":ViewChanger.loadPageJson({code:r});break;case"task":case"schd":case"file":if(LimitGuest.isLimitGuest("collect"))return;ViewChanger.loadPageJson({code:r});break;case"bookmark":case"mention":case"mypost":ViewChanger.loadPageJson({code:r});break;case"hidden":case"nokeep":case"unread":case"star":Often.setCookie("LEFT_PROJECT_MORE",r),s(),d(),ViewChanger.loadPageJson({code:r});break;case"collect-more":o.toggleClass("active"),o.siblings(".menu-accordion").slideToggle(),LocalUtil.setLocalValue("ONLY_LEFT_FOLD_SETTING","COLLECT",o.hasClass("active")?"Y":"N");break;case"recent-project-more":RecentProject.clickRecentProjectLeftButton(e);break;case"label-more":AllLabel.clickAllLabelLeftButton(e);break;case"project-more":s(),o.find(".js-project-more-layer").toggleClass("d-none");break;case"gantt":OpenUtil.openGanttChart();break;case"invite-member":InviteEmployee.toggleInviteEmployeeLayer();break;case"manager-admin":Often.setCookie("BASE_PAGE","main.act"),Often.submitForm(r,"/flow_admin.act",r);break;case"service-upgrade":c?l?Payment.openPaymentLayer("business"):Often.toast("info",i18next.t("front.alert.askAdmin")):l||i?PostPopup.checkWritingAndShowPopup(Upgrade.showUpgradeLayer):Often.toast("info",i18next.t("front.alert.askAdmin"))}}}function o(e){n||(a(e),n=!0,t=setTimeout(function(){n=!1,clearTimeout(t)},500))}function s(){var e,t=Often.null2Void(Often.getCookie("LEFT_PROJECT_MORE"));""!==t&&((e=$("#leftArea")).find("li.left-menu-item[data-code=nokeep]").add("li.left-menu-item[data-code=unread]").add("li.left-menu-item[data-code=star]").add("li.left-menu-item[data-code=hidden]").css("display","none"),e.find("li.left-menu-item[data-code="+t+"]").css("display","block"),e.find("button.left-menu-item").parent().css("display","block"),e.find("button.left-menu-item[data-code="+t+"]").parent().css("display","none"))}function d(){$("#leftArea").find(".js-project-more-layer").addClass("d-none")}}();
"use strict";var LimitGuest=function(){var n;return{isLimitGuest:function(t,e){if(n=e,StatusCode.UN_BFLOW.GUEST===LocalUtil.getLocalValue("ONLY_BUY_SETTING","STTS")&&Often.isFunc(Func.CLOUD.GUEST_LIMIT))return i(t,e),!0;return!1},isStorageFullGuest:function(t,e){if(Often.isFunc(Func.CLOUD.GUEST_LIMIT)&&Often.isFunc(Func.CLOUD.GUEST_STORAGE_LIMIT))if("Y"===LocalUtil.getLocalValue("ONLY_BUY_SETTING","STORAGE_FULL_YN"))return i(t,e),!0;return!1},isSearchLimitGuest:function(t,e){var n=StatusCode.UN_BFLOW.GUEST===LocalUtil.getLocalValue("ONLY_BUY_SETTING","STTS"),a=new Date;a.setMonth(a.getMonth()-1);a=Often.getDateFormat(a);if(n&&Often.isFunc(Func.CLOUD.GUEST_LIMIT)&&e<a)return i(t),!0;return!1}};function i(t,e){PopupDraw.closePopup(),PopupDraw.drawBlock({await:e&&"data500"===t,mini:e,class:t,contents:BLOCK_TYPE[t.toUpperCase()],linkUrl:"https://support.flow.team/hc/ko/articles/"+({collect:n?"4403656215565":"4406865263885",search:"4403668441997",secret:"4403686296205",flowdrive:"4406865269901",video:"4404603293197",timeline:"4403927194637",subtask:"4403997608845"}[t]||"234707747"),callback:{submit:function(){var t="Y"===LocalUtil.getBuyManger();"Y"===LocalUtil.getSerpYn()?t?Payment.openPaymentLayer("business"):Often.toast("info",i18next.t("front.alert.askAdmin")):e?window.open(Often.getLocOrigin()+"/main.act?upgrade","_blank"):Upgrade.showUpgradeLayer()}}})}}();
"use strict";var Member=function(){var c={PG_NO:1,PG_PER_CNT:30,NEXT_YN:"Y"};return{initPage:function(){ListHelper.initPageData(c)},makeMemberList:function t(n,i,E,r,N){if("N"===c.NEXT_YN)return;var _=T(r);var e=_.API_KEY;var R=i?Often.null2Void($.trim(i.val()),""):"";var C={};var a=r===InviteType.ALLSENDIENCE||$("#chattingLayer").is(":visible");a||(C.scroll=n.closest("div"));n.is("#allSendienceUl")&&(C.scroll=n.findUp(".scroll-mask"));var a=$.extend({},c,{SRCH_WD:R,SRCH_WORD:R,COLABO_SRNO:r===InviteType.ALLSENDIENCE?Detail.getProjectSrno():""});r===InviteType.INVITECHAT&&(a.FLOW_USER_YN="Y",a.ROOM_SRNO=ROOM_SRNO);Ajax.executeApi(e,a,function(e){n.drawListHelper({pageData:c,nextYn:e.NEXT_YN,noDataHtml:ListHelper.getNoDataHtml(R?"SEARCH":""),records:e[_.RECORD_NAME],targetObj:C,callback:{item:function(e){return I(r,e)},scroll:function(){return t(n,i,E,r,N)},click:E,final:N}})});function I(E,e){var r="",N=$("#memberItem").html();return $.each(e,function(e,t){var n=ImageUtil.removeDomain("PROFILE",t.PRFL_PHTG),i=o(E,t);r+=ListHelper.replaceJson(N,$.extend({},i,{"rcvr-gb":"U",id:p(i["rcvr-cd"]),"profile-image":n,"sendience-gb":Often.null2Void(t.SENDIENCE_GB,""),profile:ListHelper.setProfile(n)}))}),r}},getIdentifier:p};function p(e){if(!e)return"";return"person_"+e.replace(/[\@\.\^]/g,"")}function T(e){return e===InviteType.TEAM||e===InviteType.FAVORITE?{API_KEY:RestApi.GET.FLOW_EMPL_R001,RECORD_NAME:"EMPL_REC"}:e===InviteType.SENDIENCE?{API_KEY:RestApi.GET.FLOW_SENDIENCE_R001,RECORD_NAME:"SENDIENCE_REC"}:e===InviteType.ALLSENDIENCE?{API_KEY:RestApi.GET.COLABO2_SENDIENCE_R101,RECORD_NAME:"SENDIENCE_REC"}:e===InviteType.NEWCHAT||e===InviteType.INVITECHAT||e===InviteType.CONTACT?{API_KEY:"COLABO2_CHAT_CNPL_R001",RECORD_NAME:"CNPL_LIST"}:{}}function o(e,t){if(e===InviteType.TEAM||e===InviteType.NEWCHAT||e===InviteType.FAVORITE)return{"rcvr-cd":t.USER_ID,name:t.FLNM,position:t.JBCL_NM,team:t.DVSN_NM,company:t.CMNM};if(e===InviteType.SENDIENCE)return{"rcvr-cd":t.IN_RCVR_USER_ID,name:t.FLNM,position:t.JBCL_NM,team:t.DVSN_NM,company:t.CMNM};if(e!==InviteType.ALLSENDIENCE)return e===InviteType.NEWCHAT||e===InviteType.INVITECHAT||e===InviteType.CONTACT?{"rcvr-cd":t.USER_ID,name:t.FLNM,position:t.JBCL_NM,team:t.DVSN_NM,company:t.CMNM}:{};e=""!==t.RCVR_DVSN_NM||""!==t.RCVR_CORP_NM;return{"rcvr-cd":t.RCVR_USER_ID,name:t.RCVR_USER_NM,position:t.JBCL_NM,team:t.RCVR_DVSN_NM,company:t.RCVR_CORP_NM,"personal-yn":ListHelper.setDisplay(e,"flex")}}}();
"use strict";var mutiLangDebug=function(){return{remove:function(){$("#mutiLangPopup").remove(),$("#mutiLangButton").remove()},activate:function(){var e=$("#mutiLangPopup");$("#mutiLangButton").off("click").on("click",function(){e.removeClass("d-none").draggable()}),e.off("click").on("click",t),e.find("#noLangCode").prop("checked","checked"),$("#searchCategory").val("KO_VAL");var a=$("#mutiLangResultLi").html();n("Please Enter Your Word To Search Language Code"),$("#searchWord").keypress(function(e){var t=$("#searchWord").val();13===e.which&&(""!==t?($("#langCodeResult").empty(),t={USER_ID:_USER_ID,RGSN_DTTM:_RGSN_DTTM,PG_NO:1,PG_PER_CNT:10,SORT_DESC:"",SRCH_WORD:t,SRCH_GB:$("#searchCategory").val(),DEVICE_GB:"COM"},Ajax.executeApi(RestApi.GET.FLOW_LANG_PACK_R001,t,function(e){0!==e.LANG_REC.length?$.each(e.LANG_REC,function(e,t){var n=t.LANG_CODE,t={code:25<n.length?n.substring(0,25)+"...":n,fullCode:n,korean:t.KO_VAL,english:t.EN_VAL};$("#langCodeResult").append(ListHelper.replaceJson(a,t)),$("#langCodeResult li").hover(function(){$(this).css("background","#eee")},function(){$(this).css("background","#fff")})}):n("No Result Found")})):Often.toast("error","Type your word to search"))}),$("*").on("click",function(e){r($(this))})}};function n(e){var t=$("#noLanguageResult").html(),e={txt:e};$("#langCodeResult").append(ListHelper.replaceJson(t,e))}function t(e){var e=$(e.target),a=$("#mutiLangPopup");function o(){$("#mutiLangPopup").find(".email-input").val(""),$("#editLanguageCode").attr("disabled",!1),$("#orgLangCode").text("")}function i(e){if(""!==e){var t="";switch(a.find('input[name="langDevMode"]:checked').val()){case"jstl":t='<fmt:message key="'+e+'"/>';break;case"javascript":t="i18next.t('"+e+"')";break;case"java":break;default:t=e}var n=document.createElement("textarea");n.value=t,document.body.appendChild(n),n.select(),document.execCommand("copy"),document.body.removeChild(n)}}!function(e){var t=e.findUp(".search-option");if(0===t.length)return!1;if("editLang"===t.attr("data-code"))return $("#mutiLangDebug").removeClass("d-none"),$("#mutiLangSearch").addClass("d-none"),!0;e.findUp(".section-name-list").find("a").css("background","#eee"),e.findUp("a").css("background","#999"),$("#searchCategory").val(t.attr("data-code"))}(e)&&(function(e){e=e.findUp(".js-file-type-search-filter");return 0!==e.length&&(!r(e)&&(i(e.find(".full_lang_code").text()),void Often.toast("success","Copied to your clipboard")))}(e)||function(e){if(0===e.findUp(".cancel").length)return!1;a.addClass("d-none")}(e)||function(e){if(0===e.findUp(".addOrEdit").length)return!1;var t=$("#orgLangCode").text(),e=""!==t,n=$("#editLanguageCode").val(),e={RGSN_DTTM:"FLOW_t9dzeXF%2B2P5LROljqw8rAA%3D%3D",LANG_CODE:n,ORG_LANG_CODE:t,KO_VAL:$("#editKorean").val(),EN_VAL:$("#editEnglish").val(),CN_VAL:$("#editChinese").val(),JP_VAL:$("#editJapanese").val(),DEVICE_GB:"COM",RGSR_ID:"sjsh1623",LANG_STTS:e?"U":""};Ajax.executeApi(RestApi.POST.FLOW_LANG_PACK_C001,e,function(){i(n),o(),Often.toast("success","Edit Complete & Copied to your clipboard")})}(e)||function(e){if(0===e.findUp(".apply").length)return!1;e={RGSR_ID:_USER_ID,RGSN_DTTM:_RGSN_DTTM,LANG_STTS:"C"};Ajax.executeApi(RestApi.POST.FLOW_LANG_PACK_C001,e,function(){Often.toast("success","Patch Complete")})}(e)||function(e){if(0===e.findUp(".condition-reset").length)return!1;o()}(e)||function(e){e=e.findUp(".js-search-section");if(0===e.length)return!1;if("search"===e.attr("data-code"))return $("#mutiLangDebug").addClass("d-none"),$("#mutiLangSearch").removeClass("d-none"),!0;o(),$("#editLanguageCode").val(e.attr("data-code")).focus()}(e)||function(e){e=e.findUp(".js-devlang-type");if(0===e.length)return;e.prev().prop("checked","checked")}(e))}function r(e){var t=Often.null2Void(e.attr("data-langcode"),"");if(event&&(event.ctrlKey||event.metaKey)&&""!==t){$("#mutiLangDebug").removeClass("d-none"),$("#mutiLangSearch").addClass("d-none"),event.preventDefault(),event.stopPropagation();var n=Often.null2Void(e.attr("data-korean"),""),t=Often.null2Void(e.attr("data-engilsh"),""),e=Often.null2Void(e.attr("data-langcode"),"");return $("#editLanguageCode").val(e),$("#orgLangCode").text(e),$("#editKorean").val(n),$("#editEnglish").val(t),1}}}();
"use strict";var SlideNotice={drawRenewalSlideNotice:function(){}};
"use strict";var Top=function(){var r=[];return{addClickEvent:function(){function t(n){if(!$("#postPopup").is(":visible"))return n();PostPopup.checkWritingAndShowPopup(n,"SIDE_POP")}$("#organizationTopButton").off("click").on("click",function(n){n.stopPropagation(),t(Organization.toggleLayer)}),$("#chattingTopButton").off("click").on("click",function(n){n.stopPropagation(),t(Chatting.toggleLayer)}),$("#alarmTopButton").off("click").on("click",function(n){n.stopPropagation(),t(Alarm.toggleLayer)}),$("#electronNavi").off("click").on("click",function(n){n.stopPropagation(),ElectronEvent.clickNaviBar($(n.target))}),$("#accountTopButton").off("click").on("click",e),$("#accountLayer").off("click").on("click",o),$("#searchPopupTopButton").off("click").on("click",SearchEvent.clickTopSearchBar),$("#recommendEvtTopBtn").off("click").on("click",function(n){location.href="/event"})},closeAccountLayer:t,closeHelpCenterLayer:function(){$("#helpCenterLayer").fadeOut(200)},setBanner:n,removeBanner:a,isRightWrap:function(){var n,t={alarmLayer:$("#alarmLayer"),chattingLayer:$("#chattingLayer"),organizationLayer:$("#organizationLayer")},o=!1;for(n in t)o=o||t[n].is(":visible")&&"1"===t[n].css("opacity");return o},setRecommendEvent:function(){Often.showOrHideByFunc("RECOMMEND_EVENT",$("#recommendEvtTopBtn")),Often.showOrHideByFunc("RECOMMEND_EVENT",$("#recommendEvtListBtn"))}};function n(n){var o;a=n,o=$("body"),r.push(a),r.forEach(function(n,t){o.attr("banner"+(t+1),n)});var t=$("#topBanner"),e="Y"===LocalUtil.getBuyManger(),i="Y"===LocalUtil.getSerpYn(),a=LocalUtil.getBuyGrcDt();"alarm-step-1"===n||"end-time"===n&&(n=$("#versionTab"),i?n.find(".js-grc-dt").findUp(".d-day").css("display","none"):n.find(".js-grc-dt").text(a),$("#versionMessage").html(Interpolation.breakLine(i18next.t("front.top.toolTipBusinessFree",{count:a}))),e?n.find(".js-pay").css("display","inline-block").on("click",function(){Payment.openPaymentLayer("business")}):n.find(".js-pay").css("display","none"),n.find(".js-manager-call").css("display",e?"none":"block"),n.css("display","inline-block")),t.off("click").on("click",c)}function a(o){var e=$("body");e[0].removeAttribute("banner1"),e[0].removeAttribute("banner2"),e[0].removeAttribute("banner3"),r.forEach(function(n,t){"alarm-step-all"===o?"alarm-step-1"!==n&&"alarm-step-2"!==n||r.splice(t,1):n===o&&r.splice(t,1)}),r.forEach(function(n,t){e.attr("banner"+(t+1),n)}),"alarm-step-1"===o&&n("alarm-step-2")}function c(n){var t=$(n.target),o=t.findUp(".top-banner-1").attr("banner"),e=t.findUp(".top-banner-close-button"),i=t.findUp(".js-alarm-try"),n=t.findUp(".js-alarm-later"),t=t.findUp(".js-alarm-no");return 0<e.length?a(o):0<i.length?BrowserNoti.requestNotificationPermission():0<n.length?BrowserNoti.closeAlarmBanner(!1):0<t.length?BrowserNoti.closeAlarmBanner(!0):void 0}function o(n){$(this).fadeOut(200);var t=$(n.target),o=t.findUp("#mySettingOpenBtn"),e=t.findUp("#desktopDownloadBtn"),i=t.findUp("#miniOpenBtn"),a=t.findUp("#logoutBtn"),r=t.findUp("#topProfile"),n=t.findUp("#prevVersionBtn"),t=(t.findUp("#recommendEvtTopBtn"),t.findUp("#recommendEvtListBtn"));return 0<o.length?MySettings.openPopup():0<e.length?DownloadApp.desktopDownload():0<i.length?OpenUtil.openMini():0<a.length?Often.tryLogout():0<r.length?Profile.drawProfilePopup(_USER_ID):(0<n.length&&(LocalUtil.removeAllLocal(),location.href="/flow_layout.act"),void(0<t.length&&(location.href="/event")))}function e(){var n=$("#accountLayer");if($("#accountTopButton").addClass("active"),n.is(":visible"))return t();n.fadeIn(200)}function t(){$("#accountTopButton").removeClass("active"),$("#accountLayer").fadeOut(200)}}();
"use strict";var UpdateElements=function(){return{autoUpdateElem:function(e){var t=$("#postPopup:visible").attr("data-code"),a=e&&e.ALARM_POST_WRITE,s=e&&e.ALARM_POST_READ;a||s||("EDIT"===t?PostPopup.togglePostView(PostPopup.getData().PROJECT_SRNO,PostPopup.getData().POST_SRNO,"",function(){if(ViewChanger.isPage("task")&&PostPopup.getData().POST_CODE===DetailCode.TASK&&e.POST_MODE&&"EDIT"===e.POST_MODE)return AllTask.changeTaskItem(n)}):"ADD"===t&&PostPopup.removePopup());if(void 0!==e){var s=e.PROJECT_SRNO,n=e.POST_SRNO,t=e.REMARK_SRNO;if(e.REACTION_REMARK_DATA)return ItemReaction.updateReactionElements("REMARK",n,t,e.REACTION_REMARK_DATA);if(e.REACTION_POST_DATA)return ItemReaction.updateReactionElements("POST",n,"",e.REACTION_POST_DATA);if(e.REMARK_UPDATE)return ItemRemark.updateRemarkData(s,n,t);if(e.TASK_DATA)return function(S){var p=S.TASK_DATA;function f(e,t,a){var s,n,i,o;!function(e){if(!ViewChanger.isPage("detail"))return!1;var t=LocalUtil.getFeedType().toUpperCase();return("CARD"===e||"LIST"===e)&&e!==t}(t)&&(s=$(e.find(".js-task-state:visible")[0]),n=a.VALUE,i="completion"===DetailCode.STATUS._GB[n],o="hold"===DetailCode.STATUS._GB[n],a=UpdateElementsTarget[t].STATUS_CLASS,s.attr("class",a+DetailCode.STATUS._GB[n]),"TASK"===t?e.attr("class","task-item"+(i?" completion":o?" hold":"")):"SUBTASK"===t&&e.removeClass("finished").removeClass("hold").addClass(i?"finished":o?"hold":""),"LIST"!==t&&"PIN"!==t&&"POPUP"!==t&&"CARD"!==t||e.find(".js-post-title").attr("class",UpdateElementsTarget[t].TITLE_CLASS+(i?"complete":o?"hold":"")),"TASK"!==t&&"LIST"!==t&&"PIN"!==t&&"ALLPOSTS"!==t&&"SUBTASK"!==t||s.text(i18next.t(DetailCode.STATUS._TEXT[n])))}function O(e,t,a){if("ALLPOSTS"!==t){var s="START_DT"===a.OBJECT,n=a.VALUE;if("START_DT"===a.OBJECT||"END_DT"===a.OBJECT){var i=0===n.length,o=8<n.length,l=Often.isDeadlineExceeded(n);if("TASK"===t){a=".js-"+(s?"start":"end")+"_dt-text";return(e.find(a).text(Tz.momentTimeZone(n,o?"type1":"type2")),s)?void 0:void(l?e.find(a).addClass("deadline-exceeded"):e.find(a).removeClass("deadline-exceeded"))}if("SUBTASK"===t){var r=Often.isSameDay(n),t=Tz.momentConversion("convertOnly",o?"type6":"type5",n),r=r?ItemSubtask.getTodayTime(o,n):t;return(e.find(".js-subtask-date-layer").attr(s?"data_start_dt":"data_end_dt",n).attr("mouseover-text",t),s)?void 0:(e.find(".js-subtask-date-button").css("display",i?"":"none"),e.find(".js-subtask-date-text").text(r).css("display",i?"none":"inline-block"),void(l?e.find(".js-subtask-date-text").addClass("deadline-exceeded"):e.find(".js-subtask-date-text").removeClass("deadline-exceeded")))}r=e.find(".js-"+(s?"start":"end")+"-date-layer");i||r.css("display","table");e=e.find(".js-"+(s?"start":"end")+"-flatpickr");e.find(".js-date-label").css("display",i?"inline-block":"none"),e.find(".js-date-back-layer").css("display",i?"none":"inline-block"),e.find(".js-pickr-date").val(n);o=Tz.momentTimeZone(n,o?"type6":"type5");e.find(".js-pickr-text").text(i18next.t(s?"front.common.from":"front.common.to",{val:o})),s||(l?e.find(".js-pickr-text").addClass("deadline-exceeded"):e.find(".js-pickr-text").removeClass("deadline-exceeded"))}}}$.each(["POPUP","CARD","LIST","PIN","TASK","ALLPOSTS","SUBTASK"],function(e,t){var a,s,n,i,o,l,r,d,T=UpdateElementsTarget[t].ID+S.POST_SRNO,A=Often.null2Void(AllTask.get$allTaskLayer(),""),c="TASK"===t&&""!==A&&A.is(":visible")?A.find(T+":visible"):$(T+":visible");0!==c.length&&("TASK_NM"===(A=p.OBJECT)&&"SUBTASK"===t&&(s=p,a=(T=c).find(".subtask-title:visible"),""!==Often.null2Void(s.VALUE)&&0!==a.length&&("INPUT"===T.find(".subtask-title:visible")[0].nodeName?a.val(s.VALUE):a.text(s.VALUE))),"STTS"===A&&f(c,t,p),"START_DT"===A&&O(c,t,p),"END_DT"===A&&O(c,t,p),"WORKER"!==A&&"WORKER_REC"!==A||(n=c,a=p,"ALLPOSTS"!==(i=t)&&(s=n.find(".js-workers"),o=a.WORKER_REC,"TASK"===i?(a=ItemTask.getWorkerCountJson(o),s.find(".js-mouseover").attr("mouseover-text",ItemTask.getWorkerListText(o)),s.find(".js-worker-name").text(a.WORKER),s.find(".js-worker-count").text(a.WORKER_COUNT)):"POPUP"===i||"CARD"===i?(s.empty().append(ItemTask.getWorkersComponentHtml(o)),n.find(".js-task-worker-layer .js-worker-button:visible").html(i18next.t(0!==o.length?"front.common.change":"front.common.add",{val:"$t(dictionary.manager)"}))):"SUBTASK"===i&&ItemSubtask.setSubtaskWorker(n.find(".js-subtask-worker-layer"),o))),"PRIORITY"===A&&(d=c,i=p,"LIST"!==(n=t)&&"PIN"!==n&&"ALLPOSTS"!==n&&(i=""===(o=i.VALUE),"SUBTASK"===n?(r=d.find(".js-subtask-priority-layer"),l=""===o?0:Number(o)+1,r.attr("data_priority",l),r.find(".js-priority-level").attr("class","js-priority-level icon-subtask-level js-priority-button lv"+l),r.find(".js-priority-level").css("display",i?"none":"inline-block"),r.find(".js-subtask-priority").css("display",i?"":"none"),r.find(".js-subtask-priority i:first").attr("class","icons-low")):(l=d.find(".js-priority"),r="icons-"+DetailCode.PRIORITY._GB[o]+" small",l.attr("data-priority",o),l.find(".js-priority-text").text(i18next.t(DetailCode.PRIORITY._TEXT[o])),l.find(".js-priority-span i:first").attr("class",r),l.find(".js-priority-button").css("display",i?"inline-block":"none"),l.find(".js-priority-span").css("display",i?"none":"inline-block"),i||d.find(".js-priority-layer").css("display","table")))),"PROGRESS"===A&&(d=c,A=p,"LIST"!==(c=t)&&"PIN"!==c&&"ALLPOSTS"!==c&&(t=d.find(".js-progress-bar"),(d=A.VALUE)&&(t.css("width",A=d+"%"),t.attr("data-progress",d),"100"===d&&("TASK"===c?t.addClass("on"):"CARD"!==c&&"POPUP"!==c||((c=t.parents(".js-progress-layer")).addClass("on"),c.find(".js-progress-text").text(A))),0<Number(d)&&t.findUp(".js-progress-layer").css("display","table")))))})}(e);if(e.SUBTASK_DATA)return function(a){var s=a.SUBTASK_DATA;Object.keys(s).forEach(function(e){var t={};"WORKER_REC"===e?(t.OBJECT="WORKER",t.WORKER_REC=s[e]):(t.OBJECT=e,t.VALUE=s[e]),UpdateElements.autoUpdateElem({PROJECT_SRNO:a.PROJECT_SRNO,POST_SRNO:a.POST_SRNO,TASK_DATA:t})})}(e);if(e.SCHEDULE_DATA)return function(a){console.log("test"),console.log(a);var s=a.SCHEDULE_DATA;function n(e,t,a){var s,n=e.find(".js-attendance-layer .manager-group"),i=e.find(".js-attendance-input"),a=a.ATTENDENCE_REC,o=e.find("#attendanceCount");o.css("display",0===a.length?"none":"block"),o.find("em").text("0"),e.find(".js-worker-button").html('<span class="create-icon-box"><i class="icons-person-6"></i></span>'+i18next.t(0<a.length?"front.common.change":"front.common.add",{val:"$t(back.LangConvert.participant)"})),a.forEach(function(e){""!==(s=l(e.STATUS))&&o.find("."+s+" em").text(Number(o.find("."+s+" em").text())+1)}),n.empty().append(ItemSchedule.getAttendanceItemComponentHtml(a)),i.attr("data-attendance",(i=a,JSON.stringify(i).replace(/"/gi,"'")));a=ItemSchedule.getAttendInfo(a);if(a.isAttend&&!e.find("#attendanceSelect").is(":visible"))return s=l(a.status),e.find("."+s).addClass("on"),void e.find("#attendanceSelect").css("display","block");a.isAttend||(e.find(".attendance-button").removeClass("on"),e.find("#attendanceSelect").css("display","none"))}function l(e){return"1"===e?"participate":"2"===e?"absence":"3"===e?"undetermined":""}$.each(["POPUP","CARD"],function(e,t){t=UpdateElementsTarget[t].ID+a.POST_SRNO,t=$(t+":visible");console.log(t),0!==t.length&&"ATTENDENCE"===s.OBJECT&&n(t,0,s)})}(e);if(e.TODO_DATA)return function(i){var o=i.TODO_DATA,l=0;$.each(["POPUP","CARD","LIST","PIN"],function(e,t){var a,s=UpdateElementsTarget[t].ID+i.POST_SRNO,n=$(s+":visible");0!==n.length&&"TODO_STATUS"===o.OBJECT&&(a=n,s=o,"CARD"===(n=t)&&!a.findUp("#detailUl").hasClass("card")||(t=s.STATUS,s=a.find(".todo-item[todo-list-srno="+t.COLABO_TODO_LIST_SRNO+"]").find(".todo-area"),"LIST"!==n&&"PIN"!==n?("Y"!==t.STTS||s.hasClass("checked")?"N"===t.STTS&&s.hasClass("checked")&&s.removeClass("checked"):s.addClass("checked"),t=a.find("#progressCount"),s=a.find(".todo-area.checked").length,t.text(s),t=parseInt(a.find("#progressTotalCount").text()),t=parseInt(s/t*100),l=t,a.attr("todo-done-percent",t+"%"),a.find(".progress-percent").text(t+"%"),a.find(".todo-progress-bar span").animate({width:t+"%"},100)):a.find(".js-todo-state").text(l+"%")))})}(e);if(e.ALARM_POST_WRITE||e.ALARM_POST_READ||e.ALARM_ALL_READ){t={ROOM_SRNO:_USER_ID,ALARM_DATA:e};Often.isFunc(Func.CLOUD.ALARM_COUNT_SOCKET)?SocketControl.sendMessage($.extend({},t,{CHAT_CODE:SocketAPI.MAIN.BADGE_SELF_UPDATE})):AlarmUpdate.updateUnReadElementBySelf(e)}else{if(ViewChanger.isPage("detail"))return e.PIN_MODE?PinPost.controlPinElement(e.PIN_MODE,s,n):e.POST_MODE?(Detail.updateOnePostElement(e.POST_MODE,s,n),void i({detail:{top:!0}})):e.ONLY_POST?i({detail:{post:!0}}):"boolean"==typeof e.BOOKMARK_RELEASE?void 0:i({detail:{top:!0,post:!0}});if(ViewChanger.isPage("task")&&"DELETE"===e.POST_MODE)return AllTask.removeTaskItem(n);if(ViewChanger.isPage("schd"))i({all:{schd:!0}});else if(ViewChanger.isPage("file"))i({all:{file:!0}});else{if(ViewChanger.isPage("bookmark"))return e.PIN_MODE||e.ALARM_POST_READ||e.ALARM_ALL_READ?void 0:e.POST_MODE?Detail.updateOnePostElement(e.POST_MODE,s,n):e.BOOKMARK_RELEASE?ItemBookmark.removeAnimate(n):i({allPosts:{bookmark:!0}});ViewChanger.isPage("mention")?i({allPosts:{bookmark:!0}}):ViewChanger.isPage("mypost")&&i({allPosts:{mypost:!0}})}}}else ViewChanger.isPage("detail")?i({detail:{top:!0,post:!0}}):ViewChanger.isPage("task")?i({all:{task:!0}}):ViewChanger.isPage("schd")?i({all:{schd:!0}}):ViewChanger.isPage("file")?i({all:{file:!0}}):ViewChanger.isPage("bookmark")?i({allPosts:{bookmark:!0}}):ViewChanger.isPage("mention")?i({allPosts:{mention:!0}}):ViewChanger.isPage("mypost")&&i({allPosts:{mypost:!0}})}};function i(e){e.detail&&e.detail.top&&Detail.drawPostInfo(Detail.getProjectSrno()),e.detail&&e.detail.post&&Detail.drawPostList(!0),e.all&&e.all.file&&AllFile.openLayer(Detail.getProjectSrno()),e.all&&e.all.schd&&AllCalendar.reloadCalendar(),e.all&&e.all.task&&AllTask.drawTaskInitList(!0),e.allPosts&&e.allPosts.bookmark&&AllPosts.openLayer("BOOKMARK",!0),e.allPosts&&e.allPosts.mention&&AllPosts.openLayer("MENTION",!0),e.allPosts&&e.allPosts.mypost&&AllPosts.openLayer("SELF",!0)}}();
"use strict";var ViewChanger=function(){var s=[],c="/",h={search:"search",main:"main",miniProject:"miniProject",nokeep:"nokeep",unread:"unread",star:"star",task:"task",schd:"schd",file:"file",history:"history",bookmark:"bookmark",mention:"mention",mypost:"mypost",open:"open",offc:"offc",label:"label",hidden:"hidden",detail:"detail",upgrade:"upgrade"},v={v_search:"#searchResult",v_main_top:"#mainTop",v_detail_top:"#detailTop",v_detail_top_search:"#detailTopSearch",v_main:"#projectHomeLayer",v_mini_project:"#miniProject",v_join:"#joinArea",v_main_home_top:"#projectHomeTop",v_all_collect:"#allCollectView",v_detail_collect:"#detailCollectView",v_task:".allTaskLayer",v_schd:".allCalendarLayer",v_file:".allFileLayer",v_history:".allHistoryLayer",v_detail:"#detailLayer",v_detail_timeline:"#detailTimeline",v_all_post:"#allPostsLayer",v_open:"#openProjectLayer"};return{setVal:f,getVal:u,getPageJson:function(){return h},getCurrentPageId:p,isPage:function(e){return-1<p().indexOf(e)},getPageCode:function(){var e,t=a(),n="";for(e in t)""===n&&t[e]&&(n=h[e]);return n},getProjectSrno:function(){var e=p();{if(-1<e.indexOf(h.detail)||-1<e.indexOf(h.task)||-1<e.indexOf(h.schd)||-1<e.indexOf(h.file)||-1<e.indexOf(h.history)){e=e.split(c);return 1<e.length?e[1]:""}return""}},loadFirstPage:function(){var e;""!==CONNECT_PROJECT_SRNO&&""!==CONNECT_POST_SRNO?t({code:"detail",first:CONNECT_PROJECT_SRNO,second:CONNECT_POST_SRNO,remark:CONNECT_REMARK_SRNO}):n(e="INVT_KEY=&T_COLABO_SRNO=&T_COLABO_COMMT_SRNO=&T_COLABO_REMARK_SRNO=&SUB_DOM="===(e=""!==(e=""!==(e=""!==(e=location.search.replace(/(\#|\?)/,""))?e:_SUB_PATH_BY_TINY_URL)?e:LocalUtil.getSubPath())?e:"main")?"main":e)},loadPage:n,loadPageJson:t,loadPageById:o,addBackEvent:function(){try{window.onpopstate=function(){-1<location.href.indexOf("#")?Electron.isElectronApp()&&ElectronEvent.setHistoryButton(!0,!0):n()},history.pushState({page:"main"},"main",location.href)}catch(e){Often.elog("back event error")}},reloadPage:function(){n(p())}};function d(e){return{main:i18next.t("front.common.my",{val:"$t(dictionary.project)"}),task:i18next.t("front.common.all",{val:"$t(dictionary.task)"}),schd:i18next.t("dictionary.calendar"),file:i18next.t("front.common.filesStorage"),bookmark:i18next.t("dictionary.bookMark"),mention:i18next.t("dictionary.mention"),mypost:i18next.t("front.common.myPosts"),open:i18next.t("front.common.publicProject"),label:i18next.t("front.common.projectFolder"),hidden:i18next.t("dictionary.hide"),nokeep:i18next.t("front.common.unclassified"),unread:i18next.t("dictionary.unread"),star:i18next.t("dictionary.favorite")}[e]}function f(e,t){""!==Often.null2Void(e)&&(t=Often.null2Void(t,p()),"PREV_VIEW"===e&&s.unshift(t))}function u(e){return""===Often.null2Void(e)?s:"PREV_VIEW"===e?s[0]:void 0}function t(e,t){PostPopup.checkWritingAndShowPopup(function(){PostPopup.removePopup(),o(e.code+i(e.first)+i(e.second)+i(e.third),t)})}function n(e,t){PostPopup.checkWritingAndShowPopup(function(){o(e,t)})}function o(e,t){var n,o,r,l,a,i=Often.null2Void(LocalUtil.getLocalJson("ONLY_COMPANY_JSON"));(e===h.main||""===i||i.statusCode!==StatusCode.BFLOW.END_ADMIN&&i.statusCode!==StatusCode.BFLOW.END_USER&&i.isAvailableService)&&(AlarmUpdate.removeNewUpdate(),SearchFilter.initSearchMemory(),"skip"===Often.null2Void(e)?(n=[],s.forEach(function(e){-1<e.indexOf("search/")||n.push(e)}),s=n,e=Often.null2Void(u("PREV_VIEW"),"main"),u().shift()):""===Often.null2Void(e)?(e=Often.null2Void(u("PREV_VIEW"),"main"),Electron.isElectronApp()&&ElectronEvent.setHistoryButton(!0,!1,e),u().shift()):(o=p(),Electron.isElectronApp()&&ElectronEvent.setHistoryButton(!0,!0,e),f("PREV_VIEW",o)),"file"===(o=function(e){var t=Often.null2Void(e).split(c),n=t[0];if(n!==h.search)return t;e=e.replace(n+c+t[1]+c,"");return[n,t[1],e]}(e))[0]?$("body").attr("oncontextmenu","return false"):($("body").removeAttr("oncontextmenu"),document.oncontextmenu=function(){return!0}),e=0<o.length?o[0]:"",r=1<o.length?o[1]:"-1",l=2<o.length?o[2]:"-1",a=3<o.length?o[3]:"-1",function(n,o){n!==h.detail&&n!==h.search||(n="main"),a($("#leftMenuUl")),a($("#leftScroll")),a($("#leftBottomUl"));var e=$("#allLabelUl"),t=e.find(".label-item"),e=e.find(".label-item[label-srno="+o+"]");function a(e){i(e.find(".left-menu-item"),e.find(".left-menu-item[data-code="+n+"]"))}function i(e,t){return e.removeClass("flow-active"),0<t.length&&"-1"===o&&(t.addClass("flow-active"),1)}i(t,e),function(){var e=$("#leftFilterBtn"),t=n===h.schd||n===h.file||n===h.task;e.css("display",t?"block":"none"),LeftFilter.closeLeftFilter(),t&&(e.removeClass("open").addClass("close"),e.find("span").text(i18next.t("dictionary.close")))}(),$(".js-collection-count").css("display","none"),$("#allLabelLeftButton").attr({"data-select-label-srno":"-1"===o?"":o,"data-select-label-name":"-1"===l?"":l})}(e,r),function(){for(var e in v)$(v[e]).css("display","none")}(),function(e){var t=[],n=e===h.detail,o=e===h.label||e===h.hidden||e===h.star||e===h.unread||e===h.nokeep,a=e===h.task||e===h.schd||e===h.file||e===h.history,i=e===h.bookmark||e===h.mypost||e===h.mention,l="-1"!==r;n?(t.push("v_detail_top"),t.push("v_detail_top_search"),t.push("v_detail_timeline")):a&&l?t.push("v_detail_top"):t.push("v_main_top");a&&(l?(t.push("v_detail"),t.push("v_detail_collect")):t.push("v_all_collect"));o?t.push("v_main"):i?t.push("v_all_post"):t.push("v_"+e);e!==h.main&&e!==h.nokeep&&e!==h.unread&&e!==h.star&&e!==h.hidden&&e!==h.label||t.push("v_main_home_top");h.main;!function(e){e.forEach(function(e){var t="v_task"===e||"v_schd"===e||"v_file"===e||"v_detail_collect"===e;$(v[e]).css("display",t?"flex":"block")})}(t)}(e),function(e,t){e!==h.bookmark&&e!==h.mypost&&e!==h.mention||$(v.v_all_post).attr("data-code",e);t="-1"===t?"":" - ["+_(t)+"]",t=$("<div></div>").text(Often.null2Void(d(e),d("main"))+t);$("#hashtagUl").find(".hashtag").removeClass("on"),$(v.v_main_top).html(t).attr("data-code",e)}(e,l),function(e){var t=AllProject.getProjectMode();switch(r="-1"===r?"":r,e){case h.history:AlarmHistory.openView(r);break;case h.search:Search.moveSearchResultPage(r,_(l));break;case h.task:AllTask.openLayer(r);break;case h.schd:AllCalendar.openLayer(r);break;case h.file:AllFile.openLayer(r);break;case h.bookmark:AllPosts.openLayer("BOOKMARK");break;case h.mypost:AllPosts.openLayer("SELF");break;case h.mention:AllPosts.openLayer("MENTION");break;case h.open:OpenProject.openLayer();break;case h.detail:Detail.showDetailView(r,m(l),m(a));break;case h.nokeep:AllProject.showList({MODE:t.NOKEEP});break;case h.unread:AllProject.showList({MODE:t.UNREAD});break;case h.star:AllProject.showList({MODE:t.STAR});break;case h.hidden:AllProject.showList({MODE:t.HIDDEN});break;case h.label:AllProject.showList({MODE:t.LABEL,LABEL_SRNO:r});break;case h.upgrade:Upgrade.showUpgradeLayer();break;default:AllProject.showList({MODE:t.MAIN})}e=p(),e=("main"!==e?e:"").replace("#","");LocalUtil.setLocal("SUB_PATH",e),history.pushState({page:e},e,Often.getLocOrigin()+"/main.act"),document.title="",document.title=i18next.t("front.common.flowTitle")}(e),PostPopup.removePopup(),"function"==typeof t&&t())}function p(){var e,t=a(),n="";for(e in t)""===n&&t[e]&&(n=h[e]);return t.search?n+=i(t.searchTab)+i(t.totalSearchWord):t.detail?n+=i(t.projectSrno)+i(t.postSrno)+i(t.remarkSrno):t.task||t.schd||t.file||t.history?n+=i(t.projectSrno):t.label?n+=i(t.labelSrno)+i(t.labelName):t.open&&(n+=i(t.openSrno)),Often.null2Void(n)}function a(){var e=$(v.v_search).is(":visible"),t=$(v.v_detail).is(":visible"),n=$(v.v_main).is(":visible"),o=$(v.v_mini_project).is(":visible"),a=$(v.v_all_collect),i=$(v.v_detail_collect),l=$(v.v_all_post),r=$.trim($("#searchPopupInput").val()),s=l.attr("data-code"),c=$(v.v_main_top).attr("data-code"),d=t?Detail.getProjectSrno():CONNECT_PROJECT_SRNO,f=Often.null2Void($("#postPopup").attr("data-post-srno"),CONNECT_POST_SRNO),u=CONNECT_REMARK_SRNO,p=$("#allLabelLeftButton"),_=Often.null2Void(p.attr("data-select-label-srno"),""),p=-1<(m=$.trim(Often.null2Void($("#allLabelUl .label-item.flow-active").find(".js-label-name").text(),p.attr("data-select-label-name")),"")).indexOf("%25")?m:encodeURI(m),m=Often.null2Void($("#searchTab").find(".js-tab-item.active").attr("data-code"),"");return{search:e,main:n&&""===_&&c!==h.unread&&c!==h.nokeep&&c!==h.star&&c!==h.hidden,miniProject:o,label:n&&""!==_,unread:n&&c===h.unread,nokeep:n&&c===h.nokeep,star:n&&c===h.star,hidden:n&&c===h.hidden,task:a.find(v.v_task).is(":visible")||i.find(v.v_task).is(":visible"),schd:a.find(v.v_schd).is(":visible")||i.find(v.v_schd).is(":visible"),file:a.find(v.v_file).is(":visible")||i.find(v.v_file).is(":visible"),bookmark:l.is(":visible")&&s===h.bookmark,mention:l.is(":visible")&&s===h.mention,mypost:l.is(":visible")&&s===h.mypost,open:$(v.v_open).is(":visible"),detail:t,totalSearchWord:r,projectSrno:a.is(":visible")?"":d,postSrno:f,remarkSrno:u,openSrno:"",labelSrno:_,labelName:p,searchTab:m}}function _(e){return-1<e.indexOf("%25")?decodeURI(decodeURI(e)):decodeURI(e)}function i(e){return e&&"-1"!==e?c+e:""}function m(e){return Number(e)<0&&Number(e)!==TINY_URL_MOVE.POST?"":e}}();
"use strict";var QuickGuide=function(){var i,e,t,c;return{openQuickGuide:n,closeQuickGuide:o,drawQuickGuide:function(){r(function(e){"0"===e.CNT?n():o(e)})}};function u(){i=$("#bottomToolList"),e=i.find(".js-quick-button"),c=i.find(".js-quick-close"),t=i.find(".js-bottom-quick-layer")}function n(){var n=$("#quickGuideList");if(!n.empty())return i();function i(){u(),c.css("display","inline-block"),e.css("display","none"),t.fadeIn(300)}Ajax.executeApi(RestApi.GET.FLOW_SERVICE_CENTER_R001,{GUBUN:"USE"},function(e){n.drawListHelper({records:e.FLOW_SERVICE_CENTER_REC,callback:{item:E,click:s,final:i}})})}function o(e){function n(e){"0"===e.CNT&&Ajax.executeApi(RestApi.POST.COLABO_TOOLTIP_LOG_C001,{TOOLTIP_ID:"QUICK_GUIDE",GUBUN:"P",QUICKGUIDE_YN:"Y",SHOW_YN:"N",packetOption:Ajax.OPTION.PREVENT_EXECUTE})}u(),t.fadeOut(300,function(){c.css("display","none"),i.find(".js-quick-button").css("display","inline-block")}),e?n(e):r(n)}function r(e){Ajax.executeApi(RestApi.GET.COLABO_TOOLTIP_LOG_R001,{TOOLTIP_ID:"QUICK_GUIDE",SHOW_YN:"N",QUICKGUIDE_YN:"Y"},e)}function E(e){var c="",u=$("#quickGuideItem").html(),o=Electron.isElectronApp();return $.each(e,function(e,n){var i="Y"===n.USE_WEB,t="Y"===n.USE_ELECTRON;"Y"===n.USE_YN&&(!o&&i||o&&t)&&(c+=ListHelper.replaceJson(u,{href:'href="'+n.LINK+'"',service_name:n.SERVICE_NM,new:"Y"===n.NEW_MARK_YN?'<em class="new">New </em>':""}))}),c}function s(){event.preventDefault();var e=$(event.target).findUp(".quickGuideLi");if(!e||0===e.length)return!1;e=e.attr("href");return Electron.isElectronApp()?Electron.openExternalLinkforElectron(e):OpenUtil.openWindow(e,"_blank"),!0}}();
"use strict";var AllSendience=function(){var l,t;return{openAllSendiencePopup:function(){(l=$("#allSendiencePopup")).find("#allSendienceSearch").val(""),c(),l.off("click").on("click",n).off("keyup").on("keyup",e)},closeAllSendiencePopup:o};function o(){(l=$("#allSendiencePopup")).find("#allSendienceUl").scrollTop(0),l.css("display","none"),$(".plus-popup").fadeOut(200)}function c(){Member.initPage(),Member.makeMemberList(l.find("#allSendienceUl"),l.find("#allSendienceSearch"),"",InviteType.ALLSENDIENCE,function(){i(),l.fadeIn(200)})}function e(e){!function(e){if(0===e.findUp("#allSendienceSearch").length)return;var n=l.find("#allSendienceSearch");t&&clearTimeout(t),t=setTimeout(function(){Member.initPage(),Member.makeMemberList(l.find("#allSendienceUl"),n,"",InviteType.ALLSENDIENCE,i)},200)}($(e.target))}function i(){var e=Authority.isAuthorityCheck("ADMIN");l.find("#allSendienceUl").find(".my-check-2").css("display","none"),e&&l.find("#allSendienceUl").find(".project-invite-plus-1").css("display","block"),l.find('li[data-id="'+_USER_ID+'"]').find(".project-invite-plus-1").css("display","block"),e||l.find('li[data-id="'+_USER_ID+'"]').find("#managerBtn").css("display","none"),l.find('li[sendience_gb="3"]').append(p())}function n(e){var n,t,i=$(e.target);0!==i.findUp("#closeButton").length?o():(t=(n=i).findUp("#allSendienceLayer"),n=n.findUp("#plusPopup"),(0===t.length&&0===n.length?(o(),1):function(e){var n=e.findUp("#plusBtn");if(0===n.length)return!1;{var t;n.nextAll("#plusPopup").is(":visible")?n.nextAll("#plusPopup").fadeOut(200):(t="3"===n.parents("li").attr("sendience_gb"),e=n.parents("li").attr("data-id")===_USER_ID,n=n.nextAll("#plusPopup"),$(".plus-popup").fadeOut(200),n.find("#export div").text(i18next.t(e?"dictionary.leave":"dictionary.dismiss")),n.find("#managerBtn div").text(i18next.t(t?"front.common.releaseManager":"front.common.setManager")),n.fadeIn(200))}return!0}(i))||function(e){var n=e.findUp("#plusPopup");if(0===n.length)return $(".plus-popup").fadeOut(200),!1;var t=e.parents("li").attr("data-id"),i=e.parents("li").attr("sendience_gb");if(0!==e.findUp("#export").length)return function(e,n){var t=e===_USER_ID;PopupDraw.drawConfirm({contents:{main:Interpolation.breakLine(i18next.t(t?"front.alert.askLeaveProject":"front.alert.dismissParticipant"))},callback:{submit:function(){1!==l.find('.js-participant-item[sendience_gb="3"]').length||"3"!==n?DetailSetting.deleteSendience("U",e,function(){PopupDraw.closePopup(),e!==_USER_ID?(c(),Participant.drawProjectParticipantItems(Detail.getProjectSrno(),!0,function(){})):o()}):Often.toast("error","프로젝트 관리자는 최소 한명이 존재해야 합니다.")}}})}(t,i),!0;var a=e.findUp("#managerBtn");if(0!==a.length){var r=a.find("div").text()===i18next.t("front.common.releaseManager");if(r&&1===l.find(".js-participant-item[sendience_gb=3]").length)return Often.toast("error","프로젝트 관리자는 최소 한명이 존재해야 합니다."),!0;!function(e,n,t){Ajax.executeApi(RestApi.PUT.COLABO2_SENDIENCE_U001,{COLABO_SRNO:Detail.getProjectSrno(),IN_RCVR_USER_ID:e,SENDIENCE_GB:n},function(){Often.toast("success",i18next.t("front.alert.successfullyChange",{status:"$t(dictionary.edit)"})),"function"==typeof t&&t()},function(e){"S0154"===e.COMMON_HEAD.CODE&&(Often.toast("error",i18next.t("front.alert.leaveProjectError")),PopupDraw.closePopup())})}(t,r?"1":"3",function(){Participant.drawProjectParticipantItems(Detail.getProjectSrno(),!0),_USER_ID===t&&(LocalUtil.setLocalValue("CURRENT_PROJECT_SETTING","MNGR_DSNC",r?"N":"Y"),LocalUtil.getLocalValue("POP_PROJECT_SETTING","COLABO_SRNO")===Detail.getProjectSrno()&&LocalUtil.setLocalValue("POP_PROJECT_SETTING","MNGR_DSNC",r?"N":"Y")),c(),e.parents("li").attr("sendience_gb",r?"1":"3"),a.find("div").text(i18next.t(r?"front.common.setManager":"front.common.releaseManager")),r?a.parents("li").find(".manager-badge").remove():a.parents("li").append(p()),n.fadeOut(200)})}return!0}(i)||function(e){e=e.findUp(".js-sendience-service-helper");if(!e||0===e.length)return!1;e=FlowServiceHelper.SENDIENCE;return window.open(e,"_blank"),!0}(i)||function(e){e=e.findUp(".js-profile");if(0===e.length)return!1;e=e.parents(".js-participant-item").attr("data-id");return Profile.drawProfilePopup(e),!0}(i)||function(e){e=e.findUp(".js-participant-item");if(0===e.length)return;e=e.attr("data-id");Profile.drawProfilePopup(e)}(i))}function p(){return'<a href="#" class="admin-invite-button-1 manager-badge"><span>'+i18next.t("dictionary.administrator")+"</span></a>"}}();
"use strict";var DetailEvent=function(){return{addClickEventOnDetailView:function(){$("#taskReportLayer").off("click").on("click",TaskReport.clickTaskReportLayer),$("#feedTypeButton").off("click").on("click",i),$("#createPostArea").off("click").on("click",n),$("#taskReportArea").off("click").on("click",o),$("#postMoreBtn").off("click").on("click",Detail.clickPostMore),$("#openInviteLayerBtn").off("click").on("click",e),$("#allSendienceBtn").off("click").on("click",AllSendience.openAllSendiencePopup),$(".js-detail-top-search-button").off("click").on("click",ProjectSearch.clickProjectDetailSearchTopButton),$("#projectFeedArea").find(".js-filter-reset").off("click").on("click",a),$("#projectSearchInput").off("keyup").on("keyup",ProjectSearch.keydownProjectSearchInput)},clickDetailUl:function(e){var d,n,i;Often.isAct("subscreen")?Often.toast("info","조회 전용 화면입니다. 게시물 바로가기 버튼을 눌러주세요!"):(PostPopupEvent.hideAllInnerPopup(e),d=$(e.target),n=d.closest("li").attr("data-project-srno"),i=d.closest("li").attr("data-post-srno"),function(){var t=d.findUp(".list-item");if(0===t.length)return!1;var e=d.closest("li").attr("data-project-srno"),n=t.parent().attr("data-post-srno");return PostPopup.togglePostView(e,n,"",function(){$("#detailUl").find(".highlight").removeClass("highlight"),t.addClass("highlight")}),t.find(".js-indication").css("display","none"),!0}()||function(){var t=d.findUp(".js-project-title-button");if(!t||0===t.length)return!1;t=t.findUp(".js-popup-before").attr("data-project-srno");return ViewChanger.loadPageJson({code:"detail",first:t}),!0}()||function(){var t=d.findUp(".js-post-author");if(0===t.length||d.hasClass("date"))return!1;var e=t.attr("data-author-id");return PostPopup.checkWritingAndShowPopup(function(){Profile.drawProfilePopup(e)}),!0}()||function(){if(!d.is("#pinToTopBnt"))return!1;if(0===d.findUp(".js-pin-authority").length)return Often.toast("error","프로젝트 관리자 + 글 작성 본인만 상단고정 설정/해제 가능합니다."),!0;var t=d.hasClass("on"),e={COLABO_SRNO:n,COLABO_COMMT_SRNO:i};PopupDraw.drawConfirm({contents:{main:i18next.t("front.alert.pinPost",{status:t?"$t(dictionary.unPin)":"$t(dictionary.pin)"})},callback:{submit:function(){return UpdateElements.autoUpdateElem({PROJECT_SRNO:n,POST_SRNO:i,PIN_MODE:t?"DELETE":"PIN"}),t?Ajax.executeApi(RestApi.DELETE.COLABO2_PIN_D001,e,function(){Often.toast("success",i18next.t("front.alert.successfullyChange",{status:"$t(dictionary.change)"})),d.removeClass("on")}):(e.packetOption=Ajax.OPTION.PREVENT_EXECUTE,Ajax.executeApi(RestApi.POST.COLABO2_PIN_C001,e,function(){var t=d.parents(".detail-item").find(".remark-item:last").attr("remark-srno");UpdateElements.autoUpdateElem({PROJECT_SRNO:n,POST_SRNO:i,REMARK_SRNO:t,REMARK_UPDATE:!0}),Often.toast("success",i18next.t("front.alert.successfullyChange",{status:"$t(dictionary.change)"})),d.addClass("on")})),!0}}})}()||function(){var t=d.findUp(".js-setting-button");if(0===t.length)return!1;t.next().is(":visible")?t.next().fadeOut(200):t.next().fadeIn(200);return!0}()||function(){var t=d.findUp(".js-setting-item");if(0===t.length)return!1;var e=t.attr("data-code"),n=d.findUp(".detail-item"),i=Often.null2Void(n.attr("data-project-srno")),o=Often.null2Void(n.attr("data-post-srno")),a=Often.null2Void(n.attr("data-post-url")),r="0"!==Often.null2Void(n.find("#videoSpan").attr("data-vc-srno"),"0"),s=$("#postPopup").is(":visible");if("modify"===e||"copy"===e){var l="copy"===e,t="modify"===e;if(l&&r)return void Often.toast("error",i18next.t("front.alert.shareVideoMeetingWarning"));t&&r&&LocalUtil.setLocal("VC_SRNO",n.find("#videoSpan").attr("data-vc-srno")),s&&o===PostPopup.getData().POST_SRNO?PostPopup.getPostData(i,o,"",!0,function(){PostPopup.openEditView(l)}):PostPopup.togglePostView(i,o,"",function(){PostPopup.openEditView(l)})}else"delete"===e?function(n,i){var t=Often.null2Void($("#post-"+i).find("#videoSpan").attr("data-vc-srno"));function e(){Ajax.executeApi(RestApi.DELETE.COLABO2_COMMT_D101,{COLABO_SRNO:n,COLABO_COMMT_SRNO:i},function(t){Often.toast("success",i18next.t("front.alert.successfullyChange",{status:"$t(dictionary.delete)"})),PostPopup.removePopup();var e={PROJECT_SRNO:n,POST_SRNO:i};PostPopup.removePopup(),UpdateElements.autoUpdateElem($.extend({},e,{PIN_MODE:"DELETE"})),UpdateElements.autoUpdateElem($.extend({},e,{POST_MODE:"DELETE"}))})}PopupDraw.drawConfirm({contents:{main:i18next.t("front.common.ask",{val:"$t(dictionary.article)",status:"$t(dictionary.delete)"})},callback:{submit:function(){VideoConference.isVC(t)?VideoConference.deleteZoomToken({VC_SRNO:t},e):e()}}})}(i,o):"url"===e&&Often.copyUrl(a);return d.findUp(".js-setting-ul").fadeOut(200),!0}()||function(){var t="VIEW"===d.findUp(".js-popup-before").attr("data-code"),e=0<d.findUp(".js-remark-layer").length;if(!t||e)return!1;t=d.findUp(".image-item");if(0===t.length)return!1;e=Often.getAttrs(t.parent().find(".image-item"));$.each(e,function(t,e){e.COLABO_SRNO=n,e.COLABO_COMMT_SRNO=i});t=t.parent().find(".image-item").index(t);return ImageViewer.openImage("POST",e,t),!0}()||function(){var t="VIEW"===d.findUp(".js-popup-before").attr("data-code"),e=0<d.findUp(".js-remark-layer").length;if(!t||e)return!1;var n=d.findUp(".js-post-file");if(0===n.length)return!1;var i=n.findUp(".detail-item"),t=0<d.findUp(".js-down-btn").length,e=n.attr("rand_key"),e="GOOGLEDRIVE"===e||"DROPBOX"===e,n=Often.getAttrs(n);n[0].COLABO_SRNO=i.attr("data-project-srno"),n[0].COLABO_COMMT_SRNO=i.attr("data-post-srno");i=n[0].ATCH_URL;if(e)return FileUtil.downFile(i,e),!0;e=t||e?"SAVE":"DOC-VIEWER";return FileUtil.openFile(e,n),!0}()||(d.is("#postMoreButton")?(d.parents(".detail-item").find("#summaryPost, #postMoreButton, #summaryFoldArea").css("display","none"),d.parents(".detail-item").find("#originalPost").css("display","block")):function(){var t=d.findUp(".js-up-task-button");if(!t||0===t.length)return!1;var e=t.attr("data-up-task-project-srno"),t=t.attr("data-up-task-post-srno");return PostPopup.togglePostView(e,t),!0}()||function(){if("VIEW"!==d.findUp(".js-popup-before").attr("data-code"))return!1;event.preventDefault();var t=d.findUp(".js-hyper-button");if(!t||0===t.length)return!1;t=t.text();if(UrlCatcher.isProjectInviteUrlAndAction(t))return!0;if(UrlCatcher.isPostUrlAncAction(t))return!0;Electron.isElectronApp()?Electron.openExternalLinkforElectron(t):OpenUtil.openWindow(t,"_blank");return!0}()||function(){if(!(d.findUp(".js-popup-before").attr("data-code")==="EDIT")){if(0===(d=0<d.parents("#videoButton").length?$("#videoButton"):d).findUp("#zoomButton").length)return!1;var t=d.findUp("#videoSpan").attr("data-vc-srno");VideoConference.getZoomUrl(t,!0)}}()||function(){if(0===d.findUp("#zoomUrlCopy").length)return!1;var t=d.findUp("#videoSpan").attr("data-vc-srno");VideoConference.getZoomUrl(t,!1,function(t){Often.copyUrl(t)})}()||function(){var t=d.findUp(".js-map-item"),e=d.findUp(".js-del-btn"),n=d.findUp(".js-popup-before");if(0===t.length)return!1;if(0<e.length)return!0;if("VIEW"!==n.attr("data-code"))return!0;t=Often.null2Void($.trim(t.attr("data-url")));return""!==t?(OpenUtil.openWindow(t,"_blank"),!0):void 0}()||function(){var t=d.findUp(".hashtag-span");if(0===t.length)return!1;var e=d.findUp(".js-popup-before");if("VIEW"!==PostCondition.getPopupMode(e))return!1;e=$.trim(t.text()),t=$("#hashtagUl").find(e);if(""!==e&&0!==t.length&&!t.find(".hashtag").hasClass("on"))return HashTag.changeHashtagListStatusAndView(t),!0}()||function(){var t=d.findUp(".js-direct-href");if(0===t.length)return!1;if("VIEW"!==d.findUp(".js-popup-before").attr("data-code"))return!1;e.preventDefault();t=t.attr("data-preview-url");if(UrlCatcher.isPostUrlAncAction(t))return!0;Electron.isElectronApp()?Electron.openExternalLinkforElectron(t):OpenUtil.openWindow(t,"_blank");return!0}()||(0===d.findUp("#noDetailDataBnt").length?function(){if(0===d.findUp(".js-remark-upload-button").length)return!1;var t=d.findUp(".js-remark-layer");return ItemRemark.clickFileUpload(t),!0}()||function(){var t=d.findUp(".read-confirmation");return 0!==t.length&&(PostReadCheck.showReadCheckPopUp(n,i,t),!0)}()||function(t){t=t.findUp(".js-hidden-component");return"VIEW"!==Detail.getPostStatus()&&(0!==t.length&&(t.attr({class:"edit-component",contenteditable:""}).text(""),!0))}(d)||Mention.isMentionAndAction(d)||ItemTask.isTaskEvent(d,e)||ItemSubtask.isSubTaskClickEvent(d)||ItemSchedule.isScheduleEvent(d)||ItemReaction.isReactionButtonAndAction(d)||ItemReaction.isEmojiIconAndAction(d)||ItemReaction.isEmojiGroupAreaAndAction(d)||ItemTodo.isTodoClickOnDetail(d)||ItemBookmark.isBookmarkButtonAndAction(d)||ItemRemark.isCommentWriterButtonAndAction(d)||ItemRemark.isRemarkDeleteFileButtonAndAction(d)||ItemRemark.isShowPrevRemarkButtonAndAction(d)||ItemRemark.isPostCommentGroup(d)||ItemRemark.isRemarkLikeButtonAndAction(d)||ItemRemark.isRemarkImgAndAction(d)||ItemRemark.isRemarkFileAndAction(d)||ItemRemark.isRemarkLikeCountButtonAndAction(d)||ItemRemark.isShowMoreRemarkButtonAndAction(d):function(){var t=Number(LocalUtil.getLocalValue("CURRENT_PROJECT_SETTING","SENDIENCE_CNT")),e=Detail.getProjectSrno(),n=LocalUtil.getLocalValue("CURRENT_PROJECT_SETTING","MNGR_WR_YN");Authority.isAdminAuthorityCheckAndAction("Y"===n)||(1<t?PostPopup.openRegistrationView(e,DetailCode.WRITE,!0):InviteProject.openInvite(e))}())))},clickDetailTab:function(t){var e=$(t.target).findUp(".js-tab-item");if(0!==e.length){t=Often.null2Void(e.attr("data-code"),"home"),e=Detail.getProjectSrno();if("gantt"===t)return OpenUtil.openGanttChart(e);ProjectSearch.hideSearchProjectList(),DetailHeader.drawInitProjectHeader(t,e);e={first:e};return"task"===t?ViewChanger.loadPageJson($.extend({code:"task"},e)):"calendar"===t?ViewChanger.loadPageJson($.extend({code:"schd"},e)):"file"===t?ViewChanger.loadPageJson($.extend({code:"file"},e)):"history"===t?ViewChanger.loadPageJson($.extend({code:"history"},e)):void ViewChanger.loadPageJson($.extend({code:"detail"},e))}},applySummarySlickImage:t,resetFilter:r};function t(){var t=$(".js-post-img.post-upload-img");0<t.length&&($("#postPopup").css("display","block"),$.each(t,function(t,e){$(e).hasClass("slick-initialized")||$(e).slick({lazyLoad:"ondemand",slidesToShow:5,slidesToScroll:1,centerMode:!1,centerPadding:0,infinite:!1})}))}function e(){InviteProject.openInvite(Detail.getProjectSrno())}function n(t){var e=$(t.target),t=$(t.currentTarget),e=e.findUp(".post-filter"),e=Often.null2Void(e.attr("data-post-code"),t.find(".post-filter:first").attr("data-post-code")),t=t.hasClass("admin");Authority.isAdminAuthorityCheckAndAction(t)||PostPopup.openRegistrationView(Detail.getProjectSrno(),e,!0)}function i(t){var e=$(t.target),n=e.findUp("#feedTypeButton"),o=e.findUp(".feed-type-button"),i=e.findUp(".js-feed-filter-button"),t=$(t.currentTarget).find(".js-feed-filter-layer"),e=e.findUp(".check-menu-item");{if(!(0<o.length))return 0<i.length?(t.is(":visible")?t.fadeOut(200):t.fadeIn(200),void i.toggleClass("active")):void(0<e.length&&(e.parents(".section-title-area").find(".js-feed-filter-button").removeClass("active"),t.find(".check-menu-item").removeClass("on"),e.addClass("on"),t.fadeOut(200),(t=$("#projectFeedArea")).find("#allPostsFilterTitle").text(e.text()),e=""===e.attr("data-code"),t.find(".js-filter-reset").css("display",e?"none":"block"),e?n.find(".js-feed-filter-button").removeClass("active"):n.find(".js-feed-filter-button").addClass("active"),Detail.drawPostList(!0)));PostPopup.checkWritingAndShowPopup(function(){var t,e,n=o.hasClass("card")?"card":"list",i="card"==n?"F":"L";t=i,e=function(){LocalUtil.setLocal("FEED_TYPE",n),LocalUtil.setLocalValue("CURRENT_PROJECT_SETTING","VIEW_TYPE",i),Detail.setFeedType(n),Detail.drawPostList(),"card"==n&&PostPopup.removePopup()},Ajax.executeApi(RestApi.GET.FLOW_VIEW_TYPE_U001,{COLABO_SRNO:Detail.getProjectSrno(),VIEW_TYPE:t},e)})}}function o(t){var e,n=$(t.currentTarget);0!==$(t.target).findUp(".section-title-area").length&&(n.find(".js-report-btn").toggleClass("off"),n.find(".js-task-report-layer").is(":visible")?(e="N",n.find(".js-task-report-layer").slideUp(300)):(e="Y",n.find(".js-task-report-layer").slideDown(300)),Ajax.executeApi(RestApi.PUT.FLOW_TASK_REPORT_U001,{COLABO_SRNO:Detail.getProjectSrno(),TASK_REPORT_VIEW_YN:e}))}function a(){var t=$("#projectFeedArea");if(-1<t.find("#allPostsFilterTitle").text().indexOf("#"))return HashTag.setUnHashtagView(),void Detail.drawPostList(!1);r(t),Detail.drawPostList(!0)}function r(t){var e=t.find(".js-feed-filter-layer");e.find(".check-menu-item").removeClass("on"),t.find(".js-feed-filter-button").removeClass("active"),e.find('.check-menu-item[data-code=""]').addClass("on"),t.find("#allPostsFilterTitle").text(i18next.t("dictionary.all")),t.find(".js-filter-reset").css("display","none")}}();
"use strict";var DetailHeader=function(){var e,u,f,o=!1;return{drawProjectHeaderItem:n,drawTempProjectHeaderItem:function(t){if(O(),t!==LocalUtil.getLocalValue("CURRENT_PROJECT_SETTING","COLABO_SRNO"))return u.css("display","none");n({TTL:LocalUtil.getLocalValue("CURRENT_PROJECT_SETTING","TTL"),IMPT_YN:LocalUtil.getLocalValue("CURRENT_PROJECT_SETTING","IMPT_YN"),BG_COLOR_CD:LocalUtil.getProjectBgColorCd(),SENDIENCE_CNT:LocalUtil.getLocalValue("CURRENT_PROJECT_SETTING","SENDIENCE_CNT")})},drawInitProjectHeader:function(t,e){Detail.setProjectSrno(e),n(LocalUtil.getLocalJson("CURRENT_PROJECT_SETTING"),t)},setProjectIcon:E};function O(){u=$("#detailTop"),f=u.find("#detailSettingTopButton")}function n(e,t){var o,n,a,c,l,i,s,r,N,C,T,d;function _(t,e){t.attr("class","bookmark-button"+(e?"":" unstar"))}e&&(O(),o=$.trim(e.TTL),n=$.trim(e.CNTN),a="Y"===e.IMPT_YN,c=""!==Often.null2Void(e.COLABO_GB,""),l="N"!==Often.null2Void(e.CMNM_YN,"N"),i=ListHelper.getColorClassName(e.BG_COLOR_CD),s=ListHelper.getColorClassNameOnInviteBtn(e.BG_COLOR_CD),r=$("#projectContents"),N=$("#projectColor"),C=$("#openInviteLayerBtn"),T=$("#projectStar"),d=$("#detailTab"),$("#projectTitle").text(o).attr("mouseover-text",o),$("#participantCount").text(Often.numberWithCommas(e.SENDIENCE_CNT)),E(e),document.title=o+" - "+i18next.t("front.common.flowTitle"),N.attr("class","").addClass("project-color").addClass(i),C.attr("class","").addClass("project-invite-button").addClass(s),C.css("display",c||l?"none":"block"),_(T,a),r.text(n),r.addClass("js-mouseover").attr("mouseover-text",n),r.parent().css("display",""===n?"none":"block"),d.find(".js-tab-item").removeClass("active"),d.find(".js-tab-item[data-code="+Often.null2Void(t,"home")+"]").addClass("active"),d.find(".js-tab-item.gantt").css("display",Often.isFunc(Func.CLOUD.GANTT)?"block":"none"),T.off("click").on("click",function(){var t=!T.hasClass("unstar");ProjectSetting.setProjectStar(e.COLABO_SRNO,t,function(){_(T,!t)})}),N.off("click").on("click",DetailSetting.changeProjectColor),d.off("click").on("click",m),f.off("click").on("click",DetailSetting.clickDetailSettingBtn),u.css("display","block"))}function E(t){O(),t&&(t.PUSH_ALAM_YN&&$("#unalarmIcon").css("display","N"===t.PUSH_ALAM_YN?"inline-block":"none"),t.JNNG_ATHZ_YN&&$("#lockIcon").css("display","Y"===t.JNNG_ATHZ_YN?"inline-block":"none"),t.CMNM_YN&&$("#companyIcon").css("display","Y"===t.CMNM_YN?"inline-block":"none"),t.OPEN_YN&&$("#openProjIcon").css("display","Y"===t.OPEN_YN?"inline-block":"none"))}function m(t){o||(DetailEvent.clickDetailTab(t),o=!0,e=setTimeout(function(){o=!1,clearTimeout(e)},500))}}();
"use strict";var DetailSetting=function(){var a;return{openDetailSettingLayer:e,closeDetailSettingLayer:i,clickDetailSettingBtn:function(t){t.stopPropagation(),n(),(a.is(":visible")?i:e)()},removeWorker:function(t){PopupDraw.drawConfirm({contents:{main:t.CONTENTS},callback:{submit:t.CALLBACK,cancel:function(){Often.toast("error",i18next.t("front.common.canceled"))}}})},changeProjectColor:c,deleteSendience:r};function e(){$("#detailSettingProjectSrno").text(Detail.getProjectSrno());var t=Authority.isAuthorityCheck("ADMIN"),e="#detailSettingProject";a.find(e+"UpdateBtn, "+e+"DeleteBtn, "+e+"ManagerBtn").css("display",t?"block":"none"),a.css("display","block"),$("#detailSettingGroup").off("click").on("click",o)}function i(){n(),a.css("display","none")}function n(){var t="Y"===LocalUtil.getProjectHiddenYn();a=$("#detailSettingLayer"),$("#hideText").html('<i class="icon-set-hide"></i>'+i18next.t(t?"front.common.unHide":"dictionary.hide"))}function o(t){var e,a,n=$(t.target);if(i(),o(n,"detailSettingColorBtn"))return c();if(o(n,"detailSettingLabelBtn"))PopupDraw.drawLabelSetting({callback:{submit:function(t){var e;t=e=t.find(".flow-content-check-type-2").parents(".label-item"),"function"==typeof(e=PopupDraw.closePopup)&&e(),function(t){var a=[],n="";$.each(t,function(t,e){a.push({COLABO_FLD_KIND:$(e).attr("data-label-kind"),COLABO_FLD_SRNO:$(e).attr("data-label-srno"),ICO_CODE:$(e).attr("data-label-ico")}),n+=a[t].COLABO_FLD_SRNO+","}),Ajax.executeApi(RestApi.POST.COLABO2_C103,{COLABO_SRNO:LocalUtil.getLocalValue("CURRENT_PROJECT_SETTING","COLABO_SRNO"),COLABO_FLD_REC:a,packetOption:Ajax.OPTION.PREVENT_EXECUTE},function(t){LocalUtil.setLocalValue("CURRENT_PROJECT_SETTING","LABEL_SRNOS",n.slice(0,-1)),Often.toast("success",i18next.t("front.alert.successfullyChange",{status:"$t(dictionary.apply)"}))})}(t)}}});else if(o(n,"detailSettingPushAlarmBtn"))PopupDraw.drawPushAlarmSetting({callback:{submit:function(t){var e;t=e=t.find(".push-alarm-content"),"function"==typeof(e=PopupDraw.closePopup())&&e(),function(t){var e=t.find(".alarm-popup-set").attr("data-push-alarm"),a={COLABO_SRNO:LocalUtil.getLocalValue("CURRENT_PROJECT_SETTING","COLABO_SRNO"),PUSH_ALAM_YN:e,PUSH_COMMT_ALAM_YN:t.find(".js-push-commt").attr("data-push"),PUSH_REMARK_ALAM_YN:t.find(".js-push-remark").attr("data-push"),ALAM_LIST:t.find(".alarm").attr("data-alarm-list")};Ajax.executeApi(RestApi.PUT.COLABO2_NOTI_U101,a,function(){DetailHeader.setProjectIcon(a),Often.toast("success",i18next.t("front.alert.successfullyChange",{status:"$t(dictionary.apply)"}))})}(t)}}});else{if(o(n,"detailSettingHideBtn"))return e="Y"===LocalUtil.getProjectHiddenYn()?"N":"Y",a={COLABO_SRNO:Detail.getProjectSrno(),HIDDEN_YN:e,packetOption:Ajax.OPTION.PREVENT_EXECUTE},void Ajax.executeApi(RestApi.POST.COLABO2_C105,a,function(){var t="Y"==e;LocalUtil.setLocalValue("CURRENT_PROJECT_SETTING","HIDDEN_YN",e),$("#hideText").html('<i class="icon-set-hide"></i>'+i18next.t(t?"front.common.unHide":"dictionary.hide")),Often.toast("success",i18next.t("front.alert.successfullyChange",{status:"$t(dictionary.apply)"}))});if(o(n,"detailSettingProjectExitBtn"))PopupDraw.drawConfirm({contents:{main:Interpolation.breakLine(i18next.t("front.alert.askLeaveProject"))},callback:{submit:function(){r("U",_USER_ID)}}});else if(o(n,"detailSettingProjectDeleteBtn"))0<$("#detailUl").find(".detail-item").length?Often.toast("error",i18next.t("front.alert.leaveProjectError")):PopupDraw.drawConfirm({contents:{main:i18next.t("front.common.ask",{val:"$t(dictionary.project)",status:"$t(dictionary.delete)"})},callback:{submit:l}});else return o(n,"detailSettingProjectUpdateBtn")?(t=t,function(){var t=LocalUtil.getLocalJson("CURRENT_PROJECT_SETTING"),t={TITLE:t.TTL,CONTENTS:t.CNTN,OPEN_YN:t.OPEN_YN,CATEGORY_SRNO:t.CNTS_CATG_SRNO,CATEGORY_NM:t.CNTS_CATG_NM,MANAGER_PERMIT_YN:t.JNNG_ATHZ_YN,MANAGER_WRITE_YN:t.MNGR_WR_YN,MANAGER_WRITE_REMARK_YN:t.MNGR_WR_CM_YN,MANAGER_LOOKUP_YN:t.SRCH_AUTH_YN,MANAGER_DOWNLOAD_YN:t.PRJ_AUTH};ProjectMake.setProjectMakeData(t)}(),void ProjectMake.openPopup(t)):void 0}function o(t,e){return 0<t.findUp("#"+e).length}}function c(){var e=LocalUtil.getProjectBgColorCd();PopupDraw.drawColorSetting({callback:{submit:function(t){t=Often.null2Void(t.find(".project-color-check-active-1").attr("color-code"),"0");e!==t&&function(t,e){"function"==typeof e&&e(),function(e){Ajax.executeApi(RestApi.PUT.COLABO2_BG_COLOR_U001,{COLABO_SRNO:Detail.getProjectSrno(),BG_COLOR_CD:e},function(){var t;LocalUtil.setLocalValue("CURRENT_PROJECT_SETTING","BG_COLOR_CD",e),t=$("#projectColor, #openInviteLayerBtn, #projectTitleColor"),ListHelper.removeAllColorClass(t),t.addClass("color-code-"+e),AllCalendar.reloadCalendar()})}(t)}(t,PopupDraw.closePopup)},final:function(t){t.find(".color-item").removeClass("project-color-check-active-1"),t.find(".color-item.project-color-type-"+e).addClass("project-color-check-active-1")}}})}function r(t,e,a){t={COLABO_SRNO:Detail.getProjectSrno(),RCVR_GB:t,RCVR_USER_ID:e};Ajax.executeApi(RestApi.DELETE.COLABO2_SENDIENCE_D001,t,function(){e===_USER_ID?(Often.toast("success",i18next.t("front.alert.leaveProject")),ViewChanger.loadPage("main"),PopupDraw.closePopup()):Often.toast("success",i18next.t("front.alert.successfullyChange",{status:"$t(dictionary.dismiss)"})),"function"==typeof a&&a()},function(t){t=t.COMMON_HEAD.CODE;"S0151"===t&&Often.toast("error",i18next.t("front.alert.leaveProjectError")),"WCB013"===t&&Often.toast("error",i18next.t("front.alert.cannotLeaveProject")),PopupDraw.closePopup()})}function l(){PopupDraw.closePopup();var t={COLABO_SRNO:Detail.getProjectSrno()};Ajax.executeApi(RestApi.DELETE.COLABO_D101,t,function(){BaseSetting.setBuySetting(function(){Often.toast("success",i18next.t("front.alert.successfullyChange",{status:"$t(dictionary.delete)"})),ViewChanger.loadPage("main")})})}}();
"use strict";var HashTag=function(){var s,o,a,i,r,t,n,l,c,f,d={PG_NO:1,PG_PER_CNT:100,NEXT_YN:"Y",COLABO_SRNO:""},u="",p=!1,h=!1;return{setUnHashtagView:y,getStatus:function(){return h},keyDownArrow:function(e){e.stopPropagation();var t=$(e.target);if(s=t.findUp("#postPopup"),!(o=s.find("#innerCommonHashTagPopup")).isArrowSelect(e)){if(h&&KeyCheck.isKey(e,"SPACE_BAR"))return e.preventDefault();h&&KeyCheck.isKey(e,"ENTER")&&(0!==(t=o.find(".hashtag-popup").find(".select")).length&&(e.preventDefault(),C(t.find(".hashtag-item-title").text(),!0)))}},keyUpCheckHashTag:function(e){if(PostCondition.getFuncCondition().isHashTag)if(Mention.getStatus())h=!1;else{var t=$(e.target);if(s=t.findUp("#postPopup"),o=s.find("#innerCommonHashTagPopup"),0!==s.length){if(0===o.length&&c&&(s.find(".js-popup-before").before(c.attr({id:"innerCommonHashTagPopup","data-code":"hashTag"})),o=s.find("#innerCommonHashTagPopup")),d.COLABO_SRNO=LocalUtil.getLocalValue("CURRENT_PROJECT_SETTING","COLABO_SRNO"),o.css("width","256px"),KeyCheck.isKey(e,"BACK")||KeyCheck.isKey(e,"ESC"))g();else if(h&&(KeyCheck.isKey(e,"SPACE_BAR")||KeyCheck.isKey(e,"ENTER"))){e.preventDefault(),g();t=Caret.getInput().trim();return"#"===t?void 0:-1<t.indexOf("[")||-1<t.indexOf("]")?Often.toast("error","[, ]는 사용할 수 없습니다."):void function(e){var t=f.clone(),e=function(e){var t=Often.null2Void(e).replace(/(#[^\[\]\s]*$)/gi,"").length,t=e.substring(t);return 1<t.length?t:"#"}(e);t.text(e),Caret.captureIndex("#"),setTimeout(function(){Caret.changeAndFocusNode(t)},0),g()}(t)}!function(e){var t=Caret.getInput(),n=0===t.trim().indexOf("#"),a="#"===t.trim(),i=e.shiftKey&&51===e.keyCode&&n,s="#"===e.key&&n,o=e.shiftKey&&"#"===e.key&&a,a="3"===e.key&&a,t=KeyCheck.isKey(e,"BACK")&&n&&t.trim().length===t.length;return i||s||o||a||t}(e)?(a&&clearTimeout(a),a=setTimeout(function(){Caret.isTextInput(e)&&n()},100)):(h=!0,r=Caret.getPosition(),i&&clearTimeout(i),i=setTimeout(n,100))}else h=!1}function n(){var e,t;function n(e){var n="",a=$("#hashTagItem").html();return $.each(e,function(e,t){n+=ListHelper.replaceJson(a,{tagName:Often.null2Void(t.TAG_NM,""),refCount:Often.null2Void(t.REF_CNT,"")})}),n}h&&(t=o.find(".hashtag-popup"),Caret.captureIndex("#"),ListHelper.initPageData(d,t),e=Often.null2Void(Caret.getInput().trim()),(t=e.match(/#/gi))&&(t=1===t.length,t=e.replace(t?"#":/^#.*#/gi,""),o.css("display","none"),Ajax.executeApi(RestApi.GET.FLOW_TAG_R001,$.extend({},d,{SRCH_WD:t,SORT_DESC:"N"}),function(e){var a,i;a=e.TAG_REC,e=e.NEXT_YN,i=1===d.PG_NO,o.find(".hashtag-popup").drawListHelper({pageData:d,nextYn:e,records:a,callback:{click:function(e){var t=$(e.target).findUp(".hashtag-item");0!==t.length&&(e.preventDefault(),C(t.find(".hashtag-item-title").text()))},item:n,final:function(e){var t,n=s.find(".edit-item");t=0===a.length?{display:"none"}:(t=r.y-n.offset().top+20,{transform:"translate("+r.x+"px, "+t+"px)",display:"block"}),o.css(t),i&&(o.attr("data-code","hashTag"),e.scrollTop(0),ListHelper.selectFirstItemByArrow(e))}}})})),Caret.saveCaret(),clearTimeout(i))}},clearHashTag:g,drawProjectHashtagItemsByRecord:function(e){if(t=$("#projectHashtagArea"),n=$("#hashtagUl"),l=$("#hashtagMoreButton"),c=$($("#hashTagLayer").html()),f=$('<span class="tag hashtag-span" contenteditable="false"></span>'),l.off("click").on("click",function(){p=""===p||!1===p?(n.css("height","auto"),n.css("overflow","visible"),l.removeClass("active"),!0):(n.css("height","40px"),n.css("overflow","hidden"),l.addClass("active"),!1)}),n.empty(),0===e.length)return t.addClass("d-none");n.append(function(e){var n=$("#hastTagTransverseItem").html(),a="";return $.each(e,function(e,t){a+=ListHelper.replaceJson(n,{"tag-name":Often.null2Void(t.TAG_NM,"")})}),a}(e)),setTimeout(v,200),$("#hashtagUl").off("click").on("click",function(e){e=$(e.target).findUp(".hashtag-item");0!==e.length&&m(e)}),t.removeClass("d-none")},changeHashtagListStatusAndView:m};function g(){h=!1,o.find(".select").removeClass("select"),o.css({display:"none"})}function C(e,t){g();var n=f.clone();n.text("#"+e),t?setTimeout(function(){Caret.changeAndFocusNode(n)},0):Caret.changeAndFocusNode(n)}function m(e){e=e.children().text();""===Often.null2Void(u)?(DetailEvent.resetFilter($("#projectFeedArea")),T(u=Often.null2Void(e,"")),Detail.drawHashtagPostList()):u!==e?(T(u=Often.null2Void(e,"")),Detail.drawHashtagPostList()):u===e&&(y(),Detail.drawPostList())}function T(e){var t=$("#projectFeedArea");$("#projectPinArea").css("display","none"),t.find("#allPostsFilterTitle").text(e),t.find(".js-filter-reset").css("display","block"),t.find(".js-feed-filter-button").css("display","none")}function y(){var e=$("#projectFeedArea");$("#projectPinArea").css("display","block"),e.find("#allPostsFilterTitle").text(i18next.t("dictionary.all")),e.find(".js-filter-reset").css("display","none"),e.find(".js-feed-filter-button").css("display","inline-block"),u=""}function v(){var e=n.find(".hashtag-item"),t=e.first().offset(),e=e.last().offset();t&&e&&t.top!==e.top?l.css("display","block").addClass("active"):l.css("display","none").removeClass("active")}}();
"use strict";var InviteProject=function(){var t,a;return{openInvite:function(n,e){{var i;a=Often.null2Void(n),t=$("#inviteLayer"),""!==a&&(i=$("#projectColor").attr("class"),n=TagUtil.tag2html($("#projectTitle").text()),$("#inviteTitle").html('<i class="'+i+'"></i>'+n))}r(),""===Often.null2Void(e)?function(e){if(""===Often.null2Void(a))return e();Ajax.executeApi(RestApi.POST.COLABO2_INVT_C001,{COLABO_SRNO:a,GB:"CI",RENEWAL_YN:"Y",packetOption:Ajax.OPTION.PREVENT_EXECUTE},function(n){$("#inviteLink").text(n.INVT_URL),e()})}(function(){o(),t.fadeIn(200)}):TeamInvite.openTeamInviteLayer(e,!0)},closeInvite:c,closeAllInviteLayer:i,addInviteEvent:r,openInviteMain:o,drawExitPopup:l,backInviteMain:function(){l(o)},clickInvitePopup:n};function r(){$("#inviteLayer").off("click keyup").on("click",n).on("keyup",e)}function o(){PopupDraw.closePopup(),i(),$("#selectMemberList").empty(),$("#inviteMainLayer").css("display","block")}function n(n){var e,i=$(n.target);(function(n){if(0===n.findUp(".closeInviteLayerBtn").length)return!1;Often.isAct("subscreen")?window.close():l(c);return!0})(i)||function(n){if(Often.isAct("subscreen"))return!1;var e=n.findUp("#inviteMainLayer"),i=n.findUp("#sendInviteEmlLayer"),n=n.findUp("#teamInviteLayer");return 0===e.length&&0===i.length&&0===n.length&&(l(c),!0)}(i)||(0!==i.findUp(".returnMainBtn").length?(l(o),1):0!==(e=i).findUp("#inviteUl").length&&function(n){if(0<n.findUp("#copyInviteLink").length)return Often.copyUrl($("#inviteLink").text()),!0;if(0<n.findUp("#openSendEml").length)return EmailInvite.openSendInviteEmlLayer(),!0;if(0<n.findUp("#openTeamInvite").length)return Often.isFunc("INVITATION_POPUP")?InvitationPopup.openInvitationPopup():TeamInvite.openTeamInviteLayer("team"),!0;if(0<n.findUp("#openSendienceInvite").length)return TeamInvite.openTeamInviteLayer("sendience"),!0;return!1}(e))||TeamInvite.isTeamInviteMenuAndAction(i)||TeamInvite.isSubmitInviteAndAction(i)||EmailInvite.isSendInviteEmailAndAction(i)||EmailInvite.isAddEmailAndAction(i)||EmailInvite.isEmailListAndAction(i)}function l(n){var e=t.find("#selectMemberList li"),i=$("#sendInviteEmlLayer").is(":visible")&&EmailInvite.isCheckWriteEmail();if(0===e.length&&!i)return n();PopupDraw.drawConfirm({contents:{main:i?"작성중인 내용이 있습니다. 나가시겠습니까?":"선택된 참여자가 있습니다. 나가시겠습니까?"},callback:{submit:n}})}function e(n){TeamInvite.isTeamInviteSearchAndAction(n)}function i(){v(),$("#teamInviteLayer, #inviteMainLayer, #sendInviteEmlLayer, #inviteEmplArea").css("display","none")}function c(){PopupDraw.closePopup(),v(),t.css("display","none")}function v(){var n=$("#sendInviteEmlLayer");$("#teamInviteArea").scrollTop(0),n.find(".invite-email-area").scrollTop(0),n.find(".emailItemInput").val("")}}();
"use strict";var Participant=function(){var c,l,p,o={PG_NO:1,PG_PER_CNT:20,NEXT_YN:"Y"},a={PG_NO:1,NEXT_YN:"Y"},s={};return{adjustPosition:N,drawJoinParticipantItem:function(n){var i=$("#joinParticipantsUl");ListHelper.initPageData(a),Ajax.executeApi(RestApi.GET.COLABO2_INVT_R003,$.extend({packetOption:Ajax.OPTION.PREVENT_EXECUTE},a,{COLABO_SRNO:n}),function(t){var e=t.JOIN_REC.length;$("#joinParticipantsCount").text(e),$("#joinParticipantsUl").drawListHelper({pageData:a,nextYn:t.NEXT_YN,records:t.JOIN_REC,callback:{item:r,click:_,final:function(){i.find(".js-participant-chat").remove(),i.find(".js-participant-name").after('<img id="new" src="/design3/img_rn/ico/ico_new3.png" alt="" style="margin-bottom: 5px; display: inline;">')}}});t=Authority.isAuthorityCheck("ADMIN",n);$("#joinParticipantsArea").css("display",t&&0!==e?"block":"none")})},drawProjectParticipantItems:function n(i,a,r){var t=$("#participantArea");{var e;a&&(e=$(".participants-menu").find(".js-video-chat"),Often.showOrHideByFunc("VIDEO_CONFERENCE",e),ListHelper.initPageData(o),t.addClass("d-none"),p=l=c=!1)}if("N"===o.NEXT_YN)return;Ajax.executeApi(RestApi.GET.COLABO2_SENDIENCE_R101,$.extend({},o,{COLABO_SRNO:i}),function(t){var e;a&&(s.manager=t.MNGR_CNT,s.outer=t.OUT_SENDIENCE_CNT,s.inner=t.IN_SENDIENCE_CNT,$("#participantCount").text(Often.numberWithCommas(t.SENDIENCE_CNT)),e=LocalUtil.getLocalValue("ONLY_BUY_SETTING","BUY_YN")===BuyCode.PAID_COMPANY,e=e&&0<Number(t.OUT_SENDIENCE_CNT),$("#detailTop").find("#externalIcon").css("display",e?"inline-block":"none"),LocalUtil.setLocalValue("CURRENT_PROJECT_SETTING","SENDIENCE_CNT",t.SENDIENCE_CNT)),$("#participantsUl").drawListHelper({pageData:o,nextYn:t.NEXT_YN,records:t.SENDIENCE_REC,targetObj:{scroll:$(".participants-content-group")},callback:{item:d,scroll:function(){return n(i)},click:f}}),$("#participantArea").off("click").on("click",C).removeClass("d-none"),N(),"function"==typeof r&&r()})},clickParticipantsArea:f};function N(){var t=$("#projectParticipants");t.is(":visible")&&t.css("transform","translateX("+(0-$(document).scrollLeft())+"px")}function d(t){var r="",o=$("#participantItem").html();return $.each(t,function(t,e){var n=Often.null2Void(e.RCVR_CORP_NM,""),i=Often.null2Void(e.RCVR_DVSN_NM,""),a=""===n&&""===i;e.STATUS!==ParticipantCode.MANAGER||c||(c=!0,r+=u(e.STATUS)),e.STATUS!==ParticipantCode.OUTER||p||(p=!0,r+=u(e.STATUS)),e.STATUS!==ParticipantCode.INNER||l||(l=!0,r+=u(e.STATUS));n=Often.null2Void(e.RCVR_USER_ID||e.USER_ID,""),i=_USER_ID===n;r+=ListHelper.replaceJson(o,{name:Often.null2Void(e.RCVR_USER_NM,e.USER_NM)+(i?" (나) ":""),team:Often.null2Void(e.RCVR_DVSN_NM,""),position:Often.null2Void(e.JBCL_NM,""),company:Often.null2Void(e.RCVR_CORP_NM,""),profile:ListHelper.setProfile(e.PRFL_PHTG),"personal-display":ListHelper.setDisplay(Often.isFunc(Func.CLOUD.PARTICIPANTS_INFO)&&!a,"flex"),"worker-id":n})}),r}function r(t){var e="",n=$("#participantItem").html(),i=t[0],a=Often.null2Void(i.RCVR_CORP_NM,""),r=Often.null2Void(i.RCVR_DVSN_NM,""),o=""===a&&""===r;return e+=ListHelper.replaceJson(n,{name:Often.null2Void(i.USER_NM)+(1<t.length?"외 "+(t.length-1)+"명":""),team:Often.null2Void(r,""),position:Often.null2Void(i.JBCL_NM,""),company:Often.null2Void(a,""),profile:ListHelper.setProfile(i.PRFL_PHTG),"personal-display":ListHelper.setDisplay(Often.isFunc(Func.CLOUD.PARTICIPANTS_INFO)&&!o,"flex"),"worker-id":i.USER_NM})}function u(t){var e=t===ParticipantCode.MANAGER?i18next.t("front.common.projectManager"):t===ParticipantCode.OUTER?i18next.t("dictionary.partner"):i18next.t("dictionary.employee"),t=t===ParticipantCode.MANAGER?"manager":t===ParticipantCode.OUTER?"outer":"inner";return'<span class="participants-title"><em>'+e+'</em><span id="'+t+'ParticipantsCount" class="number-of-participants">'+s[t]+"</span></span>"}function f(t){var e=$(t.target),n=e.findUp(".js-participant-item"),i=e.findUp(".js-participant-chat"),a=e.findUp(".js-project-chat"),t=e.findUp(".js-video-chat"),e=n.attr("data-id");return 0<i.length?OpenUtil.openMessengerByOneUserId(e):0<a.length?OpenUtil.openMessengerByProjectSrno(Detail.getProjectSrno()):0<t.length?VideoConference.sendMessage():0<n.length?Profile.drawProfilePopup(e):void 0}function _(t){0!==$(t.target).findUp(".js-participant-item").length&&RequestJoin.openRequestJoinPopup()}function C(t){var e=$(t.target),t=e.findUp(".js-project-chat"),e=e.findUp(".js-video-chat");return 0<t.length?OpenUtil.openMessengerByProjectSrno(Detail.getProjectSrno()):0<e.length?VideoConference.isZoomSynchronized(VideoConference.warnAndSendMessage,VideoConference.alertRequiredZoomSync,{type:"projectSrno",val:Detail.getProjectSrno(),isMini:!1}):void 0}}();
"use strict";var PinPost=function(){return{drawProjectPinPostItems:function(){var e=$("#projectPinArea");e.css("display","none");var n=$("#pinPostUl");Ajax.executeApi(RestApi.GET.COLABO2_PIN_R001,{COLABO_SRNO:Detail.getProjectSrno()},function(t){n.empty(),0!==t.PIN_REC.length&&($("#projectPinCount").text(t.PIN_REC.length),n.append(a(t.PIN_REC)).off("click").on("click",r),e.css("display","block"))})},controlPinElement:function(t,e,n){var o=$("#post-"+n),i=o.attr("pin-yn"),T=$("#post-"+n),l=$("#pin-"+n),s="EDIT"===t&&i||"PIN"===t;"DELETE"!==t?s&&(s=o.find(".post-title").text(),T=a([{TTL:""!==s?s:o.find("#summaryPost div:first").text(),COLABO_SRNO:e,COLABO_COMMT_SRNO:n,TEMP_GB:T.attr("data-post-code"),STTS:T.attr("status"),STTG_DTTM:T.attr("time"),TODO_DONE_PERCENT:T.attr("todo-done-percent")}]),"EDIT"===t&&i?l.html($(T).find("a")):"PIN"===t&&($("#pinPostUl").prepend(T).off("click").on("click",r),function(){var t=$("#projectPinArea");t.hasClass("d-none")&&t.css("display","block")}()),p()):(l.remove(),c(),p())},unPinElement:function(t,e){$("#pin-"+e).remove(),c()},drawProjectPinPostItemsByRecord:function(t){var e=$("#projectPinArea");e.css("display","none");var n=$("#pinPostUl");n.empty(),0!==t.length&&($("#projectPinCount").text(t.length),n.append(a(t,!0)).off("click").on("click",r),e.css("display","block"))},updatePinCount:p};function a(t,s){var a="",r=$("#pinPostItem").html();return $.each(t,function(t,e){var n=Often.null2Void(e.TMPL_TYPE,"1"),o=Often.null2Void(e.TEMP_GB,"1"),i=DetailCode.SCHEDULE===(s?n:o),T=DetailCode.TODO===(s?n:o),l=DetailCode.TASK===(s?n:o);a+=ListHelper.replaceJson(r,s?{title:function(t){var n="";if(0===t.length)return n;t=t.split("\n");return $.each(t,function(t,e){if(""!==e)return n=e,!1}),n}(Often.null2Void(e.COMMT_TTL,e.CNTN)),"colabo-srno":e.COLABO_SRNO,"post-srno":e.COLABO_COMMT_SRNO,"post-gb":DetailCode.POST._GB[n],"post-name":i18next.t(DetailCode.POST._TEXT[n]),"status-code":c(T?"request":l?DetailCode.STATUS._GB[e.TASK_STTS]:""),status:i18next.t(T?e.TODO_DONE_PERCENT+"%":l?DetailCode.STATUS._TEXT[e.TASK_STTS]:""),"complete-yn":"completion"===DetailCode.STATUS._GB[e.TASK_STTS]?"complete":"hold"===DetailCode.STATUS._GB[e.TASK_STTS]?"hold":"","schedule-yn":i?"d-block":"d-none","start-date":Tz.momentTimeZone(e.SCHD_STTG_DTTM,"type4"),"start-time":Tz.momentTimeZone(e.SCHD_STTG_DTTM,"type8")}:{title:e.TTL,"colabo-srno":e.COLABO_SRNO,"post-srno":e.COLABO_COMMT_SRNO,"post-gb":DetailCode.POST._GB[o],"post-name":i18next.t(DetailCode.POST._TEXT[o]),"status-code":c(T?"request":l?DetailCode.STATUS._GB[e.STTS]:""),status:i18next.t(T?e.TODO_DONE_PERCENT:l?DetailCode.STATUS._TEXT[e.STTS]:""),"complete-yn":"completion"===DetailCode.STATUS._GB[e.STTS]?"complete":"hold"===DetailCode.STATUS._GB[e.STTS]?"hold":"","schedule-yn":i?"d-block":"d-none","start-date":Tz.momentTimeZone(e.STTG_DTTM,"type4"),"start-time":Tz.momentTimeZone(e.STTG_DTTM,"type8")})}),a;function c(t){return""===Often.null2Void(t)?"d-none":"state "+t}}function r(t){var e=$(t.target).findUp(".js-pin-item");0!==e.length&&PostPopup.togglePostView(Detail.getProjectSrno(),e.attr("data-post-srno"),"",function(){$("#pinPostUl").find(".highlight").removeClass("highlight"),e.find("a").addClass("highlight")})}function c(){0===$("#pinPostUl li").length&&$("#projectPinArea").css("display","none")}function p(){$("#projectPinCount").text($("#pinPostUl li").length)}}();
"use strict";var PostPopup=function(){var c,d,f={PROJECT_SRNO:"",POST_SRNO:"",POST_CODE:"",POST_RECORD:"",EDIT_DATA:""};return{setData:function(t){f=$.extend({},f,t)},getData:function(){return f},getOnePostData:function(){return f&&f.POST_RECORD&&f.POST_RECORD[0]},getPostData:C,openRegistrationView:n,openRegistrationViewOnAnywhere:function(t){var e=ViewChanger.getCurrentPageId().split("/");return n(1<e.length?e[1]:"",t,!1)},openEditView:function(t,e){var n=f.POST_RECORD[0];function o(){i(n,"",{mode:DetailCode.SHARE_POST.CODE,selectable:!0,maxSelection:10,firstEditor:!1})}f=$.extend(f,{PROJECT_SRNO:n.COLABO_SRNO,POST_SRNO:n.COLABO_COMMT_SRNO,POST_CODE:PostCondition.getPostCodeByData(n),EDIT_DATA:JsonMaker.getPostJson()}),t?$("#postPopup").is(":visible")?O(o):o():O(function(){i(n,"",{})})},togglePostView:function(i,a,s,r,l){s=Often.null2Void(s,"-1"),P();var t=Often.null2Void(c.attr("data-post-srno")),e="EDIT"===Often.null2Void(c.attr("data-code"))&&a===t,n=c.is(":visible")&&a!==t,o=0<c.find("#post-"+a+"[data-remark-srno="+s+"]").length;function p(){C(i,a,0,!0,function(e){Number(Often.null2Void(s,"-1"))<0?$("#postPopup").is(":visible")&&E():$("#postPopup").attr("id","prePostPopup");var n=$.extend({},e.COMMT_REC[0]);if(n.COLABO_REMARK_SRNO=Often.null2Void(s,"-1"),"Y"===n.SUBTASK_YN&&ItemSubtask.setSubtaskRemarkCount(a,n.REMARK_CNT),"Y"===n.READ_YN)return t();function t(){if((Often.isAct("subscreen")?$("body"):$("#mainBodyWrap")).prepend(R(PostComponent.getHtmlByPostRecord([n]),"VIEW")),P(),PostPopupInit.initViewPopup(c,e,Top.isRightWrap()||l,function(){DetailEvent.applySummarySlickImage(),"function"==typeof r&&r()}),c.css("display","none"),Number(Often.null2Void(s,"-1"))<0)return c.css("display","block"),void D();var t=c.find(".js-comment-area");t.find(".remark-item").remove(),ItemRemark.getRemarkDataHtml(t,{MODE:OftenCode.MORE,ORDER_TYPE:OftenCode.NEXT,COLABO_SRNO:i,COLABO_COMMT_SRNO:a,SRCH_COLABO_REMARK_SRNO:0},o)}function o(){$("#prePostPopup").remove(),c.css("display","block");var t=c.find(".post-card-scroll"),e=c.find('.remark-item[remark-srno="'+s+'"]');e.addClass("highlight").css("background","#f8f7ff");var n=e.offset()&&e.offset().top,e=c.innerHeight()-t.innerHeight()/2;t.animate({scrollTop:n-e},400),D()}n.READ_USER_CNT=Number(n.READ_USER_CNT)+1,t(),AlarmUpdate.executeReadApi({COLABO_SRNO:i,COLABO_COMMT_SRNO:a,COLABO_REMARK_SRNO:s})})}e?(E(),u(i,p)):c.is(":visible")?O(function(){return o?E():(DocumentEvent.closeAllPopup(!0,n),void u(i,p))}):u(i,p)},initButtonByCode:function(t,e){var n=t.find("#"+e+"Button"),t=t.find("#"+e+"Span"),e=""===$.trim(t.text());n.css("display",e?"inline-block":"none"),t.css("display",e?"none":"inline-block")},checkWritingAndShowPopup:O,removePopup:E,addScrollSticky:D};function P(){c=$("#postPopup"),d=c.find(".js-popup-before"),c.find(".js-content-area"),c.find(".js-upload-area")}function n(t,e,n){f.PROJECT_SRNO=t,f.POST_CODE=e,(f.POST_RECORD="")===Often.null2Void(t)?i({},n,{mode:DetailCode.WRITE_ANYWHERE.CODE,selectable:!0,maxSelection:1,firstEditor:!0}):u(t,function(){i({},n)})}function _(t,e){return $((t?"#postPopup ":"")+(".js-edit-layer:visible .js-remark-upload-"+e+" li"))}function O(n,t){t=t||"ETC";var o="function"==typeof n;P();var e,i,a,s,r,l,p,O=c.is(":visible"),u=!c.hasClass("flow-all-background-1");function d(t,e){e&&E(),PopupDraw.closePopup(),UploadHandler.stopUploading(),o&&n()}!O||"SIDE_POP"!==t||u?(l=O,i=!1,a="",l=$((l?"#postPopup ":"")+".js-remark-area:visible"),$.each(l,function(t,e){i||""===$.trim($(e).text())||(i=!0,a=$(e))}),e=a,p=_(O,"file"),u=_(O,"img"),l=O,r="",l=$((l?"#postPopup ":"")+".js-subtask-edit-layer:visible"),$.each(l,function(t,e){var n="0"!==$(e).find(".js-subtask-status-button").attr("data_status"),o=0!==$.trim($(e).find(".js-subtask-input").val()).length,i=""!==$(e).find(".js-date-tooltip").attr("data_end_dt"),a=""!==$(e).find(".js-subtask-priority-layer").attr("data_priority"),s=""!==$(e).find(".js-subtask-worker-layer").attr("data_worker_id_list");if(n||o||i||a||s)return r=$(e).find(".js-subtask-input"),!1}),s=r,l="VIEW"===c.attr("data-code"),O&&!l&&JSON.stringify(JsonMaker.getPostJson(c))!==JSON.stringify(PostPopup.getData().EDIT_DATA)||UploadHandler.isUploading()||0<e.length||0<p.length||0<u.length||0<s.length?PopupDraw.drawConfirm({await:!0,contents:{main:i18next.t("front.alert.leaveWriting")},callback:{submit:function(){d(0,"SIDE_POP"===t)},cancel:function(){return PopupDraw.closePopup(),0<e.length?e.focus():0<s.length?s.focus():void 0}}}):(u=(p=c.find(".js-share-project-list")).is(":visible")&&0<p.find(".on").length,p=c.find(".js-popup-before").is(":visible")&&SpaceSelectable.isSharePost(c),u||p?PopupDraw.drawConfirm({contents:{main:(u?"선택된 프로젝트가 있습니다.":"작성이 완료되지 않았습니다.")+"\n다른 프로젝트에 올리기를 취소하시겠습니까?"},callback:{submit:E}}):d(0,"SIDE_POP"===t))):d()}function u(t,e){var n=LocalUtil.getLocalValue("CURRENT_PROJECT_SETTING");if((n?n.COLABO_SRNO:"")!==t)return Detail.executeProjectSettingInfo(t,e);LocalUtil.setLocalJson("POP_PROJECT_SETTING",n),"function"==typeof e&&e()}function C(e,n,t,o,i){var a="list"===LocalUtil.getFeedType()&&!o,o=a?RenewalApi.GET.ACT_POST_LIST:RestApi.GET.COLABO2_R104;Ajax.executeApi(o,{GUBUN:"DETAIL",COLABO_SRNO:e,COLABO_COMMT_SRNO:n,RENEWAL_YN:"Y",PG_NO:1,PG_PER_CNT:1},function(t){f={PROJECT_SRNO:e,PROJECT_NM:"",POST_SRNO:n,POST_CODE:a?t.POST_RECORD[0].TMPL_TYPE:PostCondition.getPostCodeByData(t.COMMT_REC[0]),POST_RECORD:t[a?"POST_RECORD":"COMMT_REC"]},"function"==typeof i&&i(t)})}function i(t,e,n){var o=!Often.isFunc(Func.CLOUD.GOOGLEDRIVE_UPLOAD_PREVENT)&&Often.isFunc(Func.CLOUD.GOOGLEDRIVE_UPLOAD),i=!Often.isFunc(Func.CLOUD.DROPBOX_UPLOAD_PREVENT)&&Often.isFunc(Func.CLOUD.DROPBOX_UPLOAD),a=Often.isFunc(Func.CLOUD.IMPORT_FILE_BOX),s=(n=n||{}).selectable,r=0<Object.keys(t).length,l="Y"===t.SUBTASK_YN,p=s?n.mode:r?"EDIT":"ADD",O=PostCondition.getPostCondition(p,t),u=PostCondition.getFuncCondition(p,t),r="Y"===LocalUtil.getProjectSrchAuthYn(),p=R(ListHelper.replaceJson($("#postEditWrap").html(),{"title-display":O.isWrite1?"d-none":"","nav-class":DetailCode.POST._GB[O.isWrite1?"0":O.postCode],"post-gb":l?"subtask":"","private-button-display":ListHelper.setDisplay(!l,"inline-block"),"private-class":r?"admin":"full","private-text":r?i18next.t("prefix.only",{val:"$t(front.common.projectManager)"}):i18next.t("front.common.public"),"data-code":p,"button-upload-google":ListHelper.setDisplay(o),"button-upload-dropbox":ListHelper.setDisplay(i),"button-upload-importfile":ListHelper.setDisplay(a),"post-dimd-layer":u.isUpload?$("#postDimdItem").html():""}),p);$("#postPopup").is(":visible")?(E(),p.attr("data-before-view","POP")):p.attr("data-before-view","NO_POP"),p.attr({"data-project-srno":t.COLABO_SRNO,"data-post-srno":t.COLABO_COMMT_SRNO}),$("#mainBodyWrap").prepend(p),P(),PostPopupInit.initEditPopup(c,t,e),s&&SpaceSelectable.addProjectSelectableView(d,n),f.EDIT_DATA=JsonMaker.getPostJson(c),ScrapMetaData.addUrlPreview(c.find(".js-upload-area"),function(t){PostAppend.appendLink(c,t)}),Often.showOrHideByFunc("VIDEO_CONFERENCE",c.find("#videoLi")),Detail.togglePostFilter(c.find(".js-post-nav"))}function R(t,e){var n=PopupDraw.getPopupWrapObj();return n.find(".contents").html(t),n.attr({id:"postPopup","data-code":e}),n.css("display","block"),n}function E(){$("#mainContent").find(".highlight").removeClass("highlight"),$("#postPopup").remove(),Caret.initLastFocusNode()}function D(){var t=$("#postPopup");$(".post-card-scroll").hasVerticalScrollBar()?t.find(".js-remark-layer").addClass("sticky"):t.find(".js-remark-layer").removeClass("sticky")}}();
"use strict";var ProjectSearch=function(){var a,t,i,n,l,s,o,h={CHECK_DTTM:"",PG_PER_CNT:20,NEXT_YN:"Y"};return{clickProjectDetailSearchTopButton:c,keydownProjectSearchInput:d,closeProjectDetailSearchLayer:S,hideSearchProjectList:function(){r(),S(),SearchFilter.initFilter(n,searchMode.POST),SearchFilter.initFilter(a,searchMode.POST),i.val(""),n.css("display","none")}};function r(){t=$("#detailLayer"),n=t.find(".js-post-search-result"),i=t.find("#projectSearchInput"),a=t.find("#projectDetailSearchLayer"),l=n.find(".js-search-post-ul"),n.attr({"data-search-area-code":"IN_PROJECT"})}function c(e){e.preventDefault(),r(),a.is(":visible")?S():(SearchFilter.initFilter(a,searchMode.POST,!0),SearchFilter.addEventOnSearchFilter(a,O,!0),a.prev().addClass("active"),n.is(":visible")?t.find("#detailTimeline").addClass("js-project-search"):t.find("#detailTimeline").removeClass("js-project-search"),a.fadeIn(200))}function d(e){KeyCheck.isKey(e,"ENTER")&&O(),KeyCheck.isKey(e,"ESC")&&(r(),i.val(""),n.fadeOut(200))}function S(e){if(e&&("projectSearchInput"===e.attr("id")||e.hasClass("project-search-input")))return!0;if(t.find("#detailTimeline").removeClass("js-project-search"),!(e&&0<e.parents(".flatpickr-calendar").length)){e=$(".flatpickr-calendar");if(e.is(":visible"))return e.remove();r(),a.css("display","none"),a.prev().removeClass("active")}}function O(){var e=SearchFilter.getSearchWord(searchAreaCode.IN_PROJECT);SearchFilter.isUnSearchableAndToast(""!==e)||(n.css({display:"block",top:"120px"}),i.val(SearchFilter.getSearchWord(searchAreaCode.IN_PROJECT)),i.off("keyup").on("keyup",d),t.find(".js-detail-search-filter-button").off("click").on("click",c),SearchFilter.setSearchFilter(a,n,searchMode.POST),ListHelper.initPageData(h,l),p(),SearchFilter.drawSearchCount(n.find(".js-search-post-count"),0),u(),S(),SearchFilter.addEventOnSearchFilter(n,f,!1))}function f(){p(),ListHelper.initPageData(h,l),u()}function u(t){var c,e,r;"N"!==Often.null2Void(h.NEXT_YN,"Y")&&(c=SearchFilter.getSearchWord(searchAreaCode.IN_PROJECT),SearchFilter.isUnSearchableAndToast(""!==c)||(e=SearchFilter.getFilterJson(n,a.is(":visible")),console.log("filterJson",e),r=""!==$.trim(Often.null2Void(e.RGSR_NM))||""!==$.trim(Often.null2Void(e.SEARCH_PROJECT_TITLE))||""!==$.trim(Often.null2Void(e.RCVR_USER_NM)),Ajax.executeApi(RenewalApi.GET.ACT_SEARCH_POST_N_REMARK_LIST,$.extend({packetOption:Ajax.OPTION.PREVENT_CALLBACK,COLABO_SRNO:Detail.getProjectSrno(),GUBUN:"DETAIL",COLABO_COMMT_SRNO:Often.null2Void(s),COLABO_REMARK_SRNO:Often.null2Void(o),SEARCH_RECORD:[$.extend({SRCH_WORD:c,ORDER_TYPE:"A"},e)]},h),function(e){1===h.PG_NO&&n.find(".js-search-back-button.js-detail-back").css("display","block"),t||SearchFilter.drawSearchCount(n.find(".js-search-post-count"),e.CNT),s=e.COLABO_COMMT_SRNO,o=e.COLABO_REMARK_SRNO,l.drawListHelper({pageData:h,checkDttm:e.CHECK_DTTM,nextYn:e.NEXT_YN,records:e.RESULT_RECORD,noDataHtml:ListHelper.getNoDataHtml("PROJECT_SEARCH"),targetObj:{focus:r?null:i},callback:{click:C,item:function(e){return e=e,r=c,a="",i=$("#allPostSearchItem").html(),$.each(e,function(e,t){a+=ListHelper.replaceJson(i,$.extend(t,JsonMaker.getListComponentInfo(t,r)))}),a;var r,a,i},scroll:function(){u(!0)}}})})))}function C(e){var t=$(e.target).findUp(".js-all-post-item");0!==t.length&&(LimitGuest.isSearchLimitGuest("post",t.attr("rgsn_dttm"))||(e=Often.getAttrs(t)[0],PostPopup.togglePostView(e.COLABO_SRNO,e.COLABO_COMMT_SRNO,"",function(){l.find(".highlight").removeClass("highlight"),t.addClass("highlight")})))}function p(){o=s=""}}();
"use strict";var RequestJoin=function(){var r,o,i={PG_NO:1,NEXT_YN:"Y"};return{openRequestJoinPopup:function(t){r=$("#requestJoinPopup"),o=t||Detail.getProjectSrno(),ListHelper.initPageData(i,$("#joinParticipantUl")),Ajax.executeApi(RestApi.GET.COLABO2_INVT_R003,$.extend({},i,{COLABO_SRNO:o}),function(t){$("#joinParticipantUl").drawListHelper({pageData:i,nextYn:t.NEXT_YN,records:t.JOIN_REC,noDataHtml:ListHelper.getNoDataHtml(),callback:{item:n,click:a}}),r.fadeIn(200)}),r.find("#closeBtn").off("click").on("click",e)},closeRequestJoinPopup:e};function e(){r.fadeOut(200)}function n(t){var n=$("#joinParticipantItem").html(),a="";return $.each(t,function(t,i){var e=ImageUtil.removeDomain("PROFILE",i.PRFL_PHTG);a+=ListHelper.replaceJson(n,{"profile-image":'style="background-image: url('+e+')"',"user-id":i.USER_ID,name:i.USER_NM})}),a}function a(t){var n=$(t.target),i=n.findUp("#acceptBtn"),e=n.findUp("#rejectBtn"),t=n.findUp(".js-profile-image");function a(t){var i=n.findUp(".js-join-participant-item"),e=i.attr("data-user-id"),t=t?JoinStatus.APPLY_JOIN_2:JoinStatus.REJECT_JOIN_2;JoinProject.updateJoinStatus(o,e,t,function(){i.remove(),Participant.drawProjectParticipantItems(o,!0),Participant.drawJoinParticipantItem(o),0===r.find(".js-join-participant-item").length&&r.find("#joinParticipantUl").append(ListHelper.getNoDataHtml())})}0<i.length?a(!0):0<e.length?a(!1):0<t.length&&(t=t.findUp(".js-join-participant-item").attr("data-user-id"),Profile.drawProfilePopup(t))}}();
"use strict";function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var SpaceSelectable=function(){var e,r,a,c,i,l,s=[],f={PG_NO:1,PG_PER_CNT:100,NEXT_YN:"Y"};return{getSelectedProjectArray:function(){return s},addProjectSelectableView:function(e,t){var n,o;t&&t.selectable&&(n=Often.null2Void(t.maxSelection,1),o=Often.null2Void(t.mode,""),t=t.firstEditor||!1,s=[],i=n,l=o,r=e,a=$($("#projectSelectableLayer").html()),r.before(a),u(a,t),c=a.find(".js-share-project-list"),ListHelper.initPageData(f,c),r.find(".btn-back, #selectedProject").off("click").on("click",function(){u(a,!1)}),a.find(".js-share-project-srch").focus().off("keyup").on("keyup",C),a.off("click").on("click",p),d())},isSharePost:function(e){return e.attr("data-code")===DetailCode.SHARE_POST.CODE}};function d(e){var t,n;e="string"==typeof e?e:"","N"!==f.NEXT_YN&&(t=""!==Often.null2Void(e),n=RenewalApi.GET.ACT_PROJECT_LIST,e=$.extend({},f,{COLABO_FLD_KIND:"1",COLABO_FLD_SRNO:"12",MODE:"COPY"},t?{SEARCH_RECORD:[{SRCH_WORD:e,ORDER_TYPE:"A"}]}:{}),Ajax.executeApi(n,e,function(e){c.drawListHelper({pageData:f,noDataHtml:ListHelper.getNoDataHtml(""),nextYn:e.NEXT_YN,records:e.PROJECT_RECORD,targetObj:{focus:a.find(".js-share-project-srch"),scroll:c.parent("div")},callback:{item:h,scroll:d,final:function(){a.find(".js-share-popup-ttl").text(i18next.t(DetailCode[l].TEXT)),r.find(".js-project-selectable-header").css({display:"inline-block"})}}})}))}function o(){var e=r.find(".share-header");if(0===s.length)return r.removeClass("share-wr"),r.find(".create-post-header").css("display","block"),void e.css("display","none");var t=s[0],n=t.TTL+(1<s.length?" 외 "+(s.length-1)+"개":""),o=t.COLABO_SRNO;PostPopup.setData({PROJECT_SRNO:o}),r.addClass("share-wr"),r.find(".create-post-header").css("display","none"),e.css("display","block"),e.find(".project-ttl").text(n),ListHelper.removeAllColorClass(e.find(".color-code")),e.find(".color-code").addClass("color-code-"+t.BG_COLOR_CD)}function u(e,t){e.css("display",t?"none":"table"),r.css("display",t?"block":"none")}function p(e){var t,n=$(e.target);(0!==(t=n.findUp(".project-item")).length?(0<t.find(".edit-check.disabled").length||(function(e){(e.find(".check-menu-item").hasClass("on")?function(e){var n=e.attr("colabo-srno");s.forEach(function(e,t){e.COLABO_SRNO===n&&s.splice(t,1)}),e.find(".check-menu-item").removeClass("on")}:function(e){1===i&&O();if(s.length>=i)return Often.toast("info",i18next.t("front.SpaceSelectable.maximumProject",{count:i}));s.push({COLABO_SRNO:e.attr("colabo-srno"),TTL:e.find(".share-project-ttl").text(),BG_COLOR_CD:e.find(".color-code").attr("data-color")}),e.find(".check-menu-item").addClass("on")})(e)}(t),a.find(".js-project-select").css("display",0<s.length?"block":"none"),a.find(".select-count").text(s.length)),1):function(){if(0===n.findUp(".btn-submit").length)return!1;var e=l===DetailCode.SHARE_POST.CODE;if(0===s.length&&e)return Often.toast("info",i18next.t("front.alert.select",{val:"$t(dictionary.project)"}));return o(),function(e){if(0===s.length)return r.find(".share-contents").addClass("create-post-container").removeClass("share-contents");r.find(".create-post-container").addClass("share-contents").removeClass("create-post-container"),e&&r.find(".manager-btn-group").html("<em>"+i18next.t("front.spaceSelectable.cannotSetManager")+"</em>")}(e),u(a,!0),!0}())||function(){if(0===n.findUp(".btn-cancel").length)return!1;if(l===DetailCode.WRITE_ANYWHERE.CODE)return O(),o(),u(a,!0),!0;if(l===DetailCode.SHARE_POST.CODE)return $(".js-share-project-list").is(":visible")&&0<$(".js-share-project-list .on").length?PopupDraw.drawConfirm({contents:{main:"선택된 프로젝트가 있습니다.\n다른 프로젝트에 올리기를 취소하시겠습니까?"},callback:{submit:PostPopup.removePopup}}):PostPopup.removePopup(),!0}()||0===n.findUp(".select-clear").length||O()}function O(){s=[],a.find(".select-count").text(0),a.find(".js-project-select").css("display","none"),c.find(".check-menu-item").removeClass("on")}function C(t){e&&clearTimeout(e),e=setTimeout(function(){var e=$.trim($(t.target).val());ListHelper.initPageData(f),d(e),$(t.target).focus()},200)}function h(e){var o=$("#selectableProjectItem").html(),r="";return $.each(e,function(e,t){var n;r+=ListHelper.replaceJson(o,(_defineProperty(n={TTL:t.TTL,BG_COLOR_CD:t.BG_COLOR_CD,COLABO_SRNO:t.COLABO_SRNO},"BG_COLOR_CD",Often.null2Void(t.BG_COLOR_CD,"0")),_defineProperty(n,"check_yn",function(t,e){var n="";s.forEach(function(e){e.COLABO_SRNO===t&&(n="on")}),e&&(n="disabled");return n}(t.COLABO_SRNO,"Y"===Often.null2Void(t.MNGR_WR_YN,"N"))),n))}),r}}();
"use strict";var TaskReport={drawTaskReport:function(t){var e=$("#taskReportArea");if(e.empty(),e.find("#TASK_DONUT_CHART").empty(),t&&!(t&&0===t.length||t&&0===Number(t[0].TOTAL_CNT))){var a=t[0];a.TOTAL_CNT=Often.numberWithCommas(t[0].TOTAL_CNT);var r,o={},i={REQ:i18next.t("dictionary.request"),PROG:i18next.t("dictionary.progress"),FEDBK:i18next.t("dictionary.feedback"),COMP:i18next.t("dictionary.complete"),HOLD:i18next.t("dictionary.hold")},n={},s=0;for(r in i){var d=Number(a[r]);n[r]=Often.numberWithCommas(d),i[r]&&(o[i[r]]=d),n[r+"_NAME"]=i[r],n[r+"_PER"]=a[r+"_PER"],s+=Number(n[r+"_PER"])}100!==s&&(n.REQ_PER=Number(n.REQ_PER)+(100-s));var c=$("#taskReportItem").html(),t=$(ListHelper.replaceJson(c,$.extend(t[0],n)));e.empty(),e.append(t);t="Y"===LocalUtil.getLocalValue("CURRENT_PROJECT_SETTING","TASK_REPORT_VIEW_YN");e.find("#TASK_DONUT_CHART").empty(),function(e,a){graph.ready(["chart.builder"],function(t){t("#"+e,{padding:0,width:100,height:100,style:{tooltipBackgroundOpacity:1},axis:{data:[a]},brush:{type:"donut",size:10,colors:["#4aaefb","#50b766","#f17a19","#2e417e","#d2d3d6"]},widget:[{type:"tooltip",orient:"left"}]})})}("TASK_DONUT_CHART",o),t?(e.find(".reports-button").removeClass("off"),e.find(".js-task-report-layer").css("display","block")):(e.find(".reports-button").addClass("off"),e.find(".js-task-report-layer").css("display","none"))}},clickTaskReportLayer:function(t){t=$(t.target).parents(".task-chart-info");0!==t.length&&(LocalUtil.setLocal("TASK_REPORT",t.attr("data-code")),ViewChanger.loadPageJson({code:"task",first:Detail.getProjectSrno()}))}};
"use strict";var AllCalendar=function(){var D,l;return{openLayer:function(e){var t=""!==Often.null2Void(e);t&&DetailHeader.drawInitProjectHeader("calendar",e),(D=$("#"+(t?"detail":"all")+"CollectView .allCalendarLayer")).find("#scheduleAdd").text("+ "+i18next.t("front.common.add",{val:"$t(dictionary.schedule)"})).css("display",t?"block":"none"),l=Often.null2Void(e),function(){var e=Internationalization.getCurrentLanguage(),t="ko"===e?"ko":"en"===e?"en":"jp"===e?"jp":"",n=D.find("#calendar"),e=$('<div id="calendar" class="all-calendar all-calendar-nav layer-scroll"></div>');n.after(e),n.remove(),D.find("#calendar").fullCalendar({locale:t,header:{left:"prev,title,next",center:"",right:"month,agendaWeek,agendaDay,listMonth,today"},defaultDate:Tz.momentTimeZone(moment(),"type2"),nowIndicator:!0,navLinks:!0,viewRender:function(e){a(e.start,e.end.subtract(1,"days"))},editable:!1,eventLimit:!0,eventOrder:"gb",eventClick:function(e){var t=e.data,n=t.COLABO_SRNO,e=t.COLABO_COMMT_SRNO;t.GB===ScheduleCode.HOLIDAY||PostPopup.togglePostView(n,e,"",DetailEvent.applySummarySlickImage)},eventRender:function(e,t){e.data.GB!==ScheduleCode.HOLIDAY?"-1"!==e.data.BG_COLOR_CD&&(t.addClass("color-code-"+e.data.BG_COLOR_CD),"0"===e.data.BG_COLOR_CD&&t.css("color","#555555")):t.css("cursor","default")},windowResizeDelay:100})}(),D.find("#scheduleAdd").off("click").on("click",n),D.find(".js-calendar-search-input").off("keyup").on("keyup",function(e){KeyCheck.isKey(e,"ENTER")&&a()}),function(){var e,t=D.find(".fc-header-toolbar .fc-right");0===t.find(".select-wr").length&&((e=document.createElement("div")).classList.add("select-wr"),e.insertAdjacentHTML("afterbegin",'<select class="select-box">\n            <option value="month">'+i18next.t("date.string.month")+'</option>\n            <option value="agendaWeek">'+i18next.t("date.string.week")+'</option>\n            <option value="agendaDay">'+i18next.t("date.string.day")+'</option>\n            <option value="listMonth">'+i18next.t("dictionary.list")+"</option>\n        </select>"),t.append(e),$(".select-box").change(function(){$(".fc-"+this.value+"-button").trigger("click")}))}(),LeftFilter.openLeftFilter()},reloadCalendar:function(){a()}};function n(){var e="schd"===ViewChanger.getCurrentPageId()?"":Detail.getProjectSrno();PostPopup.openRegistrationView(e,DetailCode.SCHEDULE,!1)}function a(e,t){var n,a,i,o;ViewChanger.isPage("schd")&&(Loading.drawLoadingJson({CONTENTS:i18next.t("front.common.wait")}),n=""!==Often.null2Void(e,""),a=""!==Often.null2Void(t,""),i=D.find("#calendar").fullCalendar("getView"),o=CalendarFilter.getCalendarFilterJson(),e=n?e:i.start,t=a?t:i.end,o={FIRST_DT:Tz.momentTimeZone(e,"type12","input"),LAST_DT:Tz.momentTimeZone(t,"type12","input"),PROJECT_SCHD_FILTER:"-1"===o.scheduleFilter?"":"1"===o.scheduleFilter?"0,1":o.scheduleFilter,TASK_SCHD_FILTER:"-1"===o.taskFilter?"":o.taskFilter,COLABO_SRNO:l||""},Ajax.executeApi(RestApi.GET.COLABO2_SCHD_R005,o,r))}function r(e){var S,g;e.SCHD_REC&&0===e.SCHD_REC||(S=CalendarFilter.getCalendarFilterJson(),e=e.SCHD_REC,g=[],e&&0<e.length&&e.forEach(function(e){var t,n,a=e.GB===ScheduleCode.HOLIDAY,i=e.GB===ScheduleCode.GENERAL,o=e.GB===ScheduleCode.TASK,l="Y"===Often.null2Void(e.ALL_DAY_YN,"N"),r=-1<e.TTL.indexOf(D.find(".js-calendar-search-input").val()),d=ItemSchedule.getAttendInfo(e.ATTENDENCE_REC),c="1"!==S.scheduleFilter||d.isAttend,T=Tz.momentTimeZone(e.STTG_DTTM,i&&l?"type2":"","input"),s=Tz.momentTimeZone(e.FNSH_DTTM,i&&l?"type2":"","input"),u=0<e.PB_SALES_SRNO&&"Y"===e.OFFICIAL_YN,m="Y"===e.COMPLETE_YN,f=""!==Often.null2Void(e.STTG_DTTM,""),C=""!==Often.null2Void(e.FNSH_DTTM,""),p=Tz.momentTimeZone(e.STTG_DTTM)===e.STTG_DTTM.substr(0,14),_=Tz.momentTimeZone(e.FNSH_DTTM)===e.FNSH_DTTM.substr(0,14),d={title:e.TTL,allDay:l,start:T,end:s,color:a?"#a60602":"",gb:a?"a":i?"c":"b",editable:!1,data:e};if(i&&r&&c)u&&(d.title=(m?"[활동완료]":"[활동미완료]")+d.title);else if(o&&r){if(d.allDay="Y"===e.ALL_DAY_YN,d.title=(r=e.STTS,"["+i18next.t(TaskCode.OPTION._GB_NM[Number(r)])+"] "+e.TTL),!f&&!C)return;f&&!C?(t=p?Tz.momentConversion("current","type2"):Tz.momentTimeZone(e.STTG_DTTM,"type2","input"),d.start=t,d.end=t):(!f&&C?(n=Tz.momentTimeZone(_?Tz.momentConversion("current"):e.FNSH_DTTM).format(i18next.t("date.format.type2",{lng:"ko"})),d.start=n):(t=p?Tz.momentConversion("current","type2"):Tz.momentTimeZone(e.STTG_DTTM,"type2","input"),n=Tz.momentTimeZone(_?Tz.momentConversion("current"):e.FNSH_DTTM).add(1,"days").format(i18next.t("date.format.type2",{lng:"ko"})),d.start=t),d.end=n)}else{if(!a)return;d.title=TemporaryTranslation.koreanHolidaysFilter(e.TTL)}g.push(d)}),D.find("#calendar").fullCalendar("removeEvents"),D.find("#calendar").fullCalendar("addEventSource",g),Loading.closeLoadingPop())}}();
"use strict";var AllFile=function(){var l,a,c,f,i,r,o,n,d,t,_,F,s,u,E={PG_NO:1,PG_PER_CNT:30,NEXT_YN:"Y"},L={PG_NO:1,PG_PER_CNT:30,NEXT_YN:"Y"};return{openLayer:function(e){d=e,(l=""!==Often.null2Void(d))&&DetailHeader.drawInitProjectHeader("file",d),t="-1",s=!0,f=$("#"+(l?"detail":"all")+"CollectView .allFileLayer"),i=f.find("#fileTypeFilter"),n=f.find("#fileItemArea"),r=f.find("#fileLayerUl"),o=f.find("#fileLayerProjectMenu"),f.find("#fileItemUlHead"),f.find("#addFolder").text("+ "+i18next.t("front.common.add",{val:"$t(dictionary.folder)"})).css("display",l?"inline-block":"none"),o.css("display",l?"inline-block":"none"),f.find(".all-file-file-name").css("margin-bottom",l?"0px":"-34px"),f.find(".all-file-project-title").css("display",l?"none":"block"),a=LocalUtil.getFileSetting(),c="board"===a?"boardTypeFileItem":"listTypeFileItem",F={SEARCH_ETS:"",SRCH_REC:[]},FileSearch.initSetting(f),FileFilter.initFileFilter($("#leftArea")),AllFileEvent.initSetting(),I(),$("body").attr("oncontextmenu","return false"),T(!1)},cudFolder:function(e,t,i){var l="C"===e,n="D"===e,e=l?RestApi.POST.COLABO2_FILE_FLD_C001:n?RestApi.DELETE.COLABO2_FILE_FLD_D001:RestApi.PUT.COLABO2_FILE_FLD_U001;t.packetOption=Ajax.OPTION.PREVENT_EXECUTE,Ajax.executeApi(e,t,function(e){l?(e=[$.extend({},t,{FILE_FLD_SRNO:e.FILE_FLD_SRNO,RGSR_NM:_USER_NM,RGSN_DTTM:e.RGSN_DTTM})],r.prepend(D(e))):n&&T(!1),R(r),"function"==typeof i&&i()})},isProjectFile:function(){return l},checkedFolder:function(){var i=[],e=f.find(".js-folder.on");return $.each(e,function(e,t){i.push({FILE_FLD_SRNO:$(t).attr("file-fld-srno")})}),i},getCheckedFileJson:function(e){e=""===Often.null2Void(e,"")?f.find(".js-file-"+a+".on"):e;return Often.getAttrs(e)},getCheckedDownloadFileJson:function(){var e=f.find(".js-file-"+a+".on.no-external");return Often.getAttrs(e)},checkEmptyFileLayerUl:R,getFileProjectData:function(){return{COLABO_SRNO:d,FILE_FLD_SRNO:t}},searchFileList:function(){ListHelper.initPageData(L),ListHelper.initPageData(E),p("DOWN_ONE_DEPTH")},drawInitList:T,getFileMode:function(){return F},drawListByFilter:function(){var e;m(),l&&FileFilter.isTotalFilter(i)?(e=$.extend({},L,A("DOWN_ONE_DEPTH"),FileSearch.getFileFilterJson(f,!0),g()),Ajax.executeApi(RestApi.GET.COLABO2_FILE_FLD_R001,e,function(e){O(e.FLD_REC)})):O()},setLastFileFolderSrno:function(e){t=e},getLastFileFolderSrno:function(){return Often.null2Void(t,"-1")},getFileProjectSrno:function(){return d},setIsNewFileRecord:function(e){s=e},getFolderDepth:function(){return _},setViewTypeClass:function(e){c=(a=e)+"TypeFileItem"},getViewTypeClass:function(){return a}};function p(e){if(u=!0,l&&FileFilter.isTotalFilter(i))return t=Often.null2Void(e,"DOWN_ONE_DEPTH"),e=$.extend({},L,A(t),FileSearch.getFileFilterJson(f,!0),g()),Ajax.executeApi(RestApi.GET.COLABO2_FILE_FLD_R001,e,function(e){return"UP_DIRECTORY"===t?function(e){I(),_=e.length;var i=f.find("#headerFolderItem").html(),l="",n="",r="";1<_&&(l+=f.find("#headerMoreItem").html(),r=f.find("#headerMorePopupLiItme").html());$.each(e,function(e,t){t={"folder-depth-class":e+2,"folder-depth":t.DEPTH,"colabo-srno":d,"file-fld-srno":t.FILE_FLD_SRNO,"folder-name":TagUtil.tag2html(t.FILE_FLD_NM)};!(_-1===e)&&1<_?n+=ListHelper.replaceJson(r,t):l+=ListHelper.replaceJson(i,t)});e=$(l.replace("{more-folder-list}",n));return e.find("#moreFolderLayer").css("top",-35*_),o.append(e)}(e.FLD_REC):void O(e.FLD_REC)}),0;var t;O()}function T(e){m(),e&&p("UP_DIRECTORY"),p("DOWN_ONE_DEPTH")}function O(t){var e,i;t=Array.isArray(t)?t:[],"N"!==E.NEXT_YN&&(s=!0,e=FileSearch.getFileFilterJson(f,!1,1<E.PG_NO),i=g(),i=$.extend({},E,A(),e,i),Ajax.executeApi(RenewalApi.GET.ACT_FILE_LIST,i,function(e){1===E.PG_NO&&FileDragAndDrop.addFileDragAndDrop(r,l),r.drawListHelper({pageData:E,noDataHtml:ListHelper.getNoDataHtml(u?"SEARCH":"FILE"),nextYn:e.NEXT_YN,records:[{FOLDER:t,FILE:e&&e.ATCH_REC}],callback:{item:N,scroll:O,click:AllFileEvent.clickFile,dblclick:AllFileEvent.doubleClick}})}))}function N(e){if(e&&0!==e.length){var t="",i=e[0],e=i.FOLDER,i=i.FILE;return t+=D(e),t+=function(e){if(!e||0===e.length)return"";var n="",r=f.find("#"+c).html(),o=SearchFilter.getSearchWord(searchAreaCode.IN_FILE);return $.each(e,function(e,t){var i=Often.null2Void(t.THUM_IMG_PATH,""),l=524288<t.FILE_SIZE&&-1===t.RAND_KEY.indexOf("FLOW_");n+=ListHelper.replaceJson(r,$.extend({},t,{view_type_class_name:function(e,t,i){if(!i&&"board"===a&&e.THUM_IMG_PATH)return t+"thumbnail";var l="Y"===Often.null2Void(e.DRM_YN,"N"),i=FileUtil.getFileName(e);return t+(l?"lock-":"")+FileUtil.getIconClassNameByFullName(Often.null2Void(e.RAND_KEY,e.FILE_TYPE),i)}(t,"all-file-extension-",l),file_fld_srno:Often.null2Void(t.FILE_FLD_SRNO,"-1"),thumbnail_url:ImageUtil.isImageType(t)&&!l?ListHelper.setThumbnailImage(i):"",data_file_size:t.FILE_SIZE,file_size:FileUtil.getFileSize(t.FILE_SIZE),date:Tz.momentTimeZone(t.RGSN_DTTM,"type1"),file_index_code:(i=e,e=E,s?Number(i)+(Number(e.PG_NO)-1)*Number(e.PG_PER_CNT):i),"mouseover-text":FileUtil.getFileName(t),DATA_ORCP_FILE_NM:FileUtil.getFileName(t),ORCP_FILE_NM:TagUtil.text2highlight("SEARCH2",TagUtil.tag2html(t.ORCP_FILE_NM),o),IMG_PATH:t.ATCH_URL,PROJECT_TITLE:Often.null2Void(t.TTL,"EMPTY POST NAME"),download_yn:"GOOGLEDRIVE"!==t.RAND_KEY&&"DROPBOX"!==t.RAND_KEY?"no-external":"external"}))}),n}(i)}}function D(e){if(!e||0===e.length)return"";var i="",l=$("#"+("board"===a?"boardTypeFolderItem":"listTypeFolderItem")).html();return $.each(e,function(e,t){i+=ListHelper.replaceJson(l,{"view-type-class-name":"all-file-folder-type-"+("board"===a?"1":"2"),"colabo-srno":d,"file-fld-srno":t.FILE_FLD_SRNO,"up-file-fld-srno":Often.null2Void(t.UP_FILE_FLD_SRNO,"-1"),"file-name":Often.null2Void(t.FILE_FLD_NM),"file-size":"-","rgsr-nm":t.RGSR_NM,"rgsn-dttm":Tz.momentTimeZone(Often.null2Void(t.EDTR_DTTM,t.RGSN_DTTM),"type1")})}),i}function m(){ListHelper.initPageData(L,r),ListHelper.initPageData(E,r),u=!1}function R(e){0!==e.find(".js-file-"+a).length?e.find(".js-project-null").is(":visible")&&e.find(".js-project-null").remove():e.prepend(ListHelper.getNoDataHtml("FILE"))}function I(){var e=$("#fileLayerTitleItem").html();o.empty(),o.append(ListHelper.replaceJson(e,{"project-title":l?TagUtil.tag2html($("#projectTitle").text()):'<fmt:message key="dictionary.all"/>',"project-color":$("#projectColor").attr("class"),"project-color-display":ListHelper.setDisplay(l,"inline-block"),"project-srno":ViewChanger.getProjectSrno(),"file-fld-srno":"-1"}))}function g(){var e={SORT_DESC:(t=n.find(".js-sort-file.check:visible")).attr("data-sort-code")+","+(t.hasClass("on")?"1":"0")},t=FileFilter.getFileTypeOnFilter(i);return e.SEARCH_ETS=FileSearch.getTotalFileType(Often.null2Void(t,"TOTAL")),e}function A(e){return{MODE:Often.null2Void(e,"DOWN_ONE_DEPTH"),COLABO_SRNO:d,FILE_FLD_SRNO:Often.null2Void(t,"-1")}}}();
"use strict";var AllLabel=function(){return{drawLeftLabelList:n,drawProjectLabelList:function(e){var n=ViewChanger.isPage("main")||ViewChanger.isPage("label")?"allProjLabel":"detailProjLabel";t(e,function(e,t){e.append(s(n,t.COLABO_FLD_REC)),e.off("click").on("click",function(e){e=$(e.target).findUp(".label-item");0!==e.length&&((e=e.find(".js-check-label")).hasClass("flow-content-check-type-3")?e.removeClass("flow-content-check-type-3").addClass("flow-content-check-type-1"):e.toggleClass("flow-content-check-type-1").toggleClass("flow-content-check-type-2"))})})},clickAllLabelLeftButton:function(e){var t=$(e.target),e=t.findUp(".left-menu-item");if(t.findUp(".js-label-add").hasClass("js-label-add"))return void PopupDraw.drawInputConfirm({await:!0,contents:{title:i18next.t("front.common.createProjectFolder"),holder:i18next.t("front.alert.enterWord",{val:Interpolation.addName("front.common.projectFolder")}),empty:i18next.t("front.alert.enterWord",{val:Interpolation.addName("front.common.projectFolder")}),over:i18next.t("front.alert.inputLimit",{subject:Interpolation.addName("front.common.projectFolder"),length:50})},callback:{submit:function(e){var t=e.find(".popup-input"),e=$.trim(t.val());r(t)||c("C",e,"",PopupDraw.closePopup)},keyup:i}});e.toggleClass("active");t=e.hasClass("active");LocalUtil.setLocalValue("ONLY_LEFT_FOLD_SETTING","LABEL",t?"Y":"N");e=$("#allLabelUl");t&&0===e.find("li").length?n():e.slideToggle()},clearLayer:a};function n(){var e=$("#allLabelUl"),n=$("#allLabelLeftButton");t(e,function(e,t){e.append(s("LEFT-LABEL",t.COLABO_FLD_REC)),0===e.find("li").length?n.find(".ico-arrow").addClass("d-none"):n.find(".ico-arrow").removeClass("d-none"),e.is(":visible")||n.find(".label-tab").removeClass("on")}),e.off("click").on("click",l),e.sortable({axis:"y",opacity:.6,update:function(){var e,n;Ajax.executeApi(RestApi.PUT.colabo_fld_u003,{FLD_REC:(e=$("#allLabelUl").children(".label-item"),n=[],$.each(e,function(e,t){n.push({COLABO_FLD_SRNO:$(t).attr("label-srno"),OTPT_SQNC:++e})}),n)},function(){Often.toast("success",i18next.t("front.alert.successfullyChange",{status:"$t(dictionary.change)"}))})}})}function t(t,n){t.empty(),Ajax.executeApi(RestApi.GET.COLABO2_FLD_L102,{},function(e){e.COLABO_FLD_REC&&0!==e.COLABO_FLD_REC.length&&"function"==typeof n&&n(t,e)})}function s(e,t){var r,i,c="",s=$("#labelSelectItem").html();if("allProjLabel"===e){var f=n(!0);return $.each(t,function(e,t){var n,l,a,o;""!==$.trim(t.COLABO_FLD_NM)&&(r="3"===Often.null2Void(t.COLABO_FLD_KIND),o=f,l=t.COLABO_FLD_SRNO,a=0,o.forEach(function(e){e===l&&(a+=1)}),o=(n=a)===$("#projectHomeLayer").find(".flow-content-chk-1").findUp(".project-item").length,i="flow-content-check-type-"+(0===n?1:o?2:3),r&&(c+=L(s,t,i)))}),c}if("detailProjLabel"===e){f=n(!1);return $.each(t,function(e,t){var n;""!==$.trim(t.COLABO_FLD_NM)&&(r="3"===Often.null2Void(t.COLABO_FLD_KIND),n=f.includes(t.COLABO_FLD_SRNO),i="flow-content-check-type-"+(n?2:1),r&&(c+=L(s,t,i)))}),c}if("LEFT-LABEL"===e){var s=$("#labelItem").html(),l=Often.null2Void($("#allLabelLeftButton").attr("data-select-label-srno"));return $.each(t,function(e,t){""!==$.trim(t.COLABO_FLD_NM)&&(r="3"===Often.null2Void(t.COLABO_FLD_KIND))&&(c+=L(s,t,"left"))}),c}function n(e){var n=[];if(e){var t=$("#projectHomeLayer").find(".flow-content-chk-1").findUp(".project-item");return $.each(t,function(e,t){t=$(t).attr("label-srnos");0!==t.length&&(n=n.concat(t.split(",")))}),n}t=LocalUtil.getLocalValue("CURRENT_PROJECT_SETTING","LABEL_SRNOS");return n=""!==t?Often.null2Void(t).split(","):n}function L(e,t,n){return"left"===n?ListHelper.replaceJson(e,{"label-number":t.COLABO_FLD_SRNO,"label-name":t.COLABO_FLD_NM,active:l===t.COLABO_FLD_SRNO?"flow-active":""}):ListHelper.replaceJson(e,{ICO_CODE:t.ICO_CODE,COLABO_FLD_KIND:t.COLABO_FLD_KIND,COLABO_FLD_NM:t.COLABO_FLD_NM,COLABO_FLD_SRNO:t.COLABO_FLD_SRNO,FLOW_CONTENT_CHECK:n})}}function l(e){var t=$(e.target),n=t.findUp("#leftScroll"),l=t.hasClass("flow-dash-three"),a=0<t.findUp(".setting-popup").length,t=t.findUp(".label-item");if(a)return!1;if(l){a=n.next(".js-label-setting-layer").is(":visible"),l=n.next(".js-label-setting-layer"),n=l.attr("label_srno")===t.attr("label-srno");return(a=a&&n)?void l.attr({label_srno:"",label_text:""}).css({display:"none"}):(l.attr({label_srno:t.attr("label-srno"),label_text:t.find(".js-label-name").text()}),l.css({display:"block",transform:"translate("+e.pageX+"px, "+e.pageY+"px)",top:-58-Number($("#topBanner").css("height").replace("px",""))+"px",left:"10px"}),void l.off("click").on("click",o))}0!==t.length&&ViewChanger.loadPageJson({code:"label",first:t.attr("label-srno"),second:t.find(".js-label-name").text()})}function a(){var e=$(".js-label-setting-layer");e.is(":visible")&&e.css("display","none")}function o(e){var e=$(e.target),n=e.hasClass("label-edit")||0<e.parents(".label-edit").length,e=$("#leftScroll").next(".js-label-setting-layer"),l=Often.null2Void(e.attr("label_srno")),e=Often.null2Void(e.attr("label_text"));function t(e){var t=e.find(".popup-input"),e=n?$.trim(t.val()):"";if(!n)return c("D",e,l,PopupDraw.closePopup);r(t)||c("U",e,l,PopupDraw.closePopup)}a(),n?PopupDraw.drawInputConfirm({contents:{title:i18next.t("front.common.editProjcetFolder"),holder:i18next.t("front.allLabel.addLabelPlaceHolder"),value:e,empty:i18next.t("front.alert.enterWord",{val:Interpolation.addName("front.common.projectFolder")}),over:i18next.t("front.alert.inputLimit",{subject:Interpolation.addName("front.common.projectFolder"),length:50})},callback:{submit:t,keyup:i}}):PopupDraw.drawConfirm({mini:!0,contents:{main:i18next.t("front.alert.removeLabel")},callback:{submit:t}})}function r(e){e=Validation.checkInput(e);return 0!==Object.keys(e).length&&(Often.toast("error",e.errorMessage),e.errorObj.focus(),1)}function i(e){Validation.checkInput($(e.target),!0)}function c(e,l,a,o){var r=$("#allLabelLeftButton"),i="C"===e,c="D"===e,e=i?RestApi.POST.COLABO2_FLD_C101:c?RestApi.DELETE.COLABO2_FLD_D101:RestApi.PUT.COLABO2_FLD_U101;Ajax.executeApi(e,{COLABO_FLD_SRNO:i?"":a,COLABO_FLD_NM:c?"":l,packetOption:Ajax.OPTION.PREVENT_EXECUTE},function(e){var t,n=$("#label-"+a);i?(Often.toast("success",i18next.t("front.alert.successfullyChange",{status:"$t(dictionary.register)"})),$("#allLabelUl").prepend(s("LEFT-LABEL",[{COLABO_FLD_KIND:"3",COLABO_FLD_NM:l,COLABO_FLD_SRNO:e.COLABO_FLD_SRNO}])),r.find(".ico-arrow").removeClass("d-none")):c?(Often.toast("success",i18next.t("front.alert.successfullyChange",{status:"$t(dictionary.delete)"})),n.remove(),0===$("#allLabelUl").find("li").length&&r.find(".ico-arrow").addClass("d-none"),"label"===(t=ViewChanger.getCurrentPageId().split("/"))[0]&&t[1]===a&&ViewChanger.loadPageJson({code:"main"})):(Often.toast("success",i18next.t("front.alert.successfullyChange",{status:"$t(dictionary.edit)"})),t=l,(n=n).find(".js-label-name").text(t).attr("mouseover-text",t),ViewChanger.isPage("label")&&((n=$("#mainTop").find("div")).empty(),n.append('<i class="title-icon label"></i>'),n.append(i18next.t("front.common.projectFolder")+" - ["+t+"]"))),"function"==typeof o&&o()})}}();
"use strict";var AllPosts=function(){var n,i,a,s,l,o,r,c,f,d,p,u,O={PG_NO:1,PG_PER_CNT:20,NEXT_YN:"Y"},h={CHECK_DTTM:"",PG_PER_CNT:20,NEXT_YN:"Y"};return{openLayer:function(t,e){if(S(),u=t,e&&a.is(":visible"))return m();a.css("display","none"),a.attr({"data-code":t,"data-search-area-code":"IN_POSTS"}),function(t){i.off(),ListHelper.initPageData(O,t?"":i),C(),SearchFilter.drawSearchCount(n.find(".js-search-post-count"),0)}(e),E(),function(){function e(){C(),a.fadeOut(200)}l.off("click").on("click",function(t){var e=$(t.target),n=e.findUp(".js-all-posts-filter-button"),t=e.findUp(".js-tmpl-type");if(0<n.length){e=n.next();return e.is(":visible")?T():(n.addClass("active"),void e.fadeIn(200))}0<t.length&&(P(t),ListHelper.initPageData(O),E(),T())}),r.off("click").on("click",function(){s.is(":visible")?_():(SearchFilter.initFilter(s,searchMode.POST,!0),SearchFilter.addEventOnSearchFilter(s,R,!0),s.fadeIn(200))}),c.off("click").on("click",e),f.off("click").on("click",function(){l.find(".js-tmpl-type").removeClass("on"),n.find(".js-all-posts-filter-button").removeClass("active"),l.find('.check-menu-item[data-code=""]').addClass("on"),ListHelper.initPageData(O),E(),f.css("display","none"),n.find("#allPostsFilterTitle").text(i18next.t("dictionary.all"))}),o.off("keyup").on("keyup",function(t){KeyCheck.isKey(t,"ENTER")&&R(),KeyCheck.isKey(t,"ESC")&&e()})}()},getBookmarkNoDataHtml:N,closeAllPostsFilter:T,closeAllPostsDetailSearchLayer:_};function S(){n=$("#allPostsLayer"),o=n.find("#allPostsSearchInput"),r=n.find("#allPostsDetailSearchTopButton"),s=n.find("#allPostsDetailSearchLayer"),c=n.find(".js-search-back-button.js-all-posts-back"),f=n.find(".js-filter-reset"),i=n.find("#myPostContentUl"),l=n.find("#allPostsFilter"),a=n.find(".js-post-search-result"),n.find("#allPostsSearchFilter")}function C(){o.val("");var t="BOOKMARK"===u?"none":"block";s.find(".js-remark-tmpl-type").css("display",t),l.find(".js-remark-tmpl-type").css("display",t),P(l.find(".js-total-tmpl-type")),SearchFilter.initFilter(a,searchMode.POST),SearchFilter.initFilter(s,searchMode.POST),c.css("display","none"),n.find(".js-filter-reset").css("display","none")}function _(t){t&&"allPostsSearchInput"===t.attr("id")||t&&0<t.parents(".flatpickr-calendar").length||(S(),s.fadeOut(200))}function P(t){l.find(".js-tmpl-type").removeClass("on"),t.addClass("on"),n.find("#allPostsFilterTitle").text(t.text());t=""===t.attr("data-code");n.find(".js-filter-reset").css("display",t?"none":"inline-block"),t?n.find(".js-all-posts-filter-button").removeClass("active"):n.find(".js-all-posts-filter-button").addClass("active")}function T(){S(),l.find(".js-all-posts-filter-layer").fadeOut(200)}function N(){return ListHelper.getNoDataHtml(u)}function E(){var t;"N"!==O.NEXT_YN&&(1===O.PG_NO&&n.find("#postCount").text(0),t=Often.null2Void(l.find(".js-tmpl-type.on").attr("data-code")),Ajax.executeApi(RenewalApi.GET.ACT_POST_LIST,$.extend({GUBUN:u,TMPL_TYPE:t,packetOption:Ajax.OPTION.PREVENT_EXECUTE},O),function(e){i.drawListHelper({pageData:O,nextYn:e.NEXT_YN,records:e.POST_RECORD,noDataHtml:N(),targetObj:{focus:o,scroll:i},callback:{click:k,item:A,scroll:E,final:function(){var t;t=Number(n.find("#postCount").text().replace("+","")),n.find("#postCount").text(t+e.POST_RECORD.length+("Y"===e.NEXT_YN?"+":"")),i.hasVerticalScrollBar()||E()}}})}))}function R(){SearchFilter.setSearchFilter(s,a,searchMode.POST),_(),a.css("display","block"),ListHelper.initPageData(h,a.find(".js-search-post-ul")),t(),SearchFilter.drawSearchCount(n.find(".js-search-post-count"),0),SearchFilter.addEventOnSearchFilter(a,m,!1),g()}function m(){t(),ListHelper.initPageData(h),g()}function g(e){var l;"N"!==Often.null2Void(h.NEXT_YN,"Y")&&(l=SearchFilter.getSearchWord(searchAreaCode.IN_POSTS),Ajax.executeApi(RenewalApi.GET.ACT_SEARCH_POST_N_REMARK_LIST,$.extend({packetOption:Ajax.OPTION.PREVENT_CALLBACK,GUBUN:u,COLABO_COMMT_SRNO:Often.null2Void(d),COLABO_REMARK_SRNO:Often.null2Void(p),SEARCH_RECORD:[$.extend({SRCH_WORD:l,ORDER_TYPE:"A"},SearchFilter.getFilterJson(a,s.is(":visible")))]},h),function(t){1===h.PG_NO&&c.css("display","block"),e||SearchFilter.drawSearchCount(n.find(".js-search-post-count"),t.CNT),d=t.COLABO_COMMT_SRNO,p=t.COLABO_REMARK_SRNO,a.find(".js-search-post-ul").drawListHelper({pageData:h,checkDttm:t.CHECK_DTTM,nextYn:t.NEXT_YN,records:t.RESULT_RECORD,noDataHtml:ListHelper.getNoDataHtml("SEARCH"),targetObj:{focus:o},callback:{click:k,item:function(t){return t=t,n=l,i="",a=$("#allPostSearchItem").html(),$.each(t,function(t,e){i+=ListHelper.replaceJson(a,$.extend(e,JsonMaker.getListComponentInfo(e,n)))}),i;var n,i,a},scroll:function(){g(!0)}}})}))}function k(t){var e=$(t.target).findUp(".js-all-post-item");0!==e.length&&(LimitGuest.isSearchLimitGuest("post",e.attr("rgsn_dttm"))||(t=Often.getAttrs(e)[0],PostPopup.togglePostView(t.COLABO_SRNO,t.COLABO_COMMT_SRNO,t.COLABO_REMARK_SRNO,function(){i.find(".highlight").removeClass("highlight"),e.addClass("highlight")})))}function A(t){var n="",i=$("#allPostItem").html();return $.each(t,function(t,e){n+=ListHelper.replaceJson(i,$.extend(e,JsonMaker.getListComponentInfo(e)))}),n}function t(){p=d=""}}();
"use strict";var AllProject=function(){var o,a,L,E={PG_NO:1,PG_PER_CNT:100,NEXT_YN:"Y"},n={MAIN:"MAIN",STAR_FIRST:"STAR_FIRST",COMBINE:"COMBINE",LABEL:"LABEL",NOKEEP:"NOKEEP",UNREAD:"UNREAD",STAR:"STAR",HIDDEN:"HIDDEN"},p=!1,r={};return{getProjectMode:function(){return n},showList:c,getProjectItems:_,clickProjectItems:O};function c(t){r=t||r,L="Y"===LocalUtil.getLocalValue("ONLY_USER_SETTING","IMPT_USE_YN"),r.MODE===n.MAIN?(r.MODE=L?n.STAR_FIRST:n.COMBINE,r.IS_MAIN=!0):r.MODE===n.STAR_FIRST||r.MODE===n.COMBINE?r.IS_MAIN=!0:r.IS_MAIN=!1,o=!_IsMini&&"1"===LocalUtil.getLocalValue("ONLY_USER_SETTING","LIST_VIEW_CD"),a=o?"Board":"List",ListHelper.initPageData(E,r.IS_NOT_EMPTY||r.BADGE_UPDATE?"":$("#project"+a+"Ul")),l(),$("#ListArea").css("display",o?"none":"block"),_IsMini||($("#BoardArea").css("display",o?"block":"none"),ProjectSetting.setProjectFilter(o),AlarmUpdate.drawTopNotReadCount(!1),r.IS_MAIN&&JoinProject.drawJoinProjectCount())}function l(){var t,e,i,s;"N"!==E.NEXT_YN&&(t=LocalUtil.getProjectOrder(),e="1"===LocalUtil.getProjectFilter(),i=$("#project"+a+"Ul"),s=1===E.PG_NO,Ajax.executeApi(RenewalApi.GET.ACT_PROJECT_LIST,$.extend({},E,function(t){if(!t)return{COLABO_FLD_KIND:"1",COLABO_FLD_SRNO:"9",MODE:"ALL"};switch(t.MODE){case n.STAR_FIRST:return{COLABO_FLD_KIND:"1",COLABO_FLD_SRNO:"9",MODE:"ALL"};case n.COMBINE:return{COLABO_FLD_KIND:"1",COLABO_FLD_SRNO:"10",MODE:"COMBINE"};case n.LABEL:return{COLABO_FLD_KIND:"3",COLABO_FLD_SRNO:t.LABEL_SRNO,MODE:"LABEL"};case n.NOKEEP:return{COLABO_FLD_KIND:"1",COLABO_FLD_SRNO:"2",MODE:"NOKEEP"};case n.STAR:return{COLABO_FLD_KIND:"1",COLABO_FLD_SRNO:"3",MODE:"STAR"};case n.HIDDEN:return{COLABO_FLD_KIND:"1",COLABO_FLD_SRNO:"4",MODE:"HIDDEN"};case n.UNREAD:return{COLABO_FLD_KIND:"1",COLABO_FLD_SRNO:"5",MODE:"UNREAD"};default:return{COLABO_FLD_KIND:"1",COLABO_FLD_SRNO:"9",MODE:"ALL"}}}(r),{MNGR_YN:e?"Y":"N",SORT_DESC:t,packetOption:s?Ajax.OPTION.PREVENT_CALLBACK:Ajax.OPTION.ALLOW_EXECUTE}),function(t){i.drawListHelper({pageData:E,nextYn:t.NEXT_YN,records:t.PROJECT_RECORD,noDataHtml:ListHelper.getNoDataHtml(Often.null2Void(r.MODE)),targetObj:{scroll:_IsMini?$("#ListArea"):$("#mainContent")},callback:{click:O,dblclick:O,item:function(t){return _(t,!1,r.IS_MAIN)},scroll:l,final:function(){o||_IsMini||i.addClass("section-list-1")}}})}))}function _(t,e,_){var O="",N=$("#allProject"+(e?"List":a)+"Item").html();return _IsMini&&(N=$("#allProjectListItem").html()),p=0<$("#project"+a+"Ul").find(".js-project-section.section-2").length,$.each(t,function(t,e){var i,s="0"!==Often.null2Void(e.BADGE_CNT,"0"),n="Y"===Often.null2Void(e.PUSH_ALAM_YN,"Y"),l="Y"===Often.null2Void(e.OPEN_YN,"Y"),o="Y"===Often.null2Void(e.JNNG_ATHZ_YN,"N"),a="Y"===Often.null2Void(e.CMNM_YN,"N"),r="Y"===Often.null2Void(e.IMPT_YN,"N"),c="";0===t&&1===E.PG_NO&&(ViewChanger.isPage("main")||_IsMini?r&&(i=i18next.t("dictionary.favorite"),_IsMini?c+='<ul class="mini-right-section-title js-non-search-item js-label-section">'+(_&&L?i:"")+"</ul>":c+='<div class="section-1 js-project-section js-label-section"><p class="project-class">'+(_&&L?i:"")+"</p></div>"):c+='<div class="section-1 js-project-section js-label-section"><p class="project-class"></p></div>'),!_||L&&r||p||(p=!0,i=i18next.t("front.main.myProject"),_IsMini?c+='<ul class="mini-right-section-title js-non-search-item js-label-section" id="miniUnstarLine">'+i+"</ul>":c+='<div class="section-2 middle-line js-project-section js-label-section"><p class="project-class join">'+i+"</p></div>"),O+=ListHelper.replaceJson(N,{label:c,title:e.TTL,label_srnos:e.COLABO_FLD_SRNOS,"project-number1":e.COLABO_SRNO,"project-number2":e.COLABO_SRNO,"member-count":e.SENDIENCE_CNT,"color-code":Often.null2Void(e.BG_COLOR_CD,"0"),"badge-count":ListHelper.limitNum2PlusNum(e.BADGE_CNT),"badge-display":ListHelper.setDisplay(s,"inline-block"),"push-display":ListHelper.setDisplay(!n,"inline-block"),"restrict-display":ListHelper.setDisplay(!n,"inline-block"),"open-project-display":ListHelper.setDisplay(l,"inline-block"),"company-display":ListHelper.setDisplay(a,"inline-block"),"manager-display":ListHelper.setDisplay(o,"inline-block"),"star-class":"flow-content-star"+(r?"":"-un"),"star2-class":"flow-content-star-2"+(r?"":"-un"),"mini-star-class":"star-type-1"+(r?"":"-un")})}),O}function O(t){var e=$(t.target),i=_IsMini?e.findUp(".mini-project-item"):e.findUp(".project-item"),s=_IsMini?e.hasClass("mini-project-star"):e.hasClass("project-star");if(Electron.isElectronApp()&&_IsMini&&"click"===t.type&&!s)return $(".mini-project-item").removeClass("on"),void $(t.target).addClass("on");if(ProjectSetting.isTotalProjectEditMode())ProjectSetting.selectEditProject(i);else if(s){var i=_IsMini?e.parents(".mini-project-item"):e.parents(".project-item"),n=_IsMini?e.hasClass("star-type-1-un"):e.hasClass("flow-content-star-2-un")||e.hasClass("flow-content-star-un"),l=Often.null2Void(i.attr("project-srno"),"");ProjectSetting.setProjectStar(l,!n,N)}else if(0<i.length){l=i.attr("project-srno"),t=Often.null2Void(i.attr("label-srnos"),""),s=(i=$("#project-"+l)).find(".project-ttl").text(),e=i.find(".color-code").attr("data-color"),n=i.find(".project-star").hasClass("flow-content-star-2")?"Y":"N",i=i.find(".member-cnt").text();if(LocalUtil.setLocalValue("CURRENT_PROJECT_SETTING","TTL",s),LocalUtil.setLocalValue("CURRENT_PROJECT_SETTING","BG_COLOR_CD",e),LocalUtil.setLocalValue("CURRENT_PROJECT_SETTING","IMPT_YN",n),LocalUtil.setLocalValue("CURRENT_PROJECT_SETTING","SENDIENCE_CNT",i),LocalUtil.setLocalValue("CURRENT_PROJECT_SETTING","LABEL_SRNOS",t),Electron.isElectronApp()&&_IsMini)return MiniProject.openProjectPage(l);ViewChanger.loadPageJson({code:"detail",first:l})}}function N(t){var e=$("#searchProjectListUl"),i=$("#"+a+"Area").find("#project-"+t),s=_IsMini?i.find(".mini-project-star"):i.find(".project-star"),n=_IsMini?"star-type-1-un":o?"flow-content-star-un":"flow-content-star-2-un",l=_IsMini?"star-type-1":"flow-content-star-2",i=s.hasClass(n),s=i?n:l,n=i?l:n;r.IS_NOT_EMPTY=!0,c(),e.is(":visible")&&e.find("#project-"+t+" .mini-project-star").removeClass(s).addClass(n)}}();
"use strict";var AllTask=function(){var a,u,T,i,f={PG_NO:1,PG_PER_CNT:30,NEXT_YN:"Y"};return{openLayer:function(t){T=""!==Often.null2Void(t),a=function(t){return(t?$("#detailCollectView"):$("#allCollectView")).find(".allTaskLayer")}(T),u=a.find("#taskContentUl"),ListHelper.initPageData(f,u),T&&DetailHeader.drawInitProjectHeader("task",t),CONNECT_PROJECT_SRNO=T?(f.COLABO_SRNO=t,t):(f.COLABO_SRNO="","");Often.isFunc("EXTEND_TASK_FILTER")&&$("#allTaskFilter .js-extend-task-filter").css("display","block");Often.isFunc("NARROW_ROW_TASK")&&a.addClass("narrow-row");a.find("li[view-gb='3']").css("display",T?"none":"block"),a.find(".js-task-add-btn").text("+ "+i18next.t("front.common.add",{val:"$t(dictionary.task)"})).css("display",T?"block":"none"),a.find("#ganttChartButton").css("display",Often.isFunc(Func.CLOUD.GANTT)?"block":"none"),e(),a.find(".js-task-add-btn").off("click").on("click",s),a.find("#taskFilterButton, .js-filter-area").off("click").on("click",TaskFilter.toggleTaskFilterButton),a.find("#ganttChartButton").off("click").on("click",function(){var t=Often.null2Void(f.COLABO_SRNO);OpenUtil.openGanttChart(t)}),a.find("#excelDownButton").off("click").on("click",TaskExcel.downAllTaskExcel),a.find("#taskSettingButton").off("click").on("click",n),a.find("#sortPopupButton").off("click").on("click",TaskSort.openSortPopup),a.find("#bundleButton").off("click").on("click",function(t){var e;0<$(t.target).findUp(".js-task-bundle-button").length&&(t=-(e=a.find("#bundleLayer")).outerWidth()-60,e.toggle().css("left",t))}),a.find("#bundleLayer").off("click").on("click",function(t){0<(t=$(t.target).findUp(".js-bundle-li")).length&&(t=t.attr("view-gb"),TaskFilter.updateTaskFilterByJson({VIEW_GB:t}),f.VIEW_GB=t,$(".js-alltask-setting-layer").css("display","none"),$(".js-task-search-input").focus())}),a.find(".js-task-search-input").off("keyup").on("keyup",TaskSearch.keydownSearchInput),a.find(".js-task-detail-search-button").off("click").on("click",TaskSearch.clickDetailSearchTopButton)},drawTaskListWithFilter:e,drawTaskInitList:function(t){ListHelper.initPageData(f,t?"":u),r()},closeBundleLayer:function(){$("#bundleButton").removeClass("active")},closeSettingLayer:l,searchTaskList:function(){ListHelper.initPageData(f),r()},setTaskJson:function(t,e){f[t]=e},removeTaskItem:function(t){var e=a.find("#allTask-"+t).filter(":visible"),n=1===u.find(".task-item").length,t=1===e.parent("ul").children(".task-item").length;return n?u.html(ListHelper.getNoDataHtml("TASK")):(t?e.parents("li.js-gubun-li"):e).remove()},changeTaskItem:function(t){var e=a.find("#allTask-"+t).filter(":visible"),t=PostPopup.getOnePostData();e.after(O($.extend({COLABO_SRNO:t.COLABO_SRNO,COLABO_COMMT_SRNO:t.COLABO_COMMT_SRNO},t.TASK_REC[0]))),e.remove()},getTotalTaskCount:function(){return Number(Often.null2Void(i,"0"))},getWorkerNameCommaArray:function(t){var n=[];return $.each(t,function(t,e){n.push(e.WORKER_NM)}),n.join()},getTaskApiJson:o,get$allTaskLayer:function(){return a}};function e(n){TaskSearch.initSetting(a),TaskSort.initSortHeader(a),TaskFilter.applyFilterOnOff(a),TaskFilter.getTaskFilter($("#leftArea"),function(t){"4"===t.VIEW_GB&&(t.VIEW_GB="0");var e=Often.null2Void(LocalUtil.getLocal("TASK_REPORT"));""!==e&&(t.FILTER_GB="3",t.FIL_STTS=e,t.FIL_START_DT_GUBUN="0",t.FIL_END_DT_GUBUN="0",t.FIL_PRIORITY="",LocalUtil.removeLocal("TASK_REPORT"));t="0"===(f=$.extend(f,TaskFilter.getTaskFilterJsonAfterDraw(a,t))).ORDER_VALUE;TaskSort.drawSortHeader(a,t,f.ORDER_TYPE,function(){r(n)})})}function n(t){var e=$(t.target).findUp(".js-alltask-setting-button").next(".js-alltask-setting-layer"),t=e.is(":visible");e.css("display",t?"none":"block"),t&&l()}function l(){$(".js-alltask-setting-layer").css("display","none"),$(".js-task-bundle-layer").css("display","none")}function s(){var t="task"===ViewChanger.getCurrentPageId()?"":Detail.getProjectSrno();PostPopup.openRegistrationView(t,DetailCode.TASK,!1)}function o(){var t=a.find(".js-task-detail-search-layer"),t=SearchFilter.getFilterJson(t,!0,1<f.PG_NO);return $.extend({packetOption:Ajax.OPTION.PREVENT_CALLBACK},f,{SEARCH_RECORD:[$.extend(t,{SRCH_WORD:SearchFilter.getSearchWord(searchAreaCode.IN_TASK)})]})}function r(t){var n;!t&&"N"===f.NEXT_YN||(n=1===f.PG_NO,Ajax.executeApi(RenewalApi.GET.ACT_TASK_LIST,o(),function(e){u.drawListHelper({pageData:f,nextYn:e.NEXT_YN,records:e.TASK_RECORD,noDataHtml:ListHelper.getNoDataHtml(""!==SearchFilter.getSearchWord(searchAreaCode.IN_TASK)?"SEARCH":"TASK"),callback:{item:c,scroll:r,click:d,final:function(){var t;n&&(a.removeClass("d-none"),(t=0<(i=e.TOTAL_COUNT))&&$(".js-collection-total-count").text(Often.numberWithCommas(i)),$("#"+(T?"projectCollectionCount":"allCollectionCount")).css("display",t?"inline-block":"none"))}}})}))}function O(t,e,n){e=e||$("#taskListItem").html(),n=n||TaskSort.getSortColumnHtml();var a="3"!==f.VIEW_GB,i=t.WORKER_RECORD||t.WORKER_REC,l=ItemTask.getWorkerCountJson(i),s=ListHelper.replaceJson(e,{LI_STTS:"2"===t.STTS||"3"===t.STTS?TaskCode.OPTION._GB[t.STTS]:"",COLUMN_LIST:n,COLABO_SRNO:t.COLABO_SRNO,COLABO_COMMT_SRNO:t.COLABO_COMMT_SRNO,TASK_SRNO:t.TASK_SRNO}),o="icons-"+DetailCode.PRIORITY._GB[t.PRIORITY],r=SearchFilter.getSearchWord(searchAreaCode.IN_TASK);return ListHelper.replaceJson(s,$.extend({},t,l,{PRJ_TTL:t.PRJ_TTL,STTS:TaskCode.OPTION._GB[t.STTS],STTS_TITLE:i18next.t(TaskCode.OPTION._GB_NM[t.STTS]),START_DT:Tz.momentTimeZone(t.START_DT,"type2"),END_DT:(e=t.END_DT,n=Tz.momentTimeZone(e,"type16"),s=Tz.isToday(n),l=Tz.isTimeExists(n),l=s&&l?"type21":"type2",""!==e?Tz.momentConversion("convertOnly",l,n):"-"),progress:ListHelper.setProgressBar(t.PROGRESS),PRIORITY_ICON:t.PRIORITY?o:"",PRIORITY:Often.null2Void(i18next.t(DetailCode.PRIORITY._TEXT[t.PRIORITY]),"-"),RGSN_DT:Tz.momentTimeZone(t.RGSN_DTTM,"type2"),EDTR_DT:Tz.momentTimeZone(t.EDTR_DTTM,"type2"),TASK_NM:TagUtil.text2highlight("SEARCH",t.TASK_NM,r),TASK_NUM:TagUtil.text2highlight("SEARCH",t.TASK_NUM,r),project_display:ListHelper.setDisplay(!T&&a,"block"),MOUSEOVER_TEXT:t.RGSR_NM,MOUSEOVER_WORKER_LIST:ItemTask.getWorkerListText(i),"subtask-display":ListHelper.setDisplay(0<Number(t.SUBTASK_CNT),"inline-block"),"progress-class":"100"===t.PROGRESS?"on":"","dead-line-class":Often.isDeadlineExceeded(t.END_DT)?"deadline-exceeded":""}))}function c(t){var n="",a="",i="",l="",s=TaskSort.getSortColumnHtml(),o="0"!==f.VIEW_GB,r=$("#taskListProjectItem").html(),T=$("#taskListItem").html(),c=!1,d="";return $.each(t,function(t,e){i=e.GUBUN,e.TASK_CNT=Often.numberWithCommas(e.TASK_CNT),o&&i!==l&&(n+=ListHelper.replaceJson(r,$.extend({},e,{TASK_UL:"{"+i+"}"})),0<t&&(n=n.replace("{"+l+"}",a),a="")),d=u.find(".js-gubun-li:last"),1<f.PG_NO&&i===d.attr("id")&&!c&&(a=d.find(".js-inner-task").html(),c=!0),o&&(l=i),a+=O(e,T,s)}),n=""===n?a:n.replace("{"+i+"}",a),c&&""!==d&&d.remove(),o?n:a}function d(t){t=$(t.target);!function(t){if(0===t.findUp(".js-gubun-button").length)return!1;var e=t.parents(".js-gubun-li").find(".js-inner-task");t.toggleClass("active"),t.hasClass("active")?e.slideUp():e.slideDown();return!0}(t)&&function(t){var e=t.findUp(".task-item");if(0===e.length)return;var n=e.attr("data-project-srno"),t=e.attr("data-post-srno");PostPopup.togglePostView(n,t,"",function(){$("#taskContentUl").find(".highlight").removeClass("highlight"),e.addClass("highlight")})}(t)}}();
"use strict";var LeftFilter=function(){var t,i;return{toggleLeftFilter:function(e){if(l(),t.is(":visible"))return s();n(e)},openLeftFilter:n,closeLeftFilter:s,initLeftFilterUl:a};function l(){t=$("#leftFilter"),i=$("#leftFilterBtn")}function n(e){t.addClass("active"),$("#leftTask").removeClass("active"),i.removeClass("open").addClass("close"),i.find("span").text(i18next.t("dictionary.close")),a(e),t.off("click").on("click",r)}function s(){l(),t.removeClass("active"),$("#leftTask").addClass("active"),i.removeClass("close").addClass("open"),t.find(".js-left-filter-ul").css("display","none"),i.find("span").text(i18next.t("dictionary.open"))}function a(e){l(),t.find(".js-left-filter-ul").css("display","none"),ViewChanger.isPage("schd")&&CalendarFilter.openCalendarFilter(),ViewChanger.isPage("task")&&TaskFilter.toggleTaskFilterButton(e),ViewChanger.isPage("file")&&FileFilter.toggleFilterButton(e)}function r(e){e=$(e.target);!function(e){e=e.findUp(".js-left-filter-item");if(0===e.length)return!1;e.hasClass("active")?(e.removeClass("active"),e.next().slideUp()):(e.addClass("active"),e.next().slideDown());return!0}(e)&&CalendarFilter.isCalendarFilterAndAction(e)}}();
"use strict";var OpenProject=function(){var e,n={PG_NO:1,PG_PER_CNT:30,NEXT_YN:"Y"},c="",i="",o="",a="",r="",l="",p="",f="",u="",s=0,N=0,t=0,_=0;return{getOpenCategory:function(t,e){"function"==typeof t&&t(),Ajax.executeApi(RestApi.GET.FLOW_PUB_CAT_R001,{},function(t){"function"==typeof e&&e(t.CATG_REC)})},openLayer:function(){e=$("#openProjectSearchInput"),c=$("#openProjectCategory"),i=$("#openProjectCategoryName"),a=$("#openProjectList"),o=$("#openProjectTotalCount"),r=$("#mainContent"),$("#moveTopButton"),l=$("#leftArrowButton"),p=$("#rightArrowButton"),d(),e.off("keyup").on("keyup",function(t){KeyCheck.isKey(t,"ENTER")&&(ListHelper.initPageData(n),u=$.trim(e.val()),T())}),Ajax.executeApi(RestApi.GET.FLOW_PUB_CAT_R001,{},function(t){var n="",t=t.CATG_REC,i=$("#categoryFirstItem").html(),o=$("#categoryItem").html();$.each(t,function(t,e){0===t&&(n+=i),n+=ListHelper.replaceJson(o,{"category-srno":e.CNTS_CATG_SRNO,"category-name":e.CNTS_CATG_NM})}),t=n,N=0,c.empty(),c.append(t),c.find("li").each(function(t,e){N+=$(e).width()}),h(),$(window).resize(function(){s=c.width(),h(),_=Math.abs(Math.ceil((N-s)/(N/c.find("li").length)))})}),c.off("click").on("click",function(t){t=$(t.target).findUp(".category-item");if(0===t.length)return l.hide(),void p.hide();d(),f=0===t.prop("value")?"":t.prop("value"),T(),t=t,c.find(".active").removeClass("active"),t.children("button").addClass("active")}),900<(s=c.width())&&(l.off("click").on("click",function(){t<=0||(0===--t&&l.hide(),c.css("left",-300*t),p.show())}),p.off("click").on("click",function(){(_=Math.abs(Math.ceil((N-s)/(N/c.find("li").length))))<=t||(t===_&&p.hide(),t++,c.css("left",-300*t),l.show())})),T()}};function d(){ListHelper.initPageData(n,a),e.val(""),f=u=""}function h(){N>c.width()-Math.abs(Number.parseInt(c.css("left")))?(l.hide(),p.show()):(l.hide(),p.hide()),0<t&&l.show()}function T(){var e=""!==u;Ajax.executeApi(RestApi.GET.FLOW_PUB_PRJ_R001,$.extend({},n,{CNTS_CATG_SRNO:f,SRCH_WORD:u}),function(t){1===n.PG_NO&&function(t){i.text(c.find(".active").text()+" "+i18next.t("front.common.publicProject")),o.text(t)}(Often.null2Void(t.TOT_CNT,"")),a.drawListHelper({pageData:n,nextYn:t.NEXT_YN,records:t.PRJ_REC,noDataHtml:ListHelper.getNoDataHtml(e?"OPEN_SEARCH":"OPEN_PROJECT_TAB"),targetObj:{scroll:r},callback:{item:C,scroll:T,click:g,final:function(){}}})})}function C(t){var n=$("#projectItem").html(),i="";return $.each(t,function(t,e){i+=ListHelper.replaceJson(n,{"project-srno":Often.null2Void(e.COLABO_SRNO,""),"project-name":TagUtil.escapeHtml(Often.null2Void(e.TTL,"")),"project-participant":Often.null2Void(e.SENDIENCE_CNT,""),"project-manager":i18next.t("dictionary.administrator"),"project-manager-name":Often.null2Void(e.ADMIN_NM,""),CNTN:TagUtil.escapeHtml(e.CNTN),"join-display":ListHelper.setDisplay("Y"===e.JOIN_YN,"inline-block"),"project-info":JSON.stringify(e).replace(/\'/gi,"#&39;").replace(/"/gi,"'")})}),i}function g(t){var e=$(t.target).findUp(".project-item");0!==e.length&&((t=function(){try{return JSON.parse(e.attr("data-project-info").replace(/'/gi,'"').replace(/#&39;/gi,"'"))}catch(t){return{}}}()).PASS_YN=Often.null2Void(e.attr("PASS_YN"),t.JOIN_YN),t.PRFL_PHTG=t.ADMIN_PRFL_PHTG,t.FLNM=t.ADMIN_NM,InvitePopup.makeInvitePopup(t))}}();
"use strict";var RecentProject=function(){var t,n,c,i={PG_NO:1,PG_PER_CNT:5,NEXT_YN:"Y"};return{reloadRecentProject:function(){var e;o(),t.hasClass("active")&&(e=5<n.children("li").length,setTimeout(function(){l(e&&"REFRESH")},500))},clickRecentProjectLeftButton:function(e){var t=$(e.target).findUp(".left-menu-item"),e=$("#recentProjectMore");t.toggleClass("active"),e.toggleClass("d-none");e=t.hasClass("active");LocalUtil.setLocalValue("ONLY_LEFT_FOLD_SETTING","RECENT",e?"Y":"N");t=$("#RecentProjectUl");e&&0===t.find("li").length?l():t.slideToggle(),t.empty()}};function o(){t=$("#RecentProjectButton"),n=$("#RecentProjectUl"),c=$("#recentProjectMore")}function l(e){o();var n="MORE"===(e=e||"INIT"),t="REFRESH"===e;function a(){c.off("click").on("click",function(){l(!$(this).hasClass("active")?"MORE":"")}),n||t?r(!1):"N"===i.NEXT_YN?c.remove():r(!0)}Often.isFunc(Func.CLOUD.BLOCK_WEB_LNB_PROJ_LIST)||(t?(ListHelper.initPageData(i),i.PG_PER_CNT=30):n?i.PG_PER_CNT=25:(ListHelper.initPageData(i),i.PG_PER_CNT=5),Ajax.executeApi(RenewalApi.GET.ACT_PROJECT_LIST,$.extend({},i,{COLABO_FLD_KIND:"1",COLABO_FLD_SRNO:"11",MODE:"RECENT"}),function(e){var t=$("#RecentProjectUl");n||ListHelper.initPageData({},t),t.drawListHelper({pageData:i,nextYn:e.NEXT_YN,records:e.PROJECT_RECORD,callback:{click:T,item:s,final:a}}),t.slideDown(300)}))}function r(e){e?(c.removeClass("active"),c.text(i18next.t("dictionary.unfold"))):(c.addClass("active"),c.text(i18next.t("dictionary.fold")))}function s(e){var a="",c=$("#recentProjectItem").html();return $.each(e,function(e,t){var n="0"!==Often.null2Void(t.BADGE_CNT,"0");a+=ListHelper.replaceJson(c,{title:t.TTL,"project-srno":t.COLABO_SRNO,"color-code":t.BG_COLOR_CD,new:n?"new":""})}),a}function T(e){var t,n=$(e.target).findUp(".recent-project-item");0<n.length&&(t=n.attr("data-project-srno"),e=n.attr("data-color-code"),LocalUtil.setLocalValue("CURRENT_PROJECT_SETTING","TTL",n.text()),LocalUtil.setLocalValue("CURRENT_PROJECT_SETTING","BG_COLOR_CD",e),LocalUtil.setLocalValue("CURRENT_PROJECT_SETTING","IMPT_YN","N"),"schd"!==(e=ViewChanger.getPageCode())&&"task"!==e&&"file"!==e?ViewChanger.loadPageJson({code:"detail",first:t}):ViewChanger.loadPageJson({code:e,first:t}))}}();
"use strict";var Alarm=function(){var a,e,n,s,i={PG_NO:1,PG_PER_CNT:50,NEXT_YN:"Y"},A={PG_NO:1,PG_PER_CNT:10,COLABO_SRNO:""};return{toggleLayer:function(){var e=$("#alarmLayer");if(e.is(":visible"))return l();var a=(_IsMini?$("#allProjectTopAlarmCount"):$("#alarmTopCount")).is(":visible");e.find(".js-unread").attr("class","js-alarm js-unread"+(a?" on":" ")),e.find(".js-read").attr("class","js-alarm js-read"+(a?" ":" on")),r(!0),$("#notReadFilter").off("click").on("click",t),$("#alarmSearchFilterTopButton").off("click").on("click",AlarmClickEvent.clickAlarmSearchFilter),$("#alarmSearchInput").off("key").off("keyup").on("keyup",c),$("#readAllAlarm").off("click").on("click",AlarmUpdate.readAllAlarm),$("#alarmLayer").find(".js-close-event").off("click").on("click",l),e.fadeIn(200)},closeLayer:l,drawAlarmList:r,drawProjectAlarmItems:function a(t,e,l,r){var n=$("#projectAlarmArea");var i=$("#notReadAlarmUl");var o=$("#notReadAlarmMore");e&&0===e.length&&AlarmUpdate.removeNewUpdate();if(r&&(ListHelper.initPageData(A,i),s=!1,i.off("click").on("click",AlarmClickEvent.clickProjectAlarm),A.COLABO_SRNO=t,e&&0===e.length))return n.css("display","none");AlarmUpdate.setBadgeCount(n.find("#projectNotReadCount"),l,"inline-block");s||i.empty();if(ViewChanger.isPage("main")){var r=$("#project-"+t).find(".project-badge");return void AlarmUpdate.setBadgeCount(r,l)}i.append(m(e,!0));var i=i.find(".not-read-alarm-item").length;o.css("display",i<l?"block":"none");n.css("display",0<i?"block":"none");$("#notReadAlarmMore").off("click").on("click",c);$("#readAllPostBnt").off("click").on("click",AlarmUpdate.readAllProjectAlarm);function c(){s&&A.PG_NO++,A.COLABO_SRNO=t,Ajax.executeApi(RenewalApi.GET.ACT_ALARM_LIST,$.extend({MODE:"UNREAD"},A),function(e){a(t,e.ALARM_REC,l),s=!0})}},getAlarmItemsHtml:m,closeAlarmSearchFilter:function(){$("#alarmSearchFilterLayer").addClass("d-none")},getRecentAlarmData:function(e){Ajax.executeApi(RenewalApi.GET.ACT_ALARM_LIST,{PG_NO:1,PG_PER_CNT:1,MODE:"UNREAD"},e)},getOneAlarmData:function(e){return e&&e.ALARM_REC&&0<e.ALARM_REC.length?e.ALARM_REC[0]:{}},initProjectAlarmList:function(){ListHelper.initPageData(A,$("#projectAlarmArea").find("#notReadAlarmUl"))}};function o(t){var e,a,l,r;"N"!==i.NEXT_YN&&(e=LocalUtil.getAlarmSearchFilter(),a=$.trim($("#alarmSearchInput").val()),l=""!==a,r=$("#alarmUl"),Ajax.executeApi(RenewalApi.GET.ACT_ALARM_LIST,$.extend({},i,{SRCH_WORD:a,GUBUN:e,MODE:n?"UNREAD":"ALL"}),function(e){var a;1===i.PG_NO&&(a=_IsMini?$("#allProjectTopAlarmCount"):$("#alarmTopCount"),l||AlarmUpdate.setBadgeCount(a,e.ALARM_COUNT,"inline-block")),r.drawListHelper({pageData:i,nextYn:e.NEXT_YN,records:e.ALARM_REC,noDataHtml:ListHelper.getNoDataHtml(l?"SEARCH":"ALARM"),targetObj:{focus:t&&$("#alarmSearchInput")},callback:{click:AlarmClickEvent.clickAlarmUl,item:m,scroll:o}})}))}function m(e,c){var s="",A=(c?$("#projectAlarmItem"):$("#alarmItem")).html();return $.each(e,function(e,a){var t=""!==Often.null2Void(a.TASK_NM,""),l=""!==Often.null2Void(a.EMT_CD,""),r="N"===Often.null2Void(a.CONFM_YN,"N"),n="Y"===Often.null2Void(a.IMG_ATCH_YN,"N"),i="Y"===Often.null2Void(a.ATCH_YN,"N"),o=$.trim(TagConvert.db2TwoStringByAlarm(a.ALAM_CNTN));if(c&&"PROJECT_INVITE"===a.ALARM_STATUS)return!0;s+=ListHelper.replaceJson(A,$.extend({},a,{TTL:a.TTL,msg:a.ALAM_MSG,contents:t?ListHelper.setEmTag(o,i18next.t("dictionary.context")+":"):TagUtil.tag2html(o),emojiIcon:l?"icon-"+DetailCode.EMOJI._GB[a.EMT_CD-1]:"",date:Tz.momentTimeZone(a.RGSN_DTTM,"type1","fromNow"),"task-name":ListHelper.setEmTag(a.TASK_NM,i18next.t("front.common.taskTitle"))+(!c&&t?"<br>":""),profile:ListHelper.setProfile(a.PRFL_PHTG),"not-read":r?"on":"","task-yn":t?"d-block":"d-none","img-display":ListHelper.setDisplay(n,"inline-block"),"file-display":ListHelper.setDisplay(i,"inline-block")}))}),$(s)}function t(e){var a=$("#alarmUl"),e=$(e.target).findUp(".js-alarm");0!==e.length&&($("#notReadFilter").find(".js-alarm").removeClass("on"),e.addClass("on"),n=$(".js-unread").hasClass("on"),ListHelper.initPageData(i),a.off(),o(!0))}function l(e){var a=0;e?$("#alarmLayer").css("display","none"):($("#alarmLayer").fadeOut(200),a=200),setTimeout(function(){$("#alarmSearchInput").val(""),$("#alarmUl").empty()},a)}function r(e){a=$("#alarmLayer"),n=a.find(".js-unread").hasClass("on"),ListHelper.initPageData(i),o(e)}function c(){e&&clearTimeout(e),e=setTimeout(function(){r(!0)},500)}}();
"use strict";var Chatting=function(){var n,a={PG_NO:1,PG_PER_CNT:20,NEXT_YN:"Y"};return{getOneMessageData:s,getProfileRoomType:C,getRoomInfo:m,toggleLayer:function(){if(_IsMini)l();else{var t=$("#chattingLayer");if(t.is(":visible"))return e();t.fadeIn(200),l(),function(n){Ajax.executeApi(RestApi.GET.COLABO2_SET_R101,{},function(t){r(n.find(".js-allChat-alarm"),"N"===t.CHAT_ALAM_YN)})}(t),$("#chattingLayer").off("click").on("click",o),$("#chattingSearchInput").off("keyup").on("keyup",i),$("#chatCloseBtn").off("click").on("click",e)}},closeLayer:e,drawTopNotReadCount:function(){Ajax.executeApi(RenewalApi.GET.ACT_ROOM_LIST,{MODE:"COUNT"},function(t){var n=$(_IsMini?"#allChatAlarmCount":"#chatTopCount");ListHelper.setCount(n,t.NOT_READ_CNT)})},drawOneChattingListItem:function(t){var n=$("#chattingUl"),e="",i=t.CHAT_DATA,t=1===Number(i.SENDIENCE_CNT)?1:Number(i.SENDIENCE_CNT)-1;e+=ListHelper.replaceJson($("#chattingItem").html(),$.extend({},i,{"profile-display-type":C(i.ROOM_GB,t,i.BG_COLOR_CD),"sendience-cnt-display":ListHelper.setDisplay(2<Number(i.SENDIENCE_CNT)),profile:ListHelper.setProfileImg(i.ROOM_GB,function(){var n="";return i.SENDIENCE_REC.forEach(function(t){n+=t.PRFL_PHTG+", "}),n}()),"no-alarm-display":ListHelper.setDisplay(!1),"pin-display":ListHelper.setDisplay(!1),"not-read-display":ListHelper.setDisplay(!1),CONVT_DTTM:Tz.momentTimeZone(moment(),"type11"),CNTN:MessengerJsonMaker.makeSpecialMsgRecJson("A_INVITE","",{SEND_NAME:_USER_NM,RECEIVE_NAME:i.ROOM_NM}).CNTN})),n.find('.js-chatting-item[pin-yn="Y"]').last().after(e)},removeChattingLayer:function(t){t=R(t);t&&(t.remove(),(t=$("#chattingUl")).is(":empty")&&t.append(ListHelper.getNoDataHtml("CHAT")))},changeContents:M,updateChattingLayer:function(t){var n,e,i,a,o=s(t),r=$("#chattingUl"),l=R(t);l?(n=Often.null2Void(t.CHAT_CODE),e=""!==Often.null2Void(t.ROOM_NM),i=r.find(".js-chatting-item:visible:first").attr("data-room_srno"),a=function(){var e="";return $("#chattingUl").find(".js-chatting-item").each(function(t,n){if(0===$(n).find(".pin:visible").length)return e=$(n).attr("data-room-srno"),!1}),e}(),r=l.find(".pin").is(":visible"),l.find(".js-image-icon, .js-file-icon").css("display","none"),SocketAPI.READ_ALL_MESSAGE_BY_ROOM!==n?SocketAPI.MAIN.DELETE_MESSAGE_ALL_VIEW===n||SocketAPI.MAIN.DELETE_MESSAGE_MY_VIEW===n&&t.WEB_USER_ID===t.ROOM_SRNO?l.find(".js-cntn").text(i18next.t("front.alert.deletedMessage")):e?(l.find(".js-title").text(t.ROOM_NM),l.attr("room-nm",t.ROOM_NM),"T"===t.DEL_GB&&(l.find(".js-cntn").text(M(t)),l.find(".js-date").text(Tz.momentTimeZone(moment(),"type8")),c(t,l))):SocketAPI.MAIN.ALARM_N_PIN_UPDATE!==n&&i===o.ROOM_SRNO&&r||a===o.ROOM_SRNO&&!r?E(l,o):c(t,l):T(l,0)):c(t)},readMessageAndOpenMessenger:O};function c(t,o){var r=t.MSG_REC?s(t):t;r.ROOM_SRNO=r.CHATTING_ROOM_SRNO||r.ROOM_SRNO||t.CHATTING_ROOM_SRNO||t.ROOM_SRNO,m(!0,r.ROOM_SRNO,function(t){r.BG_COLOR_CD=Often.null2Void(o&&o.attr("data-bg-color-cd"),"0");var n=SocketAPI.MAIN.ALARM_N_PIN_UPDATE===r.CHAT_CODE,e=t.ROOM_GB===RoomType.SELF||t.ROOM_GB===RoomType.MULTI&&1===t.SENDIENCE_CNT;r.SENDIENCE_PHTG=e?Often.getLocOrigin()+_PRFL_PHTG:t.PRFL_PHTG,r.NOT_READ_CNT=t.NOT_READ_CNT-1,r=$.extend({},t,r);var i=$("#chattingUl");n&&(a=i.find("#chatting-"+r.ROOM_SRNO),r.CNTN=a.find(".js-cntn").text().trim());e=u([r]);o&&o.remove();var a=i.find(".js-project-null");a&&a.remove(),i.find("#chatting-"+r.ROOM_SRNO).is(":visible")||i.prepend(e),n||E(e,r),"Y"===t.PIN_YN||function(t){var n=t.find("li[pin-yn=Y]");if(0!==n.length){var e=[];n.each(function(t,n){e.push(n)}),t.find("li[pin-yn=Y]").remove();for(var i=e.length;0<=i;i--)t.prepend(e.pop())}}(i)})}function s(t){return t&&t.MSG_REC&&0<t.MSG_REC.length?t.MSG_REC[0]:{}}function e(){var t=$("#chattingLayer");t.fadeOut(200,function(){t.find("#chattingSearchInput").val(""),t.find("#chatMemberList").addClass("d-none"),t.find("#contactBtn span").removeClass("on"),t.find("#chatBtn span").addClass("on"),t.find("#chattingUl").removeClass("d-none")})}function i(t){n&&clearTimeout(n),n=setTimeout(function(){return $("#chatBtn span").hasClass("on")?l(!0,t):void _()},200)}function o(t){var n,e,i=$(t.target);(0!==(n=i.findUp("#chatBtn")).length?($("#chattingSearchInput").val(""),ListHelper.initPageData(a),f(),$("#chatTabMenu").find("span").removeClass("on"),n.find("span").addClass("on"),$(".chat-list-area").removeClass("d-none"),$(".contact-area").addClass("d-none"),1):0!==(e=i.findUp("#contactBtn")).length?($("#chattingSearchInput").val(""),_(),$("#chatTabMenu").find("span").removeClass("on"),e.find("span").addClass("on"),$(".chat-list-area").addClass("d-none"),$(".contact-area").removeClass("d-none"),1):function(){var t=i.findUp(".js-allChat-alarm");if(0===t.length)return!1;var n=t.hasClass("on");return r(t,n),Ajax.executeApi(RestApi.PUT.COLABO2_USER_SET_U002,{CHAT_ALAM_YN:n?"N":"Y"},function(){LocalUtil.setLocalValue("ONLY_USER_SETTING","CHAT_ALAM_YN",n?"N":"Y")}),!0}())||0===i.findUp(".js-new-chat").length||MessengerApi.createNewChatting(!1)}function r(t,n){var e=n?"off":"on",i=n?"on":"off",n=i18next.t(n?"front.chatting.alarmOff":"front.chatting.alarmOn");t.removeClass(i).attr("mouseover-text",n).addClass(e).html('<i class="icon-alarm"></i>')}function l(t,n){if(ListHelper.initPageData(a),t&&KeyCheck.isKey(n,"DOWN")){n=$(_IsMini?"#miniSearchInput":"#chattingSearchInput");return ListEvent.arrowDownOnInput("CHAT",n,$("#chattingUl"))}f()}function _(){Member.initPage(),Member.makeMemberList($("#chatMemberList"),$("#chattingSearchInput"),"","contact",function(){var t=$("#chatMemberList");t.find(".participant-chat-button").removeClass("d-none"),t.find(".my-check-2").addClass("d-none"),t.off("click").on("click",Participant.clickParticipantsArea)})}function f(){var t,e,i;"N"!==a.NEXT_YN&&(t=$(_IsMini?"#miniSearchInput":"#chattingSearchInput"),e=$.trim(t.val()),i=$("#chattingUl"),Ajax.executeApi(RenewalApi.GET.ACT_ROOM_LIST,$.extend({},a,{SRCH_WORD:e}),function(n){1===a.PG_NO&&ListHelper.setCount($("#chatTopCount"),n.NOT_READ_CNT,"inline-block"),i.drawListHelper({pageData:a,nextYn:n.NEXT_YN,noDataHtml:ListHelper.getNoDataHtml(e?"SEARCH":"CHAT"),records:n.LIST_REC,targetObj:{focus:t},callback:{click:N,dblclick:p,item:u,scroll:f,final:function(){var t=$(_IsMini?"#allChatAlarmCount":"#chatTopCount");ListHelper.setCount(t,n.NOT_READ_CNT)}}})}))}function N(t){var n,t=$(t.target).findUp(".js-chatting-item");0!==t.length&&($("#miniSearchInput").blur(),$(".js-chatting-item").removeClass("on"),t.toggleClass("on").focus(),Electron.isElectronApp()&&_IsMini||m(!0,n=t.attr("data-room-srno"),function(t){O("N"!==t.READ_OVER_YN,n)}))}function p(t){var n,t=$(t.target).findUp(".js-chatting-item");0!==t.length&&Electron.isElectronApp()&&m(!0,n=t.attr("data-room-srno"),function(t){O("N"!==t.READ_OVER_YN,n)})}function O(t,n){if(!t)return OpenUtil.openMessengerByRoomSrno(n);MessengerApi.readMessage(!1,n,"",function(){OpenUtil.openMessengerByRoomSrno(n)})}function u(t){var l="",c=$("#chattingItem").html();return $.each(t,function(t,n){var e="Y"===Often.null2Void(n.PIN_YN,"N"),i="N"===Often.null2Void(n.PUSH_ALAM_YN,"Y"),a=0<Number(Often.null2Void(n.NOT_READ_CNT,"0")),o=1===Number(n.SENDIENCE_CNT)?1:Number(n.SENDIENCE_CNT)-1,r="Y"===n.BOMB_YN;l+=ListHelper.replaceJson(c,$.extend({},n,{ROOM_NM:n.ROOM_NM,BG_COLOR_CD:n.BG_COLOR_CD,"profile-display-type":C(n.ROOM_GB,o,n.BG_COLOR_CD),"sendience-cnt-display":ListHelper.setDisplay(2<n.SENDIENCE_CNT),profile:ListHelper.setProfileImg(Often.null2Void(n.ROOM_GB),Often.null2Void(n.SENDIENCE_PHTG)),"no-alarm-display":ListHelper.setDisplay(i,"inline-block"),"pin-display":ListHelper.setDisplay(e,"inline-block"),"not-read-display":ListHelper.setDisplay(a,"inline-block"),"img-display":ListHelper.setDisplay(!r&&"I"===n.MSG_GB,"inline-block"),"file-display":ListHelper.setDisplay(!r&&"F"===n.MSG_GB,"inline-block"),CNTN:n.CNTN,date:d(n.RGSN_DTTM)}))}),$(l)}function d(t){var n=moment(),e=Tz.momentTimeZone(n,"type2")===Tz.momentTimeZone(t,"type2");return 1===moment(n,"YYYYMMDD").diff(moment(t,"YYYYMMDD"),"days")?"어제":Tz.momentTimeZone(t,e?"type8":"type2")}function C(t,n,e){n=t===RoomType.PROJECT?"project-chat color-code-"+Often.null2Void(e,"0"):t===RoomType.MULTI?4<n?"type4":"type"+n:"type1";return n}function m(t,n,e){if(!t){t=LocalUtil.getLocalJson("ONLY_MESSENGER-"+n);if(""!==Often.null2Void(t))return"function"==typeof e&&e(t)}Ajax.executeApi(RestApi.GET.COLABO2_CHAT_R001,{ROOM_SRNO:n,PG_NO:1},function(t){LocalUtil.setLocalJson("ONLY_MESSENGER-"+n,t),"function"==typeof e&&e(t)},function(t){SentryMonitor.captureException("NOT_INCLUDED_CHAT ERROR : "+n+" / "+JSON.stringify(t))})}function R(t){var n=$("#chatting-"+t.CHATTING_ROOM_SRNO);if(0<n.length)return n;try{return $("#chatting-"+t.ROOM_SRNO)}catch(t){return null}}function E(t,n){var e=n.RGSN_DTTM,i=n.RGSR_ID,a=_USER_ID!==i,o="F"===n.MSG_GB,r="I"===n.MSG_GB,i=M(n),n=Number(Often.null2Void(t.find(".not-read-count").text(),"0"));t.find(".js-image-icon").css("display",r?"inline-block":"none"),t.find(".js-file-icon").css("display",o?"inline-block":"none"),t.find(".js-cntn").text(i),t.find(".js-date").text(d(e)),a&&T(t,n+1)}function T(t,n){ListHelper.setCount(t.find(".not-read-count"),n)}function M(t,n,e){var i="T"===Often.null2Void(t.DEL_GB,""),a=t.CNTN,o=t.MSG_GB,r=t.BOMB_YN,l=Often.null2Void(t.RGSR_NM,t.SEND_USER_NM),c=Often.null2Void(t.VC_SRNO,"0"),e="Y"===Often.null2Void(t.LONG_YN,"N")||e,t=t.CHATTING_ROOM_SRNO||t.ROOM_SRNO,a="()"===a?"":a;if(n)return"X"===o?i18next.t("front.alert.deletedMessage"):TagConvert.db2HtmlStringByChat(a,e);e="";return"Y"===r?e=i18next.t("front.common.chatSecret"):"I"===o?e=i18next.t("dictionary.image"):"F"===o?e=i18next.t("dictionary.attachment"):"E"===o?e=i18next.t("dictionary.emoji"):"T"===o?e=i18next.t("front.common.chatbot"):"0"!==c&&(e=i18next.t("front.common.userVideoConference",{user:l})),e=""!==e?ListHelper.replaceJson("({contents})",{contents:e}):i?s("C",{SEND_NAME:l,ROOM_SRNO:t}):"X"===o?s("X"):TagConvert.db2TwoStringByChatting(a);function s(t,n){return MessengerJsonMaker.makeSpecialMsgRecJson(t,"",n).CNTN}}}();
"use strict";var InviteEmployee=function(){var i;return{toggleInviteEmployeeLayer:function(){((i=$("#inviteEmployeeLayer")).is(":visible")?t:e)()},openInviteEmployeeLayer:e,closeInviteEmployeeLayer:t};function e(t){i=$("#inviteEmployeeLayer"),Ajax.executeApi(RestApi.GET.FLOW_USE_INTT_INFM_R001,{},function(e){var n=-1<location.hostname.indexOf(e.SUB_DOM.toLowerCase()),e=location.protocol+"//"+(n?"":e.SUB_DOM.toLowerCase()+".")+location.hostname;i.find(".js-link-text").text(e),i.find("#firstInvitePopup").css("display","block"),i.find("#popupBottom").css("display",t?"block":"none"),i.fadeIn(200)}),i.find(".email-input").val(""),i.off("click").on("click",n)}function t(){i.find(".js-invite-employee-layer").css("display","none"),i.fadeOut(200)}function n(e){var n=$(e.target);(function(e){e=e.findUp(".js-link-area");return 0!==e.length&&(Often.copyUrl(e.find(".js-link-text").text()),!0)})(n)||function(e){e=e.findUp("#copyLinkBtn");return 0!==e.length&&(Often.copyUrl(e.parent().find(".js-link-text").text()),!0)}(n)||(0!==n.findUp(".js-close-btn").length?(t(),1):0!==n.findUp("#otherInviteBtn").length?(window.open("/flow_admin.act?MENU=flow-invite","admin_invite"),t(),1):0===n.findUp("#notViewToday").length)||(Often.setCookie("FIRST_INVITE_POPUP","Y",1),t())}}();
"use strict";var MySettings=function(){var t;return{openPopup:function(){function e(){var e;(e=$("#mySettingLeftMenu")).find(".my-color-type-2").removeClass("my-color-type-2").addClass("my-color-type-1"),e.find(".my-type-text-1").removeClass("my-type-text-1").addClass("my-type-text-2"),e.find("li:first").find(".my-color-type-1").removeClass("my-color-type-1").addClass("my-color-type-2"),e.find("li:first").find(".my-type-text-2").removeClass("my-type-text-2").addClass("my-type-text-1"),$("#accountLayer").fadeOut(200),($(".js-read-check-layer").is(":visible")||$(".js-reaction-check-layer").is(":visible"))&&t.css("z-index",10),t.removeClass("d-none").addClass("d-block"),AccountSetting.openPopupLayer(),c(),t.off("click").on("click",function(e){var t=$(e.target),o=t.findUp("#innerMySettingPopup"),n=t.findUp("#mySettingPopupCloseBtn"),i=t.findUp("#mySettingLeftMenu"),p=t.findUp("#editorProfilePhotoBtn"),l=t.findUp("#changeProfilePhotoBtn"),r=t.findUp("#removeProfilePhotoBtn"),a=t.findUp("#editorProfilePhoto"),s=$("#editorProfilePhoto"),d=t.findUp("#versionUpgrade"),e=t.findUp("#companyParticipationBtn");return 0===o.length||0<n.length?y():0<i.length?function(e){u();e=e.findUp(".js-my-setting-left");(function(e){var t=$("#mySettingLeftMenu");t.find(".my-color-type-2").removeClass("my-color-type-2").addClass("my-color-type-1"),t.find(".my-type-text-1").removeClass("my-type-text-1").addClass("my-type-text-2"),e.find(".my-color-type-1").removeClass("my-color-type-1").addClass("my-color-type-2"),e.find(".my-type-text-2").removeClass("my-type-text-2").addClass("my-type-text-1")})(e),0<e.find("#accountSettingBtn").length?AccountSetting.openPopupLayer():0<e.find("#preferencesBtn").length?Preferences.openPopupLayer():0<e.find("#deviceManagementBtn").length?DeviceManagement.openPopupLayer():0<e.find("#projectSettingBtn").length?ProjectSettings.openPopupLayer():0<e.find("#outServiceBtn").length?OutService.openPopupLayer():0<e.find("#downloadAppBtn").length?DownloadApp.openPopupLayer():0<e.find("#paymentInfoBtn").length&&PaymentInfo.openPopupLayer();c()}(t):0<p.length?function(e){e.toggleClass("my-button-1").toggleClass("my-button-3");e=e.hasClass("my-button-3");$("#editorProfilePhoto").attr("class",e?"my-popup-pro-1-1":"my-popup-pro-1-1 d-none")}(t):0<l.length?(Upload.uploadFile("profile",AccountSetting.updateUserProfile),$("#editorProfilePhotoBtn").removeClass("my-button-3").addClass("my-button-1"),void $("#editorProfilePhoto").removeClass("d-block").addClass("d-none")):0<r.length?(AccountSetting.updateUserProfile("6",""),void $("#editorProfilePhoto").removeClass("d-block").addClass("d-none")):0<d.length?void(LocalUtil.getLocalValue("ONLY_BUY_SETTING","BUY_YN")===BuyCode.FREE&&(y(),Upgrade.showUpgradeLayer())):0<e.length?(y(),void CompanyJoin.openLayer()):void(0===a.length&&s.is(":visible")&&(s.addClass("d-none"),p.attr("class","my-button-1")))})}$("#postPopup").is(":visible")?PostPopup.checkWritingAndShowPopup(function(){PostPopup.removePopup(),e()}):e()},closePopup:y,initSetting:function(){t=$("#mySettingPopup"),AccountSetting.initProfileView(),AccountSetting.updateUserName(_USER_NM)}};function y(){t.removeClass("d-block").addClass("d-none"),u()}function c(){t.find(".js-my-scroll-layer").scrollTop(0)}function u(){DownloadApp.closePopupLayer(),AccountSetting.closePopupLayer(),DeviceManagement.closePopupLayer(),Preferences.closePopupLayer(),ProjectSettings.closePopupLayer(),OutService.closePopupLayer(),PaymentInfo.closePopupLayer()}}();
"use strict";var Organization=function(){var m,o,l,c,p,e,d,u,n,g,f,a=0;return{initPage:t,toggleLayer:function(){if(C(),p.find(".js-group-tree-wrap").css("height",""),p.is(":visible"))return D();p.find("#companyName").text(_USE_INTT_NM),t(),p.fadeIn(200),g.focus()},closeLayer:D,getClickedOrganizationData:E,getInitOrganizationData:L,searchEmpl:V,startClick:i,clickOrganizationChartEvent:N,dbClickOrganizationChartEvent:S,closeEmplArea:v,initPageData:h,drawEmployeeListData:x,openMessenger:function(t){var e=$(t.target),n=[],t={};t.IN_RCVR_USER_ID=e.closest("li").attr("user-id"),n.push(t),function(t){t={SENDIENCE_REC:t};t.packetOption=Ajax.OPTION.PREVENT_EXECUTE,Ajax.executeApi(RestApi.POST.COLABO2_CHAT_C001,t,function(t){OpenUtil.openMessengerByRoomSrno(t.ROOM_SRNO)})}(n)},openEmplArea:_,setEmployeeSearchArea:I,setDragEvent:R};function C(){g=$("#organizationInput"),f=$("#orgSearch"),p=$("#organizationLayer"),$("#inviteLayer")}function D(){p.fadeOut(200,function(){l.css("height",""),l.css("display","none")})}function t(t,e,n,a,i,r,s){C(),h(t,e),a&&(p=a),i&&(g=i),r&&(f=r),u=s||0,o.empty(),l.find("#organizationChart-emplList").empty(),l.find("#emplList-dvsnName").text(""),g.val("").focus(),(n?E:L)(),g.off("keyup").on("keyup",V),$("#organizationChartCloseBtn").off("click").on("click",D),o.off("click").on("click",N),o.off("dblclick").on("dblclick",S),l.find("#emplAreaCloseBtn").off("click").on("click",v)}function h(t,e){o=t||$("#organizationChart"),(l=e||$("#emplArea")).css("display","none"),m=""}function _(){"none"===l.css("display")&&(l.css("display","block"),s(!1))}function s(t){t?(p=_IsMini?$("#miniOrganization"):p).find(".js-group-tree-wrap").css("height",""):(t=_IsMini?$("#miniWrap").innerHeight()-120-l.innerHeight():p.find(".side-contents").height()-f.innerHeight()-l.innerHeight(),$("#organizationChart").parent().css({height:t}),$("#inviteOrgChart").parent().css({height:t-15}),$("#existEmplData").css({height:l.innerHeight()-80}))}function v(t){l&&(l.css("height",""),l.css("display","none"),t&&0!==$(t.target).findUp("#inviteLayer").length&&$("#teamInviteArea").css("display","block"),s(!0),$(".department-item").find("span").removeClass(orgChartClassData.enableEmployeeList))}function i(t){var e=0<$(t.target).findUp("#inviteLayer").length;1<++a?a=0:1===a&&(n=setTimeout(function(){clearTimeout(n),a=0,$(".department-name").removeClass(orgChartClassData.enableEmployeeList),$(".department-item").removeClass("active"),m.addClass("active"),m.find(".department-name").addClass(orgChartClassData.enableEmployeeList),I(e?"Invite":"Organization"),x()},500))}function N(t){var e=$(t.target),n=p.is("#teamInviteLayer");return 0!==(m=e.findUp(".department-item")).length&&(_IsMini&&MiniLeft.closeAllPopup(e),e.hasClass("subDepartmentOpenBtn")?r(t):e.hasClass("js-dvsn-select")?TeamInvite.clickDvsnSelect(e,n):void i(t))}function S(t){if(0===$(t.target).findUp(".department-name").length)return!1;r(t)}function r(t){var e=$(t.target).findUp(".department-item");if(0<e.find("."+orgChartClassData.enableExistSubDepartment).length)E(m.attr("dvsn-cd"));else{for(var n=m.next(".department-item");n.attr("depth")>m.attr("depth");)n.remove(),n=m.next(".department-item");m.find("."+orgChartClassData.subDepartmentConnectLine).remove()}e.find(".subDepartmentOpenBtn").toggleClass(orgChartClassData.enableExistSubDepartment).toggleClass(orgChartClassData.disableExistSubDepartment)}function E(t){Ajax.executeApi(RestApi.GET.FLOW_DVSN_R003,{DVSN_CD:t,packetOption:Ajax.OPTION.PREVENT_CALLBACK},function(t){!function(t){var e=t.DVSN_REC;if(0===e.length)return p.find("#nullDvsnData").css("display","block");for(var t=""!==Often.null2Void(m,""),n=t?Number(m.attr("depth"))+1:0,a="",i=0;i<e.length;i++){var r="Y"===e[i].LAST_DVSN_YN,s=i===e.length-1?orgChartClassData.lastSequenceLine:orgChartClassData.notLastSequenceLine,r=r?orgChartClassData.notExistsubDepartment:orgChartClassData.enableExistSubDepartment+" subDepartmentOpenBtn";a+=b(e,i,n,s,r)}t?(m.append('<em class="'+orgChartClassData.subDepartmentConnectLine+'"></em>'),m.after(a)):o.append(a);R(),A()}(t)})}function L(){Ajax.executeApi(RenewalApi.GET.ACT_ORG_USERLIST,{DVSN_CD:_DVSN_CD,packetOption:Ajax.OPTION.PREVENT_CALLBACK},O)}function O(t){if(0===t.DVSN_REC.length)return R(),void E();var e=t.DVSN_REC[0],n="Y"===e.LAST_DVSN_YN?orgChartClassData.notExistsubDepartment:("Y"===e.USER_DVSN_YN?orgChartClassData.disableExistSubDepartment:orgChartClassData.enableExistSubDepartment)+" subDepartmentOpenBtn",e=ListHelper.replaceJson($("#organizationItem").html(),{"dvsn-cd":e.DVSN_CD,depth:0,"hgrn-dvsn-cd":"","group-icon":y(orgChartClassData.notLastSequenceLine,0),"button-class":n,"last-code":"1","dvsn-nm":e.DVSN_NM,"root-dvsn-line":"N"===e.USER_DVSN_YN?"d-none":orgChartClassData.subDepartmentConnectLine});o.append(e),m=o.find(".department-item"),_DVSN_CD&&function(t){var n=t.DVSN_REC;0===m.length&&(m=$("#organizationChart"));if(0===n.length)return m.append(ListHelper.getNoDataHtml("ORGANIZATION"));var e,a,i=Number(Often.null2Void(m.attr("depth"),0)),r="",s=n[1].HGRN_DVSN_CD,o=Often.null2Void(n[1].DEPTH,"1"),l=-1,c=0;$.each(n,function(t,e){if(g(e,t))return c=t,!1}),s!==_USE_INTT_ID&&i++;for(var p=1;p<n.length;p++){a="Y"===n[l=p].LAST_DVSN_YN,e="Y"===Often.null2Void(n[p].USER_DVSN_YN,"N"),s=Often.null2Void(n[p].HGRN_DVSN_CD,"0");var d=function(t){return t===n.length-1||t===c-1?orgChartClassData.lastSequenceLine:orgChartClassData.notLastSequenceLine}(p),u=a?orgChartClassData.notExistsubDepartment:e?orgChartClassData.disableExistSubDepartment+" subDepartmentOpenBtn":orgChartClassData.enableExistSubDepartment+" subDepartmentOpenBtn";o=Often.null2Void(n[p].DEPTH,"0"),p===c?(i++,$.each(n,function(t,e){if(g(e,t))return c=t,!1}),m.after(r),m.parent().find("li:last i").removeClass().addClass(orgChartClassData.lastSequenceLine),function(t){var e=n[t].HGRN_DVSN_CD,e=m.parent().find('li[dvsn-cd="'+e+'"]');(m=e).append('<em class="'+orgChartClassData.subDepartmentConnectLine+'"></em>'),e.after(b(n,t,i,d,u)),m=e.next(),s=Often.null2Void(n[t].HGRN_DVSN_CD,"0"),r=""}(p)):(r+=b(n,p,i,d,u),s=Often.null2Void(n[p].HGRN_DVSN_CD,"0"),p===n.length-1&&m.after(r))}function g(t,e){var n=1===l&&Often.null2Void(t.DEPTH,"0")!==o,e=1!==l&&Often.null2Void(t.DEPTH,"0")!==o&&c<e;return!(!n&&!e)}A()}(t),$("#inviteLayer").is(":visible")||(_DVSN_CD&&(m=o.find(".department-item[dvsn-cd="+_DVSN_CD+"]"),I("Organization"),t=_IsMini?$("#miniOrganization #emplArea"):$("#organizationLayer #emplArea"),l=t,x()),R())}function b(t,e,n,a,i){var r=$("#organizationItem").html(),s=InvitationPopup.isIdExistInArray(t[e].DVSN_CD,"dept");return ListHelper.replaceJson(r,{"dvsn-cd":t[e].DVSN_CD,depth:n,"hgrn-dvsn-cd":t[e].HGRN_DVSN_CD,"margin-style":'style="margin-left:'+18*n+'px"',"right-style":'style="right:'+18*n+'px"',"group-icon":y(a,n),"button-class":i,"last-code":"Y"===t[e].LAST_DVSN_YN?"2":"1","dvsn-nm":t[e].DVSN_NM,active:t[e].DVSN_CD===_DVSN_CD?orgChartClassData.enableEmployeeList:"","root-dvsn-line":"d-none",checked:s?"coperate-check-type-2":"coperate-check-type-1"})}function y(t,e){var n="",a=$("#chartDepthLineItem").html(),i=-29,r=m;n+=0!==e?'<i class="'+t+'"></i>':"";for(var s=0;s<e-1;s++)3===Number(r.find("i").attr("class").split("-")[3])||(n+=ListHelper.replaceJson(a,{"depth-line-left":'style="left:'+i+'px"'})),i-=18,r=$('li[dvsn-cd="'+r.attr("hgrn-dvsn-cd")+'"]');return n}function V(t){e&&clearTimeout(e),e=setTimeout(function(){_(),I(0<$(t.target).findUp("#inviteLayer").length?"Invite":"Organization"),x($(t.target).val())},200)}function I(t){"Chatting"===t?(d=$("#miniOrganization .department-item").attr("dvsn-cd"),c=$("#miniChatting")):"Invite"===t?(d=m&&m.attr("dvsn-cd"),c=$("#inviteLayer")):"Organization"===t&&(c=_IsMini?$("#miniOrganization"):$("#organizationLayer"),d=m&&m.attr("dvsn-cd"))}function x(t){var e=""!==Often.null2Void(t,""),n=e?"":d,a=m?m.text().trim():o.find("span.department-name.flow-color-type-1 em").text(),i=c.find("#emplList-dvsnName"),r=c.find("#resultSearch"),s=e?"'"+t+"' 검색결과":a;l.find("#departmentName").find("span").text(s),i.text(e?"'"+t+"'":a),r.css("display",e?"inline-block":"none"),_(),function t(n,a){var i=c.find("#existEmplData");var r=l.find("#nullEmplData");var s=l.find("#organizationChart-emplList");var e=p&&p.is("#teamInviteLayer");var o=$(e?"#emplListItemForInvitation":"#emplListItem").html();Ajax.executeApi(RestApi.GET.FLOW_EMPL_R001,$.extend({},a,{SRCH_WD:Often.null2Void(n,""),packetOption:Ajax.OPTION.PREVENT_CALLBACK,ROOM_SRNO:Often.null2Void(ROOM_SRNO,"")}),function(e){s.drawListHelper({pageData:a,nextYn:e.NEXT_YN,records:e.EMPL_REC,callback:{item:function(){var n="",a=e.EMPL_REC;return $.each(a,function(t,e){n+=ListHelper.replaceJson(o,$.extend({},e,{image:ListHelper.setProfile(e.PRFL_PHTG),status:_IsMini?"mini-mode-"+MiniState.getStatusName(a[t].STATUS):"",id:Member.getIdentifier(a[t].USER_ID),active:InvitationPopup.isIdExistInArray(a[t].USER_ID,"member")?"active":""}))}),n},scroll:function(){t(n,a)},final:function(){var t=0===e.EMPL_REC.length;i.css("display",t?"none":"block"),r.css("display",t?"inherit":"none")},click:Participant.clickParticipantsArea}})})}(t,{PG_NO:1,PG_PER_CNT:"20",NEXT_YN:"Y",DVSN_CD:n})}function R(){p=_IsMini?$("#miniWrap"):p;var n,a,t=l.find("#drag"),i=l.height(),r=p.height()-(_IsMini?0:f.outerHeight(!0))-u;t.draggable({containment:p,start:function(){t.css("position","static"),n=l.height()},drag:function(t,e){e=e.originalPosition.top-e.position.top;(a=n+e)<=i?a=i:r<a&&(a=r),l.height(a)},stop:function(){t.css({top:0,position:"sticky"}),s(!1)}}),t.css("position","sticky")}function A(){"#inviteOrgChart"===o.selector&&o.find(".js-dvsn-select").css("display","block")}}(),orgChartClassData={subDepartmentConnectLine:"group-line-type-1",notLastSequenceLine:"group-line-type-2",lastSequenceLine:"group-line-type-3",enableExistSubDepartment:"group-line-type-4",disableExistSubDepartment:"group-line-type-11",notExistsubDepartment:"group-circle-type-1",enableEmployeeList:"flow-color-type-1"};
"use strict";var Payment=function(){var m,E;return{openPaymentLayer:function(n){m=$("#paymentLayer"),E=$("#"+n+"Layer"),$("#allMainContent").css("display","none"),m.find(".js-payment-layer").css("display","none"),function(){var n=(new Date).getFullYear(),e=E.find("#expiryYear"),t="";e.empty(),t+='<option value="" selected disabled hidden>YYYY</option>';for(var i=0;i<11;i++)t+='<option value="'+(n+i)+'">'+(n+i)+"</option>";e.append(t)}(),E.find("#userName").val(_USER_NM),E.find("#userEmail").val(_USER_EMAIL),e(),$("#tempPopup").remove(),E.css("display","block"),m.fadeIn(200),PaymentEvent.setPayTooltip("Y"),m.off("click").on("click",PaymentEvent.clickPaymentLayer).off("input").on("input",PaymentEvent.inputPaymentLayer).off("keyup").on("keyup",PaymentEvent.keyupPaymentLayer).off("change").on("change",PaymentEvent.changePaymentLayer)},closePaymentLayer:function(){m.fadeOut(200,function(){$("#allMainContent").css("display","block"),Company.controlPopup()})},tooglePayOptionSelect:function(){var n=m.find("#payOptionSelect");"none"===n.css("display")?n.css("display","block"):n.css("display","none")},drawPayInfo:e,calculatorPrice:i,getPaymentInfo:function(){var n=E.is("#businessLayer"),e=P("#userName"),t=P("#userEmail"),i=P("#phoneNum"),a=P("#cardNum1")+P("#cardNum2")+P("#cardNum3")+P("#cardNum4"),o=P("#expiryMonth"),r=P("#expiryYear"),c=P("#cardPassword"),d=P("#birthdayNum"),u=n?"business":"premium",p=P("#recommendId"),l=n?m.find("#payOption").attr("data-option"):"",s=n?m.find("#price").text().replace(",",""):"",y=n?P("#userCnt"):"",f=_(),n="M"===l?10*f.initPrice:10*(f.initPrice-1e3),f="M"===l?f.addInitPrice:f.addInitPrice-1e3;return{USER_NM:e,EMAIL:t,CELLPHONE_NUM:i,CARD_NUM:a,BRDT:d,CARD_EXPIRE_MONTH:o,CARD_EXPIRE_YEAR:r,PWD:c,RATE_CNTN:u,RECOMMEND_ID:p,GUBUN:l,PRICE:s,USER_CNT:y,DEFALUT_PRICE:n,ADD_USER_PRICE:f};function P(n){return E.find(n).val()}},getInitPriceJson:_,convertPrice:o};function e(){var n="Y"===m.find("#payOption").attr("data-option"),e=LocalUtil.getLocalValue("ONLY_BUY_SETTING","USER_CNT"),t=i(e,n);m.find("#userCnt").val(e),m.find("#price").text(t.PREDICTION_PRICE),m.find("#savings").text(t.SAVINGS),m.find(".js-pay-gubun").text(i18next.t(n?"front.common.year":"front.common.month"))}function _(){var n=0===_USE_INTT_ID.indexOf("BFLOW_"),e=0===_USE_INTT_ID.indexOf("UTLZ_"),t=-1<_USE_INTT_ID.indexOf("_")?_USE_INTT_ID.split("_")[1]:"",i=0,a=0,a=e||n&&"Y"===LocalUtil.getSerpYn()?i=5e3:n&&12===t.length&&t<"200815000000"&&"190709200000"<=t?(i=5e3,5900):n&&12===t.length&&t<"190709200000"&&"190301000000"<=t?(i=4e3,4900):n&&12===t.length&&t<"190301000000"?(i=3e3,3900):i=6e3;return{initPrice:i,addInitPrice:a}}function a(n,e){var t=_();return"M"===n?10*t.initPrice+(10<e?t.addInitPrice*(e-10):0):"Y"===n?12*(t.initPrice-1e3)*10+(10<e?12*(t.addInitPrice-1e3)*(e-10):0):void 0}function i(n,e){var t=a("M",n),i=a("Y",n);return{PREDICTION_PRICE:100<n?i18next.t("front.common.contactUs"):o(e?i:t),SAVINGS:100<n?i18next.t("front.common.contactUs"):o(e?12*t-i:0)}}function o(n){return n.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}}();
"use strict";var Search=function(){var r,n,c,o,l,s,d,T,_,f,R,h=!1,u=!0,C={project:{PG_NO:1,PG_PER_CNT:5,NEXT_YN:"Y"},post:{PG_NO:1,PG_PER_CNT:5,NEXT_YN:"Y",CHECK_DTTM:""},file:{PG_NO:1,PG_PER_CNT:5,NEXT_YN:"Y"}},E={project:{apiKey:RenewalApi.GET.ACT_PROJECT_LIST,recordName:"PROJECT_RECORD",totalPaging:5},post:{apiKey:RenewalApi.GET.ACT_SEARCH_POST_N_REMARK_LIST,recordName:"RESULT_RECORD",totalPaging:5},file:{apiKey:RenewalApi.GET.ACT_SEARCH_FILE_LIST,recordName:"RESULT_RECORD",totalPaging:5}};return{fillTopSearchBar:p,drawSearchResult:O,moveSearchResultPage:function(e,t){S(),e=SearchFilter.checkCode(e);var a=u?"F5":"DIRECT";u&&(u=!1,SearchFilter.initFilter(n,e,!0),SearchFilter.initFilter(_,e,!0),s.off("click").on("click",function(e){h||(function(e){e=$(e.target).findUp(".js-tab-item");0<e.length&&(e.parent().find(".js-tab-item").removeClass("active"),e.addClass("active"),i("TAB"))}(e),h=!0,r=setTimeout(function(){h=!1,clearTimeout(r)},300))}),d.off("click").on("click",SearchEvent.clickSearchEventArea),T.off("click").on("click",function(){ViewChanger.loadPage("skip"),p(),$("#searchPopupInput").val("")}),SearchFilter.addEventOnSearchFilter(_,function(){i("RIGHT-FILTER")},!1));function i(e){O(s.find(".js-tab-item.active").attr("data-code"),SearchFilter.getSearchWord(searchAreaCode.IN_TONG),"",_,e)}c.val(t),l.text(t),n.is(":visible")?(O(e,t,n,_,"SEARCH"),n.fadeOut(200)):O(e,t,"",_,a),o.fadeIn(200)},closeTopSearchPopup:function(e){if(!(0<e.parents(".flatpickr-calendar").length)){e=$(".flatpickr-calendar");if(e.is(":visible"))return e.remove();S(),n.fadeOut(200)}}};function S(){n=$("#searchPopupLayer"),c=n.find("#searchPopupInput"),n.find("#detailSearchArea"),o=$("#searchResult"),l=o.find("#searchWord"),T=o.find("#searchResultClose"),s=o.find("#searchTab"),d=o.find("#searchEventArea"),_=o.find("#searchFilter")}function p(){var e=LocalUtil.getLocalJson("IN_TONG_SEARCH_MEMORY"),t="",a=$("#searchPopupTopButton");e&&1<Object.keys(e).length&&e.SEARCH_WORD&&""!==$.trim(e.SEARCH_WORD)&&(t=i18next.t("dictionary.search")+" : "+$.trim(e.SEARCH_WORD),a.find(".js-top-search-delete").addClass("active")),a.find("input").val(t)}function O(a,e,i,r,n){!function(e){e=s.find(".js-tab-item[data-code="+SearchFilter.checkCode(e)+"]");0<e.length&&(s.find(".js-tab-item").removeClass("active"),e.addClass("active"))}(a);var t=function(){var e;{var t;"SEARCH"===n?(SearchFilter.setSearchFilter(i,r,a),e=SearchFilter.getFilterJson(r,!0)):"TAB"===n||"MORE"===n||"RIGHT-FILTER"===n?(SearchFilter.setSearchFilter(i,r,a),e=SearchFilter.getFilterJson(r,!1)):"F5"!==n&&"DIRECT"!==n||((t=LocalUtil.getLocalJson("IN_TONG_SEARCH_MEMORY"))&&1<Object.keys(t).length?(e=t,SearchFilter.setSearchFilterByData(r,t)):e=SearchFilter.getFilterJson(r,!1))}return p(),e}(),c=$("#searchEventArea");if(r.find(".js-search-pickr-layer").css("display",a===searchMode.PROJECT?"none":"block"),a!==searchMode.TOTAL)return c.removeClass("total"),ListHelper.initPageData(C[a],$("#"+a+"SearchResult"),!0),N(),void _(a,e,!1,!1,t);c.off("scroll"),c.addClass("total"),ListHelper.initPageData(C.project,$("#projectSearchResult")),ListHelper.initPageData(C.post,$("#postSearchResult")),ListHelper.initPageData(C.file,$("#fileSearchResult")),N();c=o.find("#projectSearchArea, #postSearchArea, #fileSearchArea");function l(){return"total"===s.find(".js-tab-item.active").attr("data-code")}function _(a,l,i,e,t,r){var n,c,o;function s(e){var r="",n=$("#"+a+"SearchResultItem").html();return $.each(e,function(e,t){var a,i;r+=ListHelper.replaceJson(n,$.extend({},t,{ORCP_FILE_NM:c(TagUtil.tag2html(t.ORCP_FILE_NM)),data_file_name:t.ORCP_FILE_NM,TTL:c(t.TTL),BG_COLOR_CD:Often.null2Void(t.BG_COLOR_CD,"0"),title:c("-1"===(i=t).TMPL_TYPE?i.CNTN:Often.null2Void(i.COMMT_TTL,i.CNTN)),contents:c((a=t,i=""!==l,TagConvert.db2OneString("-1"===a.TMPL_TYPE?a.CNTN:Often.null2Void(a.COMMT_TTL,a.CNTN),i))),date:Tz.momentTimeZone(t.RGSN_DTTM,"type1"),size:FileUtil.getFileSize(t.FILE_SIZE),post_class:(i=t.TMPL_TYPE,""===Often.null2Void(i)?"write":{"-1":"comment",1:"write",2:"todo",3:"schedule",4:"task"}[i]),post_name:(i=t.TMPL_TYPE,""===Often.null2Void(i)?i18next.t("dictionary.article"):{"-1":i18next.t("dictionary.comment"),1:i18next.t("dictionary.article"),2:i18next.t("dictionary.todo"),3:i18next.t("dictionary.schedule"),4:i18next.t("dictionary.task")}[i]),unstar_class:"Y"===t.IMPT_YN?"":"unstar",file_class:FileUtil.getIconClassNameByFullName(t.RAND_KEY,t.ORCP_FILE_NM)}))}),r;function c(e){return TagUtil.text2highlight("SEARCH",TagUtil.removeAllTag(e),l)}}function d(){_(a,l,i,!0,t)}function T(e,t,a){ListHelper.setCount($("#"+e+"SearchCount"),t,"inline-block",100),$("#"+e+"SearchMore").css("display",Number(a)<Number(t)&&i?"block":"none")}"N"!==Often.null2Void(C[a].NEXT_YN,"Y")&&(n=e||!1,c=$("#"+a+"SearchArea"),o=$("#"+a+"SearchResult"),C[a].PG_PER_CNT=i?E[a].totalPaging:20,c.find(".search-title-area").css("display","block"),c.css("display","block"),e||i||function(e){for(var t in T(e,0,C[e].PG_PER_CNT),C)t===e?$("#"+t+"SearchArea").css("display","block"):($("#"+t+"SearchResult").empty(),$("#"+t+"SearchArea").css("display","none"))}(a),e=$.extend({},t),a===searchMode.PROJECT&&(e.START_DATE="",e.END_DATE=""),Ajax.executeApi(E[a].apiKey,$.extend({},C[a],{packetOption:Ajax.OPTION.PREVENT_CALLBACK},{SORT_DESC:LocalUtil.getProjectOrder(),COLABO_COMMT_SRNO:Often.null2Void(f),COLABO_REMARK_SRNO:Often.null2Void(R),SEARCH_RECORD:[$.extend({SRCH_WORD:l,ORDER_TYPE:"A"},e)]}),function(e){f=Often.null2Void(e.COLABO_COMMT_SRNO),R=Often.null2Void(e.COLABO_REMARK_SRNO);var t={pageData:C[a],checkDttm:Often.null2Void(e.CHECK_DTTM),nextYn:e.NEXT_YN,records:e[E[a].recordName],noDataHtml:ListHelper.getNoDataHtml("SEARCH"),callback:{item:s,final:r}};i?T(a,e.CNT,C[a].PG_PER_CNT):(n||T(a,e.CNT,C[a].PG_PER_CNT),t.callback.scroll=d),o.drawListHelper(t)}))}o.find("#projectSearchMore, #postSearchMore, #fileSearchMore").css("display","none"),c.find(".search-title-area").css("display","none"),c.css("display","none"),_("project",e,!0,!1,t,function(){l()&&_("post",e,!0,!1,t,function(){l()&&_("file",e,!0,!1,t)})})}function N(){R=f=""}}();
"use strict";var Upgrade=function(){var e,a,t,i;return{showUpgradeLayer:function(){PopupDraw.closePopup(),(t=$("#allUpgradeStep")).load("/flow-renewal/view/mainview/upgrade.jsp",function(){i=$("#allMainContent"),e=t.find("#userStep");var n,o=$("#upgradeTopBanner");$("#noUpgradeLayer").remove(),o.find("#closeUpgradePageBtn").off("click").on("click",c),-1===_USE_INTT_ID.indexOf("KAKAO")&&-1===_USE_INTT_ID.indexOf("APPLE")?((a=t.find("#flowUpgradeStep")).find("#userStart").text(i18next.t("front.common.startAs",{val:_USER_ID})),(o=a).find("input").off("keyup").on("keyup",CommonJoin.keyupJoinInput),o.find("#upgradeTeamSector").off("change").on("change",CommonJoin.changeTeamSector),o.find("#upgradeFinalStepButton").off("click").on("click",CommonJoin.moveFinalStepButton),o.find(".js-compare-button").off("click").on("click",function(){window.open("/price.act","_blank")}),o.find("#nowJoinButton").off("click").on("click",function(){a.fadeOut(0),e.fadeIn(200),CommonJoin.setUserStepEvent()})):(a=t.find("#kakaoUpgradeStep"),n=a,$("#kakaoUpgradeStepButton").off("click").on("click",function(){n.fadeOut(0),e.fadeIn(200)}),CommonJoin.setUserStepEvent()),i.css("display","none"),e.css("display","none"),a.fadeIn(200)})},closeUpgradePage:o,drawCloseConfirm:c};function c(n){PopupDraw.drawConfirm({contents:{main:i18next.t("front.common.ask",{val:"$t(dictionary.upgrade)",status:"$t(dictionary.cancel)"})},callback:{submit:function(){o(),"function"==typeof n&&n()}}})}function o(){PopupDraw.closePopup(),t.children().remove(),i.fadeIn(200);var n=Often.null2Void(LocalUtil.getLocalValue("SUB_PATH"),"main");"main"===n&&ViewChanger.loadPage(n)}}();
"use strict";var EmailInvite=function(){return{openSendInviteEmlLayer:function(){InviteProject.closeAllInviteLayer(),$("#emailList").empty();for(var t=0;t<5;t++)i();var e="<p>"+i18next.t("front.inviteProject.inviteMessageBottomText")+"</p>";$("#inviteMsg").html(e),$("#sendInviteEmlLayer").css({display:"block",right:"inherit",left:"50%",top:"50%",transform:"translate(-50%,-50%)"})},isSendInviteEmailAndAction:function(t){return 0!==t.findUp("#sendInviteEmail").length&&(function(){var t=$("#emailList .emailItemInput"),e=Validation.checkInput(t),i=$("#inviteMsg").html().replace(/(<p>)/gi,"").replace(/(<\/p>)/gi,"<br>");0<Object.keys(e).length&&"empty"!==e.errorCode?(Often.toast("error",e.errorMessage),e.errorObj.focus()):0!==(e=n(t)).length?Ajax.executeApi(RestApi.POST.COLABO2_SENDIENCE_C002,{COLABO_SRNO:Detail.getProjectSrno(),INVT_URL:$("#inviteLink").text(),CNTN:i,EML_REC:e,packetOption:Ajax.OPTION.PREVENT_EXECUTE},function(){Often.toast("success",i18next.t("front.alert.invitationEmailSent")),t.val("")}):Often.toast("info",i18next.t("front.alert.notExist",{val:"$t(dictionary.email)"}))}(),!0)},isAddEmailAndAction:function(t){return 0!==t.findUp("#addEmail").length&&(i(),!0)},isEmailListAndAction:function(t){if(0===t.findUp("#emailList").length)return!1;t.hasClass("deleteEmail")&&function(t){var e=t.parent(".emailItem"),t=$("#emailList .emailItem").length;5<t?e.remove():e.find(".emailItemInput").val("")}(t);return!0},getEmail:n,isCheckWriteEmail:function(){var t=$("#sendInviteEmlLayer"),e=t.find(".emailItemInput"),i=t.find("#inviteMsg").html().replace("<br>","<br/>"),t="<p>"+i18next.t("front.inviteProject.inviteMessageBottomText")+"</p>",n=!1;$.each(e,function(t,e){""!==$(e).val()&&(n=!0)}),n||i===t||(n=!0);return n}};function n(t){var i=[];return t.each(function(t,e){e=$.trim($(e).val());""!==e&&i.push({EML:e})}),i}function i(){var t=$($("#tempEmailItem").html());return $("#emailList").append(t),1}}();
"use strict";var TeamInvite=function(){var n,s,l;return{openTeamInviteLayer:function(e,t){l=$("#teamInviteSearch"),InviteProject.closeAllInviteLayer(),s=[];var i=e===InviteType.SENDIENCE,n="Y"===LocalUtil.getLocalValue("ONLY_BUY_SETTING","DVSN_TREE_YN"),r=$("#inviteMemberList"),a=$("#inviteOrgChart"),c=$("#teamInviteMenu");i||!n?c.css("display","none"):c.css("display","block");(function(e){$("#teamInviteHeader").text(function(e){return e===InviteType.SENDIENCE?i18next.t("front.common.projectParticipant"):e===InviteType.TEAM?i18next.t("front.InviteProject.inviteCompanyMember"):e===InviteType.NEWCHAT?i18next.t("front.common.newChat"):e===InviteType.INVITECHAT?"대화상대 초대":e===InviteType.FAVORITE?"즐겨찾기 구성원 추가":""}(e)).attr("invite-type",e),$("#memberMenu").find("div").text(function(e){return e===InviteType.NEWCHAT||e===InviteType.INVITECHAT?i18next.t("dictionary.contact"):i18next.t("dictionary.member")}(e))})(e),l.val(""),Member.initPage(),Member.makeMemberList(r,l,o,e,function(){$("#teamInviteLayer").css({display:"flex"})}),$("#memberMenu").find("div").attr("class","team-job-invite-type-2"),$("#orgChartMenu").find("div").attr("class","team-job-invite-type-1"),t&&((t=$("#inviteLayer")).css("display","block"),t.find(".returnMainBtn").css("display","none"));Often.isFunc("INVITATION_POPUP")&&"favorite"!==e?InvitationPopup.openInvitationPopup(!0):$("#teamInviteArea").css("display","block"),a.hasClass("d-none")||(a.addClass("d-none"),r.removeClass("d-none"))},isTeamInviteMenuAndAction:function(e){return 0!==e.findUp("#teamInviteMenu").length&&(function(e){var t=0<e.findUp("#memberMenu").length,i=$("#inviteMemberList"),n=$("#inviteOrgChart");$("#teamInviteSearch").val(""),Organization.closeEmplArea(),$("#memberMenu").find("div").attr("class","").attr("class","team-job-invite-type-"+(t?"2":"1")),$("#orgChartMenu").find("div").attr("class","").attr("class","team-job-invite-type-"+(t?"1":"2")),i.attr("class","participants-list invite-member-list "+(t?"":"d-none")),n.attr("class","").attr("class",t?"d-none":"");e=Often.null2Void($("#teamInviteHeader").attr("invite-type"),"team");t?(Member.initPage(),Member.makeMemberList(i,$("#teamInviteSearch"),o,e,function(){s.forEach(function(e){i.find('li[id="'+e+'"] #selectMemberBtn').toggleClass("my-check-2-1")})})):Organization.initPage(n,$("#inviteEmplArea"),!0);$("#teamInviteArea").css("display","block")}(e),!0)},isSubmitInviteAndAction:function(e){if(0===e.findUp("#submitInvite").length)return!1;e=$("#teamInviteHeader").attr("invite-type");return e===InviteType.NEWCHAT||e===InviteType.INVITECHAT?t("CHAT"):e===InviteType.FAVORITE?t("FAV"):function(){var i=[];i.push({RCVR_ID:_USER_ID,RCVR_GB:"U"}),$("#selectMemberList").find("li").each(function(e,t){i.push({RCVR_ID:$(t).attr("rcvr_cd"),RCVR_GB:$(t).attr("rcvr_gb"),RCVR_NM:$(t).find("span").text()})}),function(e){e={COLABO_SRNO:Detail.getProjectSrno(),SENDIENCE_REC:e,packetOption:Ajax.OPTION.PREVENT_EXECUTE};Ajax.executeApi(RestApi.POST.COLABO2_SENDIENCE_C001,e,function(){Participant.drawProjectParticipantItems(Detail.getProjectSrno(),!0,function(){UpdateElements.autoUpdateElem({ONLY_POST:!0}),Often.toast("success",i18next.t("front.alert.invitedToProject")),InviteProject.closeInvite()})})}(i)}()},isTeamInviteSearchAndAction:function(e){var t=$(e.target).findUp("#teamInviteSearch"),i=$("#teamInviteHeader").attr("invite-type");if(0===t.length)return!1;$("#inviteMemberList").is(":visible")?(n&&clearTimeout(n),n=setTimeout(function(){Member.initPage(),Member.makeMemberList($("#inviteMemberList"),$("#teamInviteSearch"),o,i,function(){s.forEach(function(e){$("#inviteMemberList").find('li[id="'+e+'"] #selectMemberBtn').toggleClass("my-check-2-1")})})},200)):Organization.searchEmpl(e);return!0},clickMemberListUl:o,clickDvsnSelect:function(e,t){var i="0"===e.findUp(".department-item").attr("depth");if(t&&i)return!1;var n=e.findUp(".department-item"),r=e.hasClass("coperate-check-type-2"),i="dvsn_ED"+n.attr("dvsn-cd");r?(e.removeClass("coperate-check-type-2").addClass("coperate-check-type-1"),t||s.splice(s.indexOf(i)),$("#selectMemberList").find("li[id="+i+"]").remove()):(e.removeClass("coperate-check-type-1").addClass("coperate-check-type-2"),e=$("#selectDvsnItem").html(),n=ListHelper.replaceJson(e,{dvsn_name:n.find(".department-name").text(),"rcvr-cd":n.attr("dvsn-cd"),"rcvr-gb":"ED",id:i}),$("#selectMemberList").append(n),t||s.push(i),$(".deleteMemberItem").off("click").on("click",a))},getSelectedDataArray:function(){return s}};function o(e){var t=$(e.target),i=t.findUp(".js-participant-item");0!==i.length&&(0===(e=t.findUp(".js-profile")).length?(t=i.find("#selectMemberBtn").hasClass("my-check-2-1"),i.find("#selectMemberBtn").attr("class","my-check-2"+(t?"":"-1")),$(".js-participant-item").removeClass("active"),i.addClass("active"),t?(s.splice(s.indexOf(i.attr("id"))),$("#selectMemberList").find("li[id="+i.attr("id")+"]").remove()):(t=$("#selectMemberItem").html(),t=ListHelper.replaceJson(t,{name:i.find("#name").text(),"rcvr-cd":i.attr("rcvr_cd"),"rcvr-gb":i.attr("rcvr_gb"),id:i.attr("id"),profile:ListHelper.setProfile(i.attr("profile-image"))}),$("#selectMemberList").append(t),s.push(i.attr("id")),$(".deleteMemberItem").off("click").on("click",a))):(e=e.parents(".js-participant-item").attr("data-id"),Profile.drawProfilePopup(e)))}function a(e){e.stopPropagation();var t=$(e.target),e="ED"===t.parents("li").attr("rcvr_gb");t.parents("li").remove(),e?(e=t.parents("li").attr("rcvr_cd"),$("#inviteOrgChart").find("li[dvsn-cd="+e+"]").find(".js-dvsn-select").attr("class","js-dvsn-select coperate-check-type-1"),s.splice(s.indexOf(e))):(t=Often.null2Void(t.parents("li").attr("id")),$("#inviteMemberList").find("li[id="+t+"]").find("#selectMemberBtn").attr("class","my-check-2"),$("#inviteEmplArea").find("li[id="+t+"]").find("#selectMemberBtn").attr("class","my-check-2"),s.splice(s.indexOf(t)))}function t(e){var n=[],r=[],t=[];$("#selectMemberList").find("li").each(function(e,t){var i=$(t).attr("rcvr_gb");i===INVITEGB.PERSON?n.push({IN_RCVR_USER_ID:$(t).attr("rcvr_cd")}):i===INVITEGB.DVSN&&r.push({DVSN_CD:$(t).attr("rcvr_cd")})}),0!==n.length||0!==r.length?"CHAT"===e?OpenUtil.openMessengerByInvite(Often.null2Void(ROOM_SRNO),n,r,t):"FAV"===e&&MiniFavorite.insertFavoriteMember(GROUP_ID,n,r,t):Often.toast("error","초대대상을 선택해주세요!")}}();
"use strict";var JsonMaker=function(){return{convertJsonString:function(t){var e=PostCondition.getPostCodeByData(t),n=PostCondition.isNewStyleByCntn(t),i=[];n?i=function(t){var e=d(t.CNTN),i=t.ATCH_REC&&t.ATCH_REC.slice(),o=t.IMG_ATCH_REC&&t.IMG_ATCH_REC.slice();(0<i.length||0<o.length)&&$.each(e,function(t,n){$.each(i,function(t,e){return"FILE"===n.COMP_TYPE&&void(FileUtil.getAtchSrno(e.ATCH_SRNO)===n.COMP_DETAIL.ATCH_SRNO&&$.extend(n.COMP_DETAIL,e))}),$.each(o,function(t,e){return"IMAGE"===n.COMP_TYPE&&void(FileUtil.getAtchSrno(e.ATCH_SRNO)===n.COMP_DETAIL.ATCH_SRNO&&$.extend(n.COMP_DETAIL,e))})});return e}(t):i.push(r(t,"TEXT"));var o=[],T=r(t,"TASK"),a=r(t,"TODO"),s=r(t,"SCHEDULE");n||i.push(r(t,"LINK")),n||$.extend(o,function(t){var n=[];return $.each(t.ATCH_REC,function(t,e){n.push({COMP_TYPE:"FILE",COMP_DETAIL:e})}),$.each(t.IMG_ATCH_REC,function(t,e){n.push({COMP_TYPE:"IMAGE",COMP_DETAIL:e})}),n}(t)),e===DetailCode.TASK?(o=i.concat(o),o=[T].concat(o),ItemSubtask.isSubtask(t)||o.push({COMP_TYPE:"SUBTASK",COMP_DETAIL:t.SUBTASK_REC})):e===DetailCode.SCHEDULE?(o=i.concat(o),o=[s].concat(o)):e===DetailCode.TODO?o.push(a):o=i.concat(o);return JSON.stringify({COMPS:o})},getPostJson:function(t){var E=$("#postPopup"),O=$.trim(E.find("#postTitle").val()),e=E.find(".private-button").hasClass("admin"),c=PostCondition.getPostConditionByData(PostCondition.getPopupMode(E),PostPopup.getData().POST_CODE,PostCondition.isNewStyleByPopup(E)),e={COLABO_SRNO:PostPopup.getData().PROJECT_SRNO,COLABO_COMMT_SRNO:PostPopup.getData().POST_SRNO,RANGE_TYPE:e?"M":"A",SCRN_NO:c.isWrite2?"1":"0"};if(c.isWrite2||c.isTask2||c.isSchedule2)return n($.extend({},e,{COMMT_TTL:O,CNTN:function(){var t=$("#postPopup").find(".js-upload-area");if(0===t.length)return"";var a=[],s="";return $.each($(t[0].childNodes),function(t,e){var n,i=e.nodeType===Node.TEXT_NODE,o=e.innerHTML&&"<br>"===e.innerHTML,T=$(e);T.hasClass("js-hidden-component")||("DIV"===e.nodeName&&""!==s&&(s+="\n"),n=Often.null2Void(T.attr("data-code")),i||""===n?o||(s+=TagConvert.html2DbStringByPost(e.outerHTML||e.innerHTML||e.textContent)):(s=l(a,s),a.push({COMP_TYPE:n,COMP_DETAIL:Often.getAttrs(T)[0]})))}),l(a,s),JSON.stringify({COMPS:a})}()}));if(c.isWrite1||c.isTask1)return n($.extend({},e,function(){var t=$("#postPopup"),e=t.find(".js-upload-area"),t=t.find("#postAttached");return 0===e.length&&0===t.length?{}:$.extend({CNTN:function(){var T="";return $.each($(e[0].childNodes),function(t,e){var n=e.nodeType===Node.TEXT_NODE,i=e.innerHTML&&"<br>"===e.innerHTML,o=$(e);"DIV"===e.nodeName&&""!==T&&(T+="\n");o=Often.null2Void(o.attr("data-code"));!n&&""!==o||i||(T+=TagConvert.html2DbStringByPost(e.outerHTML||e.innerHTML||e.textContent))}),T}(),COMMT_ATCH_REC:n("FILE",t.find(".js-attached-file")),COMMT_EDITOR_REC:n("IMAGE",t.find(".js-attached-image"))},function(t){var n={};return $.each($(t[0].childNodes),function(t,e){e=$(e);"LINK"===Often.null2Void(e.attr("data-code"))&&(n=Often.getAttrs(e)[0])}),n}(t.find(".js-attached-url")));function n(i,t){var o=[];return $.each($(t[0].childNodes),function(t,e){var n=$(e),e=Often.null2Void(n.attr("data-code"));i===e&&((n=Often.getAttrs(n)[0]).ATCH_SRNO=FileUtil.getAtchSrno(n),o.push(n))}),o}}()));return n(e);function n(t){return t=t||{},$.extend({},t,c.isTask?{TASK_REC:ItemTask.makeTaskJson(E),SUBTASK_REC:ItemSubtask.makeSubtaskRecord(E)}:c.isSchedule?{SCHD_REC:(e=E,n=$.trim(e.find("#postTitle").val()),i=e.find("#ondDay").prop("checked"),o=Often.null2Void(e.find(".js-start-flatpickr .js-pickr-date").val(),""),T=Often.null2Void(e.find(".js-end-flatpickr .js-pickr-date").val(),""),a=e.find("#alarmButton").val(),s=e.find("#LOCATION").val(),l=e.find("#placeInput").val(),r=TagConvert.html2DbStringByPost(e.find("#memoButton").html()),_=e.find(".js-attendance-input").attr("data-attendance"),C=e.find(".js-attendance-input").attr("data-attendance-insert"),d=e.find(".js-attendance-input").attr("data-attendance-delete"),t=e.find("#videoSpan").attr("data-vc-srno"),[{TTL:n,ALL_DAY_YN:i?"Y":"N",STTG_DTTM:Tz.momentConversion("convertOnly",i?"type17":"type19",o),FNSH_DTTM:Tz.momentConversion("convertOnly",i?"type17":"type19",T),PRE_ALAM:a,VC_SRNO:t,MEMO:r,LOCATION:s,PLACE:l,ATTENDENCE_REC:!SpaceSelectable.isSharePost(e)&&_?u(_):[],INSERT_ATD_REC:!SpaceSelectable.isSharePost(e)&&C?u(C):[],DELETE_ATD_REC:!SpaceSelectable.isSharePost(e)&&d?u(d):[]}])}:c.isTodo?{TODO_TTL:O,TODO_REC:ItemTodo.makeTodoJson(E),CNTN:"",TODO_YN:"Y"}:{});var e,n,i,o,T,a,s,l,r,_,C,d}},getSettingAttrs:function(t,e){return"MAP"===t?$.extend({},{PLACE_TITLE:e.TITLE,LOCATION:e.LOCATION,PLACE:e.PLACE,URL:e.URL}):e},getPostContentsInfo:function(t){var e=function(t){var e=Often.null2Void(t.RGSR_CORP_NM,""),n=Often.null2Void(t.RGSR_DVSN_NM,""),i=Often.isFunc("PRFL_DVSN_SHOW"),o=""===e&&""===n;return{RGSR_ID:t.RGSR_ID,name:t.RGSR_NM,team:n,position:Often.null2Void(t.RGSR_JBCL_NM,""),company:e,profile:ListHelper.setProfile(t.PRFL_PHTG),"prfl-dvsn-display":ListHelper.setDisplay(i,"inline"),"personal-yn":i&&!o?"d-block":"d-none"}}(t),n=function(t){var e=PostCondition.getIamSubtaskByData(t),n=PostCondition.getPostCondition("VIEW",t),i=n.isWrite1?"0":n.postCode,o=LocalUtil.getProjectBgColorCd(),T=t.TASK_REC&&0<t.TASK_REC.length?t.TASK_REC[0]:{},a=$.trim(e||n.isTask?T.TASK_NM:t.COMMT_TTL),T=""===a;return{COLABO_TTL:t.COLABO_TTL,COLABO_SRNO:t.COLABO_SRNO,COLABO_COMMT_SRNO:t.COLABO_COMMT_SRNO,COLABO_REMARK_SRNO:t.COLABO_REMARK_SRNO,CNTN:t.CNTN,READ_YN:Often.null2Void(t.READ_YN,"Y"),"no-title":!n.isSchedule&&T?"no-title":"",COMMT_TTL:n.isSchedule&&T?"COMMT_TTL":a,PIN_YN:t.PIN_YN,PIN_USE_YN:"Y"===t.MNGR_DSNC||"Y"===t.PIN_USE_YN?"js-pin-authority":"",PINNED:"Y"===t.PIN_YN?"on":"","pin-btn-display":ListHelper.setDisplay("N"===t.PIN_YN&&"Y"===t.PIN_USE_YN||"Y"===t.PIN_YN),BG_COLOR_CD:o,"menu-button-display":ListHelper.setDisplay(Authority.isAuthorityCheck("WRITE",t.COLABO_SRNO)||t.RGSR_ID===_USER_ID,"block"),"menu-modify-display":ListHelper.setDisplay(t.RGSR_ID===_USER_ID&&"Y"===t.MODIFY_YN,"block"),"menu-delete-display":ListHelper.setDisplay(t.RGSR_ID===_USER_ID||"Y"===t.DELETE_YN,"block"),"menu-url-display":ListHelper.setDisplay(Often.isFunc(Func.DEVELOP.URL_COPY),"block"),"author-id":t.RGSR_ID,"post-code":i,"post-gb":DetailCode.POST._GB[i],"subtask-gb":e?"subtask":"","post-name":i18next.t(DetailCode.POST._TEXT[i]),"first-contents":C(t),date:Tz.momentTimeZone(t.RGSN_DTTM||t.COMMT_RGSN_DTTM||t.RGSR_DTTM,"type1"),"private-display":ListHelper.setDisplay("M"===t.RANGE_TYPE,"inline-block"),"read-count":Often.null2Void(t.READ_USER_CNT,1),"bookmark-display":"Y"===t.BRING_YN?"on":"","post-url":t.CONNECT_URL,"alarm-display":ListHelper.setDisplay("N"===Often.null2Void(t.READ_YN,"Y"),"block"),"security-class":"A"===t.RANGE_TYPE?"icons-person-7":"icons-lock","security-text":"A"===t.RANGE_TYPE?i18next.t("front.common.public"):i18next.t("prefix.only",{val:"$t(front.common.projectManager)"})}}(t),i=function(t){var e=t.TASK_REC&&0<t.TASK_REC.length||t.TASK_STTS;if(!e)return{"task-yn":"d-none","task-display":ListHelper.setDisplay(!1),"todo-display":ListHelper.setDisplay(!1)};var n=t.TASK_REC&&0<t.TASK_REC.length?t.TASK_REC[0]:t,i=Often.null2Void(n.STTS,t.TASK_STTS),o=n.TASK_NUM,T=n.TASK_SRNO,t="completion"===DetailCode.STATUS._GB[i],n="hold"===DetailCode.STATUS._GB[i];return{"task-display":ListHelper.setDisplay(e,"inline-block"),"task-srno":T,"task-yn":"d-inline-block","task-number":o,"status-code":DetailCode.STATUS._GB[i],status:i18next.t(DetailCode.STATUS._TEXT[i]),"status-raw":i,"complete-yn":t?"complete":n?"hold":"","todo-display":ListHelper.setDisplay(!1)}}(t),o=function(t){if(!(t.SCHD_REC&&0<t.SCHD_REC.length||t.SCHD_STTG_DTTM))return{"schedule-yn":"d-none","start-date":"","start-time":""};var e=t.SCHD_REC&&0<t.SCHD_REC.length?t.SCHD_REC[0]:"",n=Often.null2Void(e.STTG_DTTM,t.SCHD_STTG_DTTM),i=e.FNSH_DTTM,o="Y"===e.ALL_DAY_YN,T=Tz.momentTimeZone(n,"type10"),a=Tz.momentTimeZone(n,"type12"),t=Tz.momentTimeZone(i,"type12"),a=a===t,t=Tz.momentTimeZone(n,"type9"),t='<div class="schedule-date"><strong class="schedule-month">'+T+'</strong><strong class="schedule-day">'+t+"</strong></div>";return{COMMT_TTL:e.TTL,"start-date":Tz.momentTimeZone(n,"type4"),"start-time":Tz.momentTimeZone(n,"type8"),"start-date-time":o?Tz.momentTimeZone(n,"type5")+(a?", "+i18next.t("front.common.allDay"):""):Tz.momentTimeZone(n,"type6"),"start-date-time-raw":n,"end-date-time":o?a?"":Tz.momentTimeZone(i,"type5")+", "+i18next.t("front.common.allDay"):Tz.momentTimeZone(i,a?"type20":"type6"),"end-date-display":ListHelper.setDisplay(!(o&&a),"inline-block"),"schedule-display":ListHelper.setDisplay(!0,"block"),"schedule-header":t,"schedule-period-display":ListHelper.setDisplay(!0,"block")}}(t),T=function(t){if(!(t.UP_LINK_TASK_REC&&0<t.UP_LINK_TASK_REC.length))return{};t=t.UP_LINK_TASK_REC[0];return{UP_TASK_TTL:t.UP_LINK_TASK_NM,"data-up-task-project-srno":t.COLABO_SRNO,"data-up-task-post-srno":t.COLABO_COMMT_SRNO,"data-up-task-srno":t.UP_LINK_TASK_SRNO,"up-task-display":ListHelper.setDisplay(!0,"inline-block")}}(t),a=function(t){var e=t.REMARK_REC&&0<t.REMARK_REC.length||0<t.REMARK_CNT,n=Authority.isAuthorityCheck("REMARK",t.COLABO_SRNO);return $.extend({"remark-count":e?t.REMARK_CNT:"0","remark-display":ListHelper.setDisplay(e,"inline-block"),"remark-over-yn":2<Number(t.REMARK_CNT)?"on":"","remark-area":e?ItemRemark.getRemarkItemHtml(t.REMARK_REC):"","self-profile-url":ListHelper.setProfile(_PRFL_PHTG),"admin-write-yn":n?"":"admin"},ItemRemark.getRemarkWriteConditionJson(n))}(t),s=_(t),t=function(t){if(!(t.TODO_REC&&0<t.TODO_REC.length||t.TODO_DONE_PERCENT))return{};var e=!1,n=Often.null2Void(t.TODO_DONE_PERCENT,ItemTodo.getTodoPercentJson(t.TODO_REC).PERCENT+"");(t.TODO_REC&&0<t.TODO_REC.length||"2"===t.TMPL_TYPE)&&(e=!0);return{"todo-display":ListHelper.setDisplay(e,"inline-block"),TODO_DONE_PERCENT:"0"===n?"0%":Often.null2Void(n+"%"),"todo-srno":Often.null2Void(t.TODO_REC&&0<t.TODO_REC.length&&t.TODO_REC[0].COLABO_TODO_SRNO,""),"mngr-wryn":Often.null2Void(t.MNGR_WR_YN,""),"mngr-dsnc":Often.null2Void(t.MNGR_DSNC,"")}}(t);return $.extend({},e,n,i,o,T,a,s,t)},getEmojiInfo:_,getListComponentInfo:function(t,e){var n=Often.null2Void(t.TMPL_TYPE,"1"),i="2"===n,o="4"===n,T="-1"===n,a=0<Number(t.REMARK_CNT),s=Often.null2Void(t.TASK_STTS),l=Often.null2Void(t.SCHD_STTG_DTTM),r=Often.null2Void(t.TODO_DONE_PERCENT+"%");return{COLABO_TTL:Often.null2Void(t.COLABO_TTL,t.TTL),"post-gb":T?"comment2 comment":DetailCode.POST._GB[n],"post-name":T?i18next.t("dictionary.comment"):i18next.t(DetailCode.POST._TEXT[n]),"first-contents":C(t,e,T),"remark-display":ListHelper.setDisplay(!T&&a,"inline-block"),name:t.RGSR_NM,date:Tz.momentTimeZone(t.RGSN_DTTM,"type1"),"status-display":ListHelper.setDisplay(o,"inline-block"),"status-code":Often.null2Void(DetailCode.STATUS._GB[s]),status:i18next.t(DetailCode.STATUS._TEXT[s]),"schedule-display":ListHelper.setDisplay(!1,"inline-block"),"start-date":Tz.momentTimeZone(l,"type4"),"start-time":Tz.momentTimeZone(l,"type8"),"todo-display":ListHelper.setDisplay(i,"inline-block"),TODO_DONE_PERCENT:r}},str2json:d};function l(t,e){var n,n=""!==(n=e)&&{COMP_TYPE:"TEXT",COMP_DETAIL:{CONTENTS:n,HASHTAGS:TagUtil.extractHashtags(n),MENTIONS:TagUtil.extractMentionedUsers(n)}};return n?(t.push(n),""):e}function r(t,e){var n={};switch(e){case"TITLE":n=t&&t.COMMT_TTL?t.COMMT_TTL:"";break;case"TEXT":case"CONTENTS":n=t&&t.CNTN?t.CNTN:"";break;case"IMAGE":n=t&&t.IMG_ATCH_REC&&0<t.IMG_ATCH_REC.length?t.IMG_ATCH_REC[0]:{};break;case"FILE":n=t&&t.ATCH_REC&&0<t.ATCH_REC.length?t.ATCH_REC[0]:{};break;case"TASK":n=t&&t.TASK_REC&&0<t.TASK_REC.length?t.TASK_REC[0]:{};break;case"TODO":n=t&&t.TODO_REC?t.TODO_REC:{};break;case"SCHEDULE":n=t&&t.SCHD_REC&&0<t.SCHD_REC.length?t.SCHD_REC[0]:{};break;case"LINK":n=t&&""!==Often.null2Void(t.PREVIEW_LINK)?{PREVIEW_TTL:t.PREVIEW_TTL,PREVIEW_IMG:t.PREVIEW_IMG,PREVIEW_LINK:t.PREVIEW_LINK,PREVIEW_CNTN:t.PREVIEW_CNTN,PREVIEW_VIDEO:t.PREVIEW_VIDEO,PREVIEW_TYPE:t.PREVIEW_TYPE}:{}}return n="TEXT"===e||"TODO"===e||"CONTENTS"===e?{CONTENTS:n}:n,0===Object.keys(n).length?{}:{COMP_TYPE:e,COMP_DETAIL:n}}function _(t){var e,n=t.EMT_CDS,i=t.EMT_VIEW1,o=t.EMT_VIEW2,T=i18next.t(DetailCode.EMOJI._TEXT[0]);if(!n)return{"reaction-text":T};var a="";return n.split(", ").forEach(function(t){e=e||t,a+='<li><i class="icon-emoji '+DetailCode.EMOJI._GB[t-1]+'"><span class="blind">'+i18next.t(DetailCode.EMOJI._TEXT[t-1])+"</span></i></li>"}),T=(n=(t=""!==a)&&""!==i?"on":"")?i18next.t(DetailCode.EMOJI._TEXT[e-1]):T,{"emoji-display":ListHelper.setDisplay(t,"block"),"reaction-display":n,"emoji-icons":a,"emoji-text":i+" "+o,"my-reaction":e,"reaction-text":T}}function C(t,e,n){var i=""!==Often.null2Void(e),o=Often.null2Void(TagConvert.db2OneString(t.CNTN,i),t.CNTN_FIRST_LINE);return n||(o=Often.null2Void(TagConvert.db2OneString(t.COMMT_TTL),o)),i?TagUtil.text2highlight("SEARCH",o,e):o}function d(t){var e;try{e=JSON.parse(t)}catch(t){}return e&&e.COMPS?e.COMPS:[]}function u(t){t=t.replace(/\'/,'"');try{return JSON.parse(t)}catch(t){return[]}}}();
"use strict";var Mention=function(){var p,r,s,c,l,f,u,d={PG_NO:1,PG_PER_CNT:30,NEXT_YN:"Y",COLABO_SRNO:""},C=!1,n=!1;return{getStatus:function(){return C},keyDownArrow:function(e){var t;e.stopPropagation(),n?n=!1:(t=$(e.target),r=t.findUp("#postPopup"),s=t.findUp(".detail-item"),t=0<r.length,c=(p=t?r:s).find("#innerCommonPopup"),229===e.keyCode&&(Often.getClientOSInfo().isMac||Often.isBrowser("ie"))&&(n=!0),c.isArrowSelect(e)||!KeyCheck.isKey(e,"ENTER")||0!==(t=c.find(".js-mention-item.select")).length&&(e.preventDefault(),g(t,!0)))},keyUpCheckMention:function(e){var t,n,i,o=$(e.target).hasClass("js-remark-area");function a(){var o,e,t;function a(e){e=$(e.target).findUp(".js-mention-item");0!==e.length&&g(e)}function r(e){var t=p.find(".edit-item"),n=0<t.length,i=0<p.findUp("#postPopup").length,o=0===e.length||!1===C?{display:"none"}:(o=(n?t:i?p.find(".detail-item"):p).offset().top,i=n?0:(i?p.find(".detail-item"):p).offset().left,o=u.y-o+20,i=u.x-i,c.outerHeight()+u.y>window.innerHeight-100&&(o-=c.outerHeight()+20),{transform:"translate("+i+"px, "+o+"px)",display:"block"});c.css(o)}function s(e){var t={RCVR_USER_ID:"ALL",RCVR_USER_NM:"ALL",DVSN_NM:i18next.t("front.common.projectAllParticipant")};return-1<"all".indexOf(e.toLowerCase())?t:""}function l(e){var a="",r=$("#mentionItem").html();return $.each(e,function(e,t){var n=Often.null2Void(t.RCVR_CORP_NM,""),i=Often.null2Void(t.RCVR_DVSN_NM,""),o=""===n&&""===i;a+=ListHelper.replaceJson(r,{id:t.RCVR_USER_ID,name:t.RCVR_USER_NM,team:i,position:Often.null2Void(t.JBCL_NM,""),company:n,profile:ListHelper.setProfile(t.PRFL_PHTG),"personal-yn":o?"d-none":"d-block"})}),a}C&&(t=c.find(".mention-ul"),Caret.captureIndex("@"),ListHelper.initPageData(d,t),e=Often.null2Void(Caret.getInput().trim()),(t=e.match(/@/gi))&&(t=1===t.length,o=e.replace(t?"@":/^@.*@/gi,""),c.css("display","none"),function i(){if("N"===d.NEXT_YN)return;Ajax.executeApi(RestApi.GET.COLABO2_SENDIENCE_R101,$.extend({packetOption:Ajax.OPTION.PREVENT_CALLBACK},d,{SRCH_WORD:o,SORT_DESC:"N"}),function(t){var n=1===d.PG_NO,e=s(o);""!==e&&t.SENDIENCE_REC.unshift(e),c.find(".mention-ul").drawListHelper({pageData:d,nextYn:t.NEXT_YN,records:t.SENDIENCE_REC,callback:{click:a,item:l,scroll:i,final:function(e){r(t.SENDIENCE_REC),n&&(c.attr("data-code","mention"),c.find(".mention-ul").scrollTop(0),ListHelper.selectFirstItemByArrow(e))}}})})}()),Caret.saveCaret())}(PostCondition.getFuncCondition().isMentionTag||o)&&(HashTag.getStatus()?C=!1:(t=$(e.target),r=t.findUp("#postPopup"),s=t.findUp(".detail-item"),n=0<r.length,o=s.hasClass("back-area"),n||o?(0===(c=(p=n?r:s).find("#innerCommonPopup")).length&&(i=$($("#mentionLayer").html()).attr({id:"innerCommonPopup","data-code":"mention"}),n?p.find(".js-popup-before").before(i):s.prepend(i),c=p.find("#innerCommonPopup")),i=Often.null2Void(s.attr("data-project-srno"),LocalUtil.getLocalValue("CURRENT_PROJECT_SETTING","COLABO_SRNO")),p=n?r:t.findUp(".js-popup-before"),d.COLABO_SRNO=i,(KeyCheck.isKey(e,"BACK")||KeyCheck.isKey(e,"ESC")||KeyCheck.isKey(e,"SPACE_BAR"))&&C&&m(),!function(e){var t=Caret.getInput(),n=0===t.trim().indexOf("@"),i="@"===t.trim(),o=e.shiftKey&&50===e.keyCode&&n,a="@"===e.key&&n,r=e.shiftKey&&"@"===e.key&&i,i="2"===e.key&&i,t=KeyCheck.isKey(e,"BACK")&&n&&t.trim().length===t.length;return o||a||r||i||t}(e)?(l&&clearTimeout(l),l=setTimeout(function(){Caret.isTextInput(e)&&a()},300)):(C=!0,u=Caret.getPosition(),f&&clearTimeout(f),f=setTimeout(a,300))):C=!1))},isMentionAndAction:function(e){e=e.findUp(".mention-span");if(!e||0===e.length)return!1;e=e.attr("user-id");return Profile.drawProfilePopup(e),!0},clearMention:m};function m(){C=!1,c&&(c.find(".select").removeClass("select"),c.css({display:"none"}))}function g(e,t){var n=e.find(".author").text(),e=e.attr("data-user-id"),i=$('<span class="tag mention-span" contenteditable="false"></span>');i.attr("user-id",e).text(n),m(),t?setTimeout(function(){Caret.changeAndFocusNode(i)},0):Caret.changeAndFocusNode(i)}}();
"use strict";var PostAppend=function(){return{appendFileOrImg:function(e,t){n(e,t,PostComponent.getFileAndImgObj)},appendLink:function(e,t){n(e,t,PostComponent.getLinkObj)},appendMap:function(e,t){PostCondition.getFuncCondition().isGooglePlace&&i((e.is("#postPopup")?e.find(".edit-item"):e.findUp(".edit-item")).find(".js-upload-area.js-paste-layer:first"),PostComponent.getMapObj(t))},appendMadeObj:i};function n(e,t,n){var s,a=PostCondition.getPostConditionByData();a.isSchedule1||(e=(s=e.is("#postPopup")?e.find(".edit-item"):e.findUp(".edit-item")).find(".js-upload-area.js-paste-layer:first"),i(a.isNewStyle?e:s.find("#postAttached"),n(t)))}function i(s,e){var t=""===$.trim(s.text());!function(){var e=s[0].childNodes;{var n;0<e.length&&(n=[],$.each($(e),function(e,t){"DIV"!==t.nodeName&&n.push(t)}),0<n.length&&$(n).wrapAll("<div></div>"))}}();var n,a=s.is("#postAttached"),i=e.attr("id","newComponent"),o='<div class="js-hidden-component hidden-component" contenteditable="false">&nbsp;</div>';if((n=e).attr("contentEditable","false").addClass("create-box").css("cursor","pointer"),n.find(".js-down-btn").css("display","none"),n.find(".js-del-btn").css("display","block"),n.on("mouseenter",function(e){e=$(e.currentTarget).parents(".js-upload-area");(function(e){if(0!==e.length)for(var t=0;t++;e[0].childNodes.length){var n=e[0].childNodes[t],s=n.nodeType===Node.TEXT_NODE,a=$(n).text(),i=""!==$.trim(a);s&&(i&&$(n).after("<div>"+a+"</div>"),$(n).remove())}})(e),function(n){var s;n.hasClass("ui-sortable")||n.sortable({cursorAt:{top:5,left:5},scroll:!1,tolerance:"pointer",placeholder:"document-item-highlight",start:function(e,t){n.sortable("refreshPositions")},helper:function(e,t){var n=t.clone();$(n).css("opacity","0.3"),s=n.insertAfter(t);n=$(t);return n.hasClass("file-item")||n.css("transform","scale(0.5) translate(-50%, -50%)"),n.css("display","inline-block"),n.find(".move-button").css("display","none"),n.find(".js-del-btn").css("display","none"),t.clone()},stop:function(e,t){t=$(t.item);t.hasClass("file-item")||t.css("transform","scale(1)"),t.css("display","block"),t.find(".move-button").css("display",""),t.find(".js-del-btn").css("display","block"),0<s.prev(".js-hidden-component").length&&s.prev().remove(),0<s.next(".js-hidden-component").length&&s.next().remove(),s&&s.remove(),t.prev().hasClass("create-box")&&t.before("<div class='js-hidden-component hidden-component' contenteditable='false'><br></div>"),t.next().hasClass("create-box")&&t.after("<div class='js-hidden-component hidden-component' contenteditable='false'><br></div>"),0===t.prev().length&&t.before("<div><br></div>"),0===t.next().length&&t.after("<div><br></div>")}})}(e)}).on("mouseleave",function(e){e=$(e.currentTarget).parents(".js-upload-area");0<e.find(".document-item-highlight").length||e.sortable("destroy")}),a)return e.hasClass("image-item")&&s.find(".js-attached-image").append(e),e.hasClass("file-item")&&s.find(".js-attached-file").append(e),e.hasClass("url-link")&&s.find(".js-attached-url").append(e),void l();if(!t){t=Caret.getLastFocusNode();if(r($(t)))return;if(r($(t).parent()))return}function d(e,t){function n(e){return e.hasClass("js-post-file")||e.hasClass("js-post-img")||e.hasClass("js-map-item")||e.hasClass("url-link")}e.hasClass("js-upload-area")?s.append(t):e.after(t),n(t.prev())&&t.before(o),n(t.next())&&t.after(o),setTimeout(function(){0===t.prev().length&&t.before(o),0===t.next().length&&t.after("<div><br></div>")},0)}function r(e){return!e.hasClass("js-hidden-component")&&(e.parent().hasClass("js-upload-area")&&(d(e,i),l(),1))}function l(){var e=$("#newComponent");Caret.focusNextCaret(e.next()[0],0),e.attr("id","")}d(s,i),l()}}();
"use strict";var PostComponent=function(){return{getHtmlByPostRecord:function(e,n){var s="",o=$("#postItem").html(),a=$("#inviteItem").html();return $.each(e,function(e,t){var i,l="A"===t.COMMT_GB||"A"===t.TMPL_TYPE;l&&"list"===LocalUtil.getFeedType()||(i=l?a:o,l=function(e){var n="",t="",i="",s="",o="",a="",r="",T="",I="",_="",l=$("#postWrap").html(),p=$("#foldWrap").html(),m=$("#imageComponent").html(),E=$("#fileComponent").html(),L=$("#mapComponent").html(),c=$("#bigMapComponent").html(),d=$("#linkComponent").html(),H=0,g=0,M=0,u=PostCondition.getPostCondition("VIEW",e),O=u.isWrite1||u.isTask1||u.isSchedule1;JsonMaker.str2json(JsonMaker.convertJsonString(e)).forEach(function(e){switch(e.COMP_TYPE){case"TEXT":l=(l=e.COMP_DETAIL)&&l.CONTENTS?TagConvert.db2HtmlStringByPost(l.CONTENTS):"";s+=l,n+=u.isTask1?"":l;break;case"IMAGE":var t=C(m,e.COMP_DETAIL);o+=t,n+=O?"":t,H++;break;case"FILE":t=A(E,e.COMP_DETAIL);a+="<li>"+t+"</li>",n+=O?"":t,M++;break;case"MAP":r+=S(L,e.COMP_DETAIL),n+=O?"":S(c,e.COMP_DETAIL),g++;break;case"LINK":T+=R(d,e.COMP_DETAIL);var i=ScrapMetaData.isOverWidthMetaImageByDbData(e.COMP_DETAIL),i=$(i?"#overBigLinkComponent":"#bigLinkComponent").html();n+=O?"":R(i,e.COMP_DETAIL),g++;break;case"TASK":i=u.isTask?ItemTask.getLookHtml(e.COMP_DETAIL):"";n+=u.isTask1?"":i,I+=i;break;case"TODO":n+=u.isTodo?ItemTodo.getLookHtml(e.COMP_DETAIL):"";break;case"SCHEDULE":n+=u.isSchedule?ItemSchedule.getLookHtml(e.COMP_DETAIL):"";break;case"SUBTASK":n+=u.isTask1?"":ItemSubtask.getLookHtml(e.COMP_DETAIL),_+=ItemSubtask.getLookHtml(e.COMP_DETAIL)}var l});var P=function(e,t,i){t=$("<div id='textPhantom' style='width:"+t+"px;position:absolute;display: none;"+i+"'></div>"),i=$("body");t.html(e),i.append(t);t=i.find("#textPhantom").height();return i.find("#textPhantom").remove(),t}($.trim(s),612,"line-height:25px;"),D=(u.isWrite2||u.isTask2||u.isSchedule2)&&(248<P||1<H||0<H&&0<g||0<H&&0<M||0<g&&0<M),e=O||D,P=u.isSchedule1||u.isTodo;return n=ListHelper.replaceJson(l,{id:"originalPost",contents:$.trim(n),display:ListHelper.setDisplay(!e||P)}),P?n:(t+=ListHelper.replaceJson(l,{id:"summaryPost",contents:I+$.trim(s),"add-class":O?"":"hidden",display:ListHelper.setDisplay(e)}),""!==o&&(i+='<div class="js-post-img post-upload-img">'+o+"</div>"),""!==r&&(i+=r),""!==T&&(i+=T),""!==a&&(i+='<ul class="upload-document-group">'+a+"</ul>"),""!==_&&(i+=_),t+=ListHelper.replaceJson(p,{"more-btn-display":ListHelper.setDisplay(D),"fold-area":i,"fold-area-display":ListHelper.setDisplay(e)}),n+t)}(t),t=ListHelper.replaceJson(i,$.extend({contents:l,"data-code":"VIEW"},JsonMaker.getPostContentsInfo(t))),s=n?t+s:s+t)}),s},getFileHtml:A,getImgHtml:C,getFileAndImgObj:function(e,t){e.FILE_NAME=FileUtil.getFileName(e);e=ImageUtil.isImageType(e)&&!t?C($("#imageComponent").html(),e):A($("#fileComponent").html(),e);return $(e)},getLinkObj:function(e){var t=""!==e.PREVIEW_IMG&&"size1"===e.PREVIEW_GB,t=R($(t?"#overBigLinkComponent":"#bigLinkComponent").html(),e),t=$(t);return t.attr(JsonMaker.getSettingAttrs("LINK",e)),t},getMapObj:function(e){var t=S($("#bigMapComponent").html(),e),t=$(t);return t.attr(JsonMaker.getSettingAttrs("MAP",e)),t}};function A(e,t){if(!t)return"";var i=FileUtil.getFileName(t),l=FileUtil.getFileNameAndExtension(i),n=FileUtil.getRandKey(t),s="GOOGLEDRIVE"===n||"DROPBOX"===n;return ListHelper.replaceJson(e,{ATCH_SRNO:FileUtil.getAtchSrno(t.ATCH_SRNO),RAND_KEY:n,USE_INTT_ID:Often.null2Void(t.ATCH_USE_INTT_ID,t.USE_INTT_ID),WIDTH:t.WIDTH,HEIGHT:t.HEIGHT,FILE_NM:i,RGSR_NM:Often.null2Void(t.RGSR_NM,_USER_NM),FILE_SIZE:t.FILE_SIZE,RGSN_DTTM:t.RGSN_DTTM,FILE_DOWN_URL:t.FILE_DOWN_URL,ATCH_URL:s?Often.null2Void(t.ATCH_URL,t.FILE_DOWN_URL):"",name:i,"ext-class":FileUtil.checkAndConvertDriveExtClass(n,FileUtil.getStandardExtension(l.EXT)),"lock-icon-display":ListHelper.setDisplay("Y"===Often.null2Void(t.DRM_YN,"N")||Often.isFunc(Func.CLOUD.DOWNLOAD_PREVENT)),size:FileUtil.convertDriveSize(n,FileUtil.getFileSize(t.FILE_SIZE)),"download-button-display":ListHelper.setDisplay(!s,"block")})}function C(e,t){if(!t)return"";var i="https://platform.bizplay.co.kr/wecloud/20161227_a7e3f5c1-d9f4-4638-b23c-b6ed797cd026.png"===t.THUM_IMG_PATH;return i&&(t.THUM_IMG_PATH="/flow-renewal/assets/images/file_limit.png"),ListHelper.replaceJson(e,{ATCH_SRNO:FileUtil.getAtchSrno(t.ATCH_SRNO),RAND_KEY:FileUtil.getRandKey(t),WIDTH:t.WIDTH,HEIGHT:t.HEIGHT,ATCH_URL:Often.null2Void(t.ATCH_URL,t.IMG_PATH),FILE_DOWN_URL:Often.null2Void(t.FILE_DOWN_URL),IMG_PATH:Often.null2Void(t.IMG_PATH,t.ATCH_URL),THUM_IMG_PATH:t.THUM_IMG_PATH,FILE_NM:FileUtil.getFileName(t),RGSR_NM:t.RGSR_NM,FILE_SIZE:t.FILE_SIZE,RGSN_DTTM:t.RGSN_DTTM,image_style:ListHelper.setImage(t.THUM_IMG_PATH),image_src:ListHelper.setImageSrc("POST",t.THUM_IMG_PATH),image_class:i?"image-limit":""})}function S(e,t){return t?ListHelper.replaceJson(e,{src:ListHelper.setImageSrc("POST",GoogleMap.convertGoogleMapImage(t.LOCATION)),title:Often.null2Void(t.PLACE_TITLE,t.TITLE),place:t.PLACE,URL:t.URL}):""}function R(e,t){if(!t)return"";var i,l=""!==Often.null2Void(t.PREVIEW_IMG),n=""!==Often.null2Void(t.PREVIEW_VIDEO);return l?n||(i=ListHelper.setImage(t.PREVIEW_IMG)):i="",ListHelper.replaceJson(e,{title:TagUtil.escapeHtml(t.PREVIEW_TTL),url:t.PREVIEW_LINK,image:i,contents:TagUtil.escapeHtml(t.PREVIEW_CNTN),"link-gb":n?"video":"file","src-video-url":ListHelper.setSrc(t.PREVIEW_VIDEO),"src-image-url":ListHelper.setSrc(t.PREVIEW_IMG),"link-image-display":ListHelper.setDisplay(!n,"block"),"link-video-display":ListHelper.setDisplay(n,"block")})}}();
"use strict";var PostCondition=function(){return{isNewStyleByCntn:S,isNewStyleByPopup:function(e){return e.find(".js-bottom-item.hashtag-item").is(":visible")},getPopupMode:P,getIamSubtaskByData:function(e){return e.UP_LINK_TASK_REC&&0<e.UP_LINK_TASK_REC.length},getPostCodeByData:i,getFuncCondition:function(e,t){e=e||P($("#postPopup")),t=t||PostPopup.getOnePostData();t=s(e,t);return{isUpload:t.isWrite||t.isTask||t.isSchedule2,isGooglePlace:Often.isFunc(Func.ENTER.GOOGLE_MAP)&&(t.isWrite2||t.isTask2),isHashTag:!t.isSharePost&&(t.isWrite2||t.isTask2||t.isSchedule2),isMentionTag:!t.isSharePost&&(t.isWrite||t.isTask||t.isSchedule2),isStyleTag:t.isWrite2||t.isTask2||t.isSchedule2}},getPostCondition:s,getPostConditionByData:o};function S(e){return"Y"===Often.null2Void(e.CNTN_JSON_YN,"N")||""!==Often.null2Void(e.CNTN)&&-1<e.CNTN.indexOf('{"COMPS":')}function P(e){return e.attr("data-code")}function i(e){if(e&&0<Object.keys(e).length){var t=e.SCHD_REC&&0<e.SCHD_REC.length?DetailCode.SCHEDULE:e.TODO_REC&&0<e.TODO_REC.length?DetailCode.TODO:e.TASK_REC&&0<e.TASK_REC.length?DetailCode.TASK:DetailCode.WRITE,t=e.TMPL_TYPE||t;return Often.null2Void(t,DetailCode.WRITE)}return PostPopup.getData().POST_CODE}function s(e,t){return o(e=e||P($("#postPopup")),i(t=t||PostPopup.getOnePostData()),S(t))}function o(e,t,i){e=Often.null2Void(e||P($("#postPopup")),"VIEW"),t=t||PostPopup.getData().POST_CODE,i=i||S(PostPopup.getOnePostData());var s="ADD"===e,o="EDIT"===e,n="VIEW"===e,a=e===DetailCode.SHARE_POST.CODE,u=t===DetailCode.WRITE,d=t===DetailCode.TODO,l=t===DetailCode.SCHEDULE,T=t===DetailCode.TASK,r=Often.isFunc(Func.CLOUD.TASK_UPGRADE),C=Often.isFunc(Func.CLOUD.SCHEDULE_UPGRADE),e={postCode:t,isAdd:s,isEdit:o,isView:n,isSharePost:a,isWrite:u,isTodo:d,isSchedule:l,isTask:T};return s?($.extend(e,{isWrite1:u&&!1,isWrite2:u&&!0,isTask1:T&&!r,isTask2:T&&r,isSchedule1:l&&!C,isSchedule2:l&&C}),$.extend(e,{isNewStyle:u||e.isTask2||e.isSchedule2}),e):{postCode:t,isAdd:s,isEdit:o,isView:n,isSharePost:a,isWrite:u,isTodo:d,isSchedule:l,isTask:T,isWrite1:u&&!i&&(o||n||a),isWrite2:u&&i&&(o||n||a),isTask1:T&&!i&&(o||n||a),isTask2:T&&i&&(o||n||a),isSchedule1:l&&!i&&(o||n||a),isSchedule2:l&&i&&(o||n||a),isNewStyle:i}}}();
"use strict";var PostReadCheck=function(){var r,i,o,c={PG_NO:1,PG_PER_CNT:30,NEXT_YN:"Y",COLABO_SRNO:0,COLABO_COMMT_SRNO:0,SRCH_WORD:"",MODE:"READ"};return{showReadCheckPopUp:function(t,e,a){(r=PopupDraw.getPopupWrapObj().attr("id","readCheckPopup")).find(".contents").html($("#readCheckPopup").html()),i=a.find(".confirmation-number"),ListHelper.initPageData(c,r.find(".participants-list")),c.COLABO_SRNO=t,c.COLABO_COMMT_SRNO=e,c.SRCH_WORD="",p("READ"),r.off("click").on("click",s).off("keyup").on("keyup",l)},closePopup:d};function p(e){"N"!==c.NEXT_YN&&(c.MODE=e,Ajax.executeApi(RestApi.GET.COLABO2_SENDIENCE_R101,$.extend({CUR_DTTM:e},c),function(t){r.find(".participants-list").drawListHelper({pageData:c,nextYn:t.NEXT_YN,records:t.SENDIENCE_REC,noDataHtml:ListHelper.getNoDataHtml("READ-CHECKER"),callback:{click:n,item:a,scroll:function(){p(e)},final:function(){var a;a=t,r.is(":visible")||(function(){var t=r.find(".js-read-tab-item[data-code=READ]"),e=r.find(".js-read-tab-item[data-code=UNREAD]");t.text(t.text()+" ("+a.READ_CNT+")"),i.text(a.READ_CNT),e.text(e.text()+" ("+(Number(a.SENDIENCE_CNT)-Number(a.READ_CNT))+")")}(),$("body").append(r),r.fadeIn(200))}}})}))}function a(t){var i="READ"===c.MODE,n="",r=$("#readCheckItem").html();return $.each(t,function(t,e){var a={};a["profile-url"]=ListHelper.setProfile(e.PRFL_PHTG),i&&(a["read-text"]=i18next.t("dictionary.read")),i&&(a["read-time"]=Tz.momentTimeZone(e.READ_DTTM,"type1")),n+=ListHelper.replaceJson(r,$.extend(a,e))}),n}function n(t){t=$(t.target).findUp(".reader-item");0<t.length&&Profile.drawProfilePopup(t.attr("data-user-id"))}function d(){r.fadeOut(200,function(){r.remove()})}function s(t){t.stopPropagation();var e,a,i,n=$(t.target),t=$(t.currentTarget);e=t,a="team-job-invite-type-",(0!==(i=n.findUp(".js-read-tab-item")).length?(i.hasClass(a+"2")||(e.find(".js-read-tab-item").toggleClass(a+"1").toggleClass(a+"2"),o&&clearTimeout(o),o=setTimeout(function(){ListHelper.initPageData(c,r.find(".participants-list")),p(i.attr("data-code"))},200)),1):0!==n.findUp(".js-close-event").length?(d(),1):0!==n.findUp(".js-read-check-layer").length)||d()}function l(t){var e,a,i;t.stopPropagation(),e=t,a=$(e.target).findUp(".project-search-input"),i=$.trim(a.val()),0===a.length||KeyCheck.isKey(e,"ESC")||(c.SRCH_WORD=i,o&&clearTimeout(o),o=setTimeout(function(){ListHelper.initPageData(c,r.find(".participants-list")),p(r.find(".team-job-invite-type-2").attr("data-code"))},200))}}();
"use strict";var ReactionCheck=function(){var o;return{showReactionCheckPopup:function(e,i,t){(o=PopupDraw.getPopupWrapObj().attr("id","reactionCheckPopup")).find(".contents").html($("#reactionCheckPopup").html()),o.is(":visible")||($("body").append(o),o.fadeIn(200),t={COLABO_SRNO:i,COLABO_COMMT_SRNO:t},0<e.findUp(".js-remark-like").length&&(e=e.findUp(".remark-item").attr("remark-srno"),t.COLABO_REMARK_SRNO=e),Ajax.executeApi(RestApi.GET.COLABO2_EMT_R001,t,function(e){var i,t,n;i=o,t=e,e=DetailCode.EMOJI._GB,i=i.find(".js-reaction-check-layer"),n=i.find(".js-total-reaction"),$.each(e,function(e,i){"0"===t["EMT_CD_"+(e+1)]||(n.find(".icon-emoji."+i).findUp(".reaction-emoji-item").addClass("on"),n.find(".icon-emoji."+i).next(".js-emoji-count").text(t["EMT_CD_"+(e+1)]))}),i.find(".js-total-emoji-count").text(t.EMT_CNT),function(e,i){if(void 0===i)return;var t="",n=$("#reactionCheckItem").html();$.each(i,function(e,i){t+=ListHelper.replaceJson(n,{RCVR_USER_ID:i.RCVR_USER_ID,EMT_CD:DetailCode.EMOJI._GB[i.EMT_CD-1]+" on",EMOJI_TEXT:i18next.t(DetailCode.EMOJI._TEXT[i.EMT_CD-1]),profile_url:ListHelper.setProfile(i.PRFL_PHTG),RCVR_USER_NM:i.RCVR_USER_NM,JBCL_NM:i.JBCL_NM,RCVR_CORP_NM:i.RCVR_CORP_NM,RCVR_DVSN_NM:i.RCVR_DVSN_NM})}),e.find(".js-reaction-participants").append(t)}(i,t.EMT_REC),o.off("click").on("click",r).off("keydown").on("keydown",function(e){KeyCheck.isKey(e,"BACK")&&c()})}))},closePopup:c};function c(e){if($(".js-profile-popup").is(":visible"))return PopupDraw.closePopup();o.fadeOut(200,function(){o.remove()})}function r(e){e.stopPropagation();var i=$(e.target);(function(e){e=e.findUp(".js-reaction-check-item");0!==e.length&&Profile.drawProfilePopup(e.attr("data-user-id"))})(i),(0!==i.findUp(".js-close-event").length?(c(),1):0!==i.findUp(".js-reaction-check-layer").length)||c()}}();
"use strict";function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var StyleTag=function(){var t,y,p;return{mouseUpCheck:function(e){n()},mouseDownCheck:function(e){!function(e){t=$(e.currentTarget);e=r();Often.clog("controlSelection",e),0!==$(e.focusNode).parents(".js-upload-area").length&&e&&(e.removeAllRanges?(t.find("#styleTagItem").hide(),e.removeAllRanges()):e.empty&&(t.find("#styleTagItem").hide(),e.empty()))}(e)},keyUpCheck:function(e){(KeyCheck.isKey(e,"BACK")||KeyCheck.isKey(e,"DELETE"))&&o();n()},keyDownCheck:function(e){var t=0<$(e.target).findUp("[contenteditable=true]").length,n=KeyCheck.isStyleCommand(e);if(n&&(t&&e.preventDefault(),PostCondition.getFuncCondition().isStyleTag)){t=e.key.toUpperCase();return"S"===t?l(e):"B"===t?f(e):"I"===t?u(e):"U"===t?s(e):void 0}}};function n(){if(PostCondition.getFuncCondition().isStyleTag){var e=r();if(0!==$(e.focusNode).parents(".js-upload-area").length){if(!e||1!==e.rangeCount||!function(e){h();var t,n,o,r=e.rangeCount;if(!e)return!1;if(e.isCollapsed)return!1;try{for(var i=0;i<r;i++){var a=e.getRangeAt(i),f=a.startContainer,u=a.endContainer;if(t=$(f),n=$(u),t[0]&&n[0])if(t[0]===n[0])for(o=t.parent();o[0];){if(o[0]===y[0])return!0;o=o.parent()}else{var s=!1;for(o=t.parent();o[0];){if(o[0]===y[0]){s=!0;break}o=o.parent()}if(s)for(o=n.parent();o[0];){if(o[0]===y[0])return!0;o=o.parent()}}return!1}}catch(e){return!1}}(e))return o(),0;if(e.anchorNode.nodeType!==Node.TEXT_NODE)return o(),0;e=e.getRangeAt(0);h(),p.find("#styleTagBold").off("mousedown").on("mousedown",a),p.find("#styleTagItalic").off("mousedown").on("mousedown",a),p.find("#styleTagUnderLine").off("mousedown").on("mousedown",a),p.find("#styleTagLineThrough").off("mousedown").on("mousedown",a),p.find("#styleTagBold").off("mouseup").on("mouseup",f),p.find("#styleTagItalic").off("mouseup").on("mouseup",u),p.find("#styleTagUnderLine").off("mouseup").on("mouseup",s),p.find("#styleTagLineThrough").off("mouseup").on("mouseup",l),function(e){h();e=function(e){h();var t=y.width(),n=y.offset(),o=p.height(),r=p.outerWidth(),i={x:0,y:0},a=o+20,f=r/2;e&&((o=e.getClientRects()).length?(i.x=o[0].left-n.left+o[0].width/2,i.y=o[0].top-n.top):void 0!==e.startContainer.getBoundingClientRect?(i.x=e.startContainer.getBoundingClientRect().left-n.left+e.startContainer.getBoundingClientRect().width/2,i.y=e.startContainer.getBoundingClientRect().top-n.top):(i.x=e.getBoundingClientRect().left-n.left+e.getBoundingClientRect().width/2,i.y=e.getBoundingClientRect().top-n.top),i.x-=f,i.y-=a,i.x<0&&(i.x=0),i.x>t-r&&(i.x=t-r));return i}(e);p.css({top:e.y+"px",left:e.x+"px"}),i(),p.fadeIn(200)}(e)}}}function h(){t=$("#postPopup"),p=t.find("#styleTagItem"),y=t.find("#postCntn")}function o(){h(),p.fadeOut(200)}function r(){return h(),!!y.is(":visible")&&(document.getSelection?document.getSelection():!!window.getSelection&&window.getSelection())}function i(){h();var e,t=window.getSelection().rangeCount,n=[],o=Often.isBrowser("ie")?["STRONG","EM","U","STRIKE"]:["B","I","U","STRIKE"],r=[];try{for(var i=0;i<t;i++){var a=window.getSelection().getRangeAt(i).startContainer,f=window.getSelection().getRangeAt(i).endContainer,u=$(a),s=$(f),l=[];if(u[0]&&s[0]){if(y[0]&&y[0]===s[0]){n.push([]);continue}for(e=u.parent();e[0]&&y[0]!==e[0];){var d=Often.null2Void(e.attr("style"));d&&(-1<d.indexOf("line-through")&&l.push("STRIKE"),-1<d.indexOf("underline ")&&l.push("U"),-1<d.indexOf("italic")&&l.push("I")),l.push(e.prop("tagName")),e=e.parent()}}l=_toConsumableArray(new Set(l)),n.push(l)}for(i=0;i<o.length;i++){for(var c=!0,g=0;g<n.length;g++)if(-1===n[g].indexOf(o[i])){c=!1;break}c&&r.push(o[i])}-1<r.indexOf("B")||-1<r.indexOf("STRONG")?p.find(".icons-font-style.bold").addClass("active"):p.find(".icons-font-style.bold").removeClass("active"),-1<r.indexOf("I")||-1<r.indexOf("EM")?p.find(".icons-font-style.italic").addClass("active"):p.find(".icons-font-style.italic").removeClass("active"),-1<r.indexOf("U")?p.find(".icons-font-style.underline").addClass("active"):p.find(".icons-font-style.underline").removeClass("active"),-1<r.indexOf("STRIKE")?p.find(".icons-font-style.line-through").addClass("active"):p.find(".icons-font-style.line-through").removeClass("active"),Often.isBrowser("ie")&&$("#styleTagItem").find(":focus").blur()}catch(e){}}function a(e){e.stopPropagation()}function f(e){d(e,"bold")}function u(e){d(e,"italic")}function s(e){d(e,"underline")}function l(e){d(e,"strikeThrough")}function d(e,t){a(e),document.execCommand(t),i()}}();
"use strict";var WorkerPopup=function(){var l,c,a,r,f,u,p,d,P,g,C,_,O,s,k={PG_NO:1,PG_PER_CNT:20,NEXT_YN:"Y"},R="workerPopup";return{toggleWorkerPopup:function(t,e,n,i){o(),C=n,0<P.length?v():function(t,e,s){var n=0<C.findUp("#postPopup").length;if(r=n?PostPopup.getData().PROJECT_SRNO:Detail.getProjectSrno(),f=Often.null2Void(t.attr("data-post-code"),PostPopup.getData().POST_CODE),!r||0===r.length)return Often.toast("error",i18next.t("front.alert.select",{val:"$t(dictionary.project)"}));d=!1,u=f===DetailCode.TODO,p=0<C.findUp(".js-subtask-area").length,m(t),o(),E([]),"ADD"===Detail.getPostStatus()||"EDIT"===Detail.getPostStatus()||"SHARE_POST"===Detail.getPostStatus()||p&&0<C.parents(".js-subtask-edit-layer").length?i():T({COLABO_SRNO:r,COLABO_COMMT_SRNO:function(){return"EDIT"===Detail.getPostStatus()?PostPopup.getData().POST_SRNO:(p?C.parents(".js-subtask-li"):t).attr("data-post-srno")}(),TMPL_TYPE:f},i),u&&(a=C.attr("data-worker-id"));n=f===DetailCode.SCHEDULE;function i(t){var i,o,a,n,r;j(),ListHelper.initPageData(k),0<Often.null2Void(t).length?(i=ParticipantCode._ID[f-2],o=ParticipantCode._NAME[f-2],a=[],$.each(t,function(t,e){var n={};n[i]=e.USER_ID,n[o]=e.USER_NM,n.USE_INTT_ID=e.USE_INTT_ID,n.PRFL_PHTG=e.PRFL_PHTG,a.push(n)}),E(a)):"function"==typeof s&&E(s()),l=$.extend([],c),y(),_.focus(),r=e,(n=P).off("click").on("click",function(t){var t=(e=$(t.target)).findUp(".js-select-cancel"),e=e.findUp(".js-select-worker");if(0<t.length)return j(),N(),void n.find(".js-registration").removeClass("active");0<e.length&&(c=l,"function"==typeof r&&r(c),n.remove())}),n.off("keydown").on("keydown",D),n.find("#workerInput").off("keyup").on("keyup",function(t){KeyCheck.isKey(t,"ENTER")||KeyCheck.isAvailable(t)||(O&&clearTimeout(O),O=setTimeout(function(){ListHelper.initPageData(k,g),y()},500))})}P.find("#workerInput").attr("placeholder",i18next.t("front.alert.enterWord",{val:n?"$t(back.LangConvert.participant)":"$t(dictionary.manager)"}))}(t,e,i)},addInputWorkerEvent:function(t,e){var n=t.find(".js-worker-input");function i(t){t=(C=$(t.target)).findUp(".js-popup-before");P=m(t),g=P.find("ul")}function o(){u=p=!(d=!0)}r=PostPopup.getData().PROJECT_SRNO,f=Often.null2Void(t.attr("data-post-code"),PostPopup.getData().POST_CODE),s=e,n.off("click").on("click",function(t){t.stopPropagation(),v(),o(),_=$(t.target),i(t),ListHelper.initPageData(k,P.find(".js-worker-list>ul")),y()}),n.off("keyup").on("keyup",function(t){t.stopPropagation(),KeyCheck.isKey(t,"ENTER")||!KeyCheck.isAvailable(t)&&t.originalEvent.isComposing&&(v(),o(),O&&clearTimeout(O),O=setTimeout(function(){_=$(t.target),i(t),ListHelper.initPageData(k,P.find(".js-worker-list>ul")),y()},500))}),n.off("keydown").on("keydown",function(t){t.stopPropagation(),o(),_=$(t.target),P.is(":visible")&&D(t)})},setSubmitRecord:E,getPostWorkerRecord:T,closeWorkerPopup:v};function o(){P=$("#workerPopup"),_=P.find("#workerInput"),g=P.find("ul")}function v(){o(),P.remove()}function E(t){c=t}function D(t){var e=P.find(".js-worker-list").find(".select");return KeyCheck.isKey(t,"ENTER")&&0<e.length?(e.find(".js-registration").trigger("click",[!0]),void P.find(".js-select-worker:visible").trigger("click")):KeyCheck.isKey(t,"ESC")?(t.stopPropagation(),t.preventDefault(),void v()):void(P&&P.isArrowSelect(t))}function T(t,e){Ajax.executeApi(RenewalApi.GET.ACT_POST_WORKER_LIST,t,function(t){e(Often.null2Void(t.WORKER_RECORD,[]))})}function N(){var t=P.find(".js-registration"),o=0,e=ParticipantCode._ID[f-2];function n(i){$.each(t,function(t,e){var n=$(e).attr("data-worker-id")===i;if(!u)return!(l.length<=o)&&void(n&&($(e).addClass("active"),o++));n&&$(e).addClass("active")})}h(P,S()),u?""===a?t.removeClass("active"):n(a):0===l.length?t.removeClass("active"):l.forEach(function(t){n(Often.null2Void(t[e],t.USER_ID))})}function S(){return u?a?1:0:l.length}function h(t,e){var n=t.find(".js-select-alert");if(0<n.length)return n.css("display",0===e?"none":"block"),void t.find(".js-select-count").text(i18next.t("front.common.selectCountMembers",{count:e}));(n=$($("#workerSelectCount").html())).find(".js-select-count").text(i18next.t("front.common.selectCountMembers",{count:e})),n.find(".js-select-cancel").text(i18next.t("dictionary.cancel")),n.css("display",0===e?"none":"block"),t.append(n)}function j(){c=[],l=[],a=""}function m(t){var e=0<t.findUp("#projectFeedArea").length||"VIEW"===t.findUp("#postPopup").attr("data-code"),n=C.offset(),i=t.offset(),o=t.position(),a=o.top+(n.top-i.top),o=o.left+(n.left-i.left),i={top:(e?a:n.top-i.top)+(window.innerHeight<n.top+290?-290:40),left:o+(window.innerWidth<n.left+250?-250:0),transform:"none"},o=$($("#workersPopup").html());return o.attr({id:R,"data-code":"worker","data-subtask-yn":p?"Y":"N"}).css(i),Often.isFunc(Func.CLOUD.INVITATION_POPUP)&&(n=t.find(".js-post-nav:visible").hasClass("task"),i=t.find(".js-post-nav:visible").hasClass("schedule"),(n&&!p||i)&&(o.addClass("input-popup"),o.css("display","none"))),t.append(o),t.find("#"+R)}function y(){function e(){P.css("display","block")}function n(t,e){var n=$(t.target),i=n.parents(".js-popup-before"),t=n.findUp(".js-registration");0!==t.length&&((n=[]).push(w(t)),_.val(""),_.focus(),"function"==typeof s&&s(n),v(),C=i.find(".js-worker-input:visible"),e&&(ListHelper.initPageData(k),P=m(i),g=P.find("ul"),y()))}function i(t){t=$(t.target).findUp(".js-registration");0<t.length&&(function(t){var e=t.attr("data-worker-id");if(t.toggleClass("active"),!t.hasClass("active"))return function(n,i){u?(a="",P.find(".js-select-alert").css("display","none")):n.forEach(function(t,e){t[ParticipantCode._ID[f-2]]===i&&n.splice(e,1)})}(l,e);u&&(l=[],a=e,P.find(".js-registration").removeClass("active"),N());l.push(w(t))}(t),h(P,S()))}Ajax.executeApi(RestApi.GET.COLABO2_SENDIENCE_R101,$.extend({packetOption:Ajax.OPTION.PREVENT_CALLBACK},k,{COLABO_SRNO:r,SRCH_WORD:$.trim(_.val()),SORT_DESC:"N"}),function(t){1===k.PG_NO&&setTimeout(function(){ListHelper.selectFirstItemByArrow(g)},0),g.drawListHelper({pageData:k,nextYn:t.NEXT_YN,records:t.SENDIENCE_REC,noDataHtml:ListHelper.getNoDataHtml("SEARCH"),targetObj:{scroll:g.parents(".js-worker-list"),focus:_},callback:{item:I,click:d?n:i,scroll:y,final:d?e:N}})})}function w(t){var e={},n=ParticipantCode._ID[f-2],i=ParticipantCode._NAME[f-2];return e[n]=t.attr("data-worker-id"),e[i]=t.find(".js-registration-name").text(),e.PRFL_PHTG=t.attr("profile-data"),e.RQST_USE_INTT_ID=t.attr("data-use-intt-id"),DetailCode.SCHEDULE===f&&(e.RCVR_CORP_NM=t.find(".js-registration-company").text(),e.RCVR_DVSN_NM=t.find(".js-registration-team").text(),e.JBCL_NM=t.find(".js-registration-position").text()),e}function I(t){var o=$("#workerListItem").html(),a=(Often.isFunc(Func.CLOUD.INVITATION_POPUP),"");return $.each(t,function(t,e){var n=Often.null2Void(e.CORP_NM,""),i=Often.null2Void(e.CORP_NM,""),i=""===n&&""===i,e=ListHelper.replaceJson(o,{name:e.RCVR_USER_NM,team:Often.null2Void(e.RCVR_DVSN_NM,""),position:Often.null2Void(e.JBCL_NM,""),company:Often.null2Void(e.RCVR_CORP_NM,""),profile:ListHelper.setProfile(e.PRFL_PHTG),"profile-data":e.PRFL_PHTG,"personal-yn":i?"d-none":"d-block","worker-id":Often.null2Void(e.RCVR_USER_ID,""),"use-intt-id":Often.null2Void(e.RCVR_USE_INTT_ID,"")});a+=e}),a}}();
"use strict";var PostPopupEvent=function(){var s;return{keydownPopupArea:function(s){var e=$(s.target),t=$(s.currentTarget),l=window.getSelection(),u=$(l.focusNode),c=u.parent(),n=KeyCheck.isKey(s,"ENTER");if(n&&e.is("#postTitle"))s.preventDefault();else if(KeyCheck.isSelectAllCommand(s)&&0<e.findUp(".js-upload-area").length)!function(e,t,n){var o,a=window.getSelection(),r=$(a.focusNode),i=r.context&&3===r.context.nodeType?r.parents("div"):r,r=t[0],s=-1,l=[];$.each(r.childNodes,function(e,t){if(t===i[0]&&(s=e),$(t).hasClass(n)&&(l.push(e),-1<s))return!1}),0!==l.length&&(e.stopPropagation(),e.preventDefault(),t=l[l.length-1]<s,e=t?(o=l[l.length-1]+1,r.childNodes.length):1<l.length?(o=l[l.length-2]+1,l[l.length-1]):l[o=0],(t=document.createRange()).setStart(r,o),t.setEnd(r,e),a.removeAllRanges(),a.addRange(t))}(s,e.findUp(".js-upload-area:visible"),"create-box");else{if(u.hasClass("create-box")&&c.hasClass("js-upload-area"))return!1;if(KeyCheck.isKey(s,"BACK")||KeyCheck.isKey(s,"DELETE")){if(function(){if(l.focusNode){var n=Often.null2Void(l.focusNode.nodeName,""),a="#text"===n?c:u,e=0===$.trim(a.text()).length,t=function(){var e="DIV"===n;return"#text"===n&&t(c)||e&&t(u);function t(e){var t=e.prev().hasClass("create-box"),e=e.next().hasClass("create-box");return t&&e}}(),o=function(){return e(c)||e(u);function e(e){var t=0===e.prev().length,n=0===e.next().length,o=e.prev().hasClass("create-box"),e=e.next().hasClass("create-box");return t&&e||n&&o}}(),r=function(){return e(c)||e(u);function e(e){var t=0<e.prev().length,n=0<e.next().length,o=e.prev().hasClass("create-box"),e=e.next().hasClass("create-box");return n&&o||t&&e}}(),i=function(){var e=KeyCheck.isKey(s,"BACK"),t=KeyCheck.isKey(s,"DELETE"),n=l.anchorOffset,o=l.focusOffset;return l.isCollapsed&&(e&&0===o||t&&n===a.text().length)}();if(t||o){if(e)a.attr({class:"js-hidden-component hidden-component",contenteditable:"false"}).html("&nbsp;");else if(i)return!0}else if(r)return e?(a.remove(),!0):!!i||void 0}}())return s.preventDefault();if(Often.isBrowser("ie"))return function(){var e=window.getSelection().focusNode,t=e.parentNode;if("#text"===e.nodeName&&($(e).hasClass("mention-span")||$(e).hasClass("hashtag-span"))||"SPAN"===t.nodeName&&($(t).hasClass("mention-span")||$(t).hasClass("hashtag-span")))return $(e.parentNode).remove()}()}if(!SubtaskKeyEvent.KeyDownSubtaskInput(s)){if(StyleTag.keyDownCheck(s),t.find("#innerCommonHashTagPopup").is(":visible"))return HashTag.keyDownArrow(s);if(n&&HashTag.clearHashTag(),t.find("#innerCommonPopup[data-code=mention]").is(":visible"))return Mention.keyDownArrow(s);if(n&&Mention.clearMention(),ItemTodo.keydownTodoInput(s),ItemSchedule.keyDownScheduleInput(s),KeyCheck.isKey(s,"TAB")){if(e.is("#postTitle"))return void t.find(".js-upload-area").focus();if(0<e.findUp(".js-upload-area").length)return}KeyCheck.isKey(s,"ESC")&&(DocumentEvent.closeStepByStep()||(n=o(s),t=ItemSchedule.keyDownCheckPlaceInput(s),e=ItemSubtask.isSubtaskInputFocus(s),n||t||e||PostPopup.checkWritingAndShowPopup(PostPopup.removePopup)))}}},keyupPopupArea:function(e){var t=$(e.currentTarget),n=$(e.target).findUp(".js-upload-area[contenteditable=true]");ItemSchedule.keyUpScheduleInput(e),ItemTodo.keyUpTodoInput(e),SubtaskKeyEvent.keyUpSubtaskInput(e),0!==n.length&&(SpaceSelectable.isSharePost(t)||(HashTag.keyUpCheckHashTag(e),Mention.keyUpCheckMention(e),StyleTag.keyUpCheck(e)))},KeyDownContentsArea:function(e){var t=$(e.currentTarget).find(".js-upload-area");if(0!==t.length){t=t[0].childNodes;if(1===t.length&&"DIV"!==t[0].nodeName&&"BR"!==t[0].nodeName){if(Often.isBrowser("ie"))return;if(!e.originalEvent.isComposing)return $(t[0]).wrap("<div></div>")}return KeyCheck.isKey(e,"DELETE")?function(e){var t=window.getSelection();if(!(t.focusNode!==t.anchorNode)){if($(t.focusNode).hasClass("js-upload-area"))return e.preventDefault();var n=t.focusNode&&"DIV"===t.focusNode.nodeName,o=1===t.focusNode.childNodes.length&&"BR"===t.focusNode.childNodes[0].nodeName;n&&(n=$(t.focusNode.nextElementSibling).hasClass("create-box"),o&&!n&&(e.stopPropagation(),e.preventDefault(),$(t.focusNode).remove()))}}(e):void 0}},clickPopupArea:function(e){var t=$(e.target),a=$(e.currentTarget),n=t.findUp(".js-file-button");"Y"!==Often.null2Void(a.find(".js-complete-btn").attr("data-wait-yn"),"N")?(Caret.setLastFocusNode(),o(e),function(e){var t=0<e.findUp(".btn-close").length,n=0<e.findUp(".cancel-button").length;return!!(e.hasClass("back-area")&&s.hasClass("back-area")||t||n)&&(Often.isAct("subscreen")&&Electron.isElectronApp()?void self.close():(PostPopup.checkWritingAndShowPopup(PostPopup.removePopup),!0))}(t)||(Often.isAct("subscreen")?function(e){var t=e.findUp("#movePost");if(0===t.length)return;e=t.parents(".js-popup-before"),t=e.attr("data-project-srno"),e=e.attr("data-post-srno");OpenUtil.openWindow(Often.getLocOrigin()+"/main.act?detail/"+t+"/"+e),self.close()}(t):function(e){var t=e.findUp(".private-button");if(0===t.length)return!1;var n="Y"===LocalUtil.getProjectSrchAuthYn(),e="Y"===LocalUtil.getProjectManagerYn();if(!n||e)return t.next().fadeIn(200),!0;Often.toast("error","관리자 + 글 작성 본인만 조회 가능한 프로젝트입니다. (문구변경 예정)")}(t)||function(e){var t=e.findUp(".js-private-option");if(0===t.length)return!1;var n=t.parents("ul"),o=n.prev(),e=t.attr("data-private"),t=t.text();return o.removeClass("full").removeClass("admin").addClass(e).text(t),n.fadeOut(200),!0}(t)||function(e){if(0===e.length)return!1;e.toggleClass("active"),e.next().is(":visible")?e.next().fadeOut(200):e.next().fadeIn(200);return!0}(n)||function(t){Caret.captureIndex();var e=t.findUp(".js-file-option");if(0===e.length)return!1;if(Often.isFunc(Func.CLOUD.UPLOAD_PREVENT))return Often.toast("info",i18next.t("front.alert.adminRestriction")),!0;var n=Often.null2Void(e.attr("data-upload"));if("pc"===n)Upload.uploadFile("any",o);else if("gdrive"===n)GoogleDrive.openGoogleDrive("",a);else if("dropbox"===n)DropboxDrive.openDropboxDrive(a);else if("flowdrive"===n){if(LimitGuest.isLimitGuest("flowdrive",!1))return;FileUtil.openFlowDrive("POST")}return e.parent().fadeOut(200),e.parent().prev().removeClass("active"),!0;function o(e){PostAppend.appendFileOrImg(t,e)}function a(e){e.forEach(o)}}(t)||function(e){var t=e.findUp(".js-map-button");if(0===t.length)return!1;t.toggleClass("active");e=t.next().is(":visible");if(!e)return t.next().fadeIn(200),t.next().find("input").val("").focus(),!0;t.next().fadeOut(200)}(t)||function(e){var t=e.findUp(".js-del-btn");if(0===t.length)return!1;var n=t.parents(".js-upload-area"),o=t.parents(".create-box");0<n.find(".document-item-highlight").length||n.sortable("destroy");var a=o.prev(".js-hidden-component"),e=a.prev(".create-box"),n=o.next(".js-hidden-component"),o=n.next(".create-box");return 0<a.length&&0===e.length&&a.remove(),0<n.length&&0===o.length&&n.remove(),t.parents(".create-box").remove(),!0}(t)||function(e){var t=e.findUp(".js-complete-btn");return 0!==t.length&&(!function(){var e,t=a.find(".js-post-nav").hasClass("write"),n=a.find(".js-post-nav").hasClass("write2"),o=a.find(".js-post-nav").hasClass("todo");if(t||n)e=Validation.checkEditable(a.find(".js-upload-area"),!0);else if(e=Validation.checkInput(a.find("#postTitle"),!0),o&&ItemTodo.checkTodoValue(a.find(".js-content-area")))return!0;return 0<Object.keys(Often.null2Void(e)).length}()&&(!!UploadHandler.isUploadingAndCallback(function(){a.find(".js-complete-btn").text(i18next.t("front.common.saving")).attr("data-wait-yn","Y"),(t.hasClass("create-button")?function(){var e=$("#postPopup").attr("data-code")===DetailCode.WRITE_ANYWHERE.CODE,t=$(".flow-project-make-1").find("#videoLi"),n=SpaceSelectable.getSelectedProjectArray(),o=JsonMaker.getPostJson(),t=o.SCHD_REC&&t.find("#videoButton").hasClass("d-none")&&!t.find("#videoSpan").hasClass("d-none");if(e&&0===n.length)return c(),Often.toast("info",i18next.t("front.alert.select",{val:"$t(dictionary.project)"}));function a(){if(!r(o)||function(){if(!$("#postPopup").find(".js-post-nav").hasClass("write2"))return!1;var n=0;return JSON.parse(o.CNTN).COMPS.forEach(function(e){var t=e.COMP_DETAIL;if("TEXT"!==e.COMP_TYPE||""===t.CONTENTS.trim())return!0;n+=t.CONTENTS.length}),1e4<n}())return Often.toast("error",r(o)?"내용은 10000자 이내로 입력해주세요!":i18next.t("front.alert.enterWord",{val:"$t(dictionary.context)"})),void c();e&&(o.COLABO_SRNO=n[0].COLABO_SRNO),0<Number(Often.null2Void(LocalUtil.getLocal("VC_SRNO"),"0"))&&o.SCHD_REC&&(o.SCHD_REC[0].VC_SRNO=LocalUtil.getLocal("VC_SRNO")),o.packetOption=Ajax.OPTION.PREVENT_EXECUTE,Ajax.executeApi(RestApi.POST.COLABO2_COMMT_C101,o,function(e){Often.toast("success",i18next.t("front.alert.successfullyChange",{status:"$t(dictionary.register)"})),UpdateElements.autoUpdateElem({POST_MODE:"POST",PROJECT_SRNO:e.COLABO_SRNO,POST_SRNO:e.COLABO_COMMT_SRNO})},c)}function r(e){if(!$("#postPopup").find(".js-post-nav").hasClass("write2")||e.COMMT_TTL)return 1;var e=JSON.parse(e.CNTN).COMPS,n=!1;return e.forEach(function(e){var t=e.COMP_DETAIL;"TEXT"!==e.COMP_TYPE||""===t.CONTENTS.trim()&&0===t.HASHTAGS.length&&0===t.MENTIONS.length||(n=!0)}),n}LocalUtil.removeLocal("VC_SRNO"),t?VideoConference.getZoomToken({TYPE:"SCHEDULE",VC_TTL:o.SCHD_REC[0].TTL},function(e){e=Often.null2Void(e.VC_SRNO,"0");LocalUtil.setLocal("VC_SRNO",e),a(),LocalUtil.removeLocal("VC_SRNO")},c):a()}:function(){var e=$("#postPopup"),t=SpaceSelectable.isSharePost(e),n=SpaceSelectable.getSelectedProjectArray(),o=e.find("#videoSpan").attr("data-vc-srno"),a="none"!==e.find("#videoSpan").css("display")&&VideoConference.isVC(o),r=e.find(".create-post-nav").hasClass("schedule"),i=e.find(".create-post-nav").hasClass("task"),s=e.find(".create-post-nav").hasClass("subtask"),l=JsonMaker.getPostJson();if(t){if(0===n.length)return Often.toast("info","최소 1개의 프로젝트를 선택하세요!");l.COLABO_SRNO="",l.COLABO_COMMT_SRNO="",l.PRJ_REC=n,i&&0<l.TASK_REC[0].WORKER_REC.length&&(l.TASK_REC[0].WORKER_REC=[]),l.packetOption=Ajax.OPTION.PREVENT_EXECUTE,Ajax.executeApi(RestApi.POST.COLABO2_COMMT_C101,l,function(e){Often.toast("success",i18next.t("front.alert.successfullyChange",{status:"$t(dictionary.share)"})),PostPopup.removePopup();var t=ViewChanger.getProjectSrno();n.forEach(function(e){e.COLABO_SRNO===t&&UpdateElements.autoUpdateElem()})})}else VideoConference.isVC(LocalUtil.getLocal("VC_SRNO"))?a?VideoConference.updateZoomToken({VC_TTL:l.SCHD_REC[0].TTL,VC_SRNO:o},u(l)):VideoConference.deleteZoomToken({VC_SRNO:o},function(){l.SCHD_REC[0].VC_SRNO="0",u(l)}):0<e.find("#videoSpan:visible").length?VideoConference.getZoomToken({TYPE:"SCHEDULE",VC_TTL:l.SCHD_REC[0].TTL},function(e){l.SCHD_REC[0].VC_SRNO=e.VC_SRNO,u(l)}):u(l);function u(t){Ajax.executeApi(RestApi.PUT.COLABO2_COMMT_U101,t,function(e){Often.toast("success",i18next.t("front.alert.successfullyChange",{status:"$t(dictionary.edit)"})),UpdateElements.autoUpdateElem({POST_MODE:"EDIT",PROJECT_SRNO:e.COLABO_SRNO,POST_SRNO:e.COLABO_COMMT_SRNO}),s&&UpdateElements.autoUpdateElem({PROJECT_SRNO:t.COLABO_SRNO,POST_SRNO:t.COLABO_COMMT_SRNO,SUBTASK_DATA:t.TASK_REC[0]}),r&&ItemSchedule.checkSendEditPush()},c),LocalUtil.setLocal("VC_SRNO","0")}})()})||void 0))}(t)||function(e){var t=e.findUp("#movePost");if(0===t.length)return!1;e=t.parents(".js-popup-before"),t=e.attr("data-project-srno"),e=e.attr("data-post-srno");return $("#alarmLayer").css("display","none"),ViewChanger.loadPageJson({code:"detail",first:t,second:e}),!0}(t)||ItemTodo.isTodoClickOnPostPopup(t)||ItemRemark.isStickyRemarkAreaAndAction(t))):Often.toast("error",i18next.t("front.common.wait"))},mouseDownPopupArea:function(e){s=$(e.target),$(e.currentTarget).find("#postCntn").is(":visible")&&StyleTag.mouseDownCheck(e)},hideAllInnerPopup:o,mouseUpPopupArea:function(e){$(e.currentTarget).find("#postCntn").is(":visible")&&StyleTag.mouseUpCheck(e)},scrollHideAndRemovePopupLayer:function(){var e=$("#workerPopup:visible"),t=$(".flatpickr-calendar:visible"),n=$(".js-priority-setting-layer:visible");e&&e.remove(),t&&t.remove(),n&&n.css("display","none"),ItemSubtask.closeSubtaskPopup()},addScrollFixed:function(e){var t,n,o=$("#postPopup");o.is(":visible")&&(n=e?$(e.target):o.find(".post-card-scroll"),t=n.scrollTop(),e=n.innerHeight(),n=n.prop("scrollHeight"),o=o.find(".js-edit-layer"),n<=t+e?o.removeClass("sticky"):function(e){var t=e.find(".js-remark-upload-file li"),n=e.find(".js-remark-upload-img li"),e=e.find(".js-remark-area");return 0===t.length&&0===n.length&&""===$.trim(e.text())}(o)&&o.addClass("sticky"))}};function o(e){var t=e.type,n=$(e.target),o=$(e.currentTarget),a=!1;return"click"===t?(r("#innerCommonPopup")||i("#innerCommonPopup"),r(".js-file-button")||i(".js-file-menu"),r(".js-image-button")||i(".js-image-menu"),r(".js-map-button")&&r(".js-map-menu")||0!==n.findUp(".js-map-menu").length||!s||0!==s.findUp(".js-map-menu").length||i(".js-map-menu"),r(".js-setting-button")||i(".js-setting-ul"),r(".js-worker-layer")||r(".js-worker-button")||o.find(".js-worker-layer[data-subtask-yn=N]").remove(),r(".js-worker-layer")||r(".js-worker-button")||o.find(".js-worker-layer[data-subtask-yn=Y]").remove(),r(".js-priority-event")||i(".js-priority-layer .js-priority-setting-layer"),r(".js-subtask-menu")||r(".subtask-button")||ItemSubtask.closeSubtaskPopup(),i(".create-post-option")):"keydown"===t&&((t=o.find("#innerCommonPopup")).is(":visible")&&"mention"!==t.attr("data-code")&&(t.css("display","none"),a=!0),[".js-file-menu",".js-image-menu",".js-map-menu",".js-setting-ul",".create-post-option"].forEach(i)),a;function r(e){return 0<n.findUp(e).length}function i(e){var t=o.find(e);e=e.replace("-menu","-button"),t.is(":visible")&&(t.css("display","none"),0<(e=o.find(e)).length&&e.removeClass("active"),a=!0)}}function c(){$("#postPopup").find(".js-complete-btn").text(i18next.t("dictionary.upload")).attr("data-wait-yn","N")}}();
"use strict";var PostPopupInit=function(){var c,i;return{initEditPopup:function(a,s,o){var d=PostCondition.getPostCondition(PostCondition.getPopupMode(a),s).postCode,t="Y"===s.SUBTASK_YN,e=0<Object.keys(s).length,p=SpaceSelectable.isSharePost(a),l="VIEW"===a.attr("data-code");function n(){var o,t,e,n,i;if(a.find("#postTitle").val(TagUtil.html2tag(s.COMMT_TTL)),o=Often.null2Void(s.CNTN),t=PostCondition.isNewStyleByCntn(s),0!==(t=JsonMaker.str2json(t?o:JsonMaker.convertJsonString(s))).length?t.forEach(function(o){"TEXT"!==o.COMP_TYPE?"IMAGE"!==o.COMP_TYPE&&"FILE"!==o.COMP_TYPE?"LINK"!==o.COMP_TYPE?"MAP"===o.COMP_TYPE&&PostAppend.appendMap(a,o.COMP_DETAIL):PostAppend.appendLink(a,o.COMP_DETAIL):PostAppend.appendFileOrImg(a,o.COMP_DETAIL):c.append(TagConvert.db2HtmlStringByPost(o.COMP_DETAIL.CONTENTS,p))}):c.append(TagConvert.db2HtmlStringByPost(o)),e=s.RANGE_TYPE,n="A"===e?"full":"admin",i="A"===e?i18next.t("front.common.public"):i18next.t("prefix.only",{val:"$t(front.common.projectManager)"}),e="A"===e?"admin":"full",a.find(".private-button").addClass(n).removeClass(e).text(i),d===DetailCode.TODO)return ItemTodo.getTodoDataListHtml(s);d===DetailCode.TASK&&(ItemTask.changeTaskViewByData(a,s.TASK_REC[0]),p||a.find(".js-subtask-ul").append(ItemSubtask.getCompHtml(s.SUBTASK_REC,!l)))}r(a),d===DetailCode.SCHEDULE?i.append(ItemSchedule.getLookHtml()):(d===DetailCode.TODO?i.append(ItemTodo.getLookHtml()):(i.append($("#uploadDiv").html()),d===DetailCode.TASK&&i.before(ItemTask.getLookHtml()),d!==DetailCode.TASK||t||i.after(ItemSubtask.getLookHtml()),i.after($("#postAttachedItem").html()),r(a)),e&&n()),function(e,t,o){r(e);var n=PostCondition.getPostCondition(PostCondition.getPopupMode(e),t).postCode,n=DetailCode.POST._TEXT[n],i=0<Object.keys(t).length;i||!i&&!o?(e.find(".create-post-nav").addClass("no-tab"),e.find(".create-post-title").text(i18next.t(n)+" "+i18next.t(i?"dictionary.edit":"dictionary.write")),e.find(".create-post-submit").addClass(i?"":"new-task")):(e.find(".create-post-nav").on("click",function(o){var t=$(o.target).findUp(".js-post-type-item");0!==t.length&&PostPopup.checkWritingAndShowPopup(function(){PostPopup.openRegistrationView(ViewChanger.getProjectSrno(),t.attr("data-post-code"),!0)},"ADD_TAB")}),e.find(".create-post-title").text(i18next.t("front.common.writePost")));i||c.html(""),c.attr("placeholder",i18next.t("front.common.enterContext")),function(){var o=PostCondition.getFuncCondition(PostCondition.getPopupMode(e),t);e.find("[data-code=upload-file]").css("display",o.isUpload?"inline-block":"none"),e.find("[data-code=google-place]").css("display",o.isGooglePlace?"inline-block":"none"),e.find("[data-code=hash-tag]").css("display",o.isHashTag?"inline-block":"none"),e.find("[data-code=mention-tag]").css("display",o.isMentionTag?"inline-block":"none"),e.find("[data-code=style-tag]").css("display",o.isStyleTag?"inline-block":"none"),e.find(".js-editing-buttons").css("display",i?"inline-block":"none"),e.find(".js-complete-btn.create-button").css("display",i?"none":"inline-block")}(),Often.isFunc(Func.ENTER.GOOGLE_MAP)&&function(){var t=e.find(".js-map-button"),o=t.next().find("input");GoogleMap.addSearchEvent(o,function(o){PostAppend.appendMadeObj(c,PostComponent.getMapObj(o)),t.removeClass("active"),t.next().css("display","none")})}()}(a,s,o),d===DetailCode.SCHEDULE&&ItemSchedule.initEdit(a,s),d===DetailCode.TASK&&ItemTask.initEdit(a,s),d===DetailCode.TODO&&ItemTodo.initEdit(a),d!==DetailCode.TASK||t||ItemSubtask.initEdit(a,s),a.off("click").on("click",DetailEvent.clickDetailUl).on("click",PostPopupEvent.clickPopupArea).off("mousedown").on("mousedown",PostPopupEvent.mouseDownPopupArea).off("mouseup").on("mouseup",PostPopupEvent.mouseUpPopupArea).off("keyup").on("keyup",PostPopupEvent.keyupPopupArea).off("keydown").on("keydown",PostPopupEvent.keydownPopupArea),i.off("keydown").on("keydown",PostPopupEvent.KeyDownContentsArea),a.find(".create-post-container").off("scroll").on("scroll",PostPopupEvent.scrollHideAndRemovePopupLayer),d!==DetailCode.TODO&&a.find(".create-title-input").focus()},initViewPopup:function(t,o,e,n){var i=0<Often.null2Void(t.find(".js-up-task-button").attr("data-up-task-srno")).length,a=t.find(".card-item").hasClass("task");t.find(".list-item").css("display","none"),t.find(".detail-item").addClass("back-area"),t.find(".post-popup-header").css("display","block");var s=$("#projectTitleColor");ListHelper.removeAllColorClass(s),s.addClass("color-code-"+LocalUtil.getPopProjectBgColorCd()),function(o){"POP"===o?(t.addClass("flow-all-background-1"),t.find(".post-card-wrapper").removeClass("side")):(t.removeClass("flow-all-background-1"),t.find(".post-card-wrapper").addClass("side"))}(e?"POP":"SIDE"),i||t.find("#movePost").css("display","inline-block"),a&&ItemTask.initEdit(t,o),a&&ItemSubtask.initEdit(t),!Electron.isElectronApp()&&Often.isAct("subscreen")&&t.find(".btn-close").css("display","none"),"function"==typeof n&&n(o),t.off("mousedown").off("keyup").off("keydown").off("click").on("click",PostPopupEvent.clickPopupArea).on("click",DetailEvent.clickDetailUl).on({mousedown:PostPopupEvent.mouseDownPopupArea,keyup:PostPopupEvent.keyupPopupArea,keydown:PostPopupEvent.keydownPopupArea}),t.find(".post-card-scroll").off("scroll").on("scroll",function(o){PostPopupEvent.scrollHideAndRemovePopupLayer(o),PostPopupEvent.addScrollFixed(o)}),t.find(".js-remark-area").off("keydown").off("keyup").on({keydown:ItemRemark.keyDownRemarkInput,keyup:ItemRemark.keyUpRemarkInput}),$(window).on("resize",function(){PostPopupEvent.addScrollFixed()})}};function r(o){o.find(".js-popup-before"),i=o.find(".js-content-area"),c=o.find(".js-upload-area")}}();
"use strict";var CalendarFilter=function(){var a;return{openCalendarFilter:function(){a=$("#leftFilter").find("#calendarFilter"),function(){var l=t(),e=a.find("#scheduleFilter"),n=a.find("#taskFilter");e.find('.js-filter-button[gubun="'+l.scheduleFilter+'"]').find(".js-common-radio").addClass("all-checked"),n.find('.js-filter-button[gubun="'+l.taskFilter+'"]').find(".js-common-radio").addClass("all-checked")}(),a.css("display","block")},getCalendarFilterJson:t,isCalendarFilterAndAction:function(l){return 0!==l.findUp("#calendarFilter").length&&(!!function(l){var e=l.findUp(".js-filter-button");if(0===e.length)return!1;if(e.hasClass("all-checked"))return!0;var n=e.attr("gubun"),a=e.findUp("#scheduleFilter"),l=e.findUp("#taskFilter");0!==a.length?(a.find(".all-checked").removeClass("all-checked"),e.find(".js-common-radio").addClass("all-checked"),LocalUtil.setLocalValue("ALL_CALENDAR_SETTING","PROJECT_SCHD",n)):(l.find(".all-checked").removeClass("all-checked"),e.find(".js-common-radio").addClass("all-checked"),LocalUtil.setLocalValue("ALL_CALENDAR_SETTING","TASK_SCHD",n));return AllCalendar.reloadCalendar(),!0}(l)||void 0)}};function t(){var l=Often.null2Void(LocalUtil.getLocalJson("ALL_CALENDAR_SETTING"),{});return{scheduleFilter:Often.null2Void(l.PROJECT_SCHD,"0,1"),taskFilter:Often.null2Void(l.TASK_SCHD,"2")}}}();
"use strict";var AllFileEvent=function(){var n,o;return{initSetting:function(){f(LocalUtil.getFileSetting()),l(),e()},addClickFileLayerEvent:e,addSelectable:l,clickFile:function(e){r();var l=AllFile.getViewTypeClass(),t=$(e.target),l=t.findUp(".js-file-"+l);0<t.findUp(".js-file-menu").length?(e.stopPropagation(),FileMenu.openFileMenu(l,e)):0<l.length&&i(l)},addRightClickEvent:function(){r(),o.off("mousedown").on("mousedown",t)},doubleClick:function(e){r();var l=AllFile.getViewTypeClass(),l=$(e.target).findUp(".js-file-"+l);0<!l.length||(l.hasClass("js-folder")?(AllFile.setLastFileFolderSrno(l.attr("file-fld-srno")),AllFile.drawInitList(!0)):(l=Often.getAttrs(l),ImageUtil.isImageType(l[0])?ImageViewer.openImage("POST",l,0):FileUtil.openFile("DOC-VIEWER",l)))},changeView:f,folderCheckAndDelete:c};function r(){n=$("#"+(AllFile.isProjectFile()?"detail":"all")+"CollectView .allFileLayer"),o=n.find("#fileLayerUl")}function e(){function i(){var e=AllFile.getViewTypeClass();return 0===o.find(".js-file-"+e+".on").length}r(),n.find(".js-file-search-input").off("keydown").on("keydown",FileSearch.keydownSearchInput),n.find("#fileFilterButton, .js-filter-area").off("click").on("click",FileFilter.toggleFilterButton),$("#fileFilter").off("click").on("click",FileFilter.clickFileFilterItem),n.off("click").on("click",function(e){var l,t=$(e.target);0<!t.findUp(".allFileLayer").length||(n.find("#moreFolderLayer").css("display","none"),function(e){var l=0<$("#allFileMenuPopup").length,e=e.findUp(".js-file-menu-layer");if(!(e&&0!==e.length||l))return!1;FileMenu.removeFileMenu()}(t)||(0<!t.findUp("#addFolder").length?function(e){var l=e.findUp(".js-file-header");if(0<!l.length)return!1;if(0<e.findUp("#moreFolderButton").length){var t=n.find("#moreFolderLayer"),e=t.is(":visible");return t.css("display",e?"none":"block"),!0}return AllFile.setLastFileFolderSrno(l.attr("file-fld-srno")),AllFile.drawInitList(!0),!0}(t)||function(e){e=e.findUp("#allFileMoveButton");return!(!e||0===e.length)&&(i()?Often.toast("error",i18next.t("front.alert.noFileSelected")):void MoveFilePopup.moveFile("POPUP",n))}(t)||function(e){e=e.findUp("#allFileDeleteButton");if(!e||0===e.length)return!1;if(i())return Often.toast("error",i18next.t("front.alert.noFileSelected")),!0;return c({COLABO_SRNO:Detail.getProjectSrno(),FLD_REC:AllFile.checkedFolder()}),!0}(t)||function(e){if(0===e.findUp("#fileDownloadButton").length)return!1;if(i())return Often.toast("error",i18next.t("front.alert.noFileSelected"));if(function(){var e=n.find(".js-file-"+AllFile.getViewTypeClass()+".on"),t=!0;return $.each(e,function(e,l){l=$(l).attr("rand_key");"GOOGLEDRIVE"!==l&&"DROPBOX"!==l&&(t=!1)}),t}())return Often.toast("error","해당 파일은 다운로드 할 수 없습니다.");e=AllFile.getCheckedDownloadFileJson();return 10<e.length?Often.toast("error","선택된 파일이 10개 초과되면 다운로드가 불가능합니다."):(FileUtil.saveFile(e),!0)}(t)||function(e){if(0===e.findUp(".js-view-change-button").length)return!1;e=e.findUp(".js-view-change-button").is("#changeBoardTypeButton")?"board":"list";return LocalUtil.setLocal("FILE_SETTING",e),AllFile.setViewTypeClass(e),f(e),r(),AllFile.setIsNewFileRecord(!1),AllFile.drawInitList(!1),!0}(t)||function(e){var l=e.findUp(".js-sort-file");if(0!==l.length){e=l.findUp(".js-sort-layer");return l.hasClass("check")?l.toggleClass("on"):(e.find(".js-sort-file").removeClass("check on"),l.addClass("check on")),AllFile.drawListByFilter(),!0}}(t)||(l=t,e=AllFile.getViewTypeClass(),0!==l.findUp(".js-all-cancle-button").length?(o.find(".js-file-"+e).removeClass("all-file-active-type-1 on"),a(),s()):function(e){e=e.findUp(".js-file-detail-search-button");if(0<e.length)return FileSearch.showDetailSearchLayer(e)}(t)):AllFile.isProjectFile()?5!==AllFile.getFolderDepth()?PopupDraw.drawInputConfirm({contents:{title:i18next.t("front.common.add",{val:"$t(dictionary.folder)"}),holder:i18next.t("front.alert.enterWord",{val:Interpolation.addName("dictionary.folder")}),empty:i18next.t("front.alert.enterWord",{val:Interpolation.addName("dictionary.folder")}),over:i18next.t("front.placeHolder.lengthLimit",{count:50})},callback:{submit:function(e){var l=e.find(".popup-input"),e=Validation.checkInput(l);0<Object.keys(e).length?(Often.toast("error",e.errorMessage),e.errorObj.focus()):(l=$.trim(l.val()),AllFile.cudFolder("C",$.extend({},{FILE_FLD_NM:l,COLABO_SRNO:AllFile.getFileProjectSrno(),UP_FILE_FLD_SRNO:AllFile.getLastFileFolderSrno()}),PopupDraw.closePopup))}}}):Often.toast("error","폴더는 최대 5 Depth 까지만 생성 가능합니다."):Often.toast("error","폴더는 프로젝트 모아보기에서 생성 가능합니다.")))})}function l(){r();var e=AllFile.getViewTypeClass();n.selectable({distance:5,filter:".js-selectable",stop:function(){o.css({overflow:"auto","overflow-y":"auto","padding-right":""}),$(".selector").selectable("destroy")},start:function(){o.css({overflow:"hidden","overflow-y":"hidden","padding-right":"7px"}),o.find(".js-file-"+e).removeClass("ui-selected all-file-active-type-1 on")},selecting:function(e,l){$(".ui-selectable-helper").css("display","block"),i($(l.selecting))},unselecting:function(e,l){i($(l.unselecting))}})}function i(e){var l="all-file-active-type-1 on";e.hasClass("on")?e.removeClass(l):e.addClass(l),a(),s()}function a(){var e=AllFile.getViewTypeClass(),l=$("#countLayerItem").html(),t=o.find(".js-file-"+e+".on").length,e=o.find(".js-file-count-layer");if(e.is(":visible"))return 0===t?e.remove():e.find(".js-count-text").text(t);o.append(l.replace("{count}",t))}function s(){var e=AllFile.getViewTypeClass(),e=o.find(".js-file-"+e+".on"),t=!1,i=!1;$.each(e,function(e,l){return(!i||!t)&&void($(l).hasClass("js-folder")?i=!0:t=!0)}),n.find("#fileDownloadButton").css("display",t&&!i?"inline-block":"none"),n.find("#allFileDeleteButton").css("display",!t&&i?"inline-block":"none"),n.find("#allFileMoveButton").css("display",(t||i)&&AllFile.isProjectFile()?"inline-block":"none")}function t(e){var l=AllFile.getViewTypeClass(),l=$(e.target).findUp(".js-file-"+l);2===e.button&&0<l.length&&(e.stopPropagation(),FileMenu.openFileMenu(l,e))}function f(e){r();var l=n.find("#fileItemArea"),t=n.find("#fileItemUlHead");n.find(".js-all-file-type").removeClass("on"),"board"===e?(l.attr("class","all-file-area board"),n.find(".all-file-header-right-icon-type-4").addClass("on"),t.css("display","none")):"list"===e&&(l.attr("class","all-file-area list"),n.find(".all-file-header-right-icon-type-5").addClass("on"),t.css("display","block"))}function c(i){Ajax.executeApi(RestApi.GET.COLABO2_FILE_FLD_R004,i,function(e){var l="0"===e.CNT,t=i18next.t("front.common.ask",{val:"$t(dictionary.folder)",status:"$t(dictionary.delete)"}),e=i18next.t("front.alert.dataExistInFolderError");PopupDraw.drawConfirm({contents:{main:l?t:e},callback:{submit:function(){AllFile.cudFolder("D",i,PopupDraw.closePopup)}}})})}}();
"use strict";var FileDragAndDrop=function(){return{addFileDragAndDrop:function(e,o){var t=e.findUp("#fileItemArea");e.off("mousedown").on("mousedown",function(e){return 2===e.button?(l=e,void(0!==(n=$(l.target).findUp(".js-file-"+LocalUtil.getFileSetting())).length&&(l.stopPropagation(),FileMenu.openFileMenu(n,l)))):void(o&&(t=e,n=$(t.target),l=LocalUtil.getFileSetting(),e=n.findUp(".js-file-"+l),l="board"===l?e:n.findUp(".all-file-name"),e.hasClass("on")&&0!==l.length&&(t.stopPropagation(),e=$('<div class="js-drag-box"><span class="js-drag-box-count"></span></div>').css(a(t)),(l=e.find(".js-drag-box-count")).text(function(e){e=e.findUp(".allFileLayer").find(".js-file-"+LocalUtil.getFileSetting()+".on");return 0<e.length?e.length:""}(n)),i(t,l),$("body").prepend(e))));var t,n,l}),e.off("mousemove").on("mousemove",n),e.off("mouseup").on("mouseup",s),t.off("mouseleave").on("mouseleave",l)}};function n(e){var t=$(".js-drag-box");0!==t.length&&(e.stopPropagation(),t.css(a(e)),i(e,t.find(".js-drag-box-count")))}function a(e){return{display:"mousedown"===e.type?"none":"block",top:e.clientY+5,left:e.clientX+5}}function i(e,t){var n=$(e.target),e=LocalUtil.getFileSetting(),n=n.findUp(".js-file-"+e),e=n.hasClass("js-folder"),n=n.hasClass("ui-selected");e&&!n?t.addClass("on"):t.removeClass("on")}function l(e){var t=$(".js-drag-box");(null===$(event)[0].relatedTarget||$($(event)[0].relatedTarget).hasClass("allFileLayer")||$($(event)[0].relatedTarget).hasClass("js-file-filter-area")||$($(event)[0].relatedTarget).is("#fileLayerProjectMenu")||$($(event)[0].relatedTarget).is("#allFileFilterItems")||$($(event)[0].relatedTarget).findUp("#leftScroll").is("#leftScroll"))&&t.remove()}function s(e){var t=$(e.target),n=$(".js-drag-box");0!==n.length&&(e.stopPropagation(),e=n.is(":visible"),n.remove(),n=t.findUp(".allFileLayer"),0<(t=t.findUp(".js-folder")).length&&e&&MoveFilePopup.moveFile("DRAG",n,t))}}();
"use strict";var FileFilter=function(){return{isTotalFilter:function(e){return"TOTAL"===i()},getFileTypeOnFilter:i,toggleFilterButton:function(e){e.stopPropagation();var i=$(e.currentTarget),e=i.findUp("#leftArea"),i=i,e=e.find("#fileFilter"),i=i.hasClass("close");e.css("display",i?"block":"none"),LocalUtil.setLocal("FILE_FILTER",i?"ON":"OFF")},setFileFilter:l,clickFileFilterItem:function(e){e.stopPropagation();var i=$(e.target),e=i.findUp(".js-accordion-button");0<e.length?e.toggleClass("active"):0!==(i=i.findUp(".js-filter-button")).length&&(l(i),AllFile.drawListByFilter())},initFileFilter:function(e){e.find(".js-common-radio").removeClass("all-checked"),e.find(".js-filter-button[file-type=TOTAL]").find(".js-common-radio").addClass("all-checked"),e.find(".js-file-type-filter-icon").removeClass("on"),("ON"===LocalUtil.getFileFilter()?function(e){e.find("#leftTask").removeClass("active"),e.find("#leftFilter").addClass("active"),e.find("#fileFilter").css("display","block")}:t)($("#leftArea"))},closeFilter:t};function i(){return Often.null2Void($("#fileFilter").find(".js-common-radio.all-checked").parents(".js-filter-button").attr("file-type"))}function t(e){e.find("#leftFilter").removeClass("active"),e.find("#leftTask").addClass("active"),e.find("#fileFilter").css("display","none")}function l(e){e.parents("#fileFilter").find(".js-common-radio").removeClass("all-checked"),e.find(".js-common-radio").addClass("all-checked")}}();
"use strict";var FileMenu=function(){var i,a,t;return{openFileMenu:function(e,l){n(),a=(i=e).findUp(".allFileLayer");e=function(){var e=a.find("#fileMenuPopupItem").html();return(t=$(e).attr("id","allFileMenuPopup")).off("click").on("click",o),function(){var e=i.hasClass("js-folder"),l=i.hasClass("external"),n=AllFile.isProjectFile();t.find("#downloadFile").css("display",e||l?"none":"block"),t.find("#viewerFile, #detailFileView").css("display",e?"none":"block"),t.find("#nameChange, #deleteFolder").css("display",e?"block":"none"),t.find("#moveFile").css("display",n?"block":"none")}(),t}();a.find(".js-file-list-layer").append(e);l=function(e,l){var n=e.pageY,i=e.pageX,t=l.outerHeight(),o=l.outerWidth(),r=window.innerHeight<n+t,l=window.innerWidth<i+o+60,n=a.find(".js-file-list-layer").offset(),i=a.find(".js-file-list-layer").scrollTop();return{top:e.pageY+i-(n.top+(r?t:0)),left:e.pageX-(n.left+(l?o:0))}}(l,e);e.css({left:l.left,top:l.top,display:"block"})},removeFileMenu:n};function n(){$("#allFileMenuPopup").remove()}function o(e){e=$(e.target);if(0!==e.findUp("#allFileMenuPopup").length)return function(e){if(0<!e.findUp("#downloadFile").length)return!1;e=AllFile.getCheckedFileJson(i);FileUtil.saveFile(e)}(e)||function(e){if(0<!e.findUp("#viewerFile").length)return!1;event.stopPropagation();e=AllFile.getCheckedFileJson(i);ImageUtil.isImageType(e[0])?ImageViewer.openImage("POST",e,0):FileUtil.openFile("DOC-VIEWER",e)}(e)||function(e){if(0<!e.findUp("#moveFile").length)return!1;MoveFilePopup.moveFile("POPUP",a,i)}(e)||function(e){if(0<!e.findUp("#nameChange").length)return!1;var l=i.find(".all-file-name");PopupDraw.drawInputConfirm({contents:{title:i18next.t("front.common.change",{val:Interpolation.addName("dictionary.folder")}),holder:i18next.t("front.alert.enterWord",{val:Interpolation.addName("dictionary.folder")}),value:l.text()},callback:{submit:function(e){e=$.trim(e.find(".popup-input").val()),AllFile.cudFolder("U",{COLABO_SRNO:Often.null2Void(i.attr("colabo-srno"),""),FILE_FLD_SRNO:Often.null2Void(i.attr("file-fld-srno"),"-1"),FILE_FLD_NM:e},PopupDraw.closePopup),l.text(e)}}})}(e)?n():!(0<!e.findUp("#deleteFolder").length||0===Often.null2Void(i).length)&&void AllFileEvent.folderCheckAndDelete({COLABO_SRNO:Detail.getProjectSrno(),FLD_REC:Often.getAttrs(i)})||function(e){if(0<!e.findUp("#detailFileView").length)return!1;e=Often.getAttrs(i);return PostPopup.togglePostView(e[0].COLABO_SRNO,e[0].COLABO_COMMT_SRNO,"",DetailEvent.applySummarySlickImage),!0}(e)?n():void 0}}();
"use strict";var FileSearch=function(){var i;return{initSetting:function(e){i=e.find(".js-file-detail-search-layer"),SearchFilter.initFilter(i,searchMode.FILE),e.find(".js-file-search-input").val("")},showDetailSearchLayer:function(e){(i=e.next()).is(":visible")?r():(SearchFilter.initFilter(i,searchMode.FILE,!0),SearchFilter.addEventOnSearchFilter(i,t,!0),e.addClass("active"),i.fadeIn(200))},closeDetailSearchLayer:r,keydownSearchInput:function(e){KeyCheck.isKey(e,"ENTER")&&t();KeyCheck.isKey(e,"ESC")&&r()},getFileFilterJson:function(e,i,t){var r=e.find(".js-file-detail-search-layer"),l=SearchFilter.getFilterJson(r,!0,t),e=SearchFilter.getSearchWord(searchAreaCode.IN_FILE),r=[],t={};""!==e&&(r.push({SRCH_GB:"ITEM_NM",SRCH_WORD:e}),i&&(t.MODE="SRCH_ALL"));if(i)return t.SRCH_REC=r,t;""!==Often.null2Void(l.START_DATE)&&(t.START_DT=l.START_DATE);""!==Often.null2Void(l.END_DATE)&&(t.FNSH_DT=l.END_DATE);""!==Often.null2Void(l.SEARCH_PROJECT_TITLE)&&r.push({SRCH_GB:"PROJ_NM",SRCH_WORD:l.SEARCH_PROJECT_TITLE});""!==Often.null2Void(l.RGSR_NM)&&r.push({SRCH_GB:"RGSR_NM",SRCH_WORD:l.RGSR_NM});i=$("#fileTypeFilter");""!==Often.null2Void(l.SEARCH_ETS)&&(t.SEARCH_ETS=n(l.SEARCH_ETS),FileFilter.setFileFilter(i.find(".js-search-type[file-type="+l.SEARCH_ETS+"]")));return t.SRCH_REC=r,t},getTotalFileType:n};function t(){r(),AllFile.searchFileList()}function r(e){e&&(e.hasClass("js-file-search-input")||0<e.parents(".flatpickr-calendar").length)||(i&&i.fadeOut(200),i&&i.prev().removeClass("active"))}function n(e){return"TOTAL"===e||"0"===e?"":e}}();
"use strict";var MoveFilePopup=function(){var i,n,d,_,o,r,p,f=!1;return{openMovePopup:s,moveFile:function(e,t,l){(function(e,t){i=$("#mainBodyWrap"),n=e,o=t,_=[],p=AllFile.getFileProjectData()})(t,l),"DRAG"===e?(r=v(),O(o)||u(o)):"POPUP"===e&&s()}};function s(){var e,t,l;r=v(o),e=$("#projectTitle").text(),t=$("#projectColor").attr("class"),l=n.find("#fileMovePopupItem").html(),e=ListHelper.replaceJson(l,{"colabo-srno":p.COLABO_SRNO,"project-color":t,"project-title":TagUtil.tag2html(e)}),d=$(e).attr("id","moveFilePopup"),i.append(d),function(e,t){var l={PG_NO:1,PG_PER_CNT:30,NEXT_YN:"Y"};Ajax.executeApi(RestApi.GET.COLABO2_FILE_FLD_R001,$.extend({},l,{MODE:e,COLABO_SRNO:t.COLABO_SRNO,FILE_FLD_SRNO:"-1"}),function(e){d.find("#moveFilePopupUl").drawListHelper({pageData:l,nextYn:e.NEXT_YN,records:e.FLD_REC,notEmpty:!0,callback:{item:F,click:L,final:function(){i.find("#moveFilePopup").off("click").on("click",function(e){var t=$(e.target),l=t.findUp(".js-file-move-popup"),e=t.findUp(".js-class-button");(0===l.length||0<e.length)&&a(),0<t.findUp(".js-move-file-success").length&&u($(this).find(".js-move-file-li.active"))}),c()}}})})}("DOWN_ONE_DEPTH",p)}function a(){i.find("#moveFilePopup").remove()}function c(){$(".js-move-file-li[file-fld-srno="+p.FILE_FLD_SRNO+"]:visible").addClass("current disabled")}function u(e){if(0===Often.null2Void(e).length)return Often.toast("error","이동할 폴더를 선택해주세요.");f=!0,Ajax.executeApi(RestApi.PUT.COLABO2_FILE_FLD_U002,$.extend({},r,{COLABO_SRNO:e.attr("colabo-srno"),UP_FILE_FLD_SRNO:e.attr("file-fld-srno"),UP_FILE_FLD_SRNO_PARENT:e.attr("up-file-fld-srno")}),function(){$.each(_,function(e,t){$(t).remove()}),_=[],a(),$(".js-file-count-layer:visible").remove(),AllFile.checkEmptyFileLayerUl(n.find("#fileLayerUl")),Often.toast("success",i18next.t("front.alert.successfullyChange",{status:"$t(dictionary.update)"})),f=!1})}function L(e){var t=$(e.target),l=t.findUp("#moveFilePopupUl"),i=t.findUp(".js-move-file-li:first");if(0!==i.length){i.toggleClass("on");var n,e=0===i.find(".js-move-file-li").length,t=i.hasClass("on");if(i.find("ul:first").css("display",t?"block":"none"),e&&(e={MODE:"DOWN_ONE_DEPTH",COLABO_SRNO:(n=i).attr("colabo-srno"),FILE_FLD_SRNO:i.attr("file-fld-srno")},Ajax.executeApi(RestApi.GET.COLABO2_FILE_FLD_R001,$.extend({},{PG_NO:1,PG_PER_CNT:30,NEXT_YN:"Y"},e),function(e){var t=Number(n.attr("data-depth"))+1;n.find("ul").append(F(e.FLD_REC,t)),c()})),!O(i)){if(f)return Often.toast("info","잠시만 기다려주세요!");l.find(".js-move-file-li").removeClass("active"),i.addClass("active")}}}function O(o){var r=!1,f="",s=5===AllFile.getFolderDepth(),a="5"===o.attr("data-depth");0<o.parents(".js-move-file-li:first").length&&o.parents(".js-move-file-li:first");return $.each(_,function(e,t){var l=$(t).attr("file-fld-srno"),i=$(t).attr("up-file-fld-srno"),n=o.attr("file-fld-srno");if((a||s)&&t.hasClass("js-folder"))return r=!0,!(f="폴더 구조는 최대 5 Depth까지만 가능합니다.");if(n===i)return r=!0,!(f="현재 위치 입니다.");if(p.FILE_FLD_SRNO===n||l===n)return r=!0,!(f="동일 폴더로 이동할 수 없습니다.");if(d&&d.is(":visible")&&0<d.find(".js-move-file-li[file-fld-srno="+l+"]").find(".js-move-file-li[file-fld-srno="+n+"]").length)return r=!0,!(f="하위 폴더로 이동할 수 없습니다.")}),r&&Often.toast("error",f),r}function F(e,r){var f="",s=n.find("#fileMovePopupLiItem").html();return $.each(e,function(e,t){var l=p.FILE_FLD_SRNO===t.FILE_FLD_SRNO,i=$(".js-folder.on[file-fld-srno="+t.FILE_FLD_SRNO+"]").is(":visible"),n=0<$(".js-move-file-li[file-fld-srno="+t.UP_FILE_FLD_SRNO+"]").findUp(".current").length,o=0<$(".js-move-file-li[file-fld-srno="+t.UP_FILE_FLD_SRNO+"]").findUp(".disabled").length;f+=ListHelper.replaceJson(s,{"colabo-srno":p.COLABO_SRNO,"file-fld-srno":t.FILE_FLD_SRNO,"up-file-fld-srno":t.UP_FILE_FLD_SRNO,"folder-name":t.FILE_FLD_NM,"last-fld":"Y"===t.LAST_FLD_YN?"":"js-not-folder","folder-depth":Often.null2Void(r,"1"),"popup-depth-class":"depth"+Often.null2Void(r,"1"),"current-folder":i||l||n||o?"disabled":""})}),f}function v(e){var t=LocalUtil.getFileSetting(),e=!e||0===e.length?n.find(".js-file-"+t+".on"):e,l={FLD_REC:[],EDITOR_REC:[]};return $.each(e,function(e,t){$(t).hasClass("js-folder")?l.FLD_REC.push({FILE_FLD_SRNO:$(t).attr("file-fld-srno"),"UP-FILE-FLD-SRNO":$(t).attr("up-file-fld-srno")}):l.EDITOR_REC.push({EDITOR_SRNO:$(t).attr("editor_srno")}),_.push($(t))}),l}}();
"use strict";var JoinProject=function(){var e,o,i,c={PG_NO:1,PG_PER_CNT:50,NEXT_YN:"Y"};return{drawJoinProjectCount:function(){a(),Ajax.executeApi(RestApi.GET.FLOW_JOIN_REQ_R001,{},function(t){var n="0"!==Often.null2Void(t.JOIN_REQ_CNT,"0");e.find(".badge-count").text(t.JOIN_REQ_CNT),r(n)})},showJoinProjectBar:r,updateJoinStatus:u,closeJoinProjectBar:t};function a(){e=$("#joinArea"),o=$("#joinProjectLayer"),i=$("#joinProjectUl")}function r(t){a(),e.css("display",t?"block":"none"),t&&e.off("click").on("click",n)}function n(){function n(t){return AllProject.getProjectItems(t,!0,!1)}a(),o.is(":visible")?t():(ListHelper.initPageData(c,i),Ajax.executeApi(RestApi.GET.FLOW_JOIN_REQ_R002,c,function(t){return 0===t.INVT_REC.length?(Often.toast("error","가입 요청중인 프로젝트가 없습니다!"),void e.css("display","none")):(i.drawListHelper({pageData:c,nextYn:t.NEXT_YN,records:t.INVT_REC,callback:{click:s,item:n}}),i.addClass("section-list-1"),void o.css("display","block"))}))}function t(){a(),o.fadeOut(200)}function s(t){var n,t=$(t.target).findUp(".project-item");0!==t.length&&(n=t.attr("project-srno"),PopupDraw.drawConfirm({contents:{main:i18next.t("front.common.requestingToJoin"),cancel:i18next.t("front.common.cancelApplication")},callback:{cancel:function(){u(n,_USER_ID,JoinStatus.CANCEL_REQUEST_JOIN,PopupDraw.closePopup())}}}))}function u(t,n,e,o){Ajax.executeApi(RestApi.PUT.COLABO2_INVT_U001,{COLABO_SRNO:t,IN_RCVR_USER_ID:n,STTS:e},function(){"function"==typeof o&&o(),e===JoinStatus.APPLY_JOIN?ViewChanger.loadPageJson({code:"detail",first:t}):e===JoinStatus.REQUEST_JOIN?(Often.toast("success",i18next.t("front.alert.requestedToJoin")),JoinProject.drawJoinProjectCount()):e===JoinStatus.APPLY_JOIN_2?Often.toast("success",i18next.t("back.langConvert.approveInvitation")):e===JoinStatus.REJECT_JOIN_2?Often.toast("success",i18next.t("back.langConvert.declineInvitation")):e===JoinStatus.CANCEL_REQUEST_JOIN&&(Often.toast("success",i18next.t("front.alert.inviteCancel")),JoinProject.drawJoinProjectCount())})}}();
"use strict";var ProjectMake=function(){var r,c,o,l;return{openPopup:function(e){l=0<$(e.target).findUp("#projectMakeButton").length,"Y"===LocalUtil.getBuyPrjMkLmtYn()&&l&&LimitGuest.isLimitGuest("project",!1)||(r=$("#projectMakeLayer"),$("#projectMakePopupTitle").html(i18next.t(l?"front.common.createProject":"front.projectTop.editProject")),function(e){e&&(c={TITLE:"",CONTENTS:"",OPEN_YN:"N",CATEGORY_SRNO:"",CATEGORY_NM:"",MANAGER_PERMIT_YN:"N",MANAGER_WRITE_YN:"N",MANAGER_WRITE_REMARK_YN:"N",MANAGER_LOOKUP_YN:"N",MANAGER_DOWNLOAD_YN:"N"},o=$.extend({},c));$("#projectTitleInput").val(c.TITLE),$("#projectContentsInput").val(c.CONTENTS);var t=r.find(".open-yn").find(".check-area"),n=r.find(".manager-permit-yn").find(".check-area");r.find(".js-project-toggle, .js-project-open-toggle").removeClass("active"),r.find(".project-submit").addClass("un-value").text(i18next.t(e?"dictionary.create":"dictionary.edit")),"N"===c.OPEN_YN?(t.removeClass("active"),r.find(".open-category-setting").addClass("d-none"),r.find("#categoryName").text(i18next.t("dictionary.select")).removeClass("selected")):(t.addClass("active"),r.find(".open-category-setting").removeClass("d-none"),e=LocalUtil.getLocalValue("CURRENT_PROJECT_SETTING","CNTS_CATG_NM"),t=LocalUtil.getLocalValue("CURRENT_PROJECT_SETTING","CNTS_CATG_SRNO"),r.find(".category-option-active-1").attr("data-srno",t),r.find("#categoryName").text(e).addClass("selected"));"N"===c.MANAGER_PERMIT_YN?n.removeClass("active"):n.addClass("active")}(l),s(),r.fadeIn(200,function(){r.find("input").focus()}),r.off("click").on("click",n),r.find(".check-area").off("click").on("click",p),r.find(".open-category-setting").off("click").on("click",N),r.find(".main-return-event").off("click").on("click",s),r.find(".more-option-button").off("click").on("click",f),r.find(".project-submit").off("click").on("click",_),r.find(".js-service-helper").on("click",t),r.find("#projectTitleInput").off("keyup").on("keyup",a))},closePopup:d,getProjectMakeData:e,setProjectMakeData:function(e){c=e,o=$.extend({},c)},checkWritingMakePopup:C};function t(e){e="CREATE"===$(e.currentTarget).attr("service-code")?FlowServiceHelper.CREATE_PROJECT:FlowServiceHelper.CREATE_PROJECT_OPTION;window.open(e,"_blank")}function n(e){var t=$(e.target),e=t.hasClass("back-area"),t=0<t.findUp(".close-event").length;(e||t)&&C(d)}function a(){var e=r.find(".project-submit"),t=$.trim($(this).val());if(50<=t.length)return Often.toast("error",i18next.t("front.alert.inputLimit",{subject:"$t(dictionary.title)",length:50}),2500),!1;0!==t.length?e.removeClass("un-value"):e.addClass("un-value")}function e(){return c}function d(){r.fadeOut(200)}function i(e){"main"===e?(r.find(".input-main-layer").removeClass("d-none").addClass("d-block"),r.find(".open-category-layer").removeClass("d-block").addClass("d-none"),r.find(".more-option-layer").removeClass("d-block").addClass("d-none"),r.find("input").focus()):"open-category"===e?(r.find(".input-main-layer").removeClass("d-block").addClass("d-none"),r.find(".open-category-layer").removeClass("d-none").addClass("d-block"),r.find(".more-option-layer").removeClass("d-block").addClass("d-none"),r.find("a").focus()):"more-option"===e&&(r.find(".input-main-layer").removeClass("d-block").addClass("d-none"),r.find(".open-category-layer").removeClass("d-block").addClass("d-none"),r.find(".more-option-layer").removeClass("d-none").addClass("d-block"),l?r.find(".more-option-layer").find(".lookup-option .check-area").removeClass("disabled"):r.find(".more-option-layer").find(".lookup-option .check-area").addClass("disabled"),r.find(".more-option-layer").find(".lookup-option .checked").removeClass("disabled"),r.find(".more-option-layer").find(".scroll-mask").scrollTop(0),r.find("a").focus())}function s(){i("main")}function N(){function t(e){e=$(e.target).findUp(".category-item");0!==e.length&&(r.find(".category-item").attr("class","").addClass("category-item"),e.toggleClass("category-option-active-1"))}OpenProject.getOpenCategory(function(){r.find(".open-category-ul").empty()},function(e){var a="";$.each(e,function(e,t){var n=t.CNTS_CATG_SRNO,o=t.CNTS_CATG_NM,t=n===c.CATEGORY_SRNO;a+='<li id="category-'+n+'" class="category-item'+(t?" category-option-active-1":"")+'"  data-srno="'+n+'"><a href="#"><em></em><span id="categoryName">'+o+"</span></a></li>"}),r.find(".open-category-ul").append(a).off("click").on("click",t)}),r.find(".open-category-submit").off("click").on("click",function(){var e=r.find(".category-option-active-1"),t=e.attr("data-srno"),n=e.find("#categoryName").text();c.CATEGORY_SRNO=t,c.CATEGORY_NM=n,r.find("#categoryName").text(e.text()).addClass("selected"),s()}),i("open-category")}function f(){var e,t,n,o,a=Often.isFunc(Func.CLOUD.WRITE_AUTHORITY_SEPARATE);r.find(".more-option-layer").find(".check-area").removeClass("checked").off("click").on("click",p),r.find(".more-option-submit").off("click").on("click",function(){var e=r.find(".write-option").find(".checked").attr("data-manager-write-yn"),t=a?r.find(".remark-write-option").find(".checked").attr("data-manager-remark-write-yn"):e,n=r.find(".lookup-option").find(".checked").attr("data-manager-lookup-yn"),o=r.find(".download-option").find(".checked").attr("data-manager-download-yn");c.MANAGER_WRITE_YN=e,c.MANAGER_WRITE_REMARK_YN=t,c.MANAGER_LOOKUP_YN=n,c.MANAGER_DOWNLOAD_YN=o,s()}),a||(r.find(".write-option dt").text(i18next.t("front.common.writePermission")),r.find(".remark-write-option").addClass("d-none")),e=Often.null2Void(c.MANAGER_WRITE_YN,"N"),t=Often.null2Void(c.MANAGER_WRITE_REMARK_YN,"N"),n=Often.null2Void(c.MANAGER_LOOKUP_YN,"N"),o=Often.null2Void(c.MANAGER_DOWNLOAD_YN,"N"),r.find("[data-manager-write-yn="+e+"]").addClass("checked"),r.find("[data-manager-remark-write-yn="+t+"]").addClass("checked"),r.find("[data-manager-lookup-yn="+n+"]").addClass("checked"),r.find("[data-manager-download-yn="+o+"]").addClass("checked"),i("more-option")}function p(e){e=$(e.currentTarget);if(0<e.parents(".more-option-layer").length)return!l&&0<e.findUp(".lookup-option").length||e.findUp(".check-area").hasClass("checked")?void 0:void e.parents("dl").find(".check-area").toggleClass("checked");e.hasClass("toggle-button")?(e.removeClass("my-check-1"),e.toggleClass("active")):e.toggleClass("my-check-1-1").toggleClass("my-check-1"),0<e.parents(".open-yn").length?(r.find(".open-category-setting").toggleClass("d-none"),c.OPEN_YN=e.hasClass("active")?"Y":"N"):0<e.parents(".manager-permit-yn").length&&(c.MANAGER_PERMIT_YN=e.hasClass("active")?"Y":"N")}function _(){var e=$("#projectTitleInput"),t=Validation.checkInput(e);if(0<Object.keys(t).length)return Often.toast("error",t.errorMessage),void t.errorObj.focus();var n=r.find(".js-project-open-toggle").hasClass("active"),t=$.trim(c.CATEGORY_SRNO);if(!n||"0"!==t&&""!==t){var o=$.trim(e.val()),a=$.trim($("#projectContentsInput").val()),i={COLABO_SRNO:LocalUtil.getLocalValue("CURRENT_PROJECT_SETTING","COLABO_SRNO"),TTL:o,CNTN:a,JNNG_ATHZ_YN:c.MANAGER_PERMIT_YN,OPEN_YN:c.OPEN_YN,CNTS_CATG_SRNO:c.CATEGORY_SRNO,MNGR_WR_YN:c.MANAGER_WRITE_YN,MNGR_WR_CM_YN:c.MANAGER_WRITE_REMARK_YN,SRCH_AUTH_YN:c.MANAGER_LOOKUP_YN,PRJ_AUTH:c.MANAGER_DOWNLOAD_YN};if(l)return i.packetOption=Ajax.OPTION.PREVENT_EXECUTE,void Ajax.executeApi(RestApi.POST.COLABO2_C102,i,function(e){BaseSetting.setBuySetting(function(){ViewChanger.loadPageJson({code:"detail",first:e.COLABO_SRNO}),d()})});Ajax.executeApi(RestApi.PUT.COLABO2_U101,i,function(){var e,t;Often.toast("success",i18next.t("front.alert.successfullyChange",{status:"$t(dictionary.edit)"})),d(),e=$("#projectContents"),$("#projectTitle").text(o),e.text(a).attr("mouseover-text",a),e.parent().css("display",""===a?"none":"block"),DetailHeader.setProjectIcon(i),t=LocalUtil.getLocalJson("CURRENT_PROJECT_SETTING"),LocalUtil.setLocalJson("CURRENT_PROJECT_SETTING",$.extend({},t,{TTL:o,CNTN:a,JNNG_ATHZ_YN:c.MANAGER_PERMIT_YN,OPEN_YN:c.OPEN_YN,CNTS_CATG_SRNO:c.CATEGORY_SRNO,CNTS_CATG_NM:c.CATEGORY_NM,MNGR_WR_YN:c.MANAGER_WRITE_YN,MNGR_WR_CM_YN:c.MANAGER_WRITE_REMARK_YN,SRCH_AUTH_YN:c.MANAGER_LOOKUP_YN,PRJ_AUTH:c.MANAGER_DOWNLOAD_YN}))})}else Often.toast("error","프로젝트 카테고리를 선택해주세요!")}function C(e){var t=c;if(t.TITLE=$.trim($("#projectTitleInput").val()),t.CONTENTS=$.trim($("#projectContentsInput").val()),JSON.stringify(o)===JSON.stringify(t))return e();PopupDraw.drawConfirm({contents:{main:i18next.t("front.alert.leaveWriting")},callback:{submit:e}})}}();
"use strict";var ProjectSetting=function(){return{setProjectStar:function(t,e,o){Ajax.executeApi(RestApi.PUT.COLABO2_U001,{COLABO_SRNO:t,IMPT_YN:e?"N":"Y"},function(){Often.toast("success",i18next.t("front.alert.successfullyChange",{status:"$t(dictionary.apply)"})),"function"==typeof o&&o(t)})},setProjectFilter:function(t){!function(t){$("#"+(t?"Board":"List")+"TypeButton").addClass("on")}(t);t=$("#projectHomeTop");t.find(".type-button").off("click").on("click",s),t.find("#projectOrderButton").off("click").on("click",a),t.find("#totalProjectEditButton").off("click").on("click",e)},isTotalProjectEditMode:t,selectEditProject:function(t){var e=$("#totalEditSelect");t.toggleClass("active"),t.find(".edit-check").toggleClass("flow-content-chk").toggleClass("flow-content-chk-1");t=$(".flow-content-chk-1").length;e.find(".select-count").text(i18next.t("front.projectTop.selectProject",{count:t}))},editProjectColors:d,clearOrderPopup:r,closeTotalProjectEditBar:i};function t(){return $("#totalProjectEditBar").is(":visible")}function e(){if($("#totalProjectEditButton").addClass("active"),t())return i();"hidden"===ViewChanger.getCurrentPageId()?($(".js-hidden").css("display","none"),$(".js-cancel-hidden").css("display","inline-block")):($(".js-hidden").css("display","inline-block"),$(".js-cancel-hidden").css("display","none")),o(!0),$("#joinArea").css("display","none"),$("#totalProjectEditBar").fadeIn(200),$("#totalEditButton").off("click").on("click",c),$("#editBarCloseButton").off("click").on("click",i),$("#totalEditSelect").find(".select-clear").off("click").on("click",n),$("#totalEditSelect").find(".select-count").text(i18next.t("front.projectTop.selectProject",{count:0}))}function i(){var t;o(!1),$("#totalProjectEditButton").removeClass("active"),$("#projectBoardUl").find(".active").removeClass("active"),$("#topSettingBar").css("display","block"),$("#totalProjectEditBar").css("display","none"),ViewChanger.isPage("main")&&(t="0"!==Often.null2Void($("#joinProjectLayer").find(".badge-count").text(),"0"),JoinProject.showJoinProjectBar(t))}function o(t){$("#projectHomeLayer").find(".project-item").find(".edit-check").css("display",t?"block":"none"),t||n()}function n(){$("#totalEditSelect").find(".select-count").text(i18next.t("front.projectTop.selectProject",{count:0})),$("#projectBoardUl").find(".active").removeClass("active"),$("#projectListUl").find(".active").removeClass("active"),$(".flow-content-chk-1").toggleClass("flow-content-chk").toggleClass("flow-content-chk-1")}function c(t){var c,t=$(t.target).findUp(".edit-button");if(0!==t.length)return 0<$("#mainContent").find(".project-item.active:visible").length?t.hasClass("color")?PopupDraw.drawColorSetting({callback:{submit:function(t){d(Often.null2Void(t.find(".project-color-check-active-1").attr("color-code"),"0"),PopupDraw.closePopup)}}}):t.hasClass("label")?PopupDraw.drawLabelSetting({callback:{submit:function(t){!function(t,e){var o=t.find(".flow-content-check-type-2").parents(".label-item"),t=$("#projectHomeLayer").find(".flow-content-chk-1").findUp(".project-item");(function(t,e){var t=function(t,e){var n=$("#allLabelLeftButton").attr("data-select-label-srno"),c=0<n.length,i=[],a="",r=!1;$.each(t,function(t,e){var o=$(e).attr("data-label-srno");c&&o===n&&(r=!0),i.push({COLABO_FLD_KIND:$(e).attr("data-label-kind"),COLABO_FLD_SRNO:o,ICO_CODE:$(e).attr("data-label-ico")}),a+=i[t].COLABO_FLD_SRNO+","}),c&&!r&&function(t){$.each(t,function(t,e){e.remove()})}(e);return{colaboFldRec:i,labelSrno:a}}(t,e),o=t.labelSrno.slice(0,-1);Ajax.executeApi(RenewalApi.POST.COLABO2_C104,{COLABO_FLD_REC:t.colaboFldRec,COLABO_SRNO_REC:function(t){var o=[];return $.each(t,function(t,e){o.push({COLABO_SRNO:$(e).attr("project-srno")})}),o}(e)},function(){$.each(e,function(t,e){$(e).attr("label-srnos",o)}),Often.toast("success",i18next.t("front.alert.successfullyChange",{status:"$t(dictionary.apply)"}))})})(o,t),"function"==typeof e&&e()}(t,PopupDraw.closePopup)}}}):t.hasClass("push")?PopupDraw.drawPushAlarmSetting({callback:{submit:function(t){!function(t){var o=[];$.each($("#projectHomeLayer").find(".flow-content-chk-1").findUp(".project-item"),function(t,e){o.push({COLABO_SRNO:$(e).attr("project-srno")})}),function(t,e){var o,n=t.find(".alarm-popup-set").attr("data-push-alarm"),c=t.find(".js-push-commt").attr("data-push"),i=t.find(".js-push-remark").attr("data-push"),t=t.find(".alarm").attr("data-alarm-list"),a=$(($("#BoardArea").is(":visible")?"#Board":"#List")+"Area");""===n||"Y"===n&&""===c||"Y"===n&&""===i||""===t?Often.toast("error",i18next.t("front.alert.alarmNotificationSetting")):(o={PUSH_ALAM_YN:n,PUSH_COMMT_ALAM_YN:c,PUSH_REMARK_ALAM_YN:i,ALAM_LIST:t,COLABO_SRNO_REC:e},Ajax.executeApi(RenewalApi.PUT.COLABO2_NOTI_U102,o,function(){e.forEach(function(t){t=a.find("#project-"+t.COLABO_SRNO).find(".flow-content-bl-ico");"Y"===n?t.attr("style","display:none"):t.attr("style","display:inline-block")}),Often.toast("success",i18next.t("front.alert.successfullyApplied")),DetailHeader.setProjectIcon(o),PopupDraw.closePopup()}))}(t,o)}(t,PopupDraw.closePopup)}}}):t.hasClass("hidden")?(t={CONFIRM:{Y:i18next.t("front.alert.projectHide"),N:i18next.t("front.alert.projectUnHide")}},c="hidden"!==ViewChanger.getCurrentPageId()?"Y":"N",t=t.CONFIRM[c],void PopupDraw.drawConfirm({contents:{main:t},callback:{submit:function(){var n=$("#projectHomeLayer"),t=n.find(".flow-content-chk-1").findUp(".project-item");$.each(t,function(t,e){var o=$(e).attr("project-srno");Ajax.executeApi(RestApi.POST.COLABO2_C105,{COLABO_SRNO:o,HIDDEN_YN:c,packetOption:Ajax.OPTION.ALLOW_EXECUTE},function(){var t;i(),$(e).remove(),PopupDraw.closePopup(),Often.toast("success",i18next.t("front.alert.successfullyChange",{status:"$t(dictionary.apply)"})),0<n.find(".project-item:visible").length||(t=!_IsMini&&"1"===LocalUtil.getLocalValue("ONLY_USER_SETTING","LIST_VIEW_CD"),n.find("#project"+(t?"Board":"List")+"Ul").empty().append(ListHelper.getNoDataHtml()))})})}}})):void 0:Often.toast("error","프로젝트를 선택하세요")}function a(){var t,e=$("#projectOrderButton"),o=$("#projectOrderList");e.toggleClass("active"),o.is(":visible")?r():(t=LocalUtil.getProjectOrder(),e=LocalUtil.getProjectFilter(),o.find("li.order-item, li.filter-item").removeClass("on"),o.find("li.order-item[code="+t+"]").addClass("on"),o.find("li.filter-item[code="+e+"]").addClass("on"),o.fadeIn(200),o.off("click").on("click",l))}function r(){$("#projectOrderList").fadeOut(200),$("#projectOrderButton").removeClass("active")}function l(t){var e=$(t.target),o=e.is("order-item")?e:e.parents(".order-item"),t=e.is("filter-item")?e:e.parents(".filter-item"),e=!1;0<o.length?(e=!0,LocalUtil.setLocal("ONLY_PROJECT_ORDER",o.attr("code"))):0<t.length&&(e=!0,LocalUtil.setLocal("ONLY_PROJECT_FILTER",t.attr("code"))),e&&AllProject.showList()}function s(t){var e="BoardTypeButton"===$(t.target).attr("id"),o=e?"1":"0";Ajax.executeApi(RestApi.PUT.COLABO2_SET_U101,{LIST_VIEW_CD:o},function(){$("#"+(e?"List":"Board")+"TypeButton").removeClass("on"),LocalUtil.setLocalValue("ONLY_USER_SETTING","LIST_VIEW_CD",o),AllProject.showList()})}function d(t,e){var o=$("#projectHomeLayer"),n=o.is(":visible"),c=[];"function"==typeof e&&e(),n?($.each(o.find(".flow-content-chk-1"),function(t,e){c.push({COLABO_SRNO:$(e).parents(".project-item").attr("project-srno")})}),f(c,t)):f("",t)}function f(t,e){var o=$("#BoardArea").is(":visible")?"Board":"List";Ajax.executeApi(RenewalApi.PUT.COLABO2_BG_COLOR_U002,{COLABO_SRNO_REC:t,BG_COLOR_CD:e},function(){t.forEach(function(t){t=$("#"+o+"Area").find("#project-"+t.COLABO_SRNO).find(".color-code");ListHelper.removeAllColorClass(t),t.addClass("color-code-"+e)}),Often.toast("success",i18next.t("front.alert.successfullyApplied"))})}}();
"use strict";var TaskExcel=function(){var A=[{CODE:"COLABO_SRNO",NAME:"프로젝트 일련번호"},{CODE:"TASK_NUM",NAME:"업무번호"},{CODE:"PRIORITY",NAME:"우선순위"},{CODE:"TASK_NM",NAME:"업무제목"},{CODE:"STTS",NAME:"상태"},{CODE:"PROGRESS",NAME:"진척도"},{CODE:"WORKER_REC",NAME:"담당자"},{CODE:"START_DT",NAME:"시작일"},{CODE:"END_DT",NAME:"마감일"},{CODE:"PRJ_TTL",NAME:"프로젝트명"},{CODE:"RGSR_ID",NAME:"등록자ID"},{CODE:"RGSR_NM",NAME:"등록자명"},{CODE:"RGSN_DTTM",NAME:"등록일"},{CODE:"EDTR_DTTM",NAME:"수정일"}];return{downAllTaskExcel:function(){var e=AllTask.getTotalTaskCount();if(0===e)return Often.toast("info","엑셀 내려받을 데이터가 존재하지 않습니다.");var o=[],R=!1,t=1,O={PG_NO:1,PG_PER_CNT:30,NEXT_YN:"Y"};Loading.drawLoadingJson({CONTENTS:"엑셀 다운로드 진행 중입니다.(0%)",CALLBACK:{CANCEL:function(){Loading.closeLoadingPop(),R=!0}}}),function n(){Ajax.executeApi(RenewalApi.GET.ACT_TASK_LIST,$.extend({},AllTask.getTaskApiJson(),O),function(T){var E;R||($("#js-loading-popup").find(".popup-cont").text("엑셀 다운로드 진행 중입니다.("+(99<(E=Math.ceil(t++/(e/O.PG_PER_CNT)*100))?100:E)+"%)"),o=o.concat(T.TASK_RECORD),"N"===T.NEXT_YN?($.each(o,function(T,E){var n=Often.null2Void(E.PROGRESS,"0"),e=E.STTS,o=E.PRIORITY;E.RGSN_DTTM=Tz.momentTimeZone(Often.null2Void(E.RGSN_DTTM,""),"type12"),E.EDTR_DTTM=Tz.momentTimeZone(Often.null2Void(E.EDTR_DTTM,""),"type12"),E.PROGRESS=""!==n?n+"%":n,E.STTS=i18next.t(DetailCode.STATUS._TEXT[e]),E.PRIORITY=i18next.t(DetailCode.PRIORITY._ALL_TEXT[o]),E.WORKER_REC=AllTask.getWorkerNameCommaArray(E.WORKER_RECORD)}),Excel.down("업무목록_"+Tz.momentConversion("current"),o,A),Loading.closeLoadingPop()):(O.PG_NO++,n()))})}()}}}();
"use strict";var TaskFilter=function(){var n,l,f={};return{toggleTaskFilterButton:function(t){var e=$(t.currentTarget),t=e.findUp("#leftArea");n=e,l=t.find("#allTaskFilter");t=n.hasClass("close");l.css("display",t?"block":"none"),LocalUtil.setLocal("TASK_FILTER",t?"ON":"OFF")},getTaskFilter:function(t,e){t=t.find("#allTaskFilter");t.find(".js-search-checkbox, .js-common-radio").removeClass("on"),t.find(".js-search-checkbox, .js-common-radio").removeClass("all-checked"),Ajax.executeApi(RestApi.GET.FLOW_TASK_FILTER_R001,{packetOption:Ajax.OPTION.PREVENT_CALLBACK},function(t){"function"==typeof e&&e(t)})},getTaskFilterJsonAfterDraw:function(t,e){e=function(t){return{PG_NO:1,VIEW_GB:Often.null2Void(t.VIEW_GB,"3"),ORDER_TYPE:Often.null2Void(t.ORDER_TYPE,"RGSN_DT"),ORDER_VALUE:Often.null2Void(t.ORDER_VALUE,"0"),FILTER_GB:Often.null2Void(t.FILTER_GB,"1"),FIL_STTS:Often.null2Void(t.FIL_STTS,"0,1,2,3,4"),FIL_PRIORITY:Often.null2Void(t.FIL_PRIORITY,"0,1,2,3,4"),FIL_START_DT_GUBUN:Often.null2Void(_(t.FIL_START_DT_GUBUN),"0"),FIL_END_DT_GUBUN:Often.null2Void(t.FIL_END_DT_GUBUN,"0"),END_START_DT:Often.null2Void(t.DEADLINE_START_DTTM,""),END_END_DT:Often.null2Void(t.DEADLINE_END_DTTM,""),MOD_DT_GB:Often.null2Void(t.MODIFIED_DT_GUBUN,"0"),MOD_START_DT:Often.null2Void(t.MODIFIED_START_DTTM,""),MOD_END_DT:Often.null2Void(t.MODIFIED_END_DTTM,""),STTS_VIEW_YN:Often.null2Void(t.STTS_VIEW_YN,"Y"),PRIORITY_VIEW_YN:Often.null2Void(t.PRIORITY_VIEW_YN,"Y"),START_DT_VIEW_YN:Often.null2Void(t.START_DT_VIEW_YN,"N"),END_DT_VIEW_YN:Often.null2Void(t.END_DT_VIEW_YN,"N")}}(e);return(l=$("#leftArea").find("#allTaskFilter")).off("click").on("click",i),a(l,e),e},updateTaskFilterByJson:s,applyFilterOnOff:function(){("ON"===LocalUtil.getTaskFilter()?function(t){t.find("#leftTask").removeClass("active"),t.find("#leftFilter").addClass("active"),t.find("#allTaskFilter").css("display","block")}:function(t){t.find("#leftFilter").removeClass("active"),t.find("#leftTask").addClass("active"),t.find("#allTaskFilter").css("display","none")})($("#leftArea"))}};function a(n,t){var e,l,i,a,s,o;function r(t,e){!function(t){t=n.find(".seach-check-text["+t+"]");t.removeClass("on"),t.find(".js-search-checkbox, .js-common-radio").removeClass("all-checked")}(t),c(t,e)}function T(n,t){t=t.split(",");$.each(t,function(t,e){c(n,e)})}function c(t,e){e=n.find(".seach-check-text["+t+"="+e+"]");e.addClass("on"),e.find(".js-search-checkbox, .js-common-radio").addClass("all-checked")}t&&(f=t),n.find("#taskStatusFilter").find(".js-filter-button").find(".js-search-checkbox, .js-common-radio").removeClass("all-checked"),r("filter-gb",f.FILTER_GB),T("status-filter",f.FIL_STTS),T("priority-filter",f.FIL_PRIORITY),r("start-gb-filter",Often.null2Void(_(f.FIL_START_DT_GUBUN),"0")),r("end-gb-filter",Often.null2Void(f.FIL_END_DT_GUBUN,"0")),e=n,l=f,i="Y"===Often.null2Void(l.STTS_VIEW_YN,"N"),a="Y"===Often.null2Void(l.PRIORITY_VIEW_YN,"N"),s="Y"===Often.null2Void(l.START_DT_VIEW_YN,"N"),l="Y"===Often.null2Void(l.END_DT_VIEW_YN,"N"),i&&e.find("#taskStatusFilter .menu-accordion-button").addClass("active"),a&&e.find("#taskPriorityFilter .menu-accordion-button").addClass("active"),s&&e.find("#taskStartDateFilter .menu-accordion-button").addClass("active"),l&&e.find("#taskEndDateFilter .menu-accordion-button").addClass("active"),o=n.find(".js-filter-scroll"),$.each(o,function(t,e){var n=$(e);n.scrollTop(0);var l=n.offset().top,i=n.find(".all-checked:first").offset().top,e=n.outerHeight();n.scrollTop(l+e<i?i-l:0)})}function _(t){return"?"===t?"":t}function s(t){Ajax.executeApi(RestApi.PUT.FLOW_TASK_FILTER_U001,t,AllTask.drawTaskInitList)}function i(t){var e=$(t.target),n=e.findUp(".js-accordion-button");if(0<n.length)return n.toggleClass("active"),void function(t){var e=t.parent("#taskStatusFilter"),n=t.parent("#taskPriorityFilter"),l=t.parent("#taskStartDateFilter"),i=t.parent("#taskEndDateFilter"),a=t.hasClass("active"),t={};e&&0<e.length?t.STTS_VIEW_YN=a?"Y":"N":n&&0<n.length?t.PRIORITY_VIEW_YN=a?"Y":"N":l&&0<l.length?t.START_DT_VIEW_YN=a?"Y":"N":i&&0<i.length&&(t.END_DT_VIEW_YN=a?"Y":"N");t!=={}&&s(t)}(n);var l=e.findUp(".js-filter-button"),i=e.parents(".js-filter-type"),t=i.find(".js-filter-button.on"),n=e.parents("#allTaskFilter");0!==l.length&&(e="radio"===i.attr("filter-type"),1!==t.length||!l.hasClass("on")||e?(e&&(i.find(".js-filter-button").removeClass("on"),i.find(".js-search-checkbox, .js-common-radio").removeClass("all-checked")),0<l.length&&(l.toggleClass("on"),l.find(".js-search-checkbox, .js-common-radio").toggleClass("all-checked"),s(i=function(t,e){var n={},l=function(t){var e={};"taskGroupFilter"===t?(e.DATATYPE="filter-gb",e.DATAKEY="FILTER_GB"):"taskStatusFilter"===t?(e.DATATYPE="status-filter",e.DATAKEY="FIL_STTS"):"taskPriorityFilter"===t?(e.DATATYPE="priority-filter",e.DATAKEY="FIL_PRIORITY"):"taskStartDateFilter"===t?(e.DATATYPE="start-gb-filter",e.DATAKEY="FIL_START_DT_GUBUN"):"taskEndDateFilter"===t&&(e.DATATYPE="end-gb-filter",e.DATAKEY="FIL_END_DT_GUBUN");return e}(t),e=function(t,n){var l=[];return $.each(t,function(t,e){$(e).hasClass("on")&&l.push($(e).attr(n))}),l.join(",")}(e,l.DATATYPE);AllTask.setTaskJson(l.DATAKEY,e),n[l.DATAKEY]=e,"taskEndDateFilter"===t&&"6"===e&&(n.DEADLINE_START_DT="",n.DEADLINE_END_DT="");return n}(i.attr("id"),i.find(".js-filter-button"))),f=$.extend({},f,i),a(n))):Often.toast("error",i18next.t("front.alert.checkMoreThanOne")))}}();
"use strict";var TaskSearch=function(){var a;return{initSetting:function(e){a=e.find(".js-task-detail-search-layer"),SearchFilter.initFilter(a,searchMode.TASK),e.find(".js-task-search-input").val("")},clickDetailSearchTopButton:function(e){e=$(e.currentTarget);(a=e.next()).is(":visible")?i():(SearchFilter.initFilter(a,searchMode.TASK,!0),SearchFilter.addEventOnSearchFilter(a,t,!0),e.addClass("active"),a.fadeIn(200))},closeDetailSearchLayer:i,keydownSearchInput:function(e){KeyCheck.isKey(e,"ENTER")&&t();KeyCheck.isKey(e,"ESC")&&i()}};function t(){i(),AllTask.searchTaskList()}function i(e){e&&e.hasClass("js-task-search-input")||(a&&a.fadeOut(200),a&&a.prev().removeClass("active"))}}();
"use strict";var TaskSort=function(){var r,i=[];return{openSortPopup:function(){var t=TaskCode.OPTION._COLUMN_REC;(r=function(t){var n="",o=$("#taskSortPopupLiItem").html(),s=$($("#taskSortSettingPopupItem").html());return $.each(t,function(t,s){var e=s.COL_SRNO,a="4"===e;n+=ListHelper.replaceJson(o,$.extend({},s,{COL_NM:i18next.t(TaskCode.OPTION._TEXT[e-1]),SORT_TITLE:a?"js-sort-title":"",COL_CLASS:"Y"===s.USE_YN||a?"active":""}))}),s.find("#taskSortList").append($(n)),s}(t).attr("id","sortSettingPopup")).find("#taskSortList").sortable({handle:".task-set-item",containment:"parent",tolerance:"pointer",axis:"y"}),r.off("click").on("click",s),$("body").append(r)},initSortHeader:function(t){t.find("#taskSortHeader").empty(),i=[]},drawSortHeader:function(e,a,n,o){function r(t){var a="",n=$("#taskSortHeaderItem").html();return $.each(t,function(t,s){var e;"Y"===s.USE_YN&&(e=s.COL_SRNO,i.push(e),a+=ListHelper.replaceJson(n,{COL_SRNO:e,COL_NM:i18next.t(TaskCode.OPTION._TEXT[e-1]),COL_CLASS:(s=e,e="js-task-sort-button task-header-cell task-"+TaskCode.OPTION._SORT[s-1].toLowerCase()+"-cell","4"===s?e+" task-name js-task-more":e),COL_SPAN_CLASS:"js-task-sort-inner-button"}))}),a}Ajax.executeApi(RestApi.GET.FLOW_TASK_COLUMN_R001,{packetOption:Ajax.OPTION.PREVENT_CALLBACK},function(t){TaskCode.OPTION._COLUMN_REC=t.COL_REC;var s=e.find("#taskSortHeader");s.append(r(t.COL_REC)),s.off("click").on("click",l);t=TaskCode.OPTION._SORT.indexOf(n)+1;s.find(".js-task-sort-button[col-srno="+t+"]").find(".title").attr("class","title").addClass(a?"descend js-task-sort-inner-button":"ascend js-task-sort-inner-button"),"function"==typeof o&&o()})},getSortColumnHtml:function(){var l="";return $.each(i,function(t,s){var e=TaskCode.OPTION._ITEM[s-1],a=TaskCode.OPTION._REPLACE[s-1],n=TaskCode.OPTION._SORT[s-1].toLowerCase(),o="task-"+n+"-cell",r=0<["rgsr_nm"].indexOf(n),i="END_DT"===a,s=r?"js-mouseover":"";l=(l+=$("#taskList"+e+"Item").html()).replace("{NOMAL}","{"+a+"}").replace("{NOMAL_CLASS}","js-"+n).replace("{CELL_CLASS}",o).replace("{NOMAL_TEXT_CLASS}","js-"+n+"-text "+s+(i?" {dead-line-class}":"")).replace("{mouseover}",r?"mouseover-text='{MOUSEOVER_TEXT}'":"")}),l},closeSortPopup:c};function l(t){var s,e,a=$(t.target),n=$(t.currentTarget),o=a.hasClass("js-task-sort-button")?a:a.parents(".js-task-sort-button");o.hasClass("js-task-sort-button")&&a.hasClass("js-task-sort-inner-button")&&(s=o.find(".title"),e=TaskCode.OPTION._SORT[o.attr("col-srno")-1],t=s.hasClass("descend"),a={ORDER_TYPE:e,ORDER_VALUE:""},s.hasClass("descend")||s.hasClass("ascend")?(a.ORDER_VALUE=t?"1":"0",s.attr("class",t?"title ascend js-task-sort-inner-button":"title descend js-task-sort-inner-button")):(a.ORDER_VALUE="0",n.find(".title").attr("class","title js-task-sort-inner-button"),o.find(".title").addClass("descend")),AllTask.setTaskJson("ORDER_TYPE",e),AllTask.setTaskJson("ORDER_VALUE",a.ORDER_VALUE),TaskFilter.updateTaskFilterByJson(a))}function s(t){var a,s=$(t.target),e=s.is(".back-area"),n=s.is(".close-button"),o=s.findUp(".js-sort-button"),t=s.findUp(".js-save-button"),s=s.findUp(".js-init-button");return e||n?c():0<s.length?(s=r.find(".js-sort-li"),void $.each(s,function(t,s){var e=Number(Often.null2Void($(s).attr("col-srno"),0));[1,2,3,4,5,6,7,9].forEach(function(t){e===t&&$(s).find(".js-sort-button").addClass("active")}),[8,10,11].forEach(function(t){e===t&&$(s).find(".js-sort-button").removeClass("active")})})):0<o.length?o.hasClass("js-sort-title")?Often.toast("error","업무명은 필수 항목입니다."):o.toggleClass("active"):void(0<t.length&&(t=r.find("#taskSortList").find(".js-sort-li"),a=[],$.each(t,function(t,s){var e=$(s),s=e.find(".js-sort-button").hasClass("active")?"Y":"N",e=e.attr("col-srno");a[t]={COL_SRNO:e,COL_ORDER:t+1,USE_YN:s}}),t={COL_REC:a},Ajax.executeApi(RestApi.PUT.FLOW_TASK_COLUMN_U001,t,function(){AllTask.drawTaskListWithFilter(!0)}),c()))}function c(){r.remove()}}();
"use strict";var AlarmClickEvent={clickProjectAlarm:function(t){t=$(t.target).findUp(".not-read-alarm-item");0!==t.length&&((t=Often.getAttrs(t)[0]).OPEN_POP=!0,AlarmUpdate.readAlarmAndAction(t))},clickAlarmUl:function(t){var a,e,r=$(t.target).findUp(".js-alarm-item");0!==r.length&&(a=Often.getAttrs(r)[0],r.hasClass("on")&&(0<(e=Number(Often.null2Void(a.COLABO_COMMT_SRNO,"-1")))?$(t.currentTarget).find(".js-alarm-item.alarm-"+e):r).removeClass("on"),a.OPEN_POP=!0,AlarmUpdate.readAlarmAndAction(a))},clickAlarmSearchFilter:function(){var r=$("#alarmSearchFilterLayer");r.toggleClass("d-none"),r.hasClass("d-none")||(function(){var t=LocalUtil.getAlarmSearchFilter();r.find(".js-filter-item").removeClass("setup-active-type-1"),t.split(",").forEach(function(t){""!==t&&r.find(".js-filter-item[data-num="+t+"]").addClass("setup-active-type-1")})}(),r.off("click").on("click",function(t){var a=$(t.target).findUp(".js-filter-item"),t=1===r.find(".setup-active-type-1").length;if(a.hasClass("setup-active-type-1")&&t)return Often.toast("error",i18next.t("front.alert.searchOption"));0!==a.length&&(a.toggleClass("setup-active-type-1"),LocalUtil.setLocal("ALARM_SEARCH_FILTER",function(){var e="";return $.each(r.find(".js-filter-item"),function(t,a){$(a).hasClass("setup-active-type-1")&&(e+=$(a).attr("data-num")+",")}),e}()),a=$("#alarmSearchInput"),""!==$.trim(a.val())&&Alarm.drawAlarmList(!0))}))}};
"use strict";var AlarmUpdate=function(){return{updateUnReadElementBySocketReceive:function(e){var t,n,i,o,a=Electron.isElectronApp(),r=a&&!Electron.getElectronConfig().b_fullMode,A=Number(e.FLOW_CNT);Number($("#alarmTopCount").text())!==A&&(t=Number(Often.null2Void(e.COLABO_SRNO,"-1")),n=Number(Often.null2Void(e.COLABO_COMMT_SRNO,"-1")),o=Number(Often.null2Void(e.COLABO_REMARK_SRNO,"-1")),i=0===A,o=0<A&&0<t&&-1===n&&-1===o,0<A&&0<t&&0<n?(r||BrowserNoti.showAlarmNotification(e),l(t)):i?(a&&Electron.hideNoti(),O()):o&&c(t,!0))},updateUnReadElementBySelf:function(e){var t=Often.null2Void(e.PROJECT_SRNO),n=Often.null2Void(e.POST_SRNO);return e.ALARM_POST_WRITE?l(t):e.ALARM_POST_READ?function(n,i){R("READ_POST",n,i),u(n,function(e){var t=e.ALARM_COUNT;A("READ_POST",n,t),r("READ_POST",n,t),o(n)&&(_("READ_POST",n,i),e.ALARM_RECORD&&0!==e.ALARM_RECORD.length?(Alarm.initProjectAlarmList(),Alarm.drawProjectAlarmItems(n,e.ALARM_RECORD,t,!0)):a(!0))})}(t,n):e.ALARM_ALL_READ&&0<Number(t)?c(t,!1):e.ALARM_ALL_READ?O():void 0},drawTopNotReadCount:s,readAlarmAndAction:function(t){var n=t.COLABO_SRNO,i=t.COLABO_COMMT_SRNO,o=t.COLABO_REMARK_SRNO,a=t.OPEN_POP;e(t,function(){var e=t.ALARM_ACTION;if("MOVE_ADMIN"!==e)return"APPROVE_POP"===e?RequestJoin.openRequestJoinPopup(n):"TOAST"===e?Often.toast("info",t.TOAST_MSG):"TOAST_CNTN"===e?Often.toast("info",t.TOAST_CNTN):"INVITE_CANCEL"===e?Often.toast("info",i18next.t("front.alert.inviteCancel")):void("INVITE_PROJECT"!==e?"MOVE_PROJECT"!==e?Ajax.executeApi(RenewalApi.GET.ACT_EXIST_YN_BY_POST_N_REMARK,t,function(e){return"NOT_EXISTS_POST"===e.EXIST_YN?Often.toast("error",i18next.t("front.alert.deletedPost")):"NOT_EXISTS_REMARK"===e.EXIST_YN?Often.toast("error","삭제된 댓글입니다."):Electron.isElectronApp()&&_IsMini?MiniProject.openProjectPage(n,i,o,!1):a?PostPopup.togglePostView(n,i,o):void 0}):ViewChanger.loadPageJson({code:"detail",first:t.COLABO_SRNO}):Ajax.executeApi(RestApi.GET.COLABO2_INVT_R001,{COLABO_SRNO:n},function(e){return"Y"===Often.null2Void(e.PASS_YN,"N")?ViewChanger.loadPageJson({code:"detail",first:e.COLABO_SRNO}):void Often.toast("error",i18next.t("front.common.unavailableInvitation"))}));Often.submitForm("flow_admin","flow_admin.act","flow_admin",{MENU:"flow-user",TAB:"USER-WAIT"})})},readAllAlarm:function(){var e=$("#alarmUl");if(0===e.children("li.on").length)return Often.toast("success","읽을 알림이 존재하지 않습니다");Ajax.executeApi(RestApi.PUT.COLABO2_ALAM_U102,{},function(){Often.toast("success",i18next.t("front.alert.checkAllAlarm")),$("#notReadFilter").find(".js-alarm.on").hasClass("js-unread")?e.empty().html(ListHelper.getNoDataHtml("ALARM")):O(),SocketControl.sendMessage({CHAT_CODE:SocketAPI.MAIN.BADGE_UPDATE,COLABO_SRNO:"0",FLOW_CNT:"0",ROOM_SRNO:_USER_ID})})},readAllProjectAlarm:function(){if(0===$("#notReadAlarmUl li").length)return Often.toast("success","읽을 글이 존재하지 않습니다");Ajax.executeApi(RestApi.PUT.COLABO2_ALAM_U102,{COLABO_SRNO:Detail.getProjectSrno()},function(){Often.toast("success",i18next.t("front.alert.readProjectAlarm")),UpdateElements.autoUpdateElem({ALARM_ALL_READ:!0,PROJECT_SRNO:Detail.getProjectSrno()})})},removeNewUpdate:function(){$("#newUpdate").css("display","none")},setBadgeCount:d,executeReadApi:e};function l(n){var e;(o(n)||ViewChanger.isPage("main")||_IsMini)&&(e=$("#newUpdate")).fadeIn(200).off("click").on("click",function(){PostPopup.checkWritingAndShowPopup(function(){e.fadeOut(200),ViewChanger.reloadPage()})}),A("WRITE_POST",n),R("WRITE_POST"),o(n)&&u(n,function(e){var t;e.ALARM_RECORD&&0!==e.ALARM_RECORD.length&&(t=e.ALARM_COUNT,Alarm.initProjectAlarmList(),Alarm.drawProjectAlarmItems(n,e.ALARM_RECORD,t,!0))})}function O(){var e="READ_ALL";R(e),A(e),r(e),_(e),a(ViewChanger.isPage("detail"))}function c(t,e){var n=o(t);if(!e)return i();function i(){var e="READ_PROJECT";R(e,t),_IsMini||A(e,t),r(e,t),n&&(_(e,t),a(!0))}u(t,function(e){e=Number(Often.null2Void(e.ALARM_COUNT));if(0===e)return i();R("READ_POST",t),_IsMini||A("READ_POST",t,e),r("READ_POST",t,e)})}function o(e){return ViewChanger.isPage("detail")&&Number(e)===Number(Detail.getProjectSrno())}function a(e){e&&$("#projectAlarmArea").css("display","none")}function r(e,t,n){if(ViewChanger.isPage("main")||ViewChanger.isPage("miniProject")){t=Number(Often.null2Void(t));var i=_IsMini?$("#miniProject"):$("#projectHomeLayer"),o=i.find("#project-"+t);return"READ_POST"===e?(d(o.find(".project-badge"),n,"inline-block"),0):(0<t?o:i.find(".project-item")).find(".project-badge").css("display","none")}}function A(e,t,n){var i=0<Number(Often.null2Void(t)),t=$("#RecentProjectUl").find(".recent-project-item"+(i?"[data-project-srno="+t+"]":""));return"WRITE_POST"===e?t.find(".squre-type").addClass("new"):"READ_POST"===e?0<n?t.find(".squre-type").addClass("new"):t.find(".squre-type").removeClass("new"):void t.find(".new").removeClass("new")}function _(e,t,n){var i=$("#detailUl"),n="READ_ALL"===e?i.find(".detail-item[data-read-yn=N]"):"READ_PROJECT"===e?i.find(".detail-item[data-read-yn=N][data-project-srno="+t+"]"):i.find(".detail-item[data-read-yn=N][data-project-srno="+t+"][data-post-srno="+n+"]");"list"===LocalUtil.getFeedType()?n.find(".js-indication").css("display","none"):$.each(n.find(".confirmation-number"),function(e,t){t=$(t);t.text(Number(t.text())+1)}),n.attr("data-read-yn","Y")}function R(e,t,n){var i=$("#alarmUl");if(i.is(":visible")){if("WRITE_POST"!==e){if("READ_ALL"===e)return s(!0),void i.children(".js-alarm-item.on").removeClass("on");n="READ_PROJECT"===e?i.children(".js-alarm-item[colabo_srno="+t+"]"):i.children(".js-alarm-item[colabo_srno="+t+"][colabo_commt_srno="+n+"]");n.removeClass("on"),s(!1)}}else s(!1)}function s(e){var t=_IsMini?$("#allProjectTopAlarmCount"):$("#alarmTopCount");if(e)return d(t,"");Ajax.executeApi(RenewalApi.GET.ACT_ALARM_LIST,{MODE:"COUNT"},function(e){d(t,e.ALARM_COUNT)})}function e(e,t){var n=e.COLABO_SRNO,i=e.COLABO_COMMT_SRNO,o=e.COLABO_REMARK_SRNO;Ajax.executeApi(RestApi.PUT.COLABO2_ALAM_U002,e,function(){UpdateElements.autoUpdateElem({ALARM_POST_READ:!0,PROJECT_SRNO:n,POST_SRNO:i,REMARK_SRNO:o}),"function"==typeof t&&t()})}function u(e,t){Ajax.executeApi(RenewalApi.GET.ACT_PROJECT_INFO,{COLABO_SRNO:e,GUBUN:"NOT_READ_YN",MODE:"UNREAD"},t)}function d(e,t,n){ListHelper.setCount(e,t,n),"alarmTopCount"!==e.attr("id")&&"allProjectTopAlarmCount"!==e.attr("id")||ListHelper.setCount(_IsMini?$("#allProjectAlarmCount"):$(".js-project-home-count"),t,"inline-block")}}();
"use strict";var PushAlarmSetting=function(){return{drawPushAlarmSetting:function(n){var e=ViewChanger.isPage("main"),t=$("#mainContent").find(".project-item.active:visible"),a=1===t.length;if(e&&!a)return s();t=a?t.attr("project-srno"):LocalUtil.getLocalValue("CURRENT_PROJECT_SETTING","COLABO_SRNO");function s(e){var t,a,s,p,t=$(e?(a=e,s=r(),ListHelper.replaceJson(s,{ALAM_LIST:a.ALAM_LIST,PUSH_ALAM_YN:a.PUSH_ALAM_YN,PUSH_COMMT_ALAM_YN:a.PUSH_COMMT_ALAM_YN,PUSH_REMARK_ALAM_YN:a.PUSH_REMARK_ALAM_YN,PUSH_COMMT_ALAM_TEXT:function(e){return{Y:i18next.t("front.projectTop.receiveAll"),A:i18next.t("front.projectTop.mentionedAlarm"),N:i18next.t("front.projectTop.mute")}[e]}(a.PUSH_COMMT_ALAM_YN),PUSH_REMARK_ALAM_TEXT:function(e){return{Y:i18next.t("front.projectTop.receiveAll"),S:i18next.t("front.itemComponent.commentParticipatedAlarm"),W:i18next.t("front.itemComponent.commentWroteAlarm"),A:i18next.t("front.itemComponent.commentMentionAlarm")}[e]}(a.PUSH_REMARK_ALAM_YN)})):(t=r(),ListHelper.replaceJson(t,{ACTIVE:"active",PUSH_ALAM_YN:"Y",PUSH_SELECTED_TYPE:"push-selected",PUSH_COMMT_ALAM_TEXT:i18next.t("dictionary.select"),PUSH_REMARK_ALAM_TEXT:i18next.t("dictionary.select")})));e&&"Y"===e.PUSH_ALAM_YN?(t.find("#pushSettingBtn").addClass("active"),t.find(".js-push-selected").removeClass("gray-push-selected").addClass("push-selected")):(t.find("#pushSettingBtn").removeClass("active"),t.find(".js-push-selected").removeClass("push-selected").addClass("gray-push-selected")),e&&("Y"===e.ALAM_LIST?t.find("#allAlarm"):t.find("#relatedAlarm")).prop("checked","checked"),n.append(t),(p=n.parent()).off("click").on("click",function(e){e.preventDefault();var t=$(e.target),a=p.find(".js-push-wrap"),s=t.findUp("#pushSettingBtn"),n=s.hasClass("active"),r=a.find(".js-push-selected"),i=a.find(".js-push-list"),l=t.findUp(".js-push-list-item"),c=t.findUp(".js-push-selected"),d=t.findUp(".js-service-helper"),e=p.find(".js-alarm-wrap"),t=t.findUp(".js-alarm-item");if(i.removeClass("d-block"),0<d.length&&"NOTIFICATION"===d.attr("service-code")&&window.open(FlowServiceHelper.NOTIFICATION,"_blank"),0<s.length)n?(s.removeClass("active"),a.attr("data-push-alarm","N"),r.removeClass("push-selected").addClass("gray-push-selected"),i.removeClass("d-block")):(s.addClass("active"),a.attr("data-push-alarm","Y"),r.removeClass("gray-push-selected").addClass("push-selected"));else{if(0<c.length){if("N"===a.attr("data-push-alarm"))return;var o=c.next();return r.removeClass("d-block"),void o.addClass("d-block")}0<l.length?(c=(o=l.parent()).prev()).attr("data-push",l.attr("value")).text(l.text()):0<t.length&&(l=t.find(".js-alarm-label"),t.find(".js-radio-input").prop("checked","checked"),e.attr("data-alarm-list",l.hasClass("js-allAlarm")?"Y":"M"))}})}Ajax.executeApi(RestApi.GET.COLABO2_NOTI_R101,{COLABO_SRNO:t},s)}};function r(){return $("#pushSettingContentsDiv").html()}}();
"use strict";var AccountSetting=function(){var o;return{initProfileView:function(){AccountSetting.getUserData(function(e){u(e.PRFL_PHTG)})},openPopupLayer:function(){(o=$("#accountSettingLayer")).find(".read-mode").removeClass("d-none").addClass("d-block"),o.find(".editor-mode").removeClass("d-block").addClass("d-none"),o.find("#statusMessageMenu").css("display",Often.isFunc("SHOW_SLOGAN")?"block":"none"),c(l),o.removeClass("d-none").addClass("d-block"),$(".change-editor-btn").off("click").on("click",d),$(".cancel-change").off("click").on("click",r),$(".change-ok").off("click").on("click",s),$("#changePasswordBtn").off("click").on("click",e),$("#changePasswordCancel").off("click").on("click",t),$("#leaveFlowBtn").off("click").on("click",n)},closePopupLayer:function(){o.removeClass("d-block").addClass("d-none")},getUserData:c,updateUserProfile:m,updateUserName:f};function e(){var e=$("#myPassword").val(),t=$("#myPassword2").val(),n=Validation.checkInput($("#myPassword"),!0);0<Object.keys(n).length||(e===t?function(e){e={PWD:e};Ajax.executeApi(RestApi.PUT.COLABO2_PWD_U002,e,i)}(e):Often.toast("error",i18next.t("front.alert.passwordNotMatch")))}function t(){var e=$("#myPassword").parents(".edit-input");$("#myPassword, #myPassword2").val(""),e.find(".read-mode").removeClass("d-none").addClass("d-block"),e.find(".editor-mode").removeClass("d-block").addClass("d-none")}function n(){PopupDraw.drawConfirm({contents:{main:i18next.t("front.alert.askDeleteAccount")},callback:{submit:a}})}function a(){Ajax.executeApi(RestApi.DELETE.COLABO2_USER_DELETE_001,{SRCH_USER_ID:_USER_ID},function(e){Often.toast("success",i18next.t("front.alert.deleteAccount")),Often.logoutDirect()})}function i(){$("#myPassword, #myPassword2").val("");var e=$("#myPassword").parents(".edit-input");e.find(".read-mode").removeClass("d-none").addClass("d-block"),e.find(".editor-mode").removeClass("d-block").addClass("d-none"),Often.toast("success",i18next.t("front.alert.passwordChange"))}function s(e){var t=$(e.target),n=t.findUp(".js-account-set-button"),a=n.attr("gubun"),i=n.parents(".my-type-text-1").children("input").val(),e=n.parents(".my-type-text-1").children("select").val(),n=n.parents(".my-type-text-1").find("input");if("3"!==a&&"5"!==a||""!==i){n=Validation.checkInput(n,!0);if(0<Object.keys(n).length)return}m(a,i,e,t)}function d(e){var t=$(e.target).parents(".edit-input");if(0!==t.length){e=0===_USE_INTT_ID.indexOf("UTLZ_");if(0!==t.find(".editor-mode").find("#myPassword").length&&e)window.open("https://www.bizplay.co.kr/comm_0023_01.act","_blank");else{if(t.find(".read-mode").removeClass("d-block").addClass("d-none"),t.find(".editor-mode").removeClass("d-none").addClass("d-block"),0<t.find(".editor-mode").find("select").length){e=t.find(".read-mode").find("div").text().split(" ");return t.find(".editor-mode").find("select").val(e[0].replace("(","").replace(")","")),void t.find(".editor-mode").find("input").val(e[1].replace(/-/g,""))}0!==t.find(".editor-mode").find("#myPassword").length?t.find(".editor-mode").find("#myPassword").focus():t.find(".editor-mode").find("input").val(t.find(".read-mode").find("div").text())}}}function r(e){e=$(e.target);(e.hasClass("edit-input")||e.parents(".edit-input"))&&((e=e.hasClass("edit-input")?e:e.parents(".edit-input")).find(".editor-mode").removeClass("d-block").addClass("d-none"),e.find(".read-mode").removeClass("d-none").addClass("d-block"))}function c(e){var t={SRCH_USER_ID:_USER_ID};Ajax.executeApi(RestApi.GET.COLABO2_USER_PRFL_R002,t,e)}function l(e){var t,n=e.CLPH_NTNL_CD.split("_")[1],a=e.CMPN_TLPH_NTNL_CD.split("_")[1];function i(e){t.find(".js-"+e+"-set").find(".change-editor-btn").remove()}o.find("#user_id").text(e.USER_ID),o.find("#bannerUserNm").text(e.FLNM),o.find("#email").text(e.EML),o.find("#phoneNum").text("(+"+n+") "+p(e.CLPH_NO)),o.find("#companyName").text(e.CMNM),o.find("#dvsnName").text(Often.null2Void(e.DVSN_NM)),o.find("#position").text(e.JBCL_NM),o.find("#companyPhoneNum").text("(+"+a+") "+p(e.CMPN_TLPH_NO)),o.find("#statusMessage").text(e.SLGN),f(e.FLNM),u(e.PRFL_PHTG),a=LocalUtil.getLocalValue("ONLY_BUY_SETTING","BUY_YN")===BuyCode.PAID_COMPANY,e=_USER_ID===o.find("#email").text(),t=$("#accountSettingLayer"),ServerChecker.isUtlz&&i("dvsn"),a&&i("company"),e&&i("email")}function f(e){$("#accountSettingLayer").find(".js-user-name").text(e),$("#accountLayer").find(".js-user-name").text(e),_USER_NM=e}function u(e){var t=ImageUtil.removeDomain("PROFILE",e),e="url("+t+"), url("+ImageUtil.removeDomain("PROFILE","")+")";$("#accountLayer").find(".js-profile").css("background-image",e),$("#ProfileImg").css("background-image",e),$("#mySettingPopup").find("#myPicture").css("background-image",e),_PRFL_PHTG=t}function m(t,n,a,i){var e;n||""===n||(n=t.IMG_PATH,t="6"),"9"===t&&/[#\<\>]/.test(n)?Often.toast("error",'<, >, #, " '+i18next.t("front.alert.specialCharacter")):(e=function(e,t,n){var a={};switch(e){case"1":a.FLNM=t;break;case"2":a.EML=t;break;case"3":a.CLPH_NO=t,a.CLPH_NTNL_CD=n;break;case"4":a.JBCL_NM=t;break;case"5":a.CMPN_TLPH_NO=t,a.CMPN_TLPH_NTNL_CD=n;break;case"6":a.PRFL_PHTG=t;break;case"7":a.CMNM=t;break;case"8":a.DVSN_NM=t;break;case"9":a.SLGN=t}return a}(t,n,a),Ajax.executeApi(RestApi.PUT.COLABO2_USER_PRFL_U002,e,function(){if("1"===t)f(_USER_NM=n);else if("2"===t)o.find("#email").text(n);else if("3"===t)o.find("#phoneNum").text("("+a+") "+p(n));else if("4"===t)o.find("#position").text(n);else if("5"===t)o.find("#companyPhoneNum").text("("+a+") "+p(n));else if("6"===t)u(n);else if("7"===t)_BSNN_NM=n,o.find("#companyName").text(n);else if("8"===t)_DVSN_NM=n,o.find("#dvsnName").text(n);else{if("9"!==t)return void Often.toast("error",i18next.t("front.alert.confirmInput",{val:"$t(dictionary.setting)"}));o.find("#statusMessage").text(n)}var e;Often.toast("success",i18next.t("front.alert.successfullyChange",{status:"$t(dictionary.change)"})),i&&((e=i.parents(".edit-input")).find(".editor-mode").removeClass("d-block").addClass("d-none"),e.find(".read-mode").removeClass("d-none").addClass("d-block"))}))}function p(e){return e.replace(/(^02.{0}|^01.{1}|[0-9]{3})([0-9]+)([0-9]{4})/,"$1-$2-$3")}}();
"use strict";var CompanyJoin=function(){var i;return{openLayer:function(){(i=$("#companyJoinLayer")).find("#joinInput").val(""),i.find("#joinInput").removeClass("error"),i.find("#errMeg").css("display","none"),$("#allMainContent, #bottomToolList").css("display","none"),i.fadeIn(200),i.off("click").on("click",n).off("keyup").on("keyup",o)},closeLayer:e};function e(){$("#allMainContent").css("display","block"),i.css("display","none")}function n(n){var o=$(n.target);0!==o.findUp("#closeBtn").length?e():function(n){if(0===n.findUp("#companyJoinBtn").length)return;n=i.find("#joinInput").val();r(n)?CheckJoinPopup.openCheckJoinPopup(n):(i.find("#joinInput").addClass("error"),i.find("#errMeg").css("display","block"))}(o)}function o(n){!function(n){n=n.findUp("#joinInput");if(0===n.length)return;n=n.val();""===n||r(n)?(i.find("#joinInput").removeClass("error"),i.find("#errMeg").css("display","none")):(i.find("#joinInput").addClass("error"),i.find("#errMeg").css("display","block"))}($(n.target))}function r(n){return/^[A-Za-z0-9-]{3,50}$/.test(n)}}();
"use strict";var DeviceManagement=function(){var e,l,n;return{openPopupLayer:function(){(function(){var e={SRCH_USER_ID:_USER_ID,DUID:LocalUtil.getDeviceId()};Ajax.executeApi(RestApi.GET.FLOW_DEVICE_ACCESS_R001,e,function(e){var a=$("#deviceList");a.empty(),$.each(e.DUID_REC,function(e,n){var o,t,c;o=a,t=n,""!==Often.null2Void(t.DUID,"")&&(c=l,n="Y"===Often.null2Void(t.CONN_YN,"N")||Often.null2Void(t.DUID_NM,"0000")===LocalUtil.getLocal("N_ONLY_DEVICE_NM"),n={DUID:t.DUID,DUID_NM:t.DUID_NM,LAST_DATE:Tz.momentTimeZone(Often.null2Void(t.ACCESS_DTTM,t.RGSN_DTTM),"type1"),FIRST_DATE:Tz.momentTimeZone(t.RGSN_DTTM,"type1"),DISPLAY_REMOVE:n?"d-none":"d-block",DISPLAY_CURRENT:n?"d-block":"d-none"},c=ListHelper.replaceJson(c,n),o.append(c))}),a.removeClass("d-none").addClass("d-block"),$(".remove-btn").off("click").on("click",o)})})(),Preferences.getPreferences(),e.removeClass("d-none").addClass("d-block"),$("#lockModeSetting").off("click").on("click",Preferences.changeSetting),$("#lockTime").off("change").on("change",Preferences.savePreferences)},closePopupLayer:function(){n||(e=$("#deviceManagementLayer"),l=$("#deviceList").html(),n=!0,Electron.isElectronApp()&&e.find("ul.lock-list").css("display","none"));e.removeClass("d-block").addClass("d-none")}};function o(e){var n,o,e=$(e.target);(e.hasClass("remove-btn")||0<e.parents(".remove-btn").length)&&(e=e.hasClass("remove-btn")?e:e.parents(".remove-btn"),n=e.attr("duid"),o=e,e={SRCH_USER_ID:_USER_ID,DUID:n},Ajax.executeApi(RestApi.DELETE.FLOW_DEVICE_ACCESS_D001,e,function(){o.parents("li").remove(),SocketControl.sendMessage({CHAT_CODE:"OVERLAPLOGOUT0001",ROOM_SRNO:_USER_ID,DUID:n})}))}}();
"use strict";var DownloadApp=function(){var e=$("#downloadAppLayer");return{openPopupLayer:function(){e.removeClass("d-none").addClass("d-block"),$("#iosDownloadBtn").off("click").on("click",n),$("#androidDownloadBtn").off("click").on("click",o),$("#windowDownloadBtn").off("click").on("click",function(){t("WINDOWS")}),$("#macDownloadBtn").off("click").on("click",function(){t("OS_X")}),$("#smsSendBtn").off("click").on("click",i)},closePopupLayer:function(){e.removeClass("d-block").addClass("d-none")},desktopDownload:t};function n(){window.open("https://itunes.apple.com/us/app/id939143477?mt=8","_blank")}function o(){window.open("https://play.google.com/store/apps/details?id=com.webcash.bizplay.collabo","_blank")}function t(n,o){var n="WINDOWS"===n||"OS_X"===n?n:-1<(e=navigator.userAgent).indexOf("Macintosh")?"OS_X":-1<e.indexOf("Linux")?"LINUX":"WINDOWS",e="team.flow.flowMiniRenewal",n={PCK_NM:e=Often.isFunc("MINI_SECURE_DOWNLOAD")?"secure.team.flow.flowMiniRenewal":e,GB:n};o&&(n.RGSN_DTTM="NO-SESSION"),Ajax.executeApi(RestApi.GET.FLOW_UPDATE_R001,n,l)}function l(n){""!==Often.null2Void(n.flow_rec[0],"")&&(Electron.isElectronApp()?Electron.downloadFile(n.flow_rec[0].LINK_URL,"_blank"):window.open(n.flow_rec[0].LINK_URL,"_blank"))}function i(){var n=e.find("#phoneNumber"),o=e.find("#countryCode");if(""===$.trim(n.val()))return alert(i18next.t("front.alert.enterWord")),void n.focus();if($.trim(n.val()).length<10)return alert(i18next.t("front.alert.enterWord",{val:"$t(dictionary.phoneNumber)"})),void n.focus();o={CLPH_NO:Often.null2Void($.trim(n.val()),""),CLPH_NTNL_CD:Often.null2Void($.trim(o.val()),""),packetOption:Ajax.OPTION.PREVENT_EXECUTE};Ajax.executeApi(RestApi.POST.COLABO2_SMS_C001,o,function(){alert(i18next.t("front.alert.downloadURLSent",{val:$.trim(n.val())}))})}}();
"use strict";var OutService=function(){var n=$("#outServiceLayer");return{openPopupLayer:function(){VideoConference.isZoomSynchronized(i,function(){}),n.removeClass("d-none").addClass("d-block"),n.find(".js-connect-btn").each(function(n,o){"default"!==$(o).css("cursor")&&$(o).parents("li").find(".js-learn-details").css("display","inline-block")}),$("#zoomConnectBtn").off("click").on("click",o),$("#serviceApplyBtn").off("click").on("click",t),n.find(".js-learn-details").off("click").on("click",e)},closePopupLayer:function(){n.removeClass("d-block").addClass("d-none")},activateZoomButton:i};function o(n){LimitGuest.isLimitGuest("video")||("Y"===Often.null2Void($(this).attr("zoom-data"),"")?PopupDraw.drawConfirm({contents:{main:"연동을 해제 하시겠습니까?"},callback:{submit:c}}):(VideoConference.syncZoom(),Often.isServerModeByHost("DEV_TEST")&&i()))}function t(){window.open("https://forms.gle/2VRGuEGu9Kcpb7HQ6","_blank")}function e(n){var o="";return"ZOOM"===$(n.target).attr("service-code")&&(o=FlowServiceHelper.ZOOM),window.open(o,"_blank")}function i(){$("#zoomConnectBtn").text(i18next.t("front.common.removeSync")).removeClass("my-inoutput-button-type-1").addClass("my-inoutput-button-type-2").attr("zoom-data","Y")}function c(){$("#zoomConnectBtn").text(i18next.t("dictionary.connect")).removeClass("my-inoutput-button-type-2").addClass("my-inoutput-button-type-1").attr("zoom-data","N"),VideoConference.unSyncZoom()}}();
"use strict";var PaymentInfo=function(){var t=$("#paymentInfoLayer");return{openPopupLayer:function(){t.css("display","block"),Ajax.executeApi(RestApi.GET.FLOW_BUY_R009,{},function(n){var e="M"===Often.null2Void(n.PAY_GUBUN,"M")?"월 결제":"연 결제";t.find("cardNm").text(n.CARD_NM),t.find("cardNum").text(n.CARD_NUM),t.find("cardExpire").text(n.CARD_EXPIRE_MONTH+"/"+n.CARD_EXPIRE_YEAR),t.find("payGubun").text(e)}),t.find("#changePay").off("click").on("click",function(){Payment.openPaymentLayer("freelancer")})},closePopupLayer:function(){t.css("display","none")}}}();
"use strict";var Preferences=function(){var c;return{openPopupLayer:function(){c=$("#preferencesLayer"),n(),$("#pushAlamSetting").off("click").on("click",s),$("#doNotDisturbSetting").off("click").on("click",i),$("#projectAlamSetting, #chatAlamSetting").off("click").on("click",a),$("#doNotDisturbDayby").off("click").on("click",e),$("#doNotDisturbStartTime, #doNotDisturbEndTime").off("change").on("change",o),c.removeClass("d-none").addClass("d-block");var t=Often.isFunc(Func.CLOUD.NOTDISTURB);c.find("#notDisturbDailyEmpty").css("display",t?"block":"none"),c.find("#notDisturbDailyList").css("display",t?"block":"none")},closePopupLayer:function(){$("#preferencesLayer").removeClass("d-block").addClass("d-none")},getPreferences:n,changeSetting:function(t){$(t.currentTarget).toggleClass("active"),o()},alarmPushSetting:s,doNotDisturbSetting:i,savePreferences:o};function e(t){t=$(t.target);t.hasClass("day-of-the-week")||0===t.parents(".day-of-the-week").length||$("#doNotDisturbSetting").hasClass("active")&&((t.hasClass("day-of-the-week")?t:t.parents(".day-of-the-week")).toggleClass("my-dayby-1").toggleClass("my-dayby-2"),o())}function a(t){t=$(t.target);$("#pushAlamSetting").hasClass("active")&&(t.toggleClass("my-check-2").toggleClass("my-check-2-1"),o())}function s(t){var e=$(t.currentTarget),t=$("#pushAlamGroup");e.toggleClass("active"),"pushAlamSetting"===e.context.id&&e.hasClass("active")?t.addClass("active"):t.removeClass("active"),o()}function i(t){var e=$(t.currentTarget),t=$("#doNotDisturbGroup");e.toggleClass("active"),"doNotDisturbSetting"===e.context.id&&e.hasClass("active")?t.addClass("active"):t.removeClass("active"),o()}function o(){var t=$("#lockTime").val();if(t){for(var t=-1<t.indexOf("시간")?60*Number(t.replace("시간","")):t.replace("분",""),e=$("#doNotDisturbDayby").find("li"),a="",s=0;s<e.length;s++)e.eq(s).hasClass("my-dayby-2")&&(""!==a?a=a+","+s:a+=s);var i={NOTDISTURB_ALAM:$("#doNotDisturbSetting").hasClass("active")?"Y":"N",NOTDISTURB_STIME:$("#doNotDisturbStartTime").val().replace(":",""),NOTDISTURB_ETIME:$("#doNotDisturbEndTime").val().replace(":",""),COMMT_ALAM:$("#pushAlamSetting").hasClass("active")?"Y":"N",FLOW_ALAM_YN:$("#projectAlamSetting").hasClass("my-check-2-1")?"Y":"N",CHAT_ALAM_YN:$("#chatAlamSetting").hasClass("my-check-2-1")?"Y":"N",LOCK_MODE_YN:$("#lockModeSetting").hasClass("active")?"Y":"N",LOCK_MODE_MIN:t,NOTDISTURB_DAY:a};Ajax.executeApi(RestApi.PUT.COLABO2_SET_U101,i,function(){Often.toast("success",i18next.t("front.alert.successfullyChange",{status:"$t(dictionary.change)"})),BaseSetting.setUserSetting(),LocalUtil.setLocalValue("ONLY_USER_SETTING","LOCK_MODE_YN",i.LOCK_MODE_YN),LocalUtil.setLocalValue("ONLY_USER_SETTING","LOCK_MODE_MIN",i.LOCK_MODE_MIN),LockControl.initSetting(),r()})}}function n(){Ajax.executeApi(RestApi.GET.COLABO2_SET_R101,"",t)}function t(t){n($("#pushAlamSetting, #pushAlamGroup"),"Y"===t.COMMT_ALAM),n($("#doNotDisturbSetting, #doNotDisturbGroup"),"Y"===t.NOTDISTURB_ALAM),n($("#lockModeSetting"),"Y"===t.LOCK_MODE_YN),$("#projectAlamSetting").attr("class","").attr("class",l("Y"===t.FLOW_ALAM_YN)),$("#chatAlamSetting").attr("class","").attr("class",l("Y"===t.CHAT_ALAM_YN)),$("#lockTime").val(Often.null2Void(t.LOCK_MODE_MIN,"240"));var e=(c=$("#preferencesLayer")).find("#doNotDisturbStartTime"),a=c.find("#doNotDisturbEndTime");e.val(o(e,t.NOTDISTURB_STIME)),a.val(o(a,t.NOTDISTURB_ETIME)),r();var s=t.NOTDISTURB_DAY.split(",");c.find("#doNotDisturbDayby").find("li").attr("class","day-of-the-week my-dayby-1");for(var i=0;i<s.length;i++){if(""===s[i])return;c.find("#doNotDisturbDayby").find("li").eq(s[i]).removeClass("my-dayby-1").addClass("my-dayby-2")}function o(t,e){var a=e.substring(0,2)+":"+e.substring(2);return"00"!==e.substring(2)&&(t.find('option[style="display: none;"]').remove(),t.append("<option style='display: none;'>"+a+"</option>")),a}function n(t,e){e?t.addClass("active"):t.removeClass("active")}function l(t){return"my-check-2"+(t?"-1":"")}}function r(){var t=$("#doNotDisturbSetting").hasClass("active"),e=$("#lockModeSetting").hasClass("active");$("#doNotDisturbStartTime, #doNotDisturbEndTime").prop("disabled",!t),$("#lockTime").prop("disabled",!e)}}();
"use strict";var ProjectSettings=function(){var t;return{openPopupLayer:function(){Ajax.executeApi(RestApi.GET.COLABO2_SET_R101,"",a),$("#langSetting").val(Often.null2Void(Often.getCookie("FLOW_LANG"),"ko")),t.removeClass("d-none").addClass("d-block"),$("#randomColorSetting").off("click").on("click",e),$("#whiteColorSetting").off("click").on("click",n),$("#useFavoritesSetting").off("click").on("click",c),$("#notUseFavoritesSetting").off("click").on("click",s),$("#langSetting").off("change").on("change",u),$("#resetBtn").off("click").on("click",o)},closePopupLayer:function(){t=$("#projectSettingsLayer"),t.removeClass("d-block").addClass("d-none")}};function a(t){var a="Y"===Often.null2Void(t.IMPT_USE_YN,"N"),t="Y"===Often.null2Void(t.RANDOM_COLOR_YN,"N");$(a?"#useFavoritesSetting":"#notUseFavoritesSetting").attr("class","").attr("class","my-check-2-1"),$(t?"#randomColorSetting":"#whiteColorSetting").attr("class","").attr("class","my-check-2-1")}function e(){$(this).hasClass("my-check-2")&&($(this).attr("class","").attr("class","my-check-2-1"),$("#whiteColorSetting").attr("class","").attr("class","my-check-2"),l())}function n(){$(this).hasClass("my-check-2")&&($(this).attr("class","").attr("class","my-check-2-1"),$("#randomColorSetting").attr("class","").attr("class","my-check-2"),l())}function c(){$(this).hasClass("my-check-2")&&($(this).attr("class","").attr("class","my-check-2-1"),$("#notUseFavoritesSetting").attr("class","").attr("class","my-check-2"),r())}function s(){$(this).hasClass("my-check-2")&&($(this).attr("class","").attr("class","my-check-2-1"),$("#useFavoritesSetting").attr("class","").attr("class","my-check-2"),r())}function o(){PopupDraw.drawConfirm({contents:{main:Often.c18n("DFA568","프로젝트에 표기한 모든 별표 표기를 초기화합니다.\n(복구 되지 않습니다)")},callback:{submit:i}})}function i(){Ajax.executeApi(RestApi.PUT.COLABO_FLD_ITEM_U002,{COLABO_FLD_KIND:"1",COLABO_FLD_SRNO:"3"},function(){AllProject.showList()})}function l(){var t={RANDOM_COLOR_YN:$("#randomColorSetting").hasClass("my-check-2-1")?"Y":"N"};Ajax.executeApi(RestApi.PUT.COLABO2_SET_U101,t,function(){Often.toast("success",i18next.t("front.alert.successfullyChange",{status:"$t(dictionary.change)"}))})}function r(){var t=$("#useFavoritesSetting").hasClass("my-check-2-1")?"Y":"N";Ajax.executeApi(RestApi.PUT.COLABO2_USER_SET_U003,{IMPT_USE_YN:t},function(){Often.toast("success",i18next.t("front.alert.successfullyChange",{status:"$t(dictionary.change)"})),LocalUtil.setLocalValue("ONLY_USER_SETTING","IMPT_USE_YN",t),AllProject.showList()})}function u(t){var a=$(t.currentTarget);function e(){Often.setCookie("FLOW_LANG",a.val(),3600),location.href="/main.act"}function n(){a.val(Often.null2Void(Often.getCookie("FLOW_LANG"),"ko")),Internationalization.changeLangTemporarily(Internationalization.getCurrentLanguage())}Internationalization.changeLangTemporarily(a.val(),function(){PopupDraw.drawConfirm({contents:{main:i18next.t("front.alert.pageRestart")},callback:{submit:e,close:n}})})}}();
"use strict";var PaymentEvent=function(){return{clickPaymentLayer:function(n){var t=$(n.target);!function(t){return 0!==t.findUp("#calculatorBtn").length&&(n.preventDefault(),PaymentPopup.openPaymentPopup("calculator"),!0)}(t)&&(function(t){return 0!==t.findUp("#autoAccountBtn").length&&(PaymentPopup.openPaymentPopup("account"),!0)}(t)||function(t){return 0!==t.findUp("#termsOfServiceBtn").length&&(PaymentPopup.openPaymentPopup("tearm-of-service"),!0)}(t)||function(t){return 0!==t.findUp("#payOption").length&&(Payment.tooglePayOptionSelect(),!0)}(t)||function(t){var n=t.findUp("#payOptionSelect"),e=$("#paymentLayer"),a=e.find("#payOption");if(0===n.length)return e.find("#payOptionSelect").is(":visible")&&e.find("#payOptionSelect").css("display","none"),!1;e=t.findUp("#yearSelect"),t=t.findUp("#monthSelect");0!==e.length&&"M"===a.attr("data-option")?(a.html(e.find("div").html()),a.attr("data-option","Y"),e.insertBefore(n.find("#monthSelect")),i("Y")):0!==t.length&&"Y"===a.attr("data-option")&&(a.html(t.find("div").html()),a.attr("data-option","M"),t.insertBefore(n.find("#yearSelect")),i("M"));return Payment.drawPayInfo(),Payment.tooglePayOptionSelect(),!0}(t)||function(t){return 0!==t.findUp("#closePayment").length&&(PopupDraw.drawConfirm({contents:{main:i18next.t("front.common.ask",{val:"$t(dictionary.payment)",status:"$t(dictionary.cancel)"})},callback:{submit:Payment.closePaymentLayer}}),!0)}(t)||function(t){return 0!==t.findUp("#submitPayment").length&&(function(){var t=$("#businessLayer").is(":visible"),n=t?$("#payInfoUl"):$("#freePaymentUl"),e=n.find("input"),n=n.find("select"),t=t?$("#paymentAgree"):$("#paymentConfirmCheck"),a=!1;$.each(e,function(t,n){if("recommendId"!==$(n).attr("id"))return""===Often.null2Void($(n).val())?($(n).addClass("input-error"),void(a=i($(n)))):void($(n).hasClass("input-error")&&(a=!0))}),$.each(n,function(t,n){""===Often.null2Void($(n).val())&&(a=i($(n)))}),t.is(":checked")||(a=i(t));return a;function i(t){return t.nextAll(".error-text").css("display","block"),!0}}()||($("#waitPaymentPopup").css("display","block"),function(){var n=Payment.getPaymentInfo();""!==n.RECOMMEND_ID?Ajax.executeApi(RestApi.GET.FLOW_BUY_R007,{RECOMMEND_ID:n.RECOMMEND_ID},function(t){return"Y"!==t.USE_YN||"Y"!==t.STTS?($("#waitPaymentPopup").css("display","none"),void Often.toast("error",i18next.t("front.alert.NoRecommenderID"))):void e(n)},function(){$("#waitPaymentPopup").css("display","none"),Often.toast("error",i18next.t("front.alert.NoRecommenderID"))}):e(n)}()),!0)}(t)||function(t){t=t.findUp("#paymentAgree");return 0!==t.length&&(a(t),!0)}(t)||function(t){0!==t.findUp("#helpPaymentBtn").length&&OpenUtil.openWindow("https://support.flow.team/hc/ko/sections/360000324191","help_payment")}(t))},inputPaymentLayer:function(t){!function(t){t=t.findUp(".js-number-input");0!==t.length&&t.val(t.val().replace(/[^0-9]/g,""))}($(t.target))},keyupPaymentLayer:function(t){var t=$(t.target),i=$("#paymentLayer");a(t),function(t){var n=t.findUp("#cardNum1"),e=t.findUp("#cardNum2"),a=t.findUp("#cardNum3"),t=t.findUp("#cardNum4");if(0===n.length&&0===e.length&&0===a.length&&0===t.length)return!1;0!==n.length&&4===n.val().length?i.find("#cardNum2").focus():0!==e.length&&4===e.val().length?i.find("#cardNum3").focus():0!==a.length&&4===a.val().length?i.find("#cardNum4").focus():0!==t.length&&4===t.val().length&&i.find("#expiryMonth").focus();return!0}(t)||function(t){t=t.findUp("#cardPassword");if(0===t.length)return;2===t.val().length&&i.find("#birthdayNum").focus()}(t)},changePaymentLayer:function(t){a($(t.target))},setPayTooltip:i};function i(t){var n=$("#paymentLayer"),e=Payment.getInitPriceJson().initPrice;"Y"===t&&(e+=-1e3),n.find("#monthPriceSub").text(Payment.convertPrice(e)),n.find("#monthPriceMain").text(Payment.convertPrice(10*e))}function e(t){t.packetOption=Ajax.OPTION.PREVENT_EXECUTE,Ajax.executeApi(RestApi.POST.IAMPORT_PAYMENT_C001,t,function(t){return $("#waitPaymentPopup").css("display","none"),"0"===t.RESULT_CODE?(Often.toast("success",i18next.t("front.alert.cardRegister")),void(location.href="/main.act")):void Often.toast("error",t.RESULT_MSG)},function(){$("#waitPaymentPopup").css("display","none"),Often.toast("error",i18next.t("back.payment.paymentFail"))})}function a(t){var n,e,a;(t.is("input")||t.is("select"))&&(e={phoneNum:(n=t.val().length)<10,cardPassword:2!==n,birthdayNum:n<6,paymentAgree:!t.is(":checked"),cardNum:n<4,expiry:""===Often.null2Void($(t).val(),"")},!(-1<(a=t.attr("id")).indexOf("cardNum")?e.cardNum:-1<a.indexOf("expiry")?e.expiry:e[a])||t.is("input")&&0===n?(t.nextAll(".error-text").css("display","none"),t.removeClass("input-error")):(t.nextAll(".error-text").css("display","block"),t.addClass("input-error")))}}();
"use strict";var PaymentPopup=function(){var a,e;return{openPaymentPopup:function(t){e={calculator:i18next.t("front.payment.rateCalculate"),"tearm-of-service":"정기과금 이용약관",account:"계좌 자동출금 신청"},(a=$("#paymentPopup")).find("#popupTitle").text(e[t]);t=$("#paymentPopupContent").find(".js-"+t+"-item").html();a.find("#content").html(t),a.fadeIn(200,function(){a.focus()}),p(),a.off("click").on("click",n).off("input").on("input",o).off("keyup").on("keyup",c).off("keydown").on("keydown",f)},closePaymentPopup:i};function i(){a.fadeOut(200,function(){a.find(".js-popup-content").css("display","none")})}function n(t){var n=$(t.target);(0!==n.findUp("#closeBtn").length||0===n.findUp("#paymentPopupLayer").length?(i(),1):function(t){if(0===t.findUp(".js-question-btn").length)return!1;t="http://support.flow.team/hc/ko/"+(a.find("#popupTitle").text()!==e.calculator?"articles/360002586471-비즈니스-버전-결제를-무통장입금해도-되나요-":"sections/206999008-가격-정책");return window.open(t,"support_blank"),!0}(n))||(0!==n.findUp("#calPayOption").length?(l(),1):function(t){var n=t.findUp("#calOptionSelect"),e=a.find("#calPayOption");if(0===n.length)return a.find("#calOptionSelect").is(":visible")&&a.find("#calOptionSelect").css("display","none"),!1;var i=t.findUp("#yearSelect"),t=t.findUp("#monthSelect");0!==i.length&&"M"===e.attr("data-option")?(e.html(i.find("div").html()),e.attr("data-option","Y"),i.insertBefore(n.find("#monthSelect"))):0!==t.length&&"Y"===e.attr("data-option")&&(e.html(t.find("div").html()),e.attr("data-option","M"),t.insertBefore(n.find("#yearSelect")));return p(),l(),!0}(n))||function(t){if(0===t.findUp("#autoAccountDownload").length)return;var n=Often.getCookie("FLOW_DUID"),t="";t=ServerChecker.isReal?"https://"+location.hostname+"/FLOW_DOWNLOAD_R001.act?RAND_KEY=FLOW_201904152320046_1caa0535-8f56-4fce-bf00-ad4e1ef73b26&ATCH_SRNO=2598205&OBJ_CNTS_NM=&DUID="+n:"https://flowtest.info/FLOW_DOWNLOAD_R001.act?RAND_KEY=FLOW_20210527971744_4c6f5265-c887-4308-9618-2254607df1fe&ATCH_SRNO=1036381&OBJ_CNTS_NM=&DUID="+n;window.open(t,"_parent")}(n)}function o(t){!function(t){t=t.findUp("#calUserCnt");0!==t.length&&t.val(t.val().replace(/[^0-9]/g,""))}($(t.target))}function c(t){!function(t){t=t.findUp("#calUserCnt");if(0===t.length)return;""!==t.val()&&0===Number(t.val())&&t.val("1");p()}($(t.target))}function f(t){KeyCheck.isKey(t,"ESC")&&i()}function l(){var t=a.find("#calOptionSelect");t.is(":visible")?t.css("display","none"):t.css("display","block")}function p(){var t="Y"===a.find("#calPayOption").attr("data-option"),n=a.find("#calUserCnt").val(),e=Payment.calculatorPrice(n,t),n=100<n,t=n?"":" /"+(t?"년":"월");a.find(".js-cal-gubun").text(t),a.find("#calPrice").val((n?"":"₩")+e.PREDICTION_PRICE),a.find("#calSavings").val((n?"":"₩")+e.SAVINGS)}}();
"use strict";var SearchData=function(n,e){n=n||$(),e=e||!1;var t,i=searchAreaCode,r=searchMode,a=n.is(":visible"),s=n2v(n.attr("data-search-area-code"),i.IN_TONG),c=u(s),d=l(s),T=f(d),o=(t=e,n.is("#searchFilter")||n.is(".js-post-search-result")?"RIGHT":t?"SCROLL":""===c||a?void 0:"DIRECT");return{getSearchWord:function(e){return e?u(e):c},getFilterJson:function(e){var t=function(e){if("DIRECT"===o)return{};var t={MODE:d,SEARCH_WORD:s===i.IN_TONG?e:""},r=T;r["project-name"]&&(t.SEARCH_PROJECT_TITLE=E(n,"project-name"));r["register-name"]&&(t.RGSR_NM=E(n,"register-name"));r["participant-name"]&&(t.RCVR_USER_NM=E(n,"participant-name"));r["tmpl-type"]&&(t.TMPL_TYPE=h(n,"tmpl-type"));r["file-type"]&&(t.SEARCH_ETS=h(n,"file-type"));r["period-type"]&&$.extend(t,function(e){var t={};t.PERIOD_TYPE="RIGHT"===o?n2v(e.find(".js-search-pickr-layer:visible").attr("data-code"),"select"):n2v(v(e,"period-type").attr("data-code"),defaultPeriod);"select"===t.PERIOD_TYPE?(t.START_DATE=p(e.find(".js-start-flatpickr:visible").find("input").val()),t.END_DATE=p(e.find(".js-end-flatpickr:visible").find("input").val())):(t.START_DATE=getStartTime(t.PERIOD_TYPE),t.END_DATE=getEndTime());return t}(n));return""===e&&function(e){return""===n2v(e.SEARCH_PROJECT_TITLE)&&""===n2v(e.RGSR_NM)&&""===n2v(e.RCVR_USER_NM)&&(""===n2v(e.START_DATE)||""===n2v(e.END_DATE))&&""===n2v(e.TMPL_TYPE)&&""===n2v(e.SEARCH_ETS)}(t)?{}:t}(c);return e&&SearchStore.saveByAreaCode(s,t),t},getMode:function(e){return e?l(e):d},getIsFilterTargetJson:function(e){return s?f(e):T}};function l(e){if(e===i.IN_PROJECT||e===i.IN_POSTS)return r.POST;if(e===i.IN_FILE)return r.FILE;if(e===i.IN_TASK)return r.TASK;e=$("#searchPopupLayer");return e.is(":visible")?Often.null2Void(e.find(".js-add-section").attr("data-code"),r.TOTAL):Often.null2Void($("#searchTab").find(".js-tab-item.active").attr("data-code"),r.TOTAL)}function u(e){if(e===i.IN_POSTS)return n2v($("#allPostsSearchInput").val());if(e===i.IN_PROJECT)return n2v($("#projectSearchInput").val(),$("#detailLayer").find(".js-result-input-area").find("input").val());if(e===i.IN_TASK)return n2v($(".js-task-search-input:visible").val());if(e===i.IN_FILE)return n2v($(".js-file-search-input:visible").val());var t=$("#searchPopupInput").val();return e===i.IN_TONG?n2v(t):n2v(t,$("#searchWord").text())}function f(e){var t=ViewChanger.isPage("mypost");return{"project-name":e===searchMode.POST||e===searchMode.FILE||e===searchMode.TASK,"register-name":e===searchMode.POST&&!t||e===searchMode.FILE||e===searchMode.TASK,"participant-name":e===searchMode.PROJECT||e===searchMode.TASK,"period-type":e!==searchMode.PROJECT,"tmpl-type":e===searchMode.POST,"file-type":e===searchMode.FILE}}function p(e){return e?14===e.length?e.substring(0,8):e:""}function v(e,t){var r=e.find(".js-"+t+"-search-filter").length,n=e.find(".js-"+t+"-search-filter:visible").length;return 1===r?e.find(".js-"+t+"-search-filter"):1===n?e.find(".js-"+t+"-search-filter:visible"):e.find("li.js-"+t+"-search-filter:visible")}function E(e,t){return n2v(v(e,t).find("input").val())}function h(e,t){e=n2v(v(e,t).find("[name="+t+"]:checked").attr("data-code"));return"tmpl-type"===t?"0"===e?"":e:"file-type"===t?FileSearch.getTotalFileType(e):e}};
"use strict";var SearchEvent=function(){var n,s,i,c,r;return{clickSearchEventArea:function(e){var t=SearchFilter.getSearchWord(searchAreaCode.IN_TONG),a=$(e.target),i=a.findUp("#searchResult").find("#searchFilter"),r=a.findUp(".js-search-item"),n=a.findUp(".js-search-more"),s=a.findUp(".js-move-page"),c=a.findUp(".js-download"),o=r.attr("COLABO_SRNO"),l=r.attr("COLABO_COMMT_SRNO"),d=r.attr("COLABO_REMARK_SRNO"),e=Often.getAttrs(r);if(0<c.length)return FileUtil.saveFile(e);if(0<n.length){n=n.attr("data-code");Search.drawSearchResult(n,t,"",i,"MORE")}else{if(0<s.length)return p(o,l,d);if(0<r.length){s=r.attr("rgsn_dttm");if(!LimitGuest.isSearchLimitGuest("post",s)){s=r.attr("data-code");if(s===searchMode.PROJECT){a=a.findUp(".js-star-button");if(0===a.length)return p(o);var h=a.find(".js-star-icon"),f=h.hasClass("unstar");ProjectSetting.setProjectStar(o,!f,function(){f?h.removeClass("unstar"):h.addClass("unstar")})}if(s===searchMode.POST)return PostPopup.togglePostView(o,l,d,function(){$("#searchResult").find(".highlight").removeClass("highlight"),r.addClass("highlight")});s===searchMode.FILE&&(ImageUtil.isImageType(e[0])?ImageViewer.openImage("POST",e,0):FileUtil.openFile("DOC-VIEWER",e))}}}function p(e,t,a){ViewChanger.loadPageJson({code:"detail",first:e,second:t,third:a})}},clickTopSearchBar:function(e){var a=$(e.target);if(0<a.findUp(".js-top-search-delete").length){var t=$("#searchPopupTopButton");t.find("input").val(""),t.find(".js-top-search-delete").removeClass("active"),SearchStore.initValueByAreaCode("IN_TONG","SEARCH_WORD"),Search.fillTopSearchBar()}else{if(!ViewChanger.isPage("search")){t=LocalUtil.getLocalJson("IN_TONG_SEARCH_MEMORY");if(t&&1<Object.keys(t).length){t=$.trim(Often.null2Void(t.SEARCH_WORD));if(""!==t&&"-1"!==t)return $("#tempPopup").find(".confirm-popup").is(":visible")?void 0:void PostPopup.checkWritingAndShowPopup(function(){ViewChanger.setVal("PREV_VIEW"),LeftFilter.closeLeftFilter(),$("#leftFilterBtn").css("display","none"),i(),r.css("display","block")})}}DocumentEvent.closeAllPopup(),i()}function i(){o(),function(){SearchFilter.initFilter(n,searchMode.TOTAL,!0),SearchFilter.addEventOnSearchFilter(c,a,!0);var e=Often.null2Void(LocalUtil.getLocal("SEARCH_CATEGORY"),searchMode.TOTAL);function a(){var e=SearchFilter.getSearchWord(searchAreaCode.IN_TONG),t=SearchFilter.getModeByAreaCode(searchAreaCode.IN_TONG);SearchFilter.isUnSearchableAndToast(""!==e)||ViewChanger.loadPageJson({code:"search",first:t,second:e})}d(e),SearchFilter.controlOptionView(n,e),n.off("click").on("click",function(e){var t=(r=$(e.target)).findUp(".js-search-section"),a=r.findUp(".js-detail-search"),i=r.findUp(".js-search-del"),r=SearchFilter.checkCode(t.attr("data-code"));if(0<i.length&&(s.val(""),i.hide(),SearchStore.initValueByAreaCode("IN_TONG","SEARCH_WORD"),Search.fillTopSearchBar()),0<a.length)return c.is(":visible")?c.slideUp():c.slideDown(),void s.focus();0<t.length&&(n.find(".js-add-section").empty(),h(e,r),s.focus())}),s.off("keyup").on({keyup:function(e){var t=$.trim(s.val());if(KeyCheck.isKey(e,"ENTER"))return l(SearchFilter.getSearchWord(searchAreaCode.IN_TONG)),void a();l(t)},keydown:function(e){var t,a;KeyCheck.isKey(e,"BACK")&&(t=$.trim(s.val()),a=s.prev(".js-add-section"),""===t&&0!==a.length&&(e.preventDefault(),a.find("i").trigger("click")))}}),n.fadeIn(200,function(){s.focus()})}();var e=a.findUp(".js-detail-search"),t=""!==Often.null2Void(n.find(".js-add-section").attr("data-code"));c.css("display",t||0<e.length?"block":"none")}},controlSearchDelIcon:l,controlCategoryTab:d};function o(){n=$("#searchPopupLayer"),s=n.find("#searchPopupInput"),i=n.find(".js-search-section-div"),c=n.find("#detailSearchArea"),r=$("#searchResult"),r.find("#searchWord"),r.find("#searchEventArea")}function l(e){var t=$("#searchPopupLayer");""===e?(t.find(".js-search-del").css("display","none"),t.find(".js-search-icon").removeClass("on")):(t.find(".js-search-del").css("display","block"),t.find(".js-search-icon").addClass("on"))}function d(e){o();var t,a=n.find(".js-add-section");""===e||e===searchMode.TOTAL?(a.empty(),a.attr({"data-code":""}),SearchStore.initValueByAreaCode("IN_TONG","MODE"),Search.fillTopSearchBar(),i.css("display","block"),c.css("display","none")):(t=n.find(".js-search-section[data-code="+e+"]").find(".js-section-name").text(),a.attr({class:"js-add-section project-blue-button","data-code":e}),a.addClass(e),a.empty().append(function(e){e=$('<a href="#"><em></em>'+e+"<i></i></a>");return e.find("i").on("click",h),e}(t)),i.css("display","none"),c.css("display","block"))}function h(e,t){e&&e.stopPropagation();t=Often.null2Void(t,searchMode.TOTAL);LocalUtil.setLocal("SEARCH_CATEGORY",t),d(t),SearchFilter.controlOptionView(n,t)}}();
"use strict";var SearchFilter=function(){var n,i=!1;return{getFilterJson:function(e,t,n){return new SearchData(e,n).getFilterJson(t)},getSearchWord:function(e){return(new SearchData).getSearchWord(e)},getModeByAreaCode:function(e){return(new SearchData).getMode(e)},initSearchMemory:function(){SearchStore.init()},initTongSearchMemory:function(){SearchStore.init(!0)},initFilter:function(e,t,n){var i,a,r,d;""!==Often.null2Void(e)&&(i=Often.null2Void(e.attr("data-search-area-code")),(a=Often.null2Void(LocalUtil.getLocalJson(i+"_SEARCH_MEMORY")))&&1<Object.keys(a).length&&n&&(t=a.MODE,r=$.trim(a.SEARCH_WORD),d=""!==r&&"-1"!==r,i===searchAreaCode.IN_TONG&&function(e){""===e&&($("#allPostsSearchInput").val(e),$("#projectSearchInput").val(e),$("#detailLayer").find(".js-result-input-area").find("input").val(e),$(".js-task-search-input").val(e),$(".js-file-search-input").val(e));$("#searchPopupInput").val(e),SearchEvent.controlSearchDelIcon(e)}(d?r:"")),i===searchAreaCode.IN_TONG&&SearchEvent.controlCategoryTab(t),l(e,t),""===a&&n?m(e):m(e,a),e.find(".js-project-name-search-filter").find("input").attr("placeholder",i18next.t("front.alert.enterWord",{val:Interpolation.addName("dictionary.project")})),e.find(".js-register-name-search-filter").find("input").attr("placeholder",i18next.t("front.placeHolder.multipleInput",{val:Interpolation.addName("dictionary.author")})),e.find(".js-participant-name-search-filter").find("input").attr("placeholder",i18next.t("front.placeHolder.multipleInput",{val:Interpolation.addName(t===searchMode.TASK?"dictionary.manager":"dictionary.participant")})))},addEventOnSearchFilter:function(p,t,s){function u(e,t){e.prev().prop("checked",!0),t.attr("data-code",Often.null2Void(e.attr("data-code")))}function h(e){"function"==typeof e&&e(),"function"==typeof t&&t()}function e(e){KeyCheck.isKey(e,"ENTER")&&h()}p.off("click").on("click",function(e){i||(function(e){e.stopPropagation(),e.preventDefault();var i,t=$(e.target),n=t.findUp(".js-tmpl-type"),a=t.findUp(".js-file-type"),r=t.findUp(".js-date-type"),d=t.findUp(".js-period-type"),f=t.findUp(".js-filter-reset"),l=t.findUp(".js-filter-cancel"),e=t.findUp(".js-filter-search");if(0<l.length)return p.fadeOut(200);if(0<f.length)return m(p,{init:!0});if(0<e.length)return h();if(0<d.length){f=t.findUp(".js-period-type-search-filter"),e=Often.null2Void(d.attr("data-code"));d.prev().prop("checked",!0),f.attr("data-code",e)}else if(0<r.length)0<t.findUp(".flatpickr-calendar").length||(0<r.find(".flatpickr-calendar").length?r.find(".flatpickr-calendar").remove():(i=t.findUp(".js-search-pickr-layer"),r=i.find(".js-start-flatpickr"),t=i.find(".js-end-flatpickr"),DatePicker.makeFlatPickr({dateFormat:"YmdHi00",startDate:r.find("input").val(),endDate:t.find("input").val(),inputObj:{start:r,end:t},callback:{close:function(e,t,n){if(!n){if(i.attr("data-code","select"),s)return j(e,t);h(function(){j(e,t)})}}}})));else{if(0<$(".loading-area:visible").length)return Often.toast("info",i18next.t("front.common.wait"));if(0<n.length){if(!n.prev().prop("checked")){var c=n.findUp(".js-tmpl-type-search-filter");if(s)return u(n,c);h(function(){u(n,c)})}}else if(0<a.length){if(!a.prev().prop("checked")){var o=a.findUp(".js-file-type-search-filter");if(s)return u(a,o);h(function(){u(a,o)})}}else;}}(e),i=!0,n=setTimeout(function(){i=!1,clearTimeout(n)},300))}),p.find(".js-register-name-search-filter").find("input").off("keyup").on("keyup",e),p.find(".js-participant-name-search-filter").find("input").off("keyup").on("keyup",e),p.find(".js-project-name-search-filter").find("input").off("keyup").on("keyup",e)},drawSearchCount:function(e,t){t=100<=Number(t)?"99 +":t;e.text(t).css("display",0===Number(t)?"none":"inline-block")},checkCode:function(e){return"-1"===Often.null2Void(e,"-1")?searchMode.TOTAL:e},setSearchFilter:function(i,a,e,t){if(""===Often.null2Void(i)||i.is(":visible")){var n=""!==Often.null2Void(i);if(""!==Often.null2Void(a)){var r=f(e);for(d in 0<a.parents("#detailLayer").length&&(r["project-name"]=!1),r)a.find(".js-"+d+"-search-filter").css("display",r[d]?"block":"none");if(n)for(var d in r)r[d]&&(-1<d.indexOf("period-type")?function(e){var t,n=i.find("[name="+e+"]:checked"),e=Often.null2Void($.trim(n.next().attr("data-code")));n="select"===e?(t=i.find(".js-start-flatpickr").find("input").val(),i.find(".js-end-flatpickr").find("input").val()):""===e?(t=Often.null2Void(a.find(".js-start-flatpickr").find("input").val(),getStartTime(defaultPeriod)),Often.null2Void(a.find(".js-end-flatpickr").find("input").val(),getEndTime())):(t=getStartTime(e),getEndTime());a.find(".js-search-pickr-layer").attr("data-code",e),j(a.find(".js-start-flatpickr"),t),j(a.find(".js-end-flatpickr"),n)}(d):-1<d.indexOf("-name")?function(e){var t=Often.null2Void($.trim(i.find(".js-"+e+"-search-filter").find("input").val()));a.find(".js-"+e+"-search-filter").find("input").val(t)}(d):-1<d.indexOf("-type")&&function(e){var t=i.find("[name="+e+"]:checked"),n=Often.null2Void(t.next().attr("data-code"));a.find(".js-"+e+"-search-filter").attr("data-code",n);n=Often.null2Void(t.attr("data-code"),"total");a.find("[name="+e+"][data-code="+n+"]").prop("checked",!0),t.prop("checked",!0)}(d));"function"==typeof t&&t()}}},controlOptionView:l,setSearchFilterByData:a,isUnSearchableAndToast:function(e){return!e&&(Often.toast("error",i18next.t("front.common.SearchContext")),!0)}};function f(e){return(new SearchData).getIsFilterTargetJson(e)}function m(e,t){e.find(".js-register-name-search-filter").find("input").val(""),e.find(".js-participant-name-search-filter").find("input").val(""),e.find(".js-project-name-search-filter").find("input").val("");var n=e.find(".js-file-type-search-filter").find("ul");n.is(":empty")?n.html(SearchFilterHtml.getFileType("TOTAL")):n.find(".radio-input[data-code=0]").prop("checked",!0),0<e.parents(".allTaskLayer").length?e.find(".js-period-type-search-filter").remove():(i=e.find(".js-period-type-search-filter").find("ul")).is(":empty")?i.html(SearchFilterHtml.getPeriodType(defaultPeriod)):i.find(".radio-input[data-code="+defaultPeriod+"]").prop("checked",!0);var i,n=e.find(".js-tmpl-type-search-filter").find("ul");n.is(":empty")?n.html(SearchFilterHtml.getTmplType("TOTAL")):n.find(".radio-input[data-code=0]").prop("checked",!0),e.find(".js-period-type-search-filter").attr("data-code",defaultPeriod),e.find(".js-start-flatpickr").find("span").text(getStartTime(defaultPeriod,"type2")),e.find(".js-start-flatpickr").find("input").val(getStartTime(defaultPeriod)),e.find(".js-end-flatpickr").find("span").text(getEndTime("type2")),e.find(".js-end-flatpickr").find("input").val(getEndTime()),t&&0<Object.keys(t).length&&(t.init?(i=e.closest("[data-search-area-code]"),n=Often.null2Void(i.attr("data-search-area-code")),SearchStore.removeByAreaCode(n),n===searchAreaCode.IN_TONG&&(i.find(".js-add-section").find("i").trigger("click"),i.find(".js-search-del").find("i").trigger("click"))):a(e,t))}function a(e,t){var n=Often.null2Void(t.RGSR_NM),i=Often.null2Void(t.RCVR_USER_NM),a=Often.null2Void(t.SEARCH_PROJECT_TITLE),r=Often.null2Void(t.SEARCH_ETS,"0"),d=Often.null2Void(t.TMPL_TYPE,"0"),f=Often.null2Void(t.PERIOD_TYPE,defaultPeriod),l=Often.null2Void(t.START_DATE),t=Often.null2Void(t.END_DATE);""!==n&&e.find(".js-register-name-search-filter").find("input").val(n),""!==i&&e.find(".js-participant-name-search-filter").find("input").val(i),""!==a&&e.find(".js-project-name-search-filter").find("input").val(a),e.find(".js-file-type-search-filter").find("ul").find(".radio-input[data-code="+r+"]").prop("checked",!0),e.find(".js-tmpl-type-search-filter").find("ul").find(".radio-input[data-code="+d+"]").prop("checked",!0),e.find(".js-period-type-search-filter").find("ul").find(".radio-input[data-code="+f+"]").prop("checked",!0),e.find(".js-period-type-search-filter").attr("data-code",f),e.find(".js-search-pickr-layer").attr("data-code",f),"select"===f?(""!==l?(e.find(".js-start-flatpickr").find("span").text(Tz.momentConversion("convertOnly","type2",l)),e.find(".js-start-flatpickr").find("input").val(Tz.momentConversion("convertOnly","type17",l))):(e.find(".js-start-flatpickr").find("span").text(getStartTime(defaultPeriod,"type2")),e.find(".js-start-flatpickr").find("input").val(getStartTime(defaultPeriod))),""!==t?(e.find(".js-end-flatpickr").find("span").text(Tz.momentConversion("convertOnly","type2",t)),e.find(".js-end-flatpickr").find("input").val(Tz.momentConversion("convertOnly","type17",t))):(e.find(".js-end-flatpickr").find("span").text(getEndTime("type2")),e.find(".js-end-flatpickr").find("input").val(getEndTime()))):(e.find(".js-start-flatpickr").find("span").text(getStartTime(f,"type2")),e.find(".js-start-flatpickr").find("input").val(getStartTime(f)),e.find(".js-end-flatpickr").find("span").text(getEndTime("type2")),e.find(".js-end-flatpickr").find("input").val(getEndTime()))}function l(e,t){var n,i=f(t);for(n in 0<e.parents("#detailLayer").length&&(i["project-name"]=!1),0<e.parents(".allFileLayer").length&&(i["file-type"]=!1),i)e.find(".js-"+n+"-search-filter").css("display",i[n]?"block":"none")}function j(e,t,n){e.find("span").text(Tz.momentConversion("convertOnly","type2",t)),e.find("input").val(t),"function"==typeof n&&n()}}();
"use strict";var SearchFilterHtml={getFileType:function(t){var e,n={TOTAL:"dictionary.all",CLOUD:"dictionary.cloud",PDF:"PDF",WORD:"dictionary.word",EXCEL:"dictionary.excel",HWP:"HWP",PPT:"dictionary.powerpoint",IMG:"dictionary.image",MEDIA:"front.common.audioAndVideo",HTML:"HTML",CAD:"CAD",ZIP:"front.common.zip"},o="";for(e in n)o+=ListHelper.replaceJson($("#fileLi").html(),{uuid:Often.getUUID(),key:"TOTAL"===e?"0":e,keyClass:e.toLowerCase(),value:i18next.t(n[e]),checked:t===e?"checked":"data"});return o},getTmplType:function(t){var e,n={TOTAL:"dictionary.all",WRITE:"dictionary.article",TASK:"dictionary.task",SCHEDULE:"dictionary.schedule",TODO:"dictionary.todo",REMARK:"dictionary.comment"},o="";for(e in n)o+=ListHelper.replaceJson($("#tmplLi").html(),{uuid2:Often.getUUID(),key:"WRITE"===e?"1":"TASK"===e?"4":"SCHEDULE"===e?"3":"TODO"===e?"2":"REMARK"===e?"-1":"0",value:i18next.t(n[e]),checked:t===e?"checked":"data"});return o},getPeriodType:function(t){var e,n={unlimit:i18next.t("dictionary.all"),today:i18next.t("dictionary.today"),week:i18next.t("front.common.day",{count:7}),month:i18next.t("front.common.month",{count:1}),thirdMonth:i18next.t("front.common.month",{count:3}),sixthMonth:i18next.t("front.common.month",{count:6}),year:i18next.t("front.common.year",{count:1}),select:i18next.t("front.common.selectRange")},o="";for(e in n)o+=ListHelper.replaceJson($("#periodLi").html(),{uuid:Often.getUUID(),key:e,value:n[e],checked:t===e?"checked":"data",select_div:"select"===e?$("#periodSelectDiv").html():"",select_class:"select"===e?"js-date-select-input":""});return o}};
"use strict";var SearchStore=function(){return{init:function(e){e?-1<LocalUtil.getSubPath().indexOf("search")||LocalUtil.removeLocal("IN_TONG_SEARCH_MEMORY"):(LocalUtil.removeLocal("IN_PROJECT_SEARCH_MEMORY"),LocalUtil.removeLocal("IN_TASK_SEARCH_MEMORY"),LocalUtil.removeLocal("IN_FILE_SEARCH_MEMORY"),LocalUtil.removeLocal("IN_POSTS_SEARCH_MEMORY"))},initValueByAreaCode:function(e,a){var o=LocalUtil.getLocalJson(e+"_SEARCH_MEMORY");o&&1<Object.keys(o).length&&LocalUtil.setLocalValue(e+"_SEARCH_MEMORY",a,"")},saveByAreaCode:function(e,a){var o=SearchFilter.getSearchWord(e);switch(!0){case e===searchAreaCode.IN_TONG:case e===searchAreaCode.IN_PROJECT:r(o)&&c(e,a);break;case e===searchAreaCode.IN_TASK:case e===searchAreaCode.IN_FILE:case e===searchAreaCode.IN_POSTS:(r(o)||r(a.RGSR_NM)||r(a.RCVR_USER_NM)||r(a.SEARCH_PROJECT_TITLE))&&c(e,a)}},removeByAreaCode:function(e){LocalUtil.removeLocal(e+"_SEARCH_MEMORY")}};function c(e,a){LocalUtil.setLocalJson(e+"_SEARCH_MEMORY",a)}function r(e){return""!==n2v(e)}}();
"use strict";var SearchUtil={getDefaultPeriod:function(){return"sixthMonth"},n2v:function(e,t){return"null"===e||"undefined"===e?e:$.trim(Often.null2Void(e,t))},getStartTime:function(e,t){return t=t||"type17",{unlimit:Tz.momentTimeZone(moment().add(-10,"years"),t),today:Tz.momentTimeZone(moment(),t),week:Tz.momentTimeZone(moment().add(-7,"days"),t),month:Tz.momentTimeZone(moment().add(-1,"month"),t),thirdMonth:Tz.momentTimeZone(moment().add(-3,"month"),t),sixthMonth:Tz.momentTimeZone(moment().add(-6,"month"),t),year:Tz.momentTimeZone(moment().add(-1,"years"),t)}[e]},getEndTime:function(e){return e=e||"type18",Tz.momentTimeZone(moment(),e)}},defaultPeriod=SearchUtil.getDefaultPeriod();function n2v(e,t){return SearchUtil.n2v(e,t)}function getStartTime(e,t){return SearchUtil.getStartTime(e,t)}function getEndTime(e){return SearchUtil.getEndTime(e)}
"use strict";var ItemBookmark={isBookmarkButtonAndAction:function(t){var s=t.findUp(".js-post-bookmark");return 0!==s.length&&(function(t){var a;a=t?"COLABO2_BRING_D001":"COLABO2_BRING_C001";var e=s.findUp(".detail-item"),o=e.attr("data-project-srno"),n=e.attr("data-post-srno"),o={COLABO_SRNO:o,COLABO_COMMT_SRNO:n};Ajax.executeApi(a,o,function(){t?s.removeClass("on"):s.addClass("on"),Often.toast("success",i18next.t(i18next.t("front.alert.successfullyChange",{status:"$t(dictionary.apply)"}))),ViewChanger.isPage("schd")||UpdateElements.autoUpdateElem({POST_SRNO:n,BOOKMARK_RELEASE:t})})}(s.hasClass("on")),!0)},removeAnimate:function(t){var a=$("#allPostsLayer").find(".js-all-post-item").length,e=$("#myPostContentUl"),t=e.find(".js-all-post-item[colabo_commt_srno="+t+"]");0<t.length&&(t.animate({opacity:.1,height:0},150,"swing",function(){$(this).remove()}),1===a&&e.append(AllPosts.getBookmarkNoDataHtml()))}};
"use strict";var ItemReaction=function(){return{isReactionButtonAndAction:function(t){var e=t.findUp(".js-post-reaction");if(0===e.length)return!1;e.hasClass("on")?n("0",t):e.nextAll(".js-emoji-select-layer").fadeIn(200);return!0},isEmojiIconAndAction:function(t){if(0===t.findUp(".js-emoji-select-layer").length)return e(),!1;0!==t.findUp(".add-reaction").length&&(n(t.findUp(".add-reaction").attr("data"),t),t.findUp(".js-emoji-select-layer").fadeOut(200));return!0},closeAllReactionPopup:e,isEmojiGroupAreaAndAction:function(t){if(0===t.findUp(".js-emoji-group-layer").length)return!1;var e=t.findUp(".detail-item"),n=e.attr("data-project-srno"),e=e.attr("data-post-srno");return ReactionCheck.showReactionCheckPopup(t,n,e),!0},updateReactionElements:function(t,e,n,i){var o=$("#postPopup:visible").find("#post-"+e),e=$("#detailUl:visible").find("#post-"+e);"POST"===t?(a(o,i),a(e,i)):"REMARK"===t&&(r(o.find(".remark-item[remark-srno='"+n+"']"),i),r(e.find(".remark-item[remark-srno='"+n+"']"),i));function a(t,e){var n=JsonMaker.getEmojiInfo(e),i=Object.keys(n).length<2,o=t.find(".js-post-reaction"),a=t.find(".emoji-count"),r=t.find(".emoji-group"),e=t.find(".emoji-area"),t=t.find(".js-post-reaction span");a.text(i?"":n["emoji-text"]),r.html(i?"":n["emoji-icons"]),o.attr("class",i?"":n["reaction-display"]),o.addClass("js-post-reaction").addClass("post-bottom-button"),e.css("display",i?"none":"block"),t.text(n["reaction-text"])}function r(t,e){"Y"===e.EMT_SELF_YN?(t.find(".js-remark-like").addClass("on"),t.find(".js-remark-like-button .txt-like").text(i18next.t("front.common.unDoLike")),"1"===e.EMT_CNT&&t.find(".js-remark-like-count").addClass("on")):(t.find(".js-remark-like").removeClass("on"),t.find(".js-remark-like-button .txt-like").text(i18next.t("dictionary.like")),"0"===e.EMT_CNT&&t.find(".js-remark-like-count").removeClass("on")),t.find(".js-remark-like-count").text(e.EMT_CNT)}}};function e(){$(".js-emoji-select-layer").fadeOut(200)}function n(t,e){var n=e.findUp(".detail-item"),e=n.attr("data-project-srno"),i=n.attr("data-post-srno");Ajax.executeApi(RestApi.PUT.COLABO2_POST_EMT_U001,{COLABO_SRNO:e,COLABO_COMMT_SRNO:i,EMT_CD:t},function(t){UpdateElements.autoUpdateElem({POST_SRNO:i,REACTION_POST_DATA:t})})}}();
"use strict";var ItemRemark=function(){var p,u=!1,O=0;return{clickFileUpload:function(e){Upload.uploadFile("any",function(t){n(t,e)})},getRemarkItemHtml:m,getRemarkDataHtml:c,addEventOnRemarkInput:function(){$(".js-remark-area").off("keydown").off("keyup").on("keydown",e).on("keyup",t)},drawUploadFile:n,updateRemarkData:function(t,i,e){var n=$("#postPopup:visible"),r=$("#detailUl:visible"),o=n.find("#post-"+i).find(".js-remark-area:visible"),a=r.find("#post-"+i).find(".js-remark-area:visible"),s=0<o.length,d=!1;0<r.length&&(r.hasClass("list")?0<(r=r.find("#post-"+i)).length&&function(t){t.parents(".comment").css("display","inline-block"),t.text(Number(t.text())+1)}(r.find(".js-remark-count")):d=0<a.length);(s||d)&&Ajax.executeApi(RestApi.GET.COLABO2_REMARK_R101,{COLABO_SRNO:t,COLABO_COMMT_SRNO:i,SRCH_COLABO_REMARK_SRNO:e,ORDER_TYPE:"N"},function(t){var e=t.COLABO_REMARK_REC,n=e&&0<e.length,r=2<Number(t.TOT_CNT),e={"remark-count":n?t.TOT_CNT:"0","remark-over-yn":r?"":"on","remark-area":n?m(e):""};ItemSubtask.setSubtaskRemarkCount(i,t.TOT_CNT),s&&l("UPDATE",o,e),d&&l("UPDATE",a,e)})},getRemarkWriteConditionJson:f,isCommentWriterButtonAndAction:function(t){var e=t.findUp(".js-remark-edit-button"),n=e.hasClass("js-remark-update"),r=e.hasClass("js-remark-delete");if(!n&&!r)return!1;var i=t.findUp(".detail-item"),o=t.findUp(".remark-item"),a=i.attr("data-project-srno"),s=i.attr("data-post-srno"),e=o.attr("remark-srno"),t=Authority.isAuthorityCheck("ADMIN",a),i=Authority.isAuthorityCheck("REMARK",a);if(n)return t||i?(function(t){var e=t.find(".js-remark-view"),n=t.find(".js-remark-edit"),r=e.find(".js-remark-text"),t=n.find(".js-remark-area");t.html(TagConvert.html2HtmlStringByRemark(r.html())),n.find(".js-remark-upload-file").html(e.find(".js-remark-upload-file").html()),n.find(".js-remark-upload-img").html(e.find(".js-remark-upload-img").html()),e.removeClass("on"),n.addClass("on"),n.find(".js-del-btn").css("display","block"),n.find(".js-down-btn").css("display","none"),t.off("keydown").on("keydown",ItemRemark.keyDownRemarkInput).off("keyup").on("keyup",ItemRemark.keyUpRemarkInput),t.focus();t=window.getSelection().focusNode;"#text"!==(t=(t.hasChildNodes()?t:t.parentNode).lastChild).nodeName&&(t=t.parentNode.lastChild);Caret.focusNextCaret(t,t.length)}(o),!0):void Often.toast("error",i18next.t("front.common.adminWriteOnly",{type:"$t(dictionary.comment)"}));if(r)return function(n,r,i,t){PopupDraw.drawConfirm({await:!0,contents:{main:i18next.t("front.common.ask",{val:"$t(dictionary.comment)",status:"$t(dictionary.delete)"})},callback:{submit:function(){PopupDraw.closePopup(),Ajax.executeApi(RestApi.DELETE.COLABO2_REMARK_D101,{COLABO_SRNO:r,COLABO_COMMT_SRNO:i,COLABO_REMARK_SRNO:t},function(t){n.findUp(".detail-item").find(".comment-count").text(t.TOT_CNT),n.fadeOut(200,function(){n.remove()});var e=n.findUp(".detail-item");e.find(".js-remark-prev-button").hasClass("on")&&e.find(".remark-item").length<3&&((t=e.find(".js-comment-area")).find(".remark-item").remove(),c(t,{MODE:OftenCode.DELETE,ORDER_TYPE:OftenCode.DELETE,COLABO_SRNO:r,COLABO_COMMT_SRNO:i})),0!==e.findUp("#postPopup").length&&UpdateElements.autoUpdateElem(),Often.toast("success",i18next.t("front.alert.successfullyChange",{status:"$t(dictionary.delete)"}))})}}}),$("#tempPopup").focus()}(o,a,s,e),!0},isShowPrevRemarkButtonAndAction:function(t){if(0===t.findUp(".js-remark-prev-button").length)return!1;var e=t.findUp(".detail-item"),n=e.attr("data-project-srno"),r=e.attr("data-post-srno"),e=e.find("li.remark-item:first").attr("remark-srno");return c(t,{MODE:OftenCode.MORE,ORDER_TYPE:OftenCode.PREV,COLABO_SRNO:n,COLABO_COMMT_SRNO:r,SRCH_COLABO_REMARK_SRNO:e},function(){PostPopup.addScrollSticky()}),!0},isShowMoreRemarkButtonAndAction:function(t){if(0===t.findUp(".js-remark-more-button").length)return!1;var e=t.findUp(".detail-item"),n=e.attr("data-project-srno"),r=e.attr("data-post-srno"),e=e.find("li.remark-item:last").attr("remark-srno");return c(t,{MODE:OftenCode.NEXT,ORDER_TYPE:OftenCode.NEXT,COLABO_SRNO:n,COLABO_COMMT_SRNO:r,SRCH_COLABO_REMARK_SRNO:e,RENEWAL_YN:"Y"}),!0},isPostCommentGroup:function(t){if(0<t.findUp(".js-comment-thumbnail").length||0<t.findUp(".js-comment-user-name").length){t=t.findUp(".remark-item").attr("data-user-id");return Profile.drawProfilePopup(t),!0}return!1},keyDownRemarkInput:e,keyUpRemarkInput:t,isRemarkLikeButtonAndAction:function(t){var e=t.findUp(".js-remark-like-button");if(0===e.length)return!1;var n=t.findUp(".detail-item"),r=n.attr("data-project-srno"),i=n.attr("data-post-srno"),o=e.findUp(".remark-item").attr("remark-srno"),t=t.findUp(".js-remark-like").hasClass("on")?0:1,t={COLABO_SRNO:r,COLABO_COMMT_SRNO:i,COLABO_REMARK_SRNO:o,EMT_CD:t};return Ajax.executeApi(RestApi.PUT.COLABO2_REMARK_EMT_U001,t,function(t){UpdateElements.autoUpdateElem({POST_SRNO:i,REMARK_SRNO:o,REACTION_REMARK_DATA:t})}),!0},isRemarkLikeCountButtonAndAction:function(t){if(0===t.findUp(".js-remark-like-count").length)return!1;var e=t.findUp(".detail-item"),n=e.attr("data-project-srno"),e=e.attr("data-post-srno");return ReactionCheck.showReactionCheckPopup(t,n,e),!0},isRemarkDeleteFileButtonAndAction:function(t){var e=t.findUp(".js-del-btn"),n=0<t.findUp(".js-remark-layer").length;if(0===e.length||!n)return!1;t=0<e.findUp(".js-post-img").length,n=0<e.findUp(".js-post-file").length,n=t?"img":n?"file":"";return n&&e.findUp(".js-post-"+n).parent("li").remove(),!0},isRemarkImgAndAction:function(t){var e=t.findUp(".image-item"),n=e.findUp(".js-remark-view");if(!n||0===n.length)return!1;var r=e.findUp(".js-remark-upload-img"),n=0<r.length;if(0===e.length||!n)return!1;var i=e.findUp(".js-popup-before"),e=Often.getAttrs(r.find(".image-item")),t=r.find("li").index(t.findUp("li"));return $.each(e,function(t,e){e.COLABO_SRNO=i.attr("data-project-srno"),e.COLABO_COMMT_SRNO=i.attr("data-post-srno")}),ImageViewer.openImage("POST",e,t),!0},isRemarkFileAndAction:function(t){var e=t.findUp(".js-post-file");if(!e||0===e.length)return!1;var n=e.findUp(".js-remark-view");if(!n||0===n.length)return!1;var r=e.findUp(".js-popup-before"),n=0<t.findUp(".js-down-btn").length,t=Often.getAttrs(e);t[0].FILE_NAME=$.trim(e.find(".js-file-title").text()),t[0].COLABO_SRNO=r.attr("data-project-srno"),t[0].COLABO_COMMT_SRNO=r.attr("data-post-srno");n=n?"SAVE":"DOC-VIEWER";FileUtil.openFile(n,t)},isStickyRemarkAreaAndAction:function(t){var e=t.findUp("#postPopup"),t=t.findUp(".js-edit-layer");return 0!==t.length&&0!==e.length&&(!!t.hasClass("sticky")&&void e.find(".post-card-scroll").moveToBottom(!0))}};function n(t,e){t.FILE_NAME=t.FILE_NM;var n=ImageUtil.isImageType(t),r=n?PostComponent.getImgHtml("<li>"+$("#imageComponent").html()+"</li>",t):PostComponent.getFileHtml("<li>"+$("#fileComponent").html()+"</li>",t),i=n?"img":"file",o=20<=e.find(".js-post-file").length,t=20<=e.find(".js-post-img").length;if(o&&"file"==i||t&&"img"==i)return Often.toast("error",i18next.t("front.alert.uploadWarning",{val:n?"$t(dictionary.image)":"$t(dictionary.file)",count:20})),!0;i=e.find(".js-remark-upload-"+i);""===i.html()&&n&&i.append("<div>&nbsp;</div>\n");n=$(r);i.append(n).focus(),n.offset().top>window.innerHeight&&(e=(r=0<e.parents("#postPopup").length?e.parents(".post-card-scroll"):e.parents(".layer-scroll")).scrollTop(),r.scrollTop(e+200+(n.offset().top-window.innerHeight))),i.find(".js-down-btn").css("display","none"),i.find(".js-del-btn").css("display","block")}function m(t){if(void 0===t)return"";var a=$("#remarkItem").html(),s=Authority.isAuthorityCheck("REMARK"),d="";return $.each(t,function(t,e){var n="0"!==Often.null2Void(e.EMT_CNT,"0"),r=e.ATCH_REC||e.REMARK_ATCH_REC,i=e.IMG_ATCH_REC||e.REMARK_IMG_ATCH_REC;"\n"===e.REMARK_CNTN[e.REMARK_CNTN.length-1]&&(e.REMARK_CNTN=e.REMARK_CNTN.slice(0,-1));var o="Y"===Often.null2Void(e.EMT_SELF_YN,"N");d+=ListHelper.replaceJson(a,$.extend({},{"data-remark-srno":e.COLABO_REMARK_SRNO,position:"",name:e.RGSR_NM,date:Tz.momentTimeZone(e.RGSN_DTTM,"type1"),contents:TagConvert.db2HtmlStringByRemark(e.REMARK_CNTN),"like-count":e.EMT_CNT,profile:ListHelper.setProfile(e.PRFL_PHTG),"like-yn":n?"on":"","file-area":function(t){if(void 0===t||0===t.length)return"";var n=$("#fileComponent").html(),r="";return $.each(t,function(t,e){r+=PostComponent.getFileHtml("<li>"+n+"</li>",e)}),r}(r),"image-area":function(t){if(void 0===t)return"";var n=$("#imageComponent").html(),r="";return $.each(t,function(t,e){r+=PostComponent.getImgHtml("<li>"+n+"</li>",e)}),r}(i),"modify-yn":"Y"===Often.null2Void(e.MODIFY_YN,"N")?"on":"","delete-yn":"Y"===Often.null2Void(e.DELETE_YN,"N")?"on":"","emt-self-yn":"Y"===Often.null2Void(e.EMT_SELF_YN,"N")?"on":"","emt-button-text":i18next.t(o?"front.common.unDoLike":"dictionary.like"),"admin-write-yn":s?"":"admin","comment-user-id":e.RGSR_ID},f(s)))}),d}function f(t){var e=t?i18next.t("front.common.textLine"):i18next.t("front.common.adminWriteOnly",{type:"$t(dictionary.comment)"});return{"remark-placeholder":e,"remark-contenteditable":t}}function t(t){var e;Mention.keyUpCheckMention(t),KeyCheck.isKey(t,"BACK")||KeyCheck.isKey(t,"DELETE")?""===(e=$(t.target).findUp(".js-remark-area")).text()&&e.empty():(t.shiftKey&&KeyCheck.isKey(t,"ENTER")||!KeyCheck.isKey(t,"ENTER"))&&0!==$(t.target).findUp(".js-edit-layer").length&&$(t.target).findUp("#postPopup").find(".post-card-scroll").moveToBottom(!1)}function e(t){KeyCheck.isStyleCommand(t)&&t.preventDefault();var e=(p=$(t.target)).parents(".js-remark-form").hasClass("admin");if(!Authority.isAdminAuthorityCheckAndAction(e,t)){var n=p.findUp("#postPopup"),r=p.findUp("#detailUl");t.stopPropagation();var i=t.ctrlKey,o=t.shiftKey,a=KeyCheck.isKey(t,"ENTER"),s=KeyCheck.isKey(t,"ESC"),d=0<p.findUp(".js-remark-edit").length;if(d&&s)return e=(l=p).findUp(".remark-item"),s=e.find(".js-remark-view"),f=e.find(".js-remark-edit"),m=Often.getAttrs(s.find(".js-post-file")),e=Often.getAttrs(f.find(".js-post-file")),m=JSON.stringify(m)!==JSON.stringify(e),e=Often.getAttrs(s.find(".js-post-img")),f=Often.getAttrs(f.find(".js-post-img")),f=JSON.stringify(e)!==JSON.stringify(f),s=s.find(".js-remark-text").html(),l=l.html(),l=s!==l,void(m||f||l?(PopupDraw.drawConfirm({contents:{main:i18next.t("front.alert.leaveWriting")},callback:{submit:function(){R(p.findUp(".remark-item")),PopupDraw.closePopup()},cancel:function(){PopupDraw.closePopup(),p.focus()}}}),$("#tempPopup").focus()):R(p.findUp(".remark-item")));var m=p.findUp(".js-remark-layer"),f=m.find(".js-remark-upload-file li"),l=m.find(".js-remark-upload-img li");if(n.find("#innerCommonPopup[data-code=mention]").is(":visible")||r.find("#innerCommonPopup[data-code=mention]").is(":visible"))return a&&229===O&&(Often.getClientOSInfo().isMac||Often.isBrowser("ie"))&&(u=!0),O=t.keyCode,void Mention.keyDownArrow(t);if(!i&&!o&&a){if(t.preventDefault(),O=0,u)return void(u=!1);f=0<f.length,l=0<l.length;return""!==$.trim(p.text())||f||l?void UploadHandler.isUploadingAndCallback(function(){!function(e,t){var i="",o=$(e[0].childNodes).length;{var a;t&&(a="",$.each($(e[0].childNodes),function(t,e){var n=$(e),r=0===t||"#text"!==a.nodeName&&-1<a.innerHTML.indexOf("\n"),t=t!==o-1&&"<br>"===e.innerHTML;n.hasClass("js-hidden-component")||("DIV"!==e.nodeName||""===i||r||(i+="\n"),t||(i+=TagConvert.html2DbStringByPost(e.outerHTML||e.innerHTML||e.textContent)),a=e)}))}var n=TagConvert.html2DbStringByRemark(t?i:e.html());n+="\n"===n[n.length-1]?"":"\n";var r=e.findUp(".detail-item"),s=e.findUp(".js-remark-layer"),d=s.find(".js-post-img"),m=s.find(".js-post-file"),f=r.attr("data-project-srno"),l=r.attr("data-post-srno"),s="",r="",p="";p=t?(r=RestApi.PUT.COLABO2_REMARK_U101,s=e.findUp(".remark-item").attr("remark-srno"),OftenCode.EDIT):(r=RestApi.POST.COLABO2_REMARK_C101,s="",OftenCode.CREATE);var u={COLABO_SRNO:f,COLABO_COMMT_SRNO:l,COLABO_REMARK_SRNO:s,CNTN:n,COMMT_ATCH_REC:Often.getAttrs(m),COMMT_EDITOR_REC:Often.getAttrs(d),packetOption:Ajax.OPTION.PREVENT_EXECUTE};Mention.clearMention(),Ajax.executeApi(r,u,function(t){e.text(""),c(e,$.extend({},u,{MODE:p,ORDER_TYPE:OftenCode.EQUAL,SRCH_COLABO_REMARK_SRNO:t.COLABO_REMARK_SRNO})),p===OftenCode.CREATE&&UpdateElements.autoUpdateElem({PROJECT_SRNO:u.COLABO_SRNO,POST_SRNO:u.COLABO_COMMT_SRNO,REMARK_SRNO:t.COLABO_REMARK_SRNO,REMARK_UPDATE:!0})})}(p,d)}):void Often.toast("error",i18next.t("front.common.enterContext",{val:"$t(dictionary.comment)"}))}m.hasClass("sticky")&&0!==$(t.target).findUp(".js-edit-layer").length&&(n.find(".post-card-scroll").moveToBottom(!0),m.removeClass("sticky"))}}function c(a,s,d){Ajax.executeApi(RestApi.GET.COLABO2_REMARK_R101,s,function(t){var e=t.COLABO_REMARK_REC,n=e&&0<e.length,r=s.MODE===OftenCode.MORE,i="N"===Often.null2Void(t.NEXT_YN,"N"),o=2<Number(t.TOT_CNT),e={"remark-count":n?t.TOT_CNT:"0","remark-over-yn":r?i?"":"on":o?"on":"","remark-area":n?m(e):""};l(s.MODE,a,e),"function"==typeof d&&d()})}function l(t,e,n){var r=e.findUp(".detail-item"),i=t===OftenCode.MORE,o=t===OftenCode.EDIT,a=t===OftenCode.DELETE;if(i||a)return r.find(".js-remark-prev-button").removeClass("on").addClass(n["remark-over-yn"]),void r.find(".post-comment-group").prepend(n["remark-area"]);if(o)return e.findUp(".remark-item").replaceWith(n["remark-area"]),void Often.toast("success",i18next.t("front.alert.successfullyChange",{status:"$t(dictionary.edit)"}));e=e.findUp(".js-remark-form");"UPDATE"!==t&&(e.find(".js-remark-upload-file").empty(),e.find(".js-remark-upload-img").empty()),r.find(".comment-count").text(n["remark-count"]),r.find(".post-comment-group").append(n["remark-area"])}function R(t){t.find(".js-remark-view").addClass("on"),t.find(".js-remark-edit").removeClass("on")}}();
"use strict";var ItemSchedule=function(){var T,C,m={PG_NO:0,PG_PER_CNT:10,NEXT_YN:"Y",ZERO_FIRST:!0};return{getLookHtml:function(e,t){e||(t=!0);e=e||{};var n=VideoConference.isVC(e.VC_SRNO),a=e.ATTENDENCE_REC&&0<e.ATTENDENCE_REC.length;return ListHelper.replaceJson($("#scheduleComponent").html(),e&&$.extend({},t?"":{"place-display":ListHelper.setDisplay(""!==e.PLACE,"table"),"video-display":ListHelper.setDisplay(n),"video-active":n?"d-none":"","alam-display":ListHelper.setDisplay("0"!==e.PRE_ALAM),"memo-display":ListHelper.setDisplay(""!==e.MEMO),"map-display":ListHelper.setDisplay(""!==e.LOCATION,"inline-block"),"attendance-count-display":ListHelper.setDisplay(0!==e.ATTENDENCE_REC.length),"attendance-select-display":ListHelper.setDisplay(i(e.ATTENDENCE_REC).isAttend),"participate-status":"1"===i(e.ATTENDENCE_REC).status?"on":"","absence-status":"2"===i(e.ATTENDENCE_REC).status?"on":"","undetermined-status":"3"===i(e.ATTENDENCE_REC).status?"on":"","map-link":GoogleMap.getGoogleMapLink(e.LOCATION,e.PLACE)},{"attendance-list":function(t){return t&&0!==t.length?JSON.stringify(e.ATTENDENCE_REC).replace(/"/gi,"'"):""}(e.ATTENDENCE_REC),addAttendenceText:i18next.t(a?"front.common.change":"front.common.add",{val:"$t(back.LangConvert.participant)"}),attendance:o(e.ATTENDENCE_REC),VC_SRNO:e.VC_SRNO,"attendance-count":e.ATD_ATTEND_CNT,"nonattendance-count":e.ATD_NONATTEND_CNT,"undefined-count":e.ATD_UNDEFINED_CNT,place:e.PLACE,memo:TagUtil.LinkData2Tag(Often.null2Void(e.MEMO)),"map-image-src":'src="'+GoogleMap.convertGoogleMapImage(e.LOCATION)+'"',alarm_time:r(e.PRE_ALAM)}))},initEdit:function(o,r){l(o,!0),o.find("#attendanceCount, #videoSpan, #placeSpan, #urlPreview, #alarmSpan").addClass("d-none"),o.find(".add-manager-button, #videoButton, #placeButton,#placeInput, #editDateTimeArea, #alarmButton").removeClass("d-none"),o.find("#placeSpan").css("cursor","default"),o.find("#attendanceSelect").remove(),r&&r.SCHD_REC&&o.find("#videoSpan").attr("data-vc-srno",r.SCHD_REC[0].VC_SRNO);d(),function(t){var e;"ADD"===t.attr("data-code")&&(e=[{ATTENDENCE_ID:_USER_ID,ATTENDENCE_NM:_USER_NM,JBCL_NM:"",PRFL_PHTG:_PRFL_PHTG,RCVR_CORP_NM:"",RCVR_DVSN_NM:"",RQST_USE_INTT_ID:_USE_INTT_ID,STATUS:"1"}],WorkerPopup.setSubmitRecord(e),t.find(".js-attendance-input").attr("data-attendance",JSON.stringify(e)),v(e))}(o),Often.isFunc(Func.CLOUD.INVITATION_POPUP)&&function(){var t="VIEW"===o.attr("data-code");o.find(".js-worker-input").css("display",t?"none":"inline-block"),o.find(".js-worker-button").css("display",t?"inline-block":"none"),t||WorkerPopup.addInputWorkerEvent(o,e)}();Often.isFunc(Func.ENTER.GOOGLE_MAP)&&function(){var e=o.find("#placeInput");GoogleMap.addSearchEvent(e,function(t){e.val(t.PLACE),o.find("#LOCATION").val(t.LOCATION),o.find("#mapImage").attr("src",GoogleMap.convertGoogleMapImage(t.LOCATION)),o.find("#placeSpan").fadeIn(200)})}();function d(t){var e=new Date,n=t&&0<t.SCHD_REC.length,a=n&&"Y"===t.SCHD_REC[0].ALL_DAY_YN,i=n?t.SCHD_REC[0].STTG_DTTM:Often.getDateFormat(e,"MINUTES");e.setHours(e.getHours()+1);e=n?t.SCHD_REC[0].FNSH_DTTM:Often.getDateFormat(e,"MINUTES"),i=Tz.momentConversion("convertOnly","type19",i),e=Tz.momentConversion("convertOnly","type19",e);o.find(".js-start-flatpickr .js-pickr-date").val(i),o.find(".js-start-flatpickr .js-pickr-text").val(Tz.momentConversion("convertOnly",a?"type5":"type6",i)),o.find(".js-end-flatpickr .js-pickr-date").val(e),o.find(".js-end-flatpickr .js-pickr-text").val(Tz.momentConversion("convertOnly",a?"type5":"type6",e))}["memo"].forEach(function(t){PostPopup.initButtonByCode(o,t)}),0!==Object.keys(r).length&&function(){var t,e=r.SCHD_REC[0],n="Y"===e.ALL_DAY_YN,a=""!==e.LOCATION,i={"#postTitle":e.TTL,"#alarmButton":e.PRE_ALAM,"#LOCATION":e.LOCATION,"#placeInput":e.PLACE};for(t in o.find("#ondDay").prop("checked",n?"checked":""),l(o,!0),i)o.find(t).val(i[t]);d(r),o.find("#memoButton").html(e.MEMO.replace(/\n/gi,"</br>")),o.find("#ondDay").prop("checked",n?"checked":""),e.ATTENDENCE_REC&&0<e.ATTENDENCE_REC.length&&(o.find(".js-attendance-input").attr("data-attendance",JSON.stringify(e.ATTENDENCE_REC)),v(e.ATTENDENCE_REC));VideoConference.isVC(e.VC_SRNO)&&((n=$("#postPopup").find("#videoButton")).addClass("d-none"),n.next("#videoSpan").removeClass("d-none"),n.next("#videoSpan").find(".remove-button").removeClass("d-none"),n.next("#videoSpan").find("#zoomUrlCopy").addClass("d-none"));a&&(o.find("#mapImage").attr({src:GoogleMap.convertGoogleMapImage(e.LOCATION),onerror:"this.src='"+ImageUtil.removeDomain("GOOGLE-MAP")+"'"}),o.find("#placeInput, #placeSpan").removeClass("d-none"),o.find("#placeButton").addClass("d-none"))}()},keyUpScheduleInput:function(t){t=$(t.target);!function(t){if(!t.is("#placeInput"))return!1;if(!Often.isFunc(Func.ENTER.GOOGLE_MAP))return Often.toast("error",i18next.t("front.alert.errorTryAgain")),!0;var e=t.nextAll("#placeSpan"),n=e.find("#mapImage");return GoogleMap.checkPlaceInput(t,e,n),!0}(t)&&function(t){!t.is("#memoButton")||(t.text().length<=1e3||(Often.toast("error","메모는 1000자 까지만 입력가능합니다."),t.text(t.text().slice(0,1e3))))}(t)},isScheduleEvent:function(t){var e=t.findUp(".js-popup-before");return!!e.find(".js-post-nav").hasClass("schedule")&&(C="VIEW"===e.attr("data-code"),!!function(t){var e=t.findUp(".js-popup-before");return 0!==(t.is("#videoButton")?t:t.parent("#videoButton")).length&&(LimitGuest.isLimitGuest("video",!1)?void 0:(VideoConference.isZoomSynchronized(function(){t.addClass("d-none"),t.next("#videoSpan").removeClass("d-none"),t.next("#videoSpan").find(".remove-button").removeClass("d-none"),t.next("#videoSpan").find("#zoomUrlCopy").addClass("d-none"),e.find(".oneday").addClass("line-through").addClass("prevent-events")},VideoConference.alertRequiredZoomSync),!0))}(t)||(!!function(t){var e=t.findUp("#videoSpan"),n=t.findUp(".remove-button"),t=t.findUp(".js-popup-before");if(0===e.length||0===n.length)return!1;e.prev("#videoButton").removeClass("d-none"),e.addClass("d-none"),t.find(".oneday").removeClass("line-through").removeClass("prevent-events")}(t)||(!!n(t)||(!!function(t){if(0<!t.findUp(".js-attendance-layer").length)return!1;var e=t.findUp("#postPopup"),n=t.findUp(".js-popup-before"),d=n.attr("data-project-srno"),s=n.attr("data-post-srno"),a=n.find(".remark-item:last").attr("remark-srno");if(0<t.findUp(".js-more-registration-button").length)return ListHelper.initPageData(m),f(t,!0),!0;var i=t.findUp(".js-worker-button");if(0<i.length)return Authority.isAuthorityCheck("WRITE",d)?(Often.isFunc("INVITATION_POPUP")?InvitationPopup.openParticipantPopup(n.attr("data-post-srno")):WorkerPopup.toggleWorkerPopup(n,function(i){var o=[],r=[];if("ADD"===PostCondition.getPopupMode(e))return t();(function(){var e=c();if($.each(e,function(t,n){var a=!0;$.each(i,function(t,e){if(e.ATTENDENCE_ID===Often.null2Void(n.ATTENDENCE_ID,n.USER_ID))return a=!1}),a&&r.push(n)}),$.each(i,function(t,n){var a=!0;$.each(e,function(t,e){if(n.ATTENDENCE_ID===Often.null2Void(e.ATTENDENCE_ID,e.USER_ID))return a=!1}),a&&o.push(n)}),!C)t()})(),C&&PopupDraw.drawConfirm({contents:{main:i18next.t("front.common.ask",{val:"$t(dictionary.participant)",status:"$t(dictionary.edit)"})},callback:{submit:function(){!function(t,e){Ajax.executeApi(RestApi.PUT.FLOW_SCHD_ATD_U001,e,t)}(t,{COLABO_SRNO:n.attr("data-project-srno"),COLABO_COMMT_SRNO:n.attr("data-post-srno"),INSERT_ATD_REC:o,DELETE_ATD_REC:r})}}});function t(t){if(!C)return e.find(".js-registration").remove(),n.find(".js-attendance-input").attr({"data-attendance":JSON.stringify(i),"data-attendance-insert":JSON.stringify(o),"data-attendance-delete":JSON.stringify(r)}),void v(i);UpdateElements.autoUpdateElem({PROJECT_SRNO:d,POST_SRNO:s,REMARK_SRNO:a,REMARK_UPDATE:!0});t={OBJECT:"ATTENDENCE",ATTENDENCE_REC:t.ATTENDENCE_REC};UpdateElements.autoUpdateElem({PROJECT_SRNO:n.attr("data-project-srno"),POST_SRNO:n.attr("data-post-srno"),SCHEDULE_DATA:t})}},i,c),!0):void Often.toast("error","관리자만 글/댓글 작성 가능한 게시물입니다.");var o=t.findUp(".js-remove-worker");if(0<o.length){var i=c(),r=function(){var t=n.find(".js-attendance-input");return JSON.parse(Often.null2Void(Often.null2Void(t.attr("data-attendance-delete"),"[]").replace(/'/gi,'"'),"{}"))}(),p=0;return i.forEach(function(t,e){t.ATTENDENCE_ID===o.parents(".js-registration").attr("data-worker-id")&&(r.push(t),p=e)}),i.splice(p,1),n.find(".js-attendance-input").attr("data-attendance",JSON.stringify(i)),n.find(".js-attendance-input").attr("data-attendance-delete",JSON.stringify(r)),o.parents(".js-registration").remove(),!0}if(0<t.findUp(".js-manager-group").length)return C?(ListHelper.initPageData(m),f(t,!0)):(t=t.findUp(".js-registration").attr("data-worker-id"),Profile.drawProfilePopup(t)),!0;function c(){var t=n.find(".js-attendance-input");return JSON.parse(Often.null2Void(t.attr("data-attendance").replace(/'/gi,'"'),"{}"))}function l(t){var n="",a=$("#participantItemLi").html();return $.each(t,function(t,e){n+=ListHelper.replaceJson(a,{id:e.ATTENDENCE_ID,name:e.ATTENDENCE_NM,profile:ListHelper.setProfile(e.PRFL_PHTG),gubun:""!==e.STATUS?ScheduleCode.STATUS._GB[e.STATUS-1]:"default",badge:""!==e.STATUS?i18next.t(ScheduleCode.STATUS._TEXT[e.STATUS-1]):"","badge-display":ListHelper.setDisplay(""!==e.STATUS,"inline-block"),position:e.JBCL_NM,company:e.CMNM,affiliation:e.DVSN_NM})}),n}function u(t){var e=$(t.target);T&&clearTimeout(T),T=setTimeout(function(){ListHelper.initPageData(m),$("#confirmationPopup").find("#participantUl").empty(),f(e,!1)},200)}function f(n,a){"N"!==m.NEXT_YN&&Ajax.executeApi(RestApi.GET.FLOW_SCHD_ATD_R02,$.extend({},m,{COLABO_SRNO:d,COLABO_COMMT_SRNO:s,SEARCH_TEXT:Often.null2Void(n.val())}),function(t){a&&$("body").prepend($("#confirmationPopupDiv").html());var e=$("#confirmationPopup");e.find("#participantUl").drawListHelper({pageData:m,nextYn:t.NEXT_YN,records:t.ATTENDENCE_REC,noDataHtml:ListHelper.getNoDataHtml("search"),callback:{click:E,item:l,scroll:function(){f(n,!1)}}}),a&&((e=e).find("#confirmationPopupSearchText").off("keyup").on("keyup",u),e.off("click").on("click",function(t){t=$(t.target);(0===t.findUp("#confirmationInnerPopup").length||0<t.findUp("#confirmationPopupCloseBtn").length)&&N()}))})}function E(t){t=$(t.target).findUp(".js-participant-item");0<t.length&&Profile.drawProfilePopup(t.find(".js-user-id").attr("id"))}}(t)||(!!a(t)||(!!function(t){t=t.findUp("#placeSpan, .js-place-span");if(0===t.length)return!1;t=t.attr("data-map-link");""!==t&&window.open(t,"google_blank");return!0}(t)||void 0))))))},isOnedayButtonAndAction:n,isAttendanceSelectAndAction:a,keyDownCheckPlaceInput:function(t){return!!$(t.target).is("#placeInput")&&($("#postPopup").focus(),!0)},keyDownScheduleInput:function(e){!function(t){if(!t.is("#memoButton"))return;if(KeyCheck.isStyleCommand(e))e.preventDefault()}($(e.target))},checkSendEditPush:function(){PopupDraw.drawConfirm({contents:{main:i18next.t("front.alert.remindMembers"),submit:i18next.t("dictionary.yes"),cancel:i18next.t("dictionary.no")},callback:{submit:t}})},getAttendanceItemComponentHtml:o,getAttendInfo:i,closeAttendancePopup:N};function i(t){var n={isAttend:!1,status:0};return $.each(t,function(t,e){e.ATTENDENCE_ID===_USER_ID&&(n.isAttend=!0,n.status=e.STATUS)}),n}function o(n){if(!n)return"";var a="",i="VIEW"!==Often.null2Void($("#postPopup").attr("data-code"),"VIEW"),o=$(i?"#attendanceEditItem":"#attendanceViewItem").html();return n.forEach(function(t,e){e<5||i?a+=ListHelper.replaceJson(o,{id:t.ATTENDENCE_ID,name:t.ATTENDENCE_NM,profile:ListHelper.setProfile(t.PRFL_PHTG),"attendance-status":t.STATUS?ScheduleCode.STATUS._GB[t.STATUS-1]:"default"}):n.length===e+1&&(a+=$("#attendanceMoreItem").html())}),a}function e(n){var t=$("#postPopup"),e=t.find(".js-manager-group"),a=!1;if($.each(e.find(".js-registration"),function(t,e){if($(e).attr("data-worker-id")===n[0].ATTENDENCE_ID)return!(a=!0)}),a)return Often.toast("error","이미 등록된 참여자입니다.");var i=JSON.parse(Often.null2Void(t.find(".js-attendance-input").attr("data-attendance").replace(/'/gi,'"'),"{}"));i.push(n[0]),e.append(o(n)),t.find(".js-attendance-input").attr("data-attendance",JSON.stringify(i)),WorkerPopup.closeWorkerPopup()}function v(t){$("#postPopup").find(".js-attendance-layer .manager-group").append(o(t))}function l(t,e){var n=t.find("#ondDay").is(":checked"),a=e&&0!=Often.null2Void(t.find("#videoSpan").attr("data-vc-srno"),"0"),e=[],i="";n?(e=[0,1440,2880,10080],t.find("#videoButton").addClass("prevent-events").addClass("line-through")):(e=[0,10,30,60,120,180,1440,2880,10080],t.find("#videoButton").removeClass("prevent-events").removeClass("line-through")),e.forEach(function(t){(!n||n&&(t<=0||1440<=t))&&(i+='<option value="'+t+'">'+r(t)+"</option>")}),a?t.find(".oneday").addClass("prevent-events").addClass("line-through"):t.find(".oneday").removeClass("prevent-events").removeClass("line-through"),t.find("#alarmButton").empty(),t.find("#alarmButton").append(i)}function n(t){var e=t.findUp(".js-schedule-date-layer");if(!e||0===e.length)return!1;var n,a,i,o,r,d,s=0<e.find("#ondDay:checked").length,p=t.findUp(".oneday"),c=$("#videoButton");return 0<p.length&&(s?(p.find("#ondDay").removeProp("checked"),s=!1,c.removeClass("prevent-events").removeClass("line-through")):(p.find("#ondDay").prop("checked","checked"),s=!0,c.addClass("prevent-events").addClass("line-through")),l(t.parents("#postPopup"))),n=s,p=(a=e).find(".js-start-flatpickr"),c=a.find(".js-end-flatpickr"),s=p.find(".js-pickr-date").val(),a=c.find(".js-pickr-date").val(),p.find(".js-pickr-text").val(Tz.momentConversion("convertOnly",n?"type5":"type6",s)),c.find(".js-pickr-text").val(Tz.momentConversion("convertOnly",n?"type5":"type6",a)),0<t.findUp(".js-pickr-layer").length&&(t=(a=e).find(".js-start-flatpickr"),e=a.find(".js-end-flatpickr"),r=a.find("#ondDay").is(":checked"),d=!1,DatePicker.makeFlatPickr({dateFormat:"YmdHi00",enableTime:!0,time_24hr:!0,plugins:[new confirmDatePlugin({confirmText:i18next.t("dictionary.select"),showAlways:!0},function(){var t,e,n,a;d||(t=(a=i.parents(".js-schedule-date-layer")).find(".js-start-flatpickr .js-pickr-date"),e=a.find(".js-start-flatpickr .js-pickr-text"),n=a.find(".js-end-flatpickr .js-pickr-date"),a=a.find(".js-end-flatpickr .js-pickr-text"),t.val(o.startDate),e.val(Tz.momentConversion("convertOnly",r?"type5":"type6",o.startDate)),n.val(o.endDate),a.val(Tz.momentConversion("convertOnly",r?"type5":"type6",o.endDate)),DatePicker.checkOverDate(e,o))})],minuteIncrement:Often.isFunc(Func.CLOUD.EDIT_TIME_TEXT)?1:10,startDate:t.find(".js-pickr-date").val(),endDate:e.find(".js-pickr-date").val(),inputObj:{start:t,end:e},allDay:r,rescheduling:!0,callback:{close:function(t,e,n){i=t,o=e,d=n}}})),!0}function a(t){var d=t.findUp("#attendanceSelect");if(0===d.length||!t.is("button"))return!1;if(t.hasClass("on"))return!0;var e,s=t.parents(".detail-item").attr("data-project-srno"),p=t.parents(".detail-item").attr("data-post-srno"),c=t.parents(".detail-item").find(".remark-item:last").attr("remark-srno"),l=0;return t.hasClass("participate")&&(l=1),t.hasClass("absence")&&(l=2),t.hasClass("undetermined")&&(l=3),e={COLABO_SRNO:s,COLABO_COMMT_SRNO:p,STATUS:l,packetOption:Ajax.OPTION.PREVENT_EXECUTE},Ajax.executeApi(RestApi.PUT.FLOW_SCHD_ATD_U002,e,function(){function t(){return 1===n?"participate":2===n?"absence":3===n?"undetermined":""}var e,n,a,i,o,r;n=l,a=(e=d).find(".on").attr("data-status"),i=e.prev().find("#attendanceCount ."+a+" em"),o=e.prev().find("#attendanceCount ."+t()+" em"),r=e.prev().find('.js-registration[data-worker-id="'+_USER_ID+'"]'),i.text(parseInt(i.text())-1),o.text(parseInt(o.text())+1),e.find("button").removeClass("on"),e.find("."+t()).addClass("on"),r.removeClass(a).addClass(t()),UpdateElements.autoUpdateElem({PROJECT_SRNO:s,POST_SRNO:p,REMARK_SRNO:c,REMARK_UPDATE:!0})}),!0}function t(){var t=JsonMaker.getPostJson();Ajax.executeApi(RestApi.POST.COLABO2_PUSH_C001,{COLABO_SRNO:t.COLABO_SRNO,COLABO_COMMT_SRNO:t.COLABO_COMMT_SRNO,packetOption:Ajax.OPTION.PREVENT_EXECUTE},function(){Often.toast("success",i18next.t("front.alert.sendMessageToMemers"))})}function N(){$("#confirmationPopup").remove()}function r(t){if(!t||0===Number(t))return i18next.t("dictionary.none");t=t<60?i18next.t("front.common.js-minute",{count:t}):t<1440?i18next.t("front.common.js-hour",{count:t/60}):i18next.t("front.common.day",{count:t/1440});return i18next.t("front.common.scheduleReminder",{time:t})}}();
"use strict";var ItemSubtask=function(){var i,l,e,d,f;return{initEdit:function(t){!function(t){$.each(t,function(t,i){var r;$(i).hasClass("ui-sortable")&&$(i).sortable({handle:".drag-button",cursorAt:{top:5,left:5},scroll:!1,tolerance:"pointer",placeholder:"document-item-highlight",opacity:.6,start:function(t,s){$(i).sortable("refreshPositions")},helper:function(t,s){b("ALL");var e=s.clone();$(e).css("opacity","0.3"),r=e.insertAfter(s);e=$(s);return e.hasClass("file-item")||e.css("transform","scale(0.5) translate(-50%, -50%)"),e.css("display","inline-block"),s.clone()},stop:function(t,s){var s=$(s.item),e=s.findUp(".js-popup-before");s.hasClass("file-item")||s.css("transform",""),s.css("display","block"),r&&r.remove();var a,n=[],s="VIEW"===e.attr("data-code");a=$(i).find(".js-subtask-li"),$.each(a,function(t,s){$(s).attr("index")!==t&&(n.push({TASK_SRNO:$(s).attr("task-srno"),OTPT_SQNC:t+1}),$(s).attr("index",t))}),s&&Ajax.executeApi(RestApi.PUT.FLOW_SUBTASK_U001,{COLABO_SRNO:e.attr("data-project-srno"),COLABO_COMMT_SRNO:e.attr("data-post-srno"),TASK_REC:n,packetOption:Ajax.OPTION.PREVENT_EXECUTE},function(){Often.toast("info","하위 업무 순서를 변경했습니다.")})}})})}(t.find(".js-subtask-ul"))},initEditSubtask:n,getLookHtml:function(t){var s;t&&0<t.length&&(s=t.length);return Often.isFunc("SUB_TASK")?ListHelper.replaceJson($("#subTaskAreaItem").html(),{subtask_count:s,SUBTASK_LIST:a(t),EDIT_LAYER:$("#subtaskInputItem").html()}):""},getCompHtml:a,drawSubtaskLi:p,makeSubtaskRecord:c,makePriorityHtml:r,getSubtaskJson:k,addAndDrawSubtask:_,getSubtaskCount:u,isSubtask:function(t){return t&&t.UP_LINK_TASK_REC&&0<t.UP_LINK_TASK_REC.length},isSubTaskClickEvent:function(t){var s=t.findUp(".js-subtask-area");return!(!s||0===s.length)&&(i=t.findUp(".js-popup-before"),d=0<t.findUp(".js-subtask-edit-area").length,l="VIEW"===i.attr("data-code"),e="EDIT"===i.attr("data-code"),void(f=t.findUp(".js-subtask-li").attr("task-srno")),!!function(s){var t=s.findUp(".js-subtask-enter-button");if(!t||0===t.length)return!1;var e=s.findUp(".js-subtask-edit-layer"),t=t.findUp(".js-subtask-li"),t=Validation.checkInput(t.find(".js-subtask-input"));0<Object.keys(t).length?(Often.toast("error",t.errorMessage),t.errorObj.focus()):(_(function(t){p(e,t),u(s),!l||ViewChanger.isPage("task")&&UpdateElements.autoUpdateElem()},c(e,!0)),n(e))}(t)||(!function(t){return!(t!==_USER_ID&&!Authority.isAuthorityCheck("WRITE")&&!e)||(Often.toast("error","관리자만 글/댓글 작성 가능한 게시물입니다."),!1)}(function(t){return Often.null2Void(t.findUp(".detail-item").attr("data-rgsr-id"))}(t))||(!!function(t){var e=t.findUp(".js-subtask-status-layer");if(!e||0===e.length)return!1;var s=t.findUp(".js-subtask-li"),a=t.findUp(".js-subtask-status-button"),n=t.findUp(".js-status-setting-button"),i=e.find(".js-status-setting-layer"),t=i.is(":visible"),r=n.attr("data_status_code"),o=DetailCode.STATUS._GB[r],u=i18next.t(DetailCode.STATUS._TEXT[r]);if(0<n.length)return ItemTask.drawUpdateTask({OBJECT:"STTS",TASK_SRNO:f,VALUE:r},function(){var t=e.parents(".js-subtask-li"),s=0<t.parents(".js-subtask-edit-layer").length;s||"2"!==r?s||"3"!==r?s?t.attr("class","subtask-input-area js-subtask-li"):t.attr("class","js-subtask-li"):t.attr("class","js-subtask-li hold"):t.attr("class","js-subtask-li finished");e.find(".js-subtask-status-button").attr({class:"js-subtask-status-button js-task-state subtask-button subtask-status "+o,data_status:r}).text(u)},l&&!d,s),!0;b(t?"ALL":"STATUS"),t||($(".js-status-setting-layer").css("display","none"),a=T(a,i),i.css(a));return!0}(t)||(!!function(t){var s=t.findUp(".js-add-subtask-button");if(!s||0===s.length)return!1;if(LimitGuest.isLimitGuest("subtask"))return!0;t=t.findUp(".js-subtask-area");return t.addClass("on"),t.find(".js-subtask-edit-layer .js-subtask-input").focus(),!0}(t)||(!!function(t){var s=t.findUp(".js-subtask-date-layer");if(!s||0===s.length)return!1;b("ALL");t=t.findUp(".js-pickr-layer");return t.findUp(".js-subtask-li").addClass("active"),function(i){var r,o,u=i.findUp(".js-subtask-li"),t=i.findUp(".js-subtask-date-layer"),a=!1,s=Tz.roundMomentByMinutes(10),e=s.split(" ")[0],s=s.split(" ")[1];DatePicker.makeFlatPickr({defaultHour:e,defaultMinute:s,dateFormat:"YmdHi00",enableTime:!0,time_24hr:!0,dateVer:!0,minuteIncrement:Often.isFunc(Func.CLOUD.EDIT_TIME_TEXT)?1:10,startDate:t.attr("data_start_dt"),endDate:t.attr("data_end_dt"),inputObj:{end:i},callback:{close:function(t,s,e){r=t,o=s,a=e,i.findUp(".js-subtask-li").removeClass("active"),a||ItemTask.drawUpdateTask({OBJECT:"END_DT",TASK_SRNO:f,VALUE:o},function(){var t=r.findUp(".js-subtask-date-layer"),s=t.find(".js-subtask-date-button"),e=t.find(".js-subtask-date-text"),a=8<o.length,n=Tz.momentTimeZone(o,a?"type6":"type5"),i=Often.isSameDay(o);i?t.addClass("js-mouseover"):t.removeClass("js-mouseover");t.attr("data_end_dt",o),t.attr("mouseover-text",n),e.css("display","inline-block").text(i?y(a,o):n),s.css("display","none"),DatePicker.checkOverDate(e,o)},l&&!d,u)},remove:function(t,s){var e=t.find(".js-flatpickr-remove-button"),a=s.findUp(".js-subtask-date-layer");function n(){s.find(".js-subtask-date-text").css("display","none"),s.find(".js-subtask-date-button").css("display","").addClass("off"),s.find(".js-subtask-date-input").val(""),a.attr("data_end_dt","").attr("mouseover-text",""),t.remove(),i.findUp(".js-subtask-li").removeClass("active")}""!==Often.null2Void(a.attr("data_end_dt"))?e.off("click").on("click",function(){ItemTask.drawUpdateTask({OBJECT:"END_DT",TASK_SRNO:f,VALUE:""},n,l&&!d,u)}):e.css("display","none")}}})}(t),!0}(t)||(!!function(t){var s=t.findUp(".js-subtask-li"),e=t.findUp(".js-priority-button:visible"),a=t.findUp(".js-priority-setting-button"),n=s.find(".js-priority-setting-layer");if(0===e.length&&0===a.length)return!1;var i=a.attr("data_priority_code"),t=n.is(":visible");if(0<a.length)return ItemTask.drawUpdateTask({OBJECT:"PRIORITY",TASK_SRNO:f,VALUE:i},function(){r(a)},l&&!d,s),b(),!0;b(t?"ALL":"PRIORITY"),t||(e=T(e,n),n.css(e),n.find(".js-priority-setting-button:first").focus());return!0}(t)||(!!function(t){var s=t.findUp(".js-subtask-worker-layer");if(!s||0===s.length)return!1;var e=$("#workerPopup").is(":visible"),a=t.findUp(".js-subtask-li"),n=t.findUp(".js-worker-button");b(e?"ALL":"WORKER"),0<n.length&&(e||t.findUp(".js-subtask-li").addClass("active"),WorkerPopup.toggleWorkerPopup(i,function(t){ItemTask.drawUpdateTaskWorker("EDIT",{TASK_SRNO:f,WORKER_REC:t},function(){o(s,t)},l&&!d,a)},n,function(){if(0===s.attr("data_worker_id_list").length)return[];var e=[],t=s.attr("data_worker_id_list").split(","),a=s.attr("data_worker_name_list").split(","),n=s.attr("data_worker_profile_list").split(",");return $.each(t,function(t,s){e.push({WORKER_ID:s,WORKER_NM:a[t],WORKER_PRFL_PHTG:n[t]})}),e}));return!0}(t)||(!!function(s){var e=s.findUp(".js-subtask-remove");if(!e||0===e.length)return!1;var t=s.findUp(".js-subtask-li");"Y"!==t.attr("data-del-yn")&&Often.toast("error","담당자 및 관리자만 삭제할 수 있습니다.");return function(e,a){if(!l&&!d)return e();PopupDraw.drawConfirm({contents:{main:i18next.t("front.common.ask",{val:"$t(dictionary.subTask)",status:"$t(dictionary.delete)"})},callback:{submit:function(){var t,s;t=e,s=a,Ajax.executeApi(RestApi.DELETE.FLOW_SUBTASK_D001,$.extend({},s),function(){t()})}}})}(function(){var t=s.findUp(".js-subtask-ul");e.findUp(".js-subtask-li").remove(),u(t)},{COLABO_SRNO:i.attr("data-project-srno"),COLABO_COMMT_SRNO:i.attr("data-post-srno"),TASK_SRNO:t.attr("task-srno")}),!0}(t)||(!!function(t){var s=t.findUp(".js-subtask-li"),t=0<t.findUp(".js-subtask-edit-area").length;if(!l||t||!s||0===s.length)return!1;t=s.attr("data-project-srno"),s=s.attr("data-post-srno");return PostPopup.togglePostView(t,s,"",DetailEvent.applySummarySlickImage),!0}(t)||void 0)))))))))},isEmptySubtaskArea:function(t){var s=t.find(".js-subtask-area"),e=0===s.length;if(e)return!0;var a=s.find(".js-subtask-edit-layer"),n=0===s.find(".js-subtask-ul .js-subtask-li").length,i=0===$.trim(a.find(".js-subtask-input").val()).length,r="0"===a.find(".js-subtask-status-button").attr("data_status"),t=""===a.find(".js-subtask-date-layer").attr("data_end_dt"),s=""===a.find(".js-subtask-priority-layer").attr("data_priority"),a=""===a.find(".js-subtask-worker-layer").attr("data_worker_id_list"),a=i&&r&&t&&s&&a;return e||n&&a},isSubtaskInputFocus:function(t){t=$(t.target).findUp(".js-subtask-input");if(t&&0<t.length)return!0},closeSubtaskPopup:b,getTodayTime:y,setSubtaskWorker:o,setSubtaskRemarkCount:function(t,s){t=$("#subtask-"+t);0!==t.length&&"0"!==Often.null2Void(s,"0")&&(t.find(".subtask-comment").css("display","inline-block"),t.find(".js-subtask-remark-count").text(s))}};function a(t,s){var m="",j=!Often.null2Void(s);return $.each(t,function(t,s){var e=DetailCode.STATUS._GB[Often.null2Void(s.STTS,"0")],a=i18next.t(DetailCode.STATUS._TEXT[Often.null2Void(s.STTS,"0")]),n=Often.null2Void(DetailCode.PRIORITY._CLASS[s.PRIORITY],""),i=Often.null2Void(s.END_DT,""),r=Often.null2Void(s.REMARK_CNT,"0"),o=Often.null2Void(s.WORKER_REC,[]),u=o.length-1,l="Y"===s.DELETE_YN||s.RGSR_ID===_USER_ID,d=!o||0===o.length,f=!i||""===i,p=!n||""===n,c=!o||0===o.length,k=!r||"0"===r,_=8<i.length,b=Often.isSameDay(s.END_DT),T=Tz.momentTimeZone(s.END_DT,_?"type6":"type5"),r=b?y(_,s.END_DT):T,T="2"===s.STTS?"finished":"3"===s.STTS?"hold":"";m+=ListHelper.replaceJson($("#subTaskItem").html(),$.extend({},s,{index:s.INDEX||t,status_code:e,status_text:a,end_dt_text:b?r:Tz.momentTimeZone(i,_?"type6":"type5"),priority_code:n,worker_id_list:O(o,"WORKER_ID"),worker_name_list:O(o,"WORKER_NM"),data_worker_profile_list:O(o,"WORKER_PRFL_PHTG"),thumbnail_image:ListHelper.setProfile(d?"thumbnail":o[u].WORKER_PRFL_PHTG),worker_count:0<o.length?"+"+u:"",worker_count_display:ListHelper.setDisplay(!d&&1<o.length,"inline-block"),date_off:f?"off":"",date_text_display:ListHelper.setDisplay(!f,"inline-block"),priority_off:p?"off":"",priority_icon_display:ListHelper.setDisplay(!p,"inline-block"),worker_off:c?"off":"",worker_icon_display:ListHelper.setDisplay(!c,"inline-block"),remark_display:ListHelper.setDisplay(j&&!k,"inline-block"),"mouseover-class":f||b?"js-mouseover":"","mouseover-date":f?i18next.t("front.common.add",{val:"$t(front.common.dueDate)"}):Tz.momentTimeZone(i,_?"type6":"type5"),"mouseover-priority":p?i18next.t("front.common.add",{val:"$t(front.common.priority)"}):i18next.t(DetailCode.PRIORITY._TEXT[s.PRIORITY]),"mouseover-worker":c?i18next.t("front.common.add",{val:"$t(dictionary.manager)"}):o.length+"명 - "+O(o,"WORKER_NM"),"status-class":T,readonly_yn:j?"readonly":"","dead-line-class":Often.isDeadlineExceeded(i)?"deadline-exceeded":"","del-yn":l?"Y":"N",remove_display:'style="display:'+(l?"":"none")+'" data'}))}),m;function O(t,e){if(!t)return"";var a=[];return $.each(t,function(t,s){a.push(s[e])}),a.toString()}}function r(t){var s=t.parents(".js-subtask-li").find(".js-subtask-priority-layer"),e=t.attr("data_priority_code"),a=DetailCode.PRIORITY._CLASS[e],n=Often.null2Void(a,"lv0"),t="lv0"===n,a=t?i18next.t("front.common.add",{val:"$t(front.common.priority)"}):i18next.t(DetailCode.PRIORITY._TEXT[e]);s.attr({data_priority:e,"mouseover-text":a}),s.find(".js-priority-button").css("display",t?"":"none"),s.find(".js-priority-level").attr({class:"js-priority-level icon-subtask-level js-priority-button "+n}).css("display",t?"none":"inline-block")}function o(t,s){var e,a=[],n=[],i=[],r=s?s.length-1:0,o=0<s.length;$.each(s,function(t,s){a.push(s.WORKER_ID),n.push(s.WORKER_NM),i.push(s.PRFL_PHTG)}),t.attr({data_worker_id_list:a.toString(),data_worker_name_list:n.toString(),data_worker_profile_list:i.toString(),"mouseover-text":o?i18next.t("front.common.people",{count:s.length})+" - "+n.toString():i18next.t("front.common.add",{val:"$t(dictionary.manager)"})}),o?(e=Often.null2Void(s[r].PRFL_PHTG,s[r].WORKER_PRFL_PHTG),t.find(".js-worker-box").css("display","none"),t.find(".js-worker-thumb").css("display","inline-block"),t.find(".js-thumb-image").css("background-image","url("+Often.null2Void(e,"/flow-renewal/assets/images/profile-default.png")+")"),t.find(".subtask-manager-number").text("+"+r).css("display",1<s.length?"inline-block":"none")):(t.find(".js-worker-box").css("display",""),t.find(".js-worker-thumb").css("display","none"))}function y(t,s){return i18next.t("dictionary.today")+(t?" "+Tz.momentTimeZone(s,"type20"):"")}function n(t){t.empty(),t.append($("#subtaskInputItem").html()),t.find(".js-subtask-input").focus()}function u(t){var s=t.findUp(".js-subtask-area"),t=s.find(".js-subtask-ul>li");s.find(".js-subtask-count").text(t.length)}function p(t,s){var e=t.prev(".js-subtask-ul"),t=e.find(".js-subtask-li").length;0<t&&(s[0].INDEX=t);s=$(a(s,!l));e.append(s)}function c(t,s){var e=[],s=Often.null2Void(s)?".js-subtask-edit-area":".js-subtask-area",s=t.find(s).find(".js-subtask-li"),a="VIEW"===PostCondition.getPopupMode(t);return $.each(s,function(t,s){a&&$(s).hasClass("subtask-input-area")||(s=k($(s)),0<Object.keys(Often.null2Void(s)).length&&e.push(s))}),e}function k(t){var s=0<t.findUp(".js-subtask-edit-area").length,e=$.trim(t.find(".js-subtask-input").val()||t.find(".js-subtask-input").text()),a=t.find(".js-subtask-date-layer"),n=a.attr("data_start_dt"),i=a.attr("data_end_dt"),r=t.find(".js-subtask-status-button").attr("data_status"),o=t.find(".js-subtask-priority-layer").attr("data_priority"),u=function(t){var e=[];if(""===t.attr("data_worker_id_list"))return e;var s=t.attr("data_worker_id_list").split(","),a=t.attr("data_worker_name_list").split(","),n=t.attr("data_worker_profile_list").split(",");return $.each(s,function(t,s){e.push({WORKER_ID:s,WORKER_NM:a[t],WORKER_PRFL_PHTG:n[t]})}),e}(t.find(".js-subtask-worker-layer")),a=Often.null2Void(t.attr("task-srno")),t=""!==a;return s&&""===e?{}:{TASK_NM:e,START_DT:n,END_DT:i,STTS:r,PRIORITY:o,WORKER_REC:u,GUBUN:"",TASK_SRNO:a,MODIFY_YN:t?"Y":"N",RGSR_NM:t?"":_USER_NM,RGSR_ID:t?"":_USER_ID}}function _(t,s,e){if(!l)return t(s);var a,n;a=t,n={COLABO_SRNO:i.attr("data-project-srno"),COLABO_COMMT_SRNO:i.attr("data-post-srno"),SUBTASK_REC:s},Ajax.executeApi(RestApi.POST.FLOW_SUBTASK_C001,$.extend({packetOption:Ajax.OPTION.PREVENT_EXECUTE},n),function(t){t=[$.extend(n.SUBTASK_REC[0],{COLABO_SRNO:n.COLABO_SRNO,COLABO_COMMT_SRNO:t.COLABO_COMMT_SRNO,TASK_SRNO:t.TASK_SRNO})];a(t)})}function b(t){t=Often.null2Void(t,"ALL");$(".js-subtask-li.active").removeClass("active"),"ALL"!==t&&"STATUS"===t||$(".js-subtask-li .js-status-setting-layer").css("display","none"),"ALL"!==t&&"PRIORITY"===t||$(".js-subtask-li .js-priority-setting-layer").css("display","none"),"ALL"!==t&&"WORKER"===t||$(".js-subtask-li .js-worker-layer").remove()}function T(t,s){if(!t||0===t.length)return!1;var e=t.findUp("#postPopup"),a=0<e.length,n=t.parents(".js-popup-before"),i=t.findUp(".js-subtask-layer"),r=n.offset(),o=i.offset(),u=i.position(),l=window.innerHeight,d=r.top+n.height(),i=0<a?80:100,r=t.outerHeight(),n=s.outerHeight(),n=Number("-"+(r+n)),o=(a?d:l)-i<o.top+r+150;return t.findUp(".js-subtask-li").addClass("active"),{display:s.is(":visible")?"none":"block",top:o?n+25:r+20,left:u.left+(SpaceSelectable.isSharePost(e)?-20:0)}}}();
"use strict";var ItemTask=function(){var l,n,p,f;return{getLookHtml:function(t,e){t||(e=!0);t=t||{};var n=Often.null2Void(t.STTS,"0"),r=Often.null2Void(t.PRIORITY,""),a=Often.null2Void(t.PROGRESS,"0"),i=e?"":Often.null2Void(t.START_DT,""),s=e?"":Often.null2Void(t.END_DT,""),o=0<i.length,d=0<s.length,l=t&&t.WORKER_REC&&0<t.WORKER_REC.length?t.WORKER_REC:[],p=8<i.length,f=8<s.length,t="0"===n&&0<r.length&&0<Number(a)&&o&&d,p=Tz.momentConversion("convertOnly",p?"type6":"type5",i),f=Tz.momentConversion("convertOnly",f?"type6":"type5",s);return ListHelper.replaceJson($("#taskComponent").html(),{"status-code":DetailCode.STATUS._GB[n],"start-date":o?i18next.t("front.common.from",{val:p}):"","end-date":d?i18next.t("front.common.to",{val:f}):"","platpickr-start-date":i,"platpickr-end-date":s,"priority-code":Often.null2Void(r,""),"priority-gb":DetailCode.PRIORITY._GB[r],"priority-text":i18next.t(DetailCode.PRIORITY._TEXT[r]),progress:function(){for(var t="",e=0;e<=10;e++)t+='<span class="js-progress-button" data-progress-value="'+10*e+'"><em>'+10*e+"%</em></span>";return t}(),"progress-code":a,"progress-width":'style="width:'+a+'%"',"progress-class":"100"===a?"on":"",workers:c(l),"data-worker-layer-display":ListHelper.setDisplay(e||0<l.length,"table"),"date-layer-display":ListHelper.setDisplay(o||d,"table"),"start-date-button-display":ListHelper.setDisplay(!o,"inline-block"),"start-date-text-display":ListHelper.setDisplay(o,"inline-block"),"end-date-button-display":ListHelper.setDisplay(!d,"inline-block"),"end-date-text-display":ListHelper.setDisplay(d,"inline-block"),"priority-display":ListHelper.setDisplay(""!==r,"table"),"priority-button-display":ListHelper.setDisplay(""===r,"inline-block"),"priority-text-display":ListHelper.setDisplay(""!==r,"inline-block"),"more-button-display":ListHelper.setDisplay(!t,"block"),"progress-display":ListHelper.setDisplay("0"!==a,"table"),"dead-line-class":Often.isDeadlineExceeded(s)?"deadline-exceeded":"","manager-text":i18next.t(0<l.length?"front.common.change":"front.common.add",{val:"$t(dictionary.manager)"})})},initEdit:function(e){["startDate","endDate","priority"].forEach(function(t){PostPopup.initButtonByCode(e,t)});var t=e.find(".js-task-option:visible"),n=e.find(".js-more-button"),r=0===$.trim(t.find(".js-start-flatpickr .js-pickr-text").text()).length;t.find(".js-start-date-layer").css("display",r?"none":"table");var a=0===$.trim(t.find(".js-end-flatpickr .js-pickr-text").text()).length;t.find(".js-end-date-layer").css("display",a?"none":"table");var i=""===t.find(".js-priority").attr("data-priority");t.find(".js-priority-layer").css("display",i?"none":"table");var s="0"===t.find(".js-progress-bar").attr("data-progress");t.find(".js-progress-layer").css("display",s?"none":"table"),r||a||i||s||n.css("display","none");s=t.find(".js-task-worker-layer"),n="ADD"===PostCondition.getPopupMode(e);s.css("display",n||0<s.find(".js-registration").length?"table":"none"),Often.isFunc(Func.CLOUD.INVITATION_POPUP)&&function(t,e){var n="VIEW"===t.attr("data-code");e.find(".js-worker-input").css("display",n?"none":"inline-block"),e.find(".js-worker-button").css("display",n?"inline-block":"none"),n||WorkerPopup.addInputWorkerEvent(t,function(n){var t=e.find(".js-workers"),r=!1;if($.each(t.find(".js-registration"),function(t,e){if($(e).attr("data-worker-id")===n[0].WORKER_ID)return!(r=!0)}),r)return Often.toast("error","이미 등록된 참여자입니다.");t.append(c(n))})}(e,t)},isTaskEvent:function(t,e){return!!(f=t.findUp(".js-popup-before")).find(".js-post-nav").hasClass("task")&&(l="VIEW"===f.attr("data-code"),n="EDIT"===f.attr("data-code"),p=f.find(".task-number").attr("data-task"),!!function(r){var a=r.findUp(".js-stts");if(0===a.length)return!1;if(!T(R(r)))return!0;if(a.parents(".js-task-state").attr("data-status")===a.attr("stts"))return!0;var i=DetailCode.STATUS._GB.indexOf(a.attr("stts"));return u({OBJECT:"STTS",TASK_SRNO:p,VALUE:i},function(){var t=r.parents(".js-task-state");{var e,n;t.attr("class","").addClass("js-task-state state-button-group clearfix "+a.attr("stts")),t.attr("data-status",a.attr("stts")),i===taskStatusCode.COMPLETION&&"VIEW"===PostCondition.getPopupMode(f)&&(e=r.findUp(".js-task-option").find(".js-progress-layer"),n=e.find(".js-progress-bar"),t=e.find(".js-progress-text"),e.css("display","table").addClass("on"),n.css("width","100%").attr("data-progress","100"),t.text("100%"))}},l),!0}(t)||(!!function(t){var e=t.findUp(".js-task-worker-layer");if(0===e.length)return!1;if(!T(R(t)))return!0;var n=t.findUp(".js-worker-button"),r=f.attr("data-post-srno"),r=0<n.length&&!!r;{if(r&&Often.isFunc("INVITATION_POPUP"))return InvitationPopup.openManagerPopup(f.attr("data-post-srno"),p),!0;if(0<n.length||r&&!Often.isFunc("INVITATION_POPUP"))return WorkerPopup.toggleWorkerPopup(f,function(t){var n=!1,r=s(e);t.length!==r.length?n=!0:$.each(t,function(t,e){if(e.WORKER_ID!==r[t].WORKER_ID)return!(n=!0)});n&&i("EDIT",{TASK_SRNO:p,WORKER_REC:t},function(){e.find(".js-registration").remove(),e.find(".js-workers").append(c(t))},l,f)},n,function(){return s(f)}),!0}var a=t.findUp(".js-remove-worker");if(0<a.length){n=a.parents(".js-registration").attr("data-worker-id");return i("DELETE",{TASK_SRNO:p,WORKER_REC:s(f,n)},function(){a.parents(".js-registration").remove()},l,t.findUp(".detail-item")),!0}t=t.findUp(".js-registration");if(0<t.length){t=t.attr("data-worker-id");return Profile.drawProfilePopup(t),!0}}(t)||(!!function(n){var t=n.findUp(".js-progress-button");if(!t.hasClass("js-progress-button"))return!1;if(!T(R(n)))return!0;if(t.parents(".js-progress").find(".js-progress-bar").attr("data-progress")===t.attr("data-progress-value"))return!1;t=t.attr("data-progress-value");return u({OBJECT:"PROGRESS",TASK_SRNO:p,VALUE:t},function(){var t=n.findUp(".js-progress-layer"),e=$.trim(n.text());t.find(".js-progress-bar").css("width",e),t.find(".js-progress-bar").attr("data-progress",e.replace("%","")),t.find(".js-progress-text").text(e),"100%"===e?t.addClass("on"):t.removeClass("on");"VIEW"===n.findUp(".js-popup-before").attr("data-code")&&Often.toast("success","진척도가 변경되었습니다.")},l),!0}(t)||(!!function(t){var e=t.findUp(".js-more-button");if(!e.hasClass("js-more-button"))return!1;if(!T(R(t)))return!0;var n=e.parents(".js-task-option"),t=n.parents("#summaryPost:visible");"400px"===t.css("max-height")&&t.css("max-height","548px");return e.css("display","none"),n.find(".js-more-task-li").css("display","table"),n.find(".js-date-layer").css("display","table"),!0}(t)||(!!function(t){var r=t.findUp(".js-priority-layer");if(!r.hasClass("js-priority-layer"))return!1;if(!T(R(t)))return!0;var e=r.parents(".js-task-option"),n=r.find(".js-priority"),a=e.find(".js-priority-setting-layer"),i=t.findUp(".js-priority-setting-button"),s=t.findUp(".js-remove-priority"),o=t.findUp(".js-priority-button"),e=t.findUp("#prioritySpan"),t=i.attr("data-priority-code");if(0<i.length)return DetailCode.PRIORITY._GB.indexOf(t)===Number(Often.null2Void(n.attr("data-priority"),"-1"))?a.css("display","none"):u({OBJECT:"PRIORITY",TASK_SRNO:p,VALUE:DetailCode.PRIORITY._GB.indexOf(t)},function(){var t=i.text(),e=i.attr("data-priority-code"),n=i.find("i:first").attr("class");r.find(".js-priority").attr("data-priority",DetailCode.PRIORITY._GB.indexOf(e)),r.find(".js-priority-text").text(t),r.find("#prioritySpan i:first").attr("class",n),r.find("#prioritySpan").css("display","inline-block"),r.find("#priorityButton").css("display","none"),a.css("display","none")},l),!0;if(0<s.length)return u({OBJECT:"PRIORITY",TASK_SRNO:p,VALUE:""},function(){n.attr("data-priority",""),r.find("#prioritySpan").css("display","none"),r.find("#priorityButton").css("display","block"),a.css("display","none")},l),!0;if(0<o.length||0<e.length){e=a.is(":visible");return a.css("display",e?"none":"block"),!0}}(t)||(!!function(t,e){if(!t.findUp(".js-date-layer").hasClass("js-date-layer"))return!1;if(!T(R(t)))return!0;var n=t.findUp(".js-pickr-layer"),r=n.hasClass("js-start-flatpickr"),a=t.findUp(".js-remove-date");if(0<a.length)return e.stopPropagation(),e.preventDefault(),u({OBJECT:r?"START_DT":"END_DT",TASK_SRNO:p,VALUE:""},function(){var t=a.parents(".js-date-option");t.find(".js-date-text").text(""),t.find(".js-date-label input").val(""),t.find(".js-pickr-text").css("display","none"),t.find(".js-date-label ").css("display","block"),t.find(".js-date-back-layer").css("display","none"),a.css("display","none"),t.find(".js-date-label").css("z-index","0").css("position","")},l,"",!0),!0;0<n.length&&function(){var o,d,t=Tz.roundMomentByMinutes(10),e=t.split(" ")[0],n=t.split(" ")[1],t=f.find(".js-task-option:visible");DatePicker.makeFlatPickr({defaultHour:e,defaultMinute:n,dateFormat:"YmdHi00",startDate:t.find(".js-start-flatpickr .js-pickr-date").val(),endDate:t.find(".js-end-flatpickr .js-pickr-date").val(),inputObj:{start:t.find(".js-start-flatpickr"),end:t.find(".js-end-flatpickr")},callback:{close:function(t,e,n){var s;o=t,d=e,n||u({OBJECT:(s=o.hasClass("js-start-flatpickr"))?"START_DT":"END_DT",TASK_SRNO:p,VALUE:d},function(){var t=o.findUp(".js-pickr-layer"),e=t.find(".js-date-label"),n=t.find(".js-pickr-date"),r=t.find(".js-pickr-text"),a=t.find(".js-date-back-layer"),i=t.find(".js-remove-date"),t=8<d.length;n.val(d),e.css("display","none"),a.css("display","block"),i.css("display","inline-block");t=Tz.momentConversion("convertOnly",t?"type6":"type5",d);r.text(i18next.t("front.common."+(s?"from":"to"),{val:t})).css("display","inline-block"),DatePicker.checkOverDate(r,d)},l,f)}},enableTime:!0,time_24hr:!0,dateVer:!0,minuteIncrement:Often.isFunc(Func.CLOUD.EDIT_TIME_TEXT)?1:10})}();return!0}(t,e)||void 0))))))},makeTaskJson:function(t){var e={},n=t.find(".js-post-title:visible").is("textarea")||t.find(".js-post-title:visible").is("input")?t.find(".js-post-title:visible").val():t.find(".js-post-title:visible").text(),r=t.find(".js-task-option:visible");return e.TASK_NM=Often.null2Void($.trim(n)),e.STTS=TaskCode.OPTION._GB.indexOf(Often.null2Void(r.find(".js-task-state:visible").attr("data-status"),"request")),e.WORKER_REC=Often.null2Void(s(t),[]),e.START_DT=Often.null2Void($.trim(r.find(".js-start-flatpickr .js-pickr-date").val()),""),e.END_DT=Often.null2Void($.trim(r.find(".js-end-flatpickr .js-pickr-date").val()),""),e.PROGRESS=Often.null2Void($.trim(r.find(".js-progress-bar:visible").attr("data-progress"))),e.PRIORITY=Often.null2Void($.trim(r.find(".js-priority:visible").attr("data-priority")),""),[e]},getWorkersComponentHtml:c,getWorkerListText:function(t){if(!t)return"";var n="",r=t.length-1;return $.each(t,function(t,e){n+=e.WORKER_NM,t<r&&(n+=", ")}),n},getWorkerCountJson:function(t){var e=Often.null2Void(t,[]),t=0<e.length?e[0].WORKER_NM:"-",e=1<e.length?"외 "+(e.length-1)+"명":"";return{WORKER:t,WORKER_COUNT:e}},drawUpdateTask:u,drawUpdateTaskWorker:i,changeTaskViewByData:function(t,e){var n=t.find(".js-task-option:visible");0<e.STTS.length&&n.find(".js-task-state").attr({"data-status":DetailCode.STATUS._GB[e.STTS],class:"js-task-state state-button-group clearfix "+DetailCode.STATUS._GB[e.STTS]});!SpaceSelectable.isSharePost(t)&&0<e.WORKER_REC.length&&n.find(".js-workers").append(ItemTask.getWorkersComponentHtml(e.WORKER_REC));0<e.START_DT.length&&(r=8<e.START_DT.length,r=Tz.momentTimeZone(e.START_DT,r?"type6":"type5"),n.find(".js-start-flatpickr .js-pickr-date").val(e.START_DT),n.find(".js-start-flatpickr .js-date-label").css("display","none"),n.find(".js-start-flatpickr .js-date-text").text(i18next.t("front.common.from",{val:r})),n.find(".js-start-flatpickr .js-date-back-layer").css("display","inline-block"),n.find(".js-start-flatpickr .js-remove-date").css("display","inline-block"));{var r;0<e.END_DT.length&&(r=8<e.END_DT.length,r=Tz.momentTimeZone(e.END_DT,r?"type6":"type5"),n.find(".js-end-flatpickr .js-pickr-date").val(e.END_DT),n.find(".js-end-flatpickr .js-date-label").css("display","none"),n.find(".js-end-flatpickr .js-date-text").text(i18next.t("front.common.to",{val:r})),n.find(".js-end-flatpickr .js-date-back-layer").css("display","inline-block"),n.find(".js-end-flatpickr .js-remove-date").css("display","inline-block"))}0<e.PRIORITY.length&&(n.find(".js-priority").attr("data-priority",e.PRIORITY),n.find("#prioritySpan i:first").attr("class","icons-"+DetailCode.PRIORITY._GB[e.PRIORITY]+" small"),n.find(".js-priority-text").text(i18next.t(DetailCode.PRIORITY._TEXT[e.PRIORITY])));0<e.PROGRESS.length&&(n.find(".js-progress-layer").addClass("100"===e.PROGRESS?"on":""),n.find(".js-progress-bar").attr("data-progress",e.PROGRESS),n.find(".js-progress-bar").css("width",e.PROGRESS+"%"),n.find(".js-progress-text").text(e.PROGRESS+"%"))}};function c(t){for(var e="",n=0;n<t.length;n++){var r=t[n],a=$("#taskSelectedWorkerItem").html(),i=r.WORKER_PRFL_PHTG||r.PRFL_PHTG;e+=ListHelper.replaceJson(a,$.extend({WORKER_PRFL_PHTG:i,profile:ListHelper.setProfile(i)},r))}return e}function i(t,e,n,r,a){var i={EDIT:i18next.t("front.common.ask",{val:"$t(dictionary.manager)",status:"$t(dictionary.edit)"}),DELETE:i18next.t("front.common.ask",{val:"$t(dictionary.manager)",status:"$t(dictionary.delete)"})};if(!r)return n();PopupDraw.drawConfirm({contents:{main:i[t]},callback:{submit:function(){!function(r,a,i){Ajax.executeApi(RestApi.PUT.FLOW_TASK_WORKER_U002,$.extend({},a),function(){"function"==typeof r&&r();var t=i||f,e=t.attr("data-project-srno"),n=t.attr("data-post-srno");d(e,n,t.find(".remark-item:last").attr("remark-srno"));t={OBJECT:"WORKER",WORKER_REC:a.WORKER_REC};UpdateElements.autoUpdateElem({PROJECT_SRNO:e,POST_SRNO:n,TASK_DATA:t})})}(n,e,a)}}})}function u(a,i,t,s,e){e={STTS:i18next.t("front.common.ask",{val:"$t(dictionary.status)",status:"$t(dictionary.change)"}),PRIORITY:i18next.t("front.common.ask",{val:"$t(front.common.priority)",status:"$t(dictionary.change)"}),START_DT:i18next.t("front.common.ask",{val:"$t(front.common.startDate)",status:e?"$t(dictionary.delete)":"$t(dictionary.change)"}),END_DT:i18next.t("front.common.ask",{val:"$t(front.common.dueDate)",status:e?"$t(dictionary.delete)":"$t(dictionary.change)"})};return-1<a.OBJECT.indexOf("_REMOVE")&&(a.OBJECT=a.OBJECT.replace("_REMOVE","")),t?"PROGRESS"===a.OBJECT?n():void PopupDraw.drawConfirm({contents:{main:e[a.OBJECT]},callback:{submit:n}}):i();function n(){var t=s||f,e=t.attr("data-project-srno"),n=t.attr("data-post-srno"),r=t.find(".remark-item:last").attr("remark-srno");Ajax.executeApi(RenewalApi.GET.ACT_ONE_TASK_STATE,{COLABO_SRNO:e,COLABO_COMMT_SRNO:n,OBJECT:a.OBJECT,VALUE:a.VALUE},function(t){"Y"===Often.null2Void(t.RETURN_MSG,"N")?function a(i,s,o){Ajax.executeApi(RestApi.PUT.COLABO2_TASK_U001,$.extend({},s),function(){"function"==typeof i&&i();var t=o||f,e=t.attr("data-project-srno"),n=t.attr("data-post-srno"),r=t.find(".remark-item:last").attr("remark-srno"),t="PROGRESS"===s.OBJECT;t||d(e,n,r),UpdateElements.autoUpdateElem({PROJECT_SRNO:e,POST_SRNO:n,TASK_DATA:s}),"STTS"===s.OBJECT&&2===s.VALUE&&a("",{OBJECT:"PROGRESS",TASK_SRNO:s.TASK_SRNO,VALUE:"100"})})}(i,a,s):(i(),d(e,n,r),""!==Often.null2Void(a.VALUE)?Often.toast("info","이미 동일한 "+{STTS:"상태",START_DT:"시작일",END_DT:"마감일",PRIORITY:"우선순위",PROGRESS:"진척도"}[a.OBJECT]+" 로 변경되었습니다."):Often.toast("info","이미 삭제되었습니다."))})}}function s(t,a){var i=[];return t.find(".js-registration:visible").each(function(t,e){var n=$(e).attr("data-worker-id"),r=$(e).attr("data-worker-name"),e=$(e).attr("data-worker-profile");n&&n===a||i.push({WORKER_ID:n,WORKER_NM:r,WORKER_PRFL_PHTG:e})}),i}function d(t,e,n){UpdateElements.autoUpdateElem({PROJECT_SRNO:t,POST_SRNO:e,REMARK_SRNO:n,REMARK_UPDATE:!0})}function T(t){if(t===_USER_ID||Authority.isAuthorityCheck("WRITE")||n)return 1;Often.toast("error","관리자만 글/댓글 작성 가능한 게시물입니다.")}function R(t){return Often.null2Void(t.findUp(".detail-item").attr("data-rgsr-id"))}}();
"use strict";var ItemTodo=function(){var a=!1;return{initEdit:function(){var t=$("#postPopup");t.find("#postTitle").focus(),t.find(".js-registration[data-worker-id='']").remove(),function(){var o,t=$("#postPopup").find("#todoEditUl");t.sortable({handle:".drag-button",item:"li",containment:t,axis:"y",cursorAt:{top:5,left:5},scroll:!1,plugins:[new confirmDatePlugin({confirmText:i18next.t("dictionary.select"),showAlways:!0})],tolerance:"pointer",placeholder:"document-item-highlight",opacity:.6,start:function(){t.sortable("refreshPositions")},stop:function(t,e){e=$(e.item);e.css("transform","scale(1)"),e.css("display",""),o&&o.remove()},helper:function(t,e){var n=e.clone();$(n).css("opacity","0.3"),o=n.insertAfter(e);n=$(e);return n.find(),n.css("transform","scale(0.8) translate(-10%, -10%)"),n.css("display",""),e.clone()}})}()},keydownTodoInput:function(t){var e,n;(a=KeyCheck.isKey(t,"TAB"))&&(0!==(n=$(t.target).findUp("#postTitle")).length&&(a=!1,e=n.findUp("#postPopup"),(0<(n=e.find("#todoEditUl .todo-item")).length?$(n[0]).find(".todoContents"):e.find("#todoContent")).focus()),t.preventDefault())},keyUpTodoInput:function(t){!function(t){if(!t.hasClass("js-todo-content-input"))return;var e=$("#postPopup"),n=event.keyCode||event.which,o=$.trim(t.val()),i=t.parents().find(".js-content-area #todoEditUl"),r=Validation.checkInput(t);if(0<Object.keys(r).length&&a)return Often.toast("error",r.errorMessage),r.errorObj.focus();if(13===n||a){if(a=!1,""===o)return Often.toast("error",i18next.t("front.alert.enterWord",{val:"$t(dictionary.todo)"}));r="newTodo"===t.attr("data-gubun"),n=r?e.find(".js-todo-edit-layer"):t.findUp(".js-todo-edit-layer"),o=s(n.find(".todo-menu"),r?n.find(".js-todo-content-input").val():o);if(!function(t){t=t.find(".js-todo-edit-layer");t.empty(),t.append($("#todoEditComponent .js-todo-edit-layer").html()),t.find("#todoContent").focus()}(e),d(),i.append(o),r)return;t.val("")}}($(t.target))},isTodoClickOnDetail:function(t){var o=$("#postPopup"),e=$("#detailUl"),i="VIEW"===o.attr("data-code")||e.hasClass("card")&&0===o.length;return!!t.findUp(".js-popup-before").find(".js-post-nav").hasClass("todo")&&(!!function(t){var e=t.findUp(".js-worker-button"),n=t.findUp(".todo-menu");if(0<!e.length||i)return!1;if("SHARE_POST"===o.attr("data-code"))return Often.toast("error","다른 프로젝트 올리기 중에는 담당자 선택이 불가능합니다."),!0;t=t.findUp(".js-popup-before");return WorkerPopup.toggleWorkerPopup(t,function(t){0===t.length||e.hasClass("js-registration")||e.css("display","none");0<n.find("#participantData").length&&n.find("#participantData").remove();n.append(l($("#participantData"),0===t.length?"":t[0],"ADD")),0===t.length&&n.find("#todoWorkerButton").css("display","inline-block")},e),!0}(t)||(!!function(t){if(i)return!1;var e=t.findUp(".todo-menu");if(!e||0===e.length)return!1;t=t.findUp(".js-pickr-layer");return!(!t||0===t.length)&&(function(t){var e=Often.null2Void(t.find(".js-pickr-date").val(),t.attr("select-date"));DatePicker.makeFlatPickr({dateFormat:"Ymd",inputObj:{end:t},endDate:e,callback:{close:function(t,e,n){var o;n||(o=Tz.momentTimeZone(e,"type12","input"),t.find(".js-pickr-icon").css("display","none"),t.find(".js-pickr-date").val(o),(n=t.parents(".todo-menu")).find(".todo-date").remove(),(t=$("#todoDateComponent #todoDateSpan").clone()).attr({"select-date":o,"mouseover-text":Tz.momentTimeZone(e,"type4")}),o=Often.isSameDay(e),t.text(o?i18next.t("dictionary.today"):Tz.momentTimeZone(e,"type4")),n.find("#todoWorkerButton").before(t),DatePicker.checkOverDate(t,e.substr(0,8)))},remove:function(t,e){var n=e.find(".js-pickr-date"),o=t.find(".js-flatpickr-remove-button");0!==e.nextAll("#todoDateSpan:visible").length&&""!==e.nextAll("#todoDateSpan:visible").attr("select-date")?o.off("click").on("click",function(){e.nextAll("#todoDateSpan").remove(),e.find(".js-pickr-icon").css("display","inline-block"),n.val(""),t.remove()}):o.css("display","none")}}})}(t),!0)}(t)||(!!function(t){if(!t.hasClass("js-worker-button"))return!1;i&&(t=t.attr("data-worker-id"),Profile.drawProfilePopup(t));return!0}(t)||(!!function(t){var e=t.findUp(".js-popup-before"),n=t.findUp(".js-todo-checkbox");if(0<!n.length)return!1;var o=n.closest("#originalPost"),i=o.find("#todoRgsrInfo").attr("rgsr-id"),r=e.attr("mngr-wryn"),n=e.attr("mngr-dsnc"),e=_USER_ID===i||"N"===r||"Y"===n,i=t.findUp(".todo-area"),r=i.parent().attr("todo-list-srno"),n=i.parent().attr("todo-srno"),t=i.hasClass("checked");if(!e)return Often.toast("error",i18next.t("front.detail.adminWriteOnly")),!0;t?i.removeClass("checked"):i.addClass("checked"),t?Often.isDeadlineExceeded(i.find("#todoDateSpan").attr("select-date"))&&i.find("#todoDateSpan").addClass("deadline-exceeded"):Often.isDeadlineExceeded(i.find("#todoDateSpan").attr("select-date"))&&i.find("#todoDateSpan").removeClass("deadline-exceeded");return function(t,e,n,o){var i={COLABO_SRNO:o.attr("data-project-srno"),COLABO_COMMT_SRNO:o.attr("data-post-srno"),COLABO_TODO_SRNO:e,COLABO_TODO_LIST_SRNO:t,STTS:n?"N":"Y"};Ajax.executeApi(RestApi.PUT.COLABO2_TODO_U101,i,function(){Often.toast("success",i18next.t("front.alert.successfullyChange",{status:"$t(dictionary.edit)"})),UpdateElements.autoUpdateElem({PROJECT_SRNO:i.COLABO_SRNO,POST_SRNO:i.COLABO_COMMT_SRNO,TODO_DATA:{OBJECT:"TODO_STATUS",STATUS:i}}),UpdateElements.autoUpdateElem({PROJECT_SRNO:i.COLABO_SRNO,POST_SRNO:i.COLABO_COMMT_SRNO,REMARK_SRNO:o.find(".remark-item:last").attr("remark-srno"),REMARK_UPDATE:!0})})}(r,n,t,o.findUp(".detail-item")),!0}(t)||void 0))))},isTodoClickOnPostPopup:function(t){return!!function(t){if(0===t.findUp(".add-todo-button").length)return!1;var e=t.parents().find(".js-content-area #todoEditUl"),n=t.parent().find(".js-todo-edit-layer .todo-menu"),t=s(n,"");return e.append(t),n.find("#todoContent").focus(),d(),!0}(t)||(!!function(t){return 0!==t.findUp(".remove-button").length&&(t.findUp(".todo-item").remove(),!0)}(t)||void 0)},getLookHtml:function(t){if(!t||0===Object.keys(t.CONTENTS).length)return ListHelper.replaceJson($("#todoEditComponent").html());var e=t.CONTENTS.length,n=0;t.CONTENTS.forEach(function(t){"Y"===t.STTS&&n++});var o=i(t.CONTENTS);return ListHelper.replaceJson($("#todoComponent").html(),{"total-count":e,"checked-count":n,percent:o.PERCENT,"percent-style":'style="width:'+o.PERCENT+'%"',"todo-ul":function(t){var i=$("#todoItemComponent").html(),r="";return t.forEach(function(t){var e=""!==Often.null2Void(t.PRFL_PHTG,""),n=8===Often.null2Void(t.RQST_DTTM,"").length,o="Y"===t.STTS;r+=ListHelper.replaceJson(i,{"contents-value":t.TODO_CNTN,contents:TagUtil.LinkData2Tag(Often.null2Void(t.TODO_CNTN)),"todo-list-srno":t.COLABO_TODO_LIST_SRNO,"todo-srno":t.COLABO_TODO_SRNO,checked:o?"checked":"",profile:e?ListHelper.setProfile(t.PRFL_PHTG):"d-none","req-time":n?c(t.RQST_DTTM):"","todo-menu":l($("#todoEditComponent .js-todo-edit-layer .todo-menu"),t,"VIEW"),"contents-display":ListHelper.setDisplay(!1,"none"),"drag-button-display":ListHelper.setDisplay(!1,"none"),"remove-button-display":ListHelper.setDisplay(!1,"none"),"mouseover-title":t.TODO_CNTN})}),r}(t.CONTENTS),"todo-rgsr-info":function(t){var e=$("#todoRgsrComponent").html(),n="";return n+=ListHelper.replaceJson(e,{"rgsr-id":t.RGSR_ID,"self-yn":t.SELF_YN,"mngr-wr-yn":t.MNGR_WR_YN,"mngr-dsnc":t.MNGR_DSNC})}(t.CONTENTS[0])})},getTodoDataListHtml:function(t){var e=$("#postPopup"),n=e.find(".js-todo-edit-layer .todo-menu"),e=e.find(".js-content-area #todoEditUl"),o="";t.TODO_REC.forEach(function(t){o+=s(n,t.TODO_CNTN,t)}),e.append(o)},getTodoPercentJson:i,makeTodoLiHtml:s,makeTodoJson:function(){var n=[],t=$("#postPopup"),a=t.find("#todoContent"),d=a.val();t.find(".todo-item").each(function(t,e){n.push(o(!0,e))}),d&&0!==d.length&&n.push(o(!1));return n;function o(t,e){var n=t?$(e).find(".todoContents").val():d,o=(t?$(e):a.parent()).find("#todoDateSpan").attr("select-date"),i=t?$(e).attr("todo-list-srno"):"",r=t?Often.null2Void($(e).find("#participantData").attr("data-worker-id"),_USER_ID):Often.null2Void(a.parent().find("#participantData").attr("data-worker-id"),_USER_ID),e=t?Often.null2Void($(e).find("#participantData").attr("data-use-intt-id"),_USE_INTT_ID):Often.null2Void(a.parent().find("#participantData").attr("data-use-intt-id"),_USE_INTT_ID);return{TODO_CNTN:n,RQST_DTTM:Often.null2Void(o,""),COLABO_TODO_LIST_SRNO:i,RQST_USER_ID:r,RQST_USE_INTT_ID:e}}},checkTodoValue:function(t){var e=t.find(".todoContents"),n=t.find(".js-todo-edit-layer .js-todo-content-input"),t=0===t.find("#todoEditUl li").length,n=n&&0===n.val().length;if(t&&n)return Often.toast("error",i18next.t("front.alert.enterWord",{val:"$t(dictionary.todo)"})),!0;return e.each(function(){var t=Validation.checkInput($(this));0<Object.keys(t).length&&$(this).closest('li[class="todo-item"]').remove()}),!1}};function d(){$("#postPopup").find(".js-content-area #todoEditUl").find("li").eq(-1).find(".form-control").remove()}function i(t){if(!t)return{};var e=t.length,n=0;return t.forEach(function(t){"Y"===t.STTS&&n++}),{PERCENT:parseInt(n/e*100),CHECKED_LENGTH:n,TOTAL_LENGTH:e}}function s(t,e,n){var o=$("#todoItemComponent").html(),i="";return i+=ListHelper.replaceJson(o,{"contents-value":e.replace(/"/gi,"&quot;"),"todo-text-display":ListHelper.setDisplay(!1),"icon-checkbox-display":ListHelper.setDisplay(!1),"todo-menu":n?l(t,n,"EDIT"):l(t,"","ADD"),"todo-list-srno":n?n.COLABO_TODO_LIST_SRNO:"","todo-srno":n?n.COLABO_TODO_SRNO:"","rgst-dttm":n?n.RQST_DTTM:""})}function l(t,e,n){var o=t.clone(),i="SHARE_POST"===$("#postPopup").attr("data-code"),r=("ADD"===n?$("#todoParticipantComponent"):$("#todoMenuComponent")).html();if(0!==Often.null2Void(o.find(".js-registration").attr("data-worker-id"),"").length||i)return o.html();var a=e?""!==Often.null2Void(e.RQST_DTTM,""):"",d=e?""!==Often.null2Void(e.RQST_USER_ID,""):"",t=Often.null2Void(c(e.RQST_DTTM),""),i=!!a&&Often.isSameDay(e.RQST_DTTM),e=ListHelper.replaceJson(r,{id:e?e.RQST_USER_ID:_USER_ID,"use-intt-id":e?e.RQST_USE_INTT_ID:_USE_INTT_ID,profile:e?ListHelper.setProfile(e.PRFL_PHTG):_PRFL_PHTG,"req-time":a?i?i18next.t("dictionary.today"):t:"","select-date":a?Often.null2Void(Tz.momentTimeZone(e.RQST_DTTM,"type14"),""):"","todoDate-data-display":ListHelper.setDisplay(a,"inline-block"),"participant-data-display":ListHelper.setDisplay(d,"inline-block"),"mouseover-title":"","mouseover-date":a?c(e.RQST_DTTM):i18next.t("front.common.add",{val:"$t(front.common.dueDate)"}),"mouseover-worker":d?e.RQST_USER_NM:i18next.t("front.common.add",{val:"$t(dictionary.request)"}),"dead-line-class":"Y"!==e.STTS&&Often.isDeadlineExceeded(e.RQST_DTTM)?"deadline-exceeded":""});return"VIEW"===n&&(o.find(".js-datepick-button").css("display","none"),o.find(".js-worker-button").css("display","none")),"EDIT"===n&&a&&(o.find(".js-pickr-icon").css("display","none"),o.find(".todo-date").css("display","none")),d&&o.find(".js-worker-button").css("display","none"),o.append(e),o.html()}function c(t){return Tz.momentTimeZone(t,"type13")}}();
"use strict";var CheckJoinPopup=function(){var i,p;return{openCheckJoinPopup:function(n){p=n,Ajax.executeApi(RestApi.GET.FLOW_SUB_DOM_R001,{SUB_DOM:p},function(n){"2000"!==n.ERR_CD?((i=$("#checkJoinPopup")).find("#companyLogoUrl").css("background-image","url("+n.SUB_DOM_LOGO_URL+")"),i.find("#companyName").text(n.SUB_DOM_NM),i.find("#companyName").css("display",n.SUB_DOM_LOGO_URL?"none":"block"),i.find("#companyUrl").text("https://"+n.SUB_DOM_URL),i.css("display","block"),i.off("click").on("click",t)):Often.toast("error",i18next.t("front.alert.inviteUrlError"))})},closeCheckJoinPopup:c};function c(){i.css("display","none")}function t(n){var t,o,e=$(n.target);o=(t=e).findUp("#popupLayer"),0===t.findUp("#closePopupBtn").length&&0!==o.length?0===e.findUp("#joinSubmit").length||Ajax.executeApi(RestApi.POST.FLOW_JOIN_C001,{SUB_DOM:p,packetOption:Ajax.OPTION.PREVENT_EXECUTE},function(n){""!==Often.null2Void(n.JNNG_ATHZ_YN,"")?"N"===n.JNNG_ATHZ_YN&&(c(),n={COMPANY_NAME:i.find("#companyName").text(),COMPANY_URL:i.find("#companyURl").text()},CompanyWaitJoinLayer.openWaitLayer(n)):Often.toast("error",i18next.t("front.alert.errorTryAgain"))}):c()}}();
"use strict";var CompanyWaitJoinLayer=function(){var n;return{openWaitLayer:function(a){n=$("#companyWaitJoinLayer"),$("#companyJoinMain").css("display","none"),n.find("#waitCompanyName").text(a.COMPANY_NAME),n.find("#waitCompanyUrl").text(a.COMPANY_URL),n.css("display","block")}}}();
"use strict";var SubtaskKeyEvent={keyUpSubtaskInput:function(u){if(function(e){var t=e.findUp(".js-subtask-area");if(!t||0===t.length)return!1;u.stopPropagation();var s=e.findUp(".js-subtask-li"),a=e.findUp(".js-subtask-input"),n=e.findUp(".js-priority-setting-button"),r=e.findUp(".js-subtask-edit-layer"),t=Number(e.parents(".subtask-space").find(".subtask-count").text());if(KeyCheck.isKey(u,"ENTER")&&0<a.length){a=Validation.checkInput(a);if(0<Object.keys(a).length)return Often.toast("error",a.errorMessage),a.errorObj.focus(),!0;if(50<=t)return Often.toast("error",i18next.t("front.alert.limitSubTask")),!0;e.parents(".subtask-space").find(".subtask-count").text(t+1);var i=ItemSubtask.makeSubtaskRecord(r,!0);return ItemSubtask.addAndDrawSubtask(function(t){ItemSubtask.drawSubtaskLi(r,$.extend(i,t)),ItemSubtask.getSubtaskCount(e),"VIEW"===r.parents(".js-popup-before").attr("data-code")&&ViewChanger.isPage("task")&&UpdateElements.autoUpdateElem()},i,e),ItemSubtask.initEditSubtask(r),!0}if(KeyCheck.isKey(u,"TAB"))return s.find({input:".js-subtask-date-button:visible",date:".js-priority-button:visible",priority:".js-worker-button:visible",worker:".js-subtask-input"}[e.attr("tab-code")]).focus(),!0;if((KeyCheck.isKey(u,"UP")||KeyCheck.isKey(u,"DOWN"))&&0<n.length){var s=s.find(".js-priority-setting-button"),n=Number(n.attr("data-key-index"));return n=KeyCheck.isKey(u,"DOWN")?0===n?4:n-1:4===n?0:n+1,s[n].focus(),!0}return!1}($(u.target)))return!0},KeyDownSubtaskInput:function(t){var e=$(t.target),s=e.findUp(".js-subtask-input"),a=e.findUp(".js-subtask-edit-layer"),n=e.findUp(".js-subtask-area");if(!n||0===n.length)return!1;if(KeyCheck.isKey(t,"ESC")&&s&&0<s.length&&a)return t.stopPropagation(),!function(){var t=Often.null2Void(ItemSubtask.makeSubtaskRecord(a,!0)[0]);return""===t||"0"===t.STTS&&""===t.END_DT&&""===t.PRIORITY&&0===t.WORKER_REC.length&&""===t.TASK_NM}()?PopupDraw.drawConfirm({contents:{main:"하위 업무를 작성중 입니다. 중단하시겠습니까?"},callback:{submit:r,cancel:PopupDraw.closePopup}}):r(),!0;return!1;function r(){n.removeClass("on"),ItemSubtask.initEditSubtask(a)}}};
"use strict";var BusinessJoin={openTeamStep:function(){var n=$("#userStep"),o=$("#teamStep");n.fadeOut(0),o.fadeIn(200),o.find("input").off("keyup").on("keyup",CommonJoin.keyupJoinInput),o.find("#joinTeamSector").on("change",CommonJoin.changeTeamSector),o.find("#domain").text("."+location.host),$("#movePrevStepButton").off("click").on("click",function(){n.fadeIn(200),o.fadeOut(0)}),$("#moveNextStepButton").off("click").on("click",CommonJoin.moveFinalStepButton)}};
"use strict";var CommonJoin=function(){var s={TEST:".flowtest.info",REAL:".flow.team"};return{getUserInfo:m,changeInputErrorMsg:c,setUserStepEvent:function(){var e=$("#userStep");e.find("input").on("keyup",o),e.find(".js-view-button").on("mousedown",p).on("mouseup",u),e.find("#joinUserEmail").on("focusout",i),e.find("#joinConfirmCheck").on("click",r),e.find("#guestStepButton").on("click",n),e.find("#teamStepButton").on("click",function(e){t(e,BusinessJoin.openTeamStep)})},goLoginAfterJoin:l,focusoutJoinInput:i,changeFirstStepButton:n,moveSecondStepButton:t,moveFinalStepButton:function(e){var n,t,o,i,r,a=$(e.target).findUp(".js-step-section");f($(e.target).findUp(".js-team-step"))&&(n=!0);!function(e){var n=e.find(".js-sector-section"),t=n.find("select"),o=t.val(),e=n.find(".js-sector-input"),n="default"!==o;n||CommonJoin.changeInputErrorMsg(t.parent(),"회사 업종을 선택해주세요.");"etc"===o&&0===e.val().length&&(n=!1,CommonJoin.changeInputErrorMsg(t.parent(),"회사 업종을 입력해주세요."));return n}(a)&&(n=!0);n||(t=0<a.find("#flowUpgradeStep").length,o=0<a.find("#kakaoUpgradeStep").length,i=!(t||o),(r=t?function(){var e=$("#flowUpgradeStep");return{SUB_DOM:e.find("#upgradeTeamUrl").val(),SUB_DOM_NM:e.find("#upgradeTeamName").val(),USER_ID:_USER_ID,PATH_CD:e.find("#upgradeTeamSector").val()}}():$.extend({},m("joinUser"),function(){var e=$("#teamStep"),n=e.find("#joinTeamSector").val();n="etc"!==n?n:e.find("#joinTeamSectorInput").val();return{SUB_DOM_NM:$.trim(e.find("#joinTeamName").val()),SUB_DOM:$.trim(e.find("#joinTeamUrl").val()),PATH_CD:$.trim(n)}}())).packetOption=Ajax.OPTION.PREVENT_EXECUTE,Ajax.executeApi(RestApi.POST.FLOW_SUB_DOM_C001,r,function(e){var n=Often.null2Void(e.ERR_CD,""),e=a.find(".js-team-url");"3000"!==n?"1000"!==n?function(e,n){var t=$("#teamStep"),o=$("#finalStep"),i=Often.isServerModeByHost("REAL")||Often.isServerModeByHost("REAL_TEST");o.find("#finalUserName").text(e.USER_NM),o.find("#finalTeamName").text(e.SUB_DOM_NM),o.find("#finalTeamUrl").text(e.SUB_DOM),o.find("#finalTeamUrl2").text(i?s.REAL:s.TEST),o.find("#copyUrlButton").off("click").on("click",d),o.find("#startButton").off("click").on("click",function(){Loading.drawLoadingPop(n.isJoinStep),n.isJoinStep||n.isKakaoUpgradeStep?l(e):n.isFlowUpgradeStep&&window.location.reload()}),n.isJoinStep||n.isKakaoUpgradeStep?t.fadeOut(0):n.isFlowUpgradeStep&&$("#flowUpgradeStep").fadeOut(0);o.fadeIn(200)}(r,{isFlowUpgradeStep:t,isKakaoUpgradeStep:o,isJoinStep:i}):CommonJoin.changeInputErrorMsg(e,"사용 중인 회사 URL 입니다. 다른 URL를 등록해주세요."):CommonJoin.changeInputErrorMsg(e,"한 계정으로 '한개의 팀'만 생성 가능합니다. 이 계정은 이미 다른 팀의 관리자입니다. 다른 계정을 사용해주세요.")}))},clickConfirmCheck:r,keyupJoinInput:o,mousedownViewButton:p,mouseupViewButton:u,changeTeamSector:function(e){var n=$(e.target),e=n.findUp(".js-sector-section").find(".js-sector-input");CommonJoin.changeInputErrorMsg(e,""),"etc"===n.val()?e.fadeIn(200):(e.fadeOut(0),e.val(""))},registerSubDomain:function(e){t(e,function(){var n=CommonJoin.getUserInfo("joinUser");n.packetOption=Ajax.OPTION.PREVENT_EXECUTE,Ajax.executeApi(RestApi.POST.COLABO2_REGISTER_C001,$.extend({},n,{SUB_DOM:SUB_DOM}),function(e){e=Often.null2Void(e.ERR_CD,"");"0000"!==e&&"5000"===e&&c($("#joinUserEmail"),"사용 중인 이메일 주소입니다. 다른 메일 주소를 등록해주세요."),l(n)})})}};function n(e){var n=$("#userStep"),t=$("#guestStep"),o=$("#teamStep"),e=$(e.target);e.is("#userStepButton")?(a(t.find("input")),n.fadeIn(200),t.fadeOut(0)):e.is("#guestStepButton")&&(a(n.find("input")),a(o.find("input")),GuestStep.openGuestStep())}function t(e,n){var t,o=$(e.target),i=o.findUp(".js-main-step"),r=i.is("#guestStep"),e=i.find(".js-join-email").val();f(i)&&(t=!0),(t=!function(e){var n=e.parent().find(".js-confirm-input"),e=n.hasClass("checked");e||n.findUp(".js-join-check").find(".js-error-text").css("display","block");return e}(o)?!0:t)||($("body").css("overflow","hidden"),EmailAuth.sendToServer(e,e,"E",r,function(){$("body").css("overflow","auto"),"function"==typeof n&&n()}))}function o(e){var n,t,o,i,r,a,s,p;KeyCheck.isAvailable(e)||(n=(s=$(e.target)).is(".js-join-email"),t=s.is(".js-join-password"),a=s.is(".js-join-password2"),o=s.is(".js-team-name"),i=s.hasClass("input-error"),e=s.is(".js-sector-input"),o||(p=(r=s).val().replace(/ /gi,""),r.val(p),0===p&&c(r,"")),p=Validation.checkInput(s),r=0===Object.keys(p).length||"empty"===p.errorCode,n&&!i&&"over"!==p.errorCode||(e?c(s,30<s.val().length?i18next.t("front.placeHolder.lengthLimit",{count:30}):""):(c(s,r?"":p.errorMessage),(t||a)&&(a=""!==s.val(),s.parent().find(".js-view-button").css("display",a?"block":"none")),s=s.findUp("#userStep").find(".js-join-password2"),t&&""!==s.val()&&(p=Validation.checkInput(s),c(s,0<Object.keys(p).length&&"un-valid"===p.errorCode?p.errorMessage:"")))))}function i(e){var n,t=$(e.target);0!==t.val().length&&t.is(".js-join-email")&&(n=Validation.checkInput(t),e=0===Object.keys(n).length||"empty"===n.errorCode,c(t,e?"":n.errorMessage),0<Object.keys(n).length||Ajax.executeApi(RestApi.GET.COLABO_USER_DUPLICATE_R001,{USER_ID:$.trim(t.val())},function(e){e=Often.null2Void(e.ERR_CD);c(t,"0000"!==e?"사용 중인 이메일 주소입니다. 다른 메일 주소를 등록해주세요.":"")}))}function c(e,n){var t=e.parent().find(".error-text");0===n.length?(e.removeClass("input-error"),t.css("display","none")):(e.addClass("input-error"),t.css("display","block")),t.text(n)}function r(e){var n=$(e.target),e=n.findUp(".js-join-check").find(".js-error-text");n.toggleClass("checked"),e.css("display","none")}function a(e){var n=$(".js-confirm-check");n.removeClass("checked"),n.parent().find(".js-error-text").css("display","none"),$.each(e,function(e,n){n=$(n);c(n,""),n.val("")})}function p(e){$(e.target).parent().find(".js-join-input").attr("type","text")}function u(e){$(e.target).parent().find(".js-join-input").attr("type","password")}function f(e){var t,o=!1,e=e.find(".js-join-input");return $.each(e,function(e,n){n=$(n);0===n.val().length&&(t=n.attr("data-empty-msg"),o=!0,c(n,t)),n.hasClass("input-error")&&(o=!0)}),o}function d(){Often.copyUrl($("#teamServiceUrl").text())}function l(e){var n=Electron.isElectronApp();CommonLogin.goLogin($.extend({},e,{ID_GB:SignCode.TYPE.NORMAL,ENCRYPT_YN:SignCode.ENCRYPT.SERVER_TIME_CHECK,OBJ_CNTS_NM:n?"desktop":""}))}function m(e){return{USER_NM:$.trim($("#"+e+"Name").val()),USER_ID:$.trim($("#"+e+"Email").val()),RESAILER:$.trim($("#"+e+"RecommendId").val()),CELLPHONE_NUM:$.trim($("#"+e+"PhoneNum").val()),PWD:("joinGuest"===e?$("#joinGuestPassword"):$("#password")).val()}}}();
"use strict";var EmailAuth=function(){var o,u,r,a,s,l,c,f,d,p,h;return{openAuthView:A,getAuthId:function(t){{if(t.AUTH_TYPE&&"E"===t.AUTH_TYPE)return t.EML;if(t.AUTH_TYPE&&"H"===t.AUTH_TYPE)return t.CLPH_NO}return""},sendToServer:t,setCounter:v};function A(t,n,e,i,u){r=t,a=n,s=e,c=u,l=Often.getDeviceJson(f||ServerChecker.isKtWorks||ServerChecker.isKtFlow||ServerChecker.isKtWorks&&KtWorks.isLoginPage?"":_CLIENT_IP),f=i,o=$("#emailAuthLayer"),PopupDraw.drawAuth({await:!0,contents:{title:"인증번호 입력",main:function(){var t="";"E"===s?t=a.substr(0,a.indexOf("@")-2)+"**"+a.substr(a.indexOf("@")):"H"===s&&2<(t=Profile.convertClphNo(a).replace(/ /gi,"-")).length&&(t=t.substr(0,t.length-2)+"**");return t}(),id:"authCounter"},callback:{submit:E,close:T}}),$("#tempPopup #authInput").off("keyup").on("keyup",_).val(""),$("#tempPopup #resendAuth").off("click").on("click",m)}function t(t,n,e,i,u){var o=$("#tempPopup");0!==o.length?(o.find("#authInput").val(""),clearInterval(p)):A(t,n,e,i,u),Ajax.executeApi(RestApi.GET.FLOW_AUTH_NO_CHECK_R002,$.extend({},l,{USER_ID:r,EML:a,AUTH_TYPE:s}),function(t){v(t)})}function v(t){u=$("#tempPopup .auth-popup");var n=Often.null2Void(t.AUTH_TIME_MM,"3"),e=u.find("#authCounter");e.text(n+":00").attr("data-auth-limit-minutes",n),function(e,t){var i=new Date;i.setMinutes(i.getMinutes()+Number(t));u.find("#unValidAuth, #timeoutAuth, #resendAuth").css("display","none"),p=setInterval(function(){var t=new Date,n=i-t;return n<0?(h=!0,clearInterval(p),u.find("#unValidAuth").css("display","none"),u.find("#timeoutAuth").css("display","inline-block"),void u.find("#resendAuth").css("display","inline-block")):d?(clearInterval(p),void(d=!1)):(t=Math.floor(n%36e5/6e4),n=Math.floor(n%6e4/1e3),void e.text(t+":"+(n=n<10?"0"+n:n)))},1e3),e.data("timer",p)}(e,n),""!==Often.null2Void(t.AUTH_NO)&&Often.isServerModeByHost("ALL_TEST")&&-1<r.indexOf("@yopmail.com")&&-1<r.indexOf("test")&&(Often.toast("info","테스트 서버이면서 XXtestXX@yopmail.com 도메인일 경우 1초 뒤에 자동으로 인증번호가 채워집니다."),setTimeout(function(){u.find("#authInput").val(t.AUTH_NO),o.find(".confirm-button").addClass("on")},900))}function m(){n(),t(r,a,s,f,c),$("#tempPopup #authInput").focus()}function T(){n(),d=!0,PopupDraw.closePopup()}function n(){u.find("#unValidAuth").css("display","none"),u.find("#resendAuth").css("display","none")}function _(t){if(KeyCheck.isKey(t,"ENTER"))return E();var n=t.target.value;e(t=n)?u.find("#noneNumericAuth").css("display","none"):(u.find("#noneNumericAuth").css("display","inline-block"),u.find("#authInput").val(function(t){t=t.slice(0,-1);return e(t)?t:""}(t))),6===n.length?u.find(".confirm-button").addClass("on"):o.find(".confirm-button").removeClass("on")}function E(){var t=u.find("#authInput").val();""!==t&&6===t.length?Ajax.executeApi(RestApi.GET.FLOW_AUTH_NO_CHECK_R001,$.extend({},l,{USER_ID:r,AUTH_NO:t,AUTH_TIME_MM:$("#authCounter").attr("data-auth-limit-minutes")}),function(t){return"0000"!==Often.null2Void(t.RSLT_CD)?(u.find("#unValidAuth").css("display",h?"none":"inline-block"),void u.find("#resendAuth").css("display","inline-block")):("function"==typeof c&&c(),void T())}):Often.toast("error","인증번호를 입력하시기 바랍니다.")}function e(t){return/^[0-9]*$/.test(t)}}();
"use strict";var GuestStep=function(){var t=$("#joinGuestEmail"),i=$("#guestStep"),e={NO_PROBLEM:"0000",EXISTS_EMAIL:"5000"};return{openGuestStep:function(){$("#userStep").fadeOut(0),i.fadeIn(200),i.find("input").off("keyup").on("keyup",CommonJoin.keyupJoinInput),i.find(".js-view-button").off("mousedown").on("mousedown",CommonJoin.mousedownViewButton),i.find(".js-view-button").off("mouseup").on("mouseup",CommonJoin.mouseupViewButton),t.on("focusout",CommonJoin.focusoutJoinInput),$("#guestConfirmCheck").off("click").on("click",CommonJoin.clickConfirmCheck),$("#googleLoginButton").off("click").on("click",GoogleLogin.clickGoogleLoginButton),$("#kakaoLoginButton").off("click").on("click",KakaoLogin.clickKakaoLoginButton),$("#appleLoginButton").off("click").on("click",AppleLogin.clickAppleLoginButton),$("#userStepButton").off("click").on("click",CommonJoin.changeFirstStepButton),$("#guestFinalButton").off("click").on("click",function(o){CommonJoin.moveSecondStepButton(o,n)})}};function n(){var n=CommonJoin.getUserInfo("joinGuest");n.packetOption=Ajax.OPTION.PREVENT_EXECUTE,Ajax.executeApi(RestApi.POST.COLABO2_REGISTER_C001,n,function(o){o=Often.null2Void(o.ERR_CD,"");e.NO_PROBLEM!==o&&e.EXISTS_EMAIL===o&&CommonJoin.changeInputErrorMsg(t,t.attr("data-un-valid-msg2")),i.fadeOut(0),$("#guestFinalStep").fadeIn(200),$("#guestStartButton").off("click").on("click",function(){Loading.drawLoadingPop(!0),CommonJoin.goLoginAfterJoin(n)})})}}();
"use strict";var GoogleLogin=function(){var n,e=null;return{clickGoogleLoginButton:function(){n=Electron.isElectronApp(),e=new GoogleSignInApi(i),n&&Electron.getVersion()<"1_0_6"?alert(c18n("DL163","구글 정책 변경으로 인하여 구글 로그인은 브라우저를 통해서만 이용할 수 있습니다.")):n?e.loadOnDesktopApp():GoogleOAuth.isUsable()&&e.loadOnWebBrowser()},googleMiniLoginCallback:function(e){gapi.client.setToken(e),gapi.client.init({clientId:GoogleOAuth.getKey(ServerChecker.isReal).clientId,scope:"profile"}).then(function(){var e=gapi.auth2.getAuthInstance().currentUser.get().getBasicProfile();e&&i(e)})}};function i(e){CommonLogin.goLogin({USER_ID:e.getEmail(),ID_GB:SignCode.TYPE.GOOGLE,OBJ_CNTS_NM:n?"desktop":"",EMAIL:e.getEmail(),USER_NM:e.getName(),PRFL_PHTG:Often.null2Void(e.getImageUrl())})}}(),GoogleSignInDriveApi=function(i){var t,n,o;function e(){(o=gapi.auth2.init(function(){var e={client_id:GoogleOAuth.getKey(ServerChecker.isReal).clientId,scope:GoogleOAuth.getScope("Drive")};Often.isMessenger()&&(e.ux_mode="redirect",e.redirect_uri=Often.getLocOrigin()+"/flow-renewal/view/subscreen_view.jsp?GB=GOOGLE_DRIVE");return e}())).isSignedIn.listen(c),o.currentUser.listen(g),o.isSignedIn.get()?o.signIn():n=setTimeout(function(){gapi.auth2.getAuthInstance().signIn()},1e3),o&&g(o.currentUser.get())}function g(e){(t=e)&&o.isSignedIn.get()&&clearTimeout(n)}function c(e){var n;e&&(n=Electron.isElectronApp(),e=t.getAuthResponse().access_token,n?Electron.openGoogleDrivePost(e):"function"==typeof i&&i(e))}this.load=function(){gapi.load("auth2",e)}},GoogleSignInApi=function(o){var g;this.loadOnWebBrowser=function(){gapi.load("auth2",function(){(g=gapi.auth2.init({client_id:GoogleOAuth.getKey(ServerChecker.isReal).clientId,scope:"profile"})).signIn().then(function(){var e,n,i,t;e=o,t=$("#enterpriseLoginDiv").is(":visible"),$("#businessLoginDiv").is(":visible")||(n=g.currentUser.get(),i=n.getBasicProfile(),n.disconnect(),function(){var e=gapi.auth2.getAuthInstance();e.signOut().then(),e.disconnect()}(),t||"function"==typeof e&&e(i)),Often.setCookie("ONLY_CHATBOT_ID_LIST","Y")})})},this.loadOnDesktopApp=function(){gapi.load("auth",{callback:e})};var e=function(){try{gapi.auth.authorize({client_id:GoogleOAuth.getKey(ServerChecker.isReal).clientId,scope:GoogleOAuth.getScope("SignIn"),immediate:!0},n)}catch(e){}},n=function(){Often.setCookie("googleLoginYn","Y"),Electron.openGoogleSignIn(GoogleOAuth.getRedirectUri("SignIn"),"Google")}};
"use strict";var CommonLogin=function(){var e;return{goLogin:l,goAutoLogin:function(){var n=Electron.isElectronApp(),o=Often.getCookie((n?"mini":"")+"flowLogin"),n=""!==o,o=function(n){var o=Electron.isElectronApp();if(n&&-1<n.indexOf("|")){n=n.split("|");return 2===n.length&&""!==Often.null2Void(n[0])&&""!==Often.null2Void(n[1])&&{USER_ID:n[0],RAND_KEY:n[1],OBJ_CNTS_NM:o?"desktop":""}}return{}}(o);ServerChecker.isSeco&&Seco.is("LIMIT_AUTO_LOGIN")||!n||0===Object.keys(o).length||Ajax.executeApi(RestApi.GET.COLABO2_AUTO_LOGIN_R002,o,function(n){return"0001"===n.RESULT_CODE?Often.toast("error",i18next.t("front.alert.error")):void f()})},EncodeAES:d,setAutoCheck:function(){var n=Often.getCookie("autoLogin");if(_IsMini)return MiniLogin.setMiniAutoCheck(n);$("#autoCheck").attr("class","auto-login-label"+(n?" auto-login-active":""))},clickAutoCheck:c,keydownLoginInput:r,keyupPasswordInput:a,addClickEventOnSignIn:function(){$("#userId").off("keydown").on("keydown",r),$("#password").off("keydown").on("keydown",r),$("#password").off("keyup").on("keyup",a),$("#pwdViewBtn").off("mousedown mouseup").on({mouseup:CommonJoin.mouseupViewButton,mousedown:CommonJoin.mousedownViewButton}),$("#normalLoginButton").off("click").on("click",NormalLogin.clickNormalLoginButton),$("#googleLoginButton").off("click").on("click",GoogleLogin.clickGoogleLoginButton),$("#kakaoLoginButton").off("click").on("click",KakaoLogin.clickKakaoLoginButton),$("#appleLoginButton").off("click").on("click",AppleLogin.clickAppleLoginButton),$("#autoCheck").off("click").on("click",c),$("#autoCheckLabel").off("click").on("click",c),$("#bottomSection").off("click").on("click",n),$("#findEmailInput").off("keydown").on("keydown",i),$("#findSubmit").off("click").on("click",O),$("#findBottomSection").off("click").on("click",o)}};function n(n){n=$(n.target);0<n.findUp(".js-id-find").length?Often.toast("info","아직 준비중입니다!!"):0<n.findUp(".js-password-find").length&&($("#password").hasClass("bizplay")?Often.submitForm("bizSetPwd","https://www.bizplay.co.kr/comm_0023_01.act","_self",{}):(t(!0),(e=$("#findEmailInput")).focus()))}function o(n){n=$(n.target);0<n.findUp(".js-signup-text").length?location.href="/signup.act":0<n.findUp(".js-signin-text").length&&t(!1)}function t(n){var o=$("#findPassword"),t=$("#findEmailInput");$("#loginLayer").css("display",n?"none":"block"),o.css("display",n?"block":"none"),t.val($("#userId").val()),t.removeClass("input-error"),o.find(".js-password-alert").text("")}function i(n){13===n.keyCode&&O()}function r(n){var o=$(n.target),t=_IsMini?$("#errorText"):o.parent().find(".error-text");if(""!==Often.null2Void(t.text()))return function(n){if(_IsMini)return MiniLogin.clearMiniError(n);n.removeClass("input-error")}(o),void t.text("");"Enter"!==n.key||s()||NormalLogin.clickNormalLoginButton()}function a(n){n=""!==$(n.target).val();$("#pwdViewBtn").css("display",n?"block":"none")}function c(n){if(_IsMini)return MiniLogin.clickMiniAutoCheck(n);$(n.currentTarget).toggleClass("auto-login-active");n=$(n.currentTarget).hasClass("auto-login-active");LocalUtil.setLocal("ONLY_AUTO_LOGIN_YN",n?"Y":"N"),Often.setCookie("autoLogin",n)}function l(i){var o,n=i.ID_GB===SignCode.TYPE.NORMAL,t=i.ID_GB===SignCode.TYPE.GOOGLE;n&&s()||(Often.setCookie("googleLoginYn",t?"Y":"N"),o=Often.getDeviceJson(_CLIENT_IP),Ajax.executeApi(RestApi.GET.FLOW_CUR_TIME_R001,{},function(n){Often.setCookie("DATE_TIME",n.CUR_DTTM),Ajax.executeApi(RestApi.GET.COLABO2_LOGIN_R003,$.extend({},o,i,{packetOption:Ajax.OPTION.PREVENT_EXECUTE,PWD:d(i.PWD,n.CUR_DTTM),SUB_DOM:Often.null2Void(SUB_DOM)}),function(n){if(!function(n){var o,t=Often.null2Void(n.ERR_CD,"0");if(t===SignCode.ERROR.NO_PROBLEM)return!1;if(function(n){if(""===SUB_DOM)return!1;if(n===SignCode.ERROR.WAIT_JOIN)return $(".js-link-home").css("display","none"),$("#waitJoinLayer").css("display","block"),!0;if(n===SignCode.ERROR.REJECT_JOIN)return Often.toast("error","참여 거절 되었습니다. 관리자에게 다시 초대 요청 하시기 바랍니다."),!0;if(n===SignCode.ERROR.NOT_EXISTS_DOMAIN)return Often.toast("error","해당 도메인의 사용자가 존재하지 않습니다."),!0}(t))return!0;var e=t===SignCode.ERROR.NOT_EXISTS_ID||t===SignCode.ERROR.ID_ERROR;u(o=e?$("#userId"):$("#password"));e=_IsMini?$("#errorText"):o.parent().find(".error-text");if(t===SignCode.ERROR.ACCOUNT_LOCKED)return e.text(i18next.t("front.alert.accountLocked")),!0;t===SignCode.ERROR.BIZPLAY_PASSWORD_ERROR?o.addClass("bizplay"):o.removeClass("bizplay");if(0<Number(t))return e.text(Often.null2Void(n.ERR_MSG,o.attr("data-login-err-msg"))).attr("data-error-code",t),!0;return e.text(o.attr("data-login-err-msg")).attr("data-error-code",t),!0}(n)){if(""!==Often.null2Void(n.AUTH_TYPE,"")&&"N"===Often.null2Void(n.AUTH_YN,"N")){var o=EmailAuth.getAuthId(n);return""===o?void 0:(EmailAuth.openAuthView(n.USER_ID,o,n.AUTH_TYPE,!1,_),void EmailAuth.setCounter(n))}var t,e;""===Often.null2Void(n.AUTH_TYPE,"")&&_IsMini,_IsMini&&Often.setCookie("MINI_USER_ID",i.USER_ID,360),t=i.USER_ID,n="Y"===LocalUtil.getAutoLogin(),e=Electron.isElectronApp(),n?Ajax.executeApi(RestApi.GET.COLABO2_AUTO_LOGIN_R001,{USER_ID:t,OBJ_CNTS_NM:e?"desktop":""},function(n){Often.setCookie((e?"mini":"")+"flowLogin",t+"|"+n.RAND_KEY,360)}):Often.setCookie((e?"mini":"")+"flowLogin",""),f()}})}))}function s(){var n=Validation.checkInput($("#loginForm input")),o=n.errorObj;return $(".error-text").text(""),0!==Object.keys(n).length&&((_IsMini?$("#errorText").attr("data-error-code",n.errorCode):o.parent().find(".error-text")).text(n.errorMessage),u(o),1)}function u(n){if(_IsMini)return MiniLogin.createMiniError(n);n.addClass("input-error").focus()}function f(){var n=_IsMini?"miniMain.act":"main.act";Often.submitForm("invite_form",n,"_self",{INVT_KEY:CONNECT_INVITE_KEY,T_COLABO_SRNO:CONNECT_PROJECT_SRNO,T_COLABO_COMMT_SRNO:CONNECT_POST_SRNO,T_COLABO_REMARK_SRNO:CONNECT_REMARK_SRNO,SUB_DOM:SUB_DOM})}function d(n,o){return GibberishAES.size(256),GibberishAES.aesEncrypt(n,"aes256-global-flow"+Often.null2Void(o,"00000000000000"))}function O(){var t=$("#findPassword").find(".js-password-alert"),n=$.trim(e.val());Ajax.executeApi(RestApi.GET.COLABO2_PWD_R001,{USER_ID:n,RENEWAL_YN:"Y"},function(n){if("0000"!==Often.null2Void(n.ERR_CD,"")){var o="2001"===n.ERR_CD?"일치하는 아이디 정보가 없습니다. 다시 확인해주세요.":n.ERR_CD;return t.html(Often.null2Void(n.ERR_MSG,o)),e.focus(),void e.addClass("input-error")}t.empty(),e.removeClass("input-error"),Often.toast("success",i18next.t("front.alert.checkPasswordEmail"))})}function _(){var n=$.trim($("#userId").val()),o=$.trim($("#password").val()),t=Electron.isElectronApp();l({USER_ID:n,PWD:o,ID_GB:SignCode.TYPE.NORMAL,ENCRYPT_YN:SignCode.ENCRYPT.SERVER_TIME_CHECK,OBJ_CNTS_NM:t?"desktop":""})}}();
"use strict";var MessengerApi=function(){var n,R,s,i={ROOM_CHAT_SRNO:"",PG_NO:1,PG_PER_CNT:20,NEXT_YN:"Y",PREV_YN:"Y"};return{drawRoomInfo:t,drawRoomFirstContents:function(e){roomInfo=e;e=$("body");Electron.isElectronApp()&&e.addClass("electron-chat"),e.attr(roomInfo),LocalUtil.removeLocal("ONLY_MESSENGER-"+_ROOM_SRNO),o(),t(roomInfo.ROOM_NM,roomInfo.SENDIENCE_CNT),BotUtil.isBotRoom()?(MessengerApi.adjustBottomArea(),MessengerEvent.addEventOnWindow(),ChatBot.isChatBotRoom()&&ChatBot.initSetting()):(""!==Often.null2Void(roomInfo.NOTICE_SRNO)&&MessengerNotice.drawNoticeByData(),MessengerEvent.initMessenger());e="Y"===roomInfo.READ_OVER_YN;"N"!==roomInfo.READ_OVER_YN&&_(!0,_ROOM_SRNO,roomInfo.ROOM_CHAT_SRNO);if(i.CHAT_SRCH_GB=e?loadMode.FIRST_OVER_LOAD:loadMode.FIRST_LOAD,i.ROOM_CHAT_SRNO=e?Often.null2Void(roomInfo.END_ROOM_CHAT_SRNO,"-1"):"",ChatBot.isChatBotRoom())return ChatBot.getChatBotInfo(_ROOM_SRNO,r);r()},drawTempMessage:function(e){R.append(MessengerHtml.getMessageItemsHtml([e],!1,!0)),R.moveToBottom(!1),N()},drawNotReadCount:a,readMessage:_,quitSelfMessenger:function(t,n,e){if(RoomType.PROJECT===(e||roomInfo.ROOM_GB))return Often.toast("info","프로젝트 채팅방에서는 나갈 수 없습니다!");PopupDraw.drawConfirm({contents:{main:Interpolation.breakLine(i18next.t("front.chatting.leave"))},callback:{submit:function(){Ajax.executeApi(RestApi.DELETE.COLABO2_CHAT_SENDIENCE_D001,{IN_RCVR_USER_ID:_USER_ID,ROOM_SRNO:t},function(e){MessengerNotice.applyNoticeStatus(noticeCode.NONE,t),SocketControl.sendMessage({CHAT_CODE:SocketAPI.MAIN.ROOM_LEAVE,ROOM_SRNO:_USER_ID,CHATTING_ROOM_SRNO:t}),"function"==typeof n&&n(t);e=Often.null2Void(e.ROOM_CHAT_SRNO,"");""!==e&&(SocketControl.sendMessage({CHAT_CODE:SocketAPI.MESSENGER.MESSAGE_UPDATE,ROOM_SRNO:t,MSG_REC:[MessengerJsonMaker.makeSpecialMsgRecJson("A",e,{ROOM_SRNO:t})]}),SocketControl.sendMessage({CHAT_CODE:SocketAPI.MESSENGER.JOIN_N_LEAVE,ROOM_SRNO:t,DEL_USER_REC:[{IN_RCVR_USER_ID:_USER_ID,RCVR_USER_NM:_USER_NM}]}))})}}})},setChatAlarm:function(t){var n=_IsMini?$("#chatting-"+t).find(".no-alarm").is(":visible"):"N"===roomInfo.PUSH_ALAM_YN,o=n?"Y":"N";Ajax.executeApi(RestApi.PUT.COLABO2_CHAT_SENDIENCE_U001,{PUSH_ALAM_YN:o,ROOM_SRNO:t},function(){var e=i18next.t(n?"front.chatting.alarmOn":"front.chatting.alarmOff");$("#detailToolTip").text(e),Often.toast("info",e),SocketControl.sendAlarmAndPinUpdate(!0,o,t)})},setChatPin:function(t){var n="Y"===(_IsMini?$("#miniChatPlusArea").find("ul").attr("pin_yn"):roomInfo.PIN_YN)?"N":"Y";Ajax.executeApi(RestApi.PUT.COLABO2_CHAT_SENDIENCE_U005,{ROOM_SRNO:t,PIN_YN:n},function(e){if("RUN"!==e.RESULT_CD)return Often.toast("info",i18next.t("front.alert.maximumPinned",{count:5}));e=i18next.t("front.alert.successfullyChange",{status:"N"==n?"$t(dictionary.unPin)":"$t(dictionary.pin)"});Often.toast("info",e),SocketControl.sendAlarmAndPinUpdate(!1,n,t)})},openLongMessagePopup:function(e,t){function n(t){if(""!==Often.null2Void(t)){var e,n=/(<safetag>(.*?)<\/safetag>)/gi,o=/(<safetag>|<\/safetag>)/gi,_="";try{return(e=t,("T"===ROOM_KIND&&""!==LINE_NUM&&""!==CARD_NUM?JSON.parse(e).lines[LINE_NUM].cards[CARD_NUM].contents[0].text:e).replace(/<br>/gi,"<tagsplit><safetag><br></safetag><tagsplit>")).split("<tagsplit>").forEach(function(e){""!==Often.null2Void(e)&&(_+=n.test(e)?e.replace(o,""):TagUtil.html2tag(e))}),_}catch(e){return t}}}Ajax.executeApi(RestApi.GET.COLABO2_CHAT_MSG_R002,{ROOM_SRNO:e,ROOM_CHAT_SRNO:t},function(e){var t="T"===ROOM_KIND?n(e.CNTN):e.CNTN,e=ListHelper.replaceJson($("#messengerLongItem").html(),$.extend({},e,{"message-date":Tz.momentTimeZone(e.RGSN_DTTM,"type2"),"message-cntn":TagConvert.db2HtmlStringByChat(t)})),t=$("#messengerLongPopup");t.append(e).removeClass("d-none"),t.find(".js-long-copy").off("click").on("click",S)})},createNewChatting:function(e){OpenUtil.openSubScreen({CONNECT_ID:SocketControl.getRoomConnectId(),GB:e?"INVITE_CHAT":"NEW_CHAT",ROOM_SRNO:e?_ROOM_SRNO:""})},getMessengerPageData:function(){return i},inviteMessenger:function(e,t){SocketControl.sendMessage({CHAT_CODE:SocketAPI.MESSENGER.MESSAGE_UPDATE,ROOM_SRNO:e.ROOM_SRNO,MSG_REC:[MessengerJsonMaker.makeSpecialMsgRecJson("A","",{RECEIVE_NAME_RECORD:e.SENDIENCE_REC,SEND_NAME:_USER_NM,ROOM_SRNO:e.ROOM_SRNO})]}),SocketControl.sendMessage({CHAT_CODE:SocketAPI.MESSENGER.JOIN_N_LEAVE,ROOM_SRNO:e.ROOM_SRNO,ADD_USER_REC:e.SENDIENCE_REC}),"function"==typeof t&&t()},reloadMessages:function(){ListHelper.initPageData(i),roomInfo.READ_OVER_YN="N",i.CHAT_SRCH_GB=loadMode.FIRST_LOAD,i.ROOM_CHAT_SRNO="",r()},isSendingMessage:C,adjustBottomArea:function(){o(),R.css("bottom",s.height())},isReceiveAndAction:function(e,t){var n=Often.null2Void(t.IN_RCVR_USER_ID);if(SocketAPI.MESSENGER.MESSAGE_UPDATE===e)return function(n){var o=Chatting.getOneMessageData(n),e=o.ROOM_CHAT_SRNO;{var t;o.NOT_READ_CNT=roomInfo.SENDIENCE_CNT-1,o.RGSR_ID===_USER_ID?(t=$("#message-"+e),""!==Often.null2Void(t.selector,"")&&(MessengerSend.clearTimeoutBySending(e),MessengerSend.updateNotReadCountArea(e,"COMPLETE"))):document.hasFocus()&&(o.NOT_READ_CNT=roomInfo.SENDIENCE_CNT-2,_(!0,_ROOM_SRNO,e))}if(ChatBot.isChatBotRoom())return ChatBot.updateMessageAndSettingAfterLoad(o);(function(e){if(""!==e.ROOM_CHAT_SRNO||"A"!==e.MSG_GB)for(var t=1;t<=5;t++){var n=R.find(".message-item").eq(-1*t),o=Number(n.attr("room_chat_srno")),_=Number(e.ROOM_CHAT_SRNO);if(o<_){n.after(MessengerHtml.getMessageItemsHtml([e],!1,!0)),"Y"===e.BOMB_YN&&MessengerSecret.startSecretTimerIfFocus(e.BOMB_TIMER,_);break}}else R.append(MessengerHtml.getMessageItemsHtml([e],!1,!0))})(o),function(){var e=$(".js-emoti-section-layer").is(":visible"),t=$(".js-emoti-send-layer").is(":visible");!R.isBottom()||e||t?(E(o,n.WEB_USER_ID),O()):R.moveToBottom(!1)}()}(t),!0;if(SocketAPI.MESSENGER.READ_UPDATE===e)return BotUtil.isBotRoom()?void 0:t.NOT_READ_CNT_REC?a(t.NOT_READ_CNT_REC):(Ajax.executeApi(RestApi.GET.COLABO2_NOT_READ_CNT_R001,{ROOM_SRNO:_ROOM_SRNO},function(e){a(e.NOT_READ_CNT_REC)}),!0);if(SocketAPI.MESSENGER.ALARM_N_PIN_UPDATE!==e||n!==_USER_ID)return SocketAPI.MESSENGER.PREVIEW===e&&(function(e){var t,n,o=$("#message-"+e.ROOM_CHAT_SRNO);VideoConference.isVC(o.attr("VC_SRNO"))||(0<o.find(".chat-btns").length&&o.find(".chat-btns")[0].remove(),0===(t=o.find(".js-preview-box")).find(".js-url-thumb").length&&(n=MessengerHtml.getUrlPreviewHtml(e),o.hasClass("left-section")?t.prepend(n):t.append(n),t.find(".chat-btns").addClass("chat-btn-position")),R.moveToBottom(!1),""===(n=e&&e.CHAT_PREVIEW_REC?{CHAT_PREVIEW_LINK:e.CHAT_PREVIEW_REC.CHAT_PREVIEW_LINK,CHAT_PREVIEW_TTL:e.CHAT_PREVIEW_REC.CHAT_PREVIEW_TTL,CHAT_PREVIEW_CNTN:e.CHAT_PREVIEW_REC.CHAT_PREVIEW_CNTN,CHAT_PREVIEW_IMG:e.CHAT_PREVIEW_REC.CHAT_PREVIEW_IMG}:{}).CHAT_PREVIEW_IMG&&t.find(".url-image").css("display","none"),_USER_ID===e.WEB_USER_ID&&Ajax.executeApi(RestApi.PUT.COLABO2_CHAT_MSG_U001,$.extend({ROOM_SRNO:e.ROOM_SRNO,ROOM_CHAT_SRNO:e.ROOM_CHAT_SRNO},n)))}(t),!0);n=""!==Often.null2Void(t.PIN_YN),e=n?"PIN":"ALARM",t=n?t.PIN_YN:t.PUSH_ALAM_YN;return function(e,t,n){"ALARM"===e?(_IsMini?MiniChatting.changeAlarmIconState(t):roomInfo.PUSH_ALAM_YN=n,MessengerMenu.changeAlarmIconState(n)):(_IsMini?MiniChatting.initMiniChatting():roomInfo.PIN_YN=n,MessengerMenu.changePinIconState(n))}(e,_ROOM_SRNO,t),!0},adjustBalloonPosition:O};function o(){n=$("#messengerHeader"),R=$("#messengerUl"),s=$("#messengerBottomArea"),s.find(".js-messenger-text-input")}function t(e,t){o(),n.find(".js-room-name").text(e),2<t&&n.find(".js-member-count").text("("+t+")"),document.title=e+" - "+i18next.t("dictionary.chat")+(3<t?" ("+t+")":"")}function a(n){var e;BotUtil.isBotRoom()||(o(),e=R.find("li.message-item").get().reverse(),$(e).each(function(e,t){var o=$(t),_=Number(o.attr("ROOM_CHAT_SRNO"));n.forEach(function(e){var t=Number(e.START_ROOM_CHAT_SRNO),n=Number(e.END_ROOM_CHAT_SRNO);t<_&&_<=n&&ListHelper.setCount(o.find(".btn-not-read"),e.NOT_READ_CNT)})}))}function r(){var e,O;i.CHAT_SRCH_GB===loadMode.UP_SCROLL&&"N"===i.PREV_YN||i.CHAT_SRCH_GB===loadMode.DOWN_SCROLL&&"N"===i.NEXT_YN||(o(),e=1===i.PG_NO?$("body").attr("room_chat_srno"):"",(O=$.extend({},{ROOM_SRNO:_ROOM_SRNO,ROOM_CHAT_SRNO:e,useSyncAjax:!1},i)).ROOM_CHAT_SRNO&&C(O.ROOM_CHAT_SRNO)||Ajax.executeApi(RestApi.GET.COLABO2_CHAT_MSG_R001,O,function(n){if(VideoConference.checkOpenWithVCButton(),n.MSG_REC&&0!==n.MSG_REC.length){var o=1===i.PG_NO,t=!1,e="Y",_="Y";switch(i.CHAT_SRCH_GB){case loadMode.FIRST_LOAD:case loadMode.FIRST_OVER_LOAD:t=!1,_=n.NEXT_YN;break;case loadMode.UP_SCROLL:t=!0,e=n.NEXT_YN;break;case loadMode.DOWN_SCROLL:t=!1,_=n.NEXT_YN}i.NEXT_YN=_,i.PREV_YN=e,R.drawListHelper({pageData:i,records:n.MSG_REC,prevYn:e,nextYn:_,reverse:t,callback:{item:function(e){return MessengerHtml.getMessageItemsHtml(e,t,!1)},scroll:function(){!t&&"N"===i.NEXT_YN&&R.isBottom()&&s.find("#balloonMessage").remove(),i.CHAT_SRCH_GB=loadMode.DOWN_SCROLL,i.ROOM_CHAT_SRNO=R.find(".message-item:visible:last").attr("ROOM_CHAT_SRNO"),r()},scrollReverse:function(){"Y"===e&&R.scrollTop()<R.height()*SCROLL_RATIO&&R.scrollTop(R.height()*SCROLL_RATIO_HALF),i.CHAT_SRCH_GB=loadMode.UP_SCROLL,i.ROOM_CHAT_SRNO=R.find(".message-item:visible:first").attr("ROOM_CHAT_SRNO"),r()},final:function(e){if(MessengerSecret.findSecretTimer(n.MSG_REC),N(),o){if(O.CHAT_SRCH_GB===loadMode.FIRST_OVER_LOAD)return t='<div class="chat-date"><span>'+i18next.t("front.messengerApi.readUntilHere")+"</span></div>",$("#message-"+roomInfo.END_ROOM_CHAT_SRNO).after(t),e.moveToOffsetById("message-"+roomInfo.END_ROOM_CHAT_SRNO,!1,"start"),void(e.isBottom()||MessengerApi.isSendingMessage(roomInfo.ROOM_CHAT_SRNO)||Ajax.executeApi(RestApi.GET.COLABO2_CHAT_MSG_R001,{ROOM_SRNO:_ROOM_SRNO,ROOM_CHAT_SRNO:roomInfo.ROOM_CHAT_SRNO,CHAT_SRCH_GB:loadMode.EQUAL_LOAD},function(e){E(Chatting.getOneMessageData(e))}));var t;O.CHAT_SRCH_GB===loadMode.FIRST_LOAD&&e.moveToBottom(!1),ChatBot.isChatBotRoom()&&ChatBot.settingAfterMessageLoad(_ROOM_SRNO,roomInfo.CHATBOT_ROOM_CHAT_SRNO),AlarmBot.isAlarmBotRoom()&&AlarmBotEvent.addClickEvent(e,n.MSG_REC[0])}}}})}}))}function _(o,_,e,O){o&&MessengerEvent.isNonActiveMessengerState()||(_=_||("undefined"!=typeof _ROOM_SRNO?_ROOM_SRNO:""),Ajax.executeApi(RestApi.POST.COLABO2_CHAT_MSG_READ_C002,{ROOM_SRNO:_,ROOM_CHAT_SRNO:Often.null2Void(e,"-1")},function(e){o&&(a(e.NOT_READ_CNT_REC),N(),MessengerSecret.findSecretTimerWhenFocus()),"function"==typeof O&&O();var t=Number(Often.null2Void(e.END_ROOM_CHAT_SRNO,0)),n=Number(Often.null2Void(e.START_ROOM_CHAT_SRNO,0));SocketControl.sendMessage({CHAT_CODE:SocketAPI.MAIN.READ_ALL_MESSAGE_BY_ROOM,ROOM_SRNO:_USER_ID,CHATTING_ROOM_SRNO:_}),t<n||SocketControl.sendMessage({CHAT_CODE:SocketAPI.MESSENGER.READ_UPDATE,ROOM_SRNO:_,USER_ID:_USER_ID,NOT_READ_CNT_REC:e.NOT_READ_CNT_REC,ROOM_CHAT_SRNO:String(n),START_ROOM_CHAT_SRNO:String(n),END_ROOM_CHAT_SRNO:String(t)})}))}function N(){R.children("li.message-item").last().attr("self-read-yn","Y")}function E(e,t){e.MSG_GB===MessageType.CHANGED&&t===_USER_ID||(s.find("#balloonMessage").remove(),s.prepend(MessengerHtml.getBalloonMessageHtml(e)))}function O(){var e=$(".js-emoti-section-layer"),t=$(".js-emoti-send-layer"),n=$("#balloonMessage"),o=e.is(":visible"),_=t.is(":visible");o&&!_?n.css("bottom",e.height()):o&&_?n.css("bottom",e.height()-t.height()):n.css("bottom",0)}function S(){ClipBoard.copyTextData($("#messengerLongPopup").find(".js-long-content").html())}function C(e){return 0===String(Often.null2Void(e)).indexOf("Q")}}();
"use strict";var MessengerEvent=function(){var u,n,e,i,t;return{initMessenger:function(){DocumentEvent.addEventOnMessenger(),s(),u=$("#messengerLayer"),(n=u).off("dragenter dragleave keydown drop paste click mousedown mousemove").on({dragenter:PasteFile.preventAll,dragleave:PasteFile.preventAll,drop:l,paste:f,click:g,mousedown:function(){t=!0},mousemove:function(){t=!1}}),u.find(".js-messenger-text-input").off("keyup keypress focus").on({keypress:M,keyup:function(){v(),h()}}),r()},closeFilePop:U,closeNonActiveLayer:d,closeMenuLayer:p,textInputResize:v,focusInput:r,checkReadAvailAndFocusInput:function(){a()&&MessengerApi.readMessage(!0),t&&!c()&&r()},isNonActiveMessengerState:c,addEventOnWindow:s,sendFocusRoomSrnoToMain:o,changeSendBtn:h};function s(){u=$("#messengerLayer"),$(window).on({mousemove:function(e){n=$(e.target)},focus:function(){clearTimeout(e),MessengerLost.lostInterMessage(),o(!1),a()&&MessengerApi.readMessage(!0),n&&0<n.parents(".chat-txt-wr").length||c()||r()},blur:function(){u.find(".js-messenger-text-input").blur(),o(!0)}})}function r(){n&&(0<n.findUp(".left-btns").length||0<n.findUp(".js-contents").length||0<n.findUp(".js-message-more-layer").length||0<n.findUp(".js-messenger-menu-btn").length)||(e=setTimeout(function(){u.find(".js-messenger-text-input").focus(),clearTimeout(e)},300))}function o(e){SocketControl.sendMessage({CHAT_CODE:SocketAPI.MAIN[e?"FOCUS_OUT":"FOCUS_IN"],ROOM_SRNO:_USER_ID,FOCUS_ROOM_SRNO:_ROOM_SRNO})}function a(){return"Y"!==$("#messengerUl li.message-item:last").attr("self-read-yn")||"0"!==roomInfo.NOT_READ_CNT}function l(e){PasteFile.pasteFileEvent(e,"drop")}function f(e){PasteFile.pasteFileEvent(e,"paste"),PasteText.pasteTextEvent(e),$(this).find(".js-messenger-text-input").moveToBottom(!1)}function c(){return $("#messengerMenuLayer").is(":visible")||$("#messengerSearchLayer").is(":visible")||$("#messengerReaderLayer").is(":visible")}function d(){if($(document).trigger("mousedown"),c())return $(".js-chat-menu").fadeOut(200,function(){$(".js-messenger-text-input").focus()}),!0}function g(t){var e,n,s,i,r,o,a,l=$(t.target);0===l.findUp(".js-messenger-search-btn").length||LimitGuest.isLimitGuest("search",!0)?0===l.findUp(".js-messenger-menu-btn").length?function(){var e=l.findUp(".js-long-text");if(0===e.length)return!1;e=e.closest("li.message-item");return O(e)?void 0:(OpenUtil.openSubScreen({ROOM_SRNO:_ROOM_SRNO,ROOM_CHAT_SRNO:e.attr("room_chat_srno"),GB:"CHAT_LONG_TEXT"}),!0)}()||function(){var e=l.findUp(".js-messenger-image");if(0===e.length)return!1;if(O(e.findUp(".message-item")))return!0;if(e.parents(".chat-txt").find(".reload-wr").is(":visible"))return!0;var n=Often.getAttrs(e)[0],t=Often.getAttrs(l.findUp(".message-item"))[0],t=$.extend({},n,t);"Y"===e.findUp(".message-item").attr("bomb_yn")?MessengerSecret.setSecretMessageWindow(ImageViewer.openImage("CHAT",[t],"","Y")):ImageViewer.openImage("CHAT",[t]);return!0}()||(0!==(e=l.findUp(".js-message-more-button")).length?(MessengerMore.openMorePop(e),1):function(){var e=l.findUp(".js-messenger-file");if(!e||0===e.length)return!1;if(O(e.findUp(".message-item")))return!0;var n=0<l.findUp(".js-download-button").length,t=function(e){var n=e.findUp(".js-messenger-attachments"),t=Often.getAttrs(e.findUp(".message-item")),e=Often.getAttrs(n),n=n.find(".file-tit").text();return[{ATCH_SRNO:e[0].ATCH_SRNO,RAND_KEY:e[0].RAND_KEY,USE_INTT_ID:e[0].USE_INTT_ID,ROOM_SRNO:t[0].ROOM_SRNO,ROOM_CHAT_SRNO:t[0].ROOM_CHAT_SRNO,FILE_NM:n,RGSN_DTTM:t[0].RGSN_DTTM}]}(l),e="GOOGLEDRIVE"===t[0].RAND_KEY||"DROPBOX"===t[0].RAND_KEY,e=n||e?"SAVE":"DOC-VIEWER";return FileUtil.openFile(e,t),!0}())||function(){var e=l.findUp(".js-videoConf-button");if(0===e.length)return!1;e=e.attr("data-vcsrno");VideoConference.getZoomUrl(e,!0)}()||function(){var e=l.findUp(".js-user-picture"),n=l.findUp(".js-user-title");if(0===e.length&&0===n.length)return!1;n=(0===n.length?e.parent():n.parents(".message-item")).attr("rgsr_id");return Profile.drawProfilePopup(n),!0}()||function(){var e=l.findUp(".btn-not-read");if(0===e.length)return!1;e=e.parents(".message-item").attr("room_chat_srno");return MessengerReader.openMessengerReader(e),!0}()||function(){var e=l.findUp(".js-hyper-button"),n=l.findUp(".js-url-thumb");if(0===e.length&&0===n.length)return!1;t.preventDefault();n=l.findUp("a");if(!n||0===n.length)return!1;n=n.attr("href");return Often.isFunc("ONLY_VIEW_BY_POST_LINK_ON_CHAT")&&UrlCatcher.isPostUrlAncAction(n)?void 0:(Electron.isElectronApp()?Electron.openExternalLinkforElectron(n):OpenUtil.openWindow(n,"_blank"),!0)}()||function(){var e=l.findUp("#balloonMessage");if(0===e.length)return!1;var n=$("#messengerUl").find(".message-item:last").attr("ROOM_CHAT_SRNO");return $("#messengerBottomArea").find("#balloonMessage").remove(),$("#messengerUl").moveToBottom(!1),e.attr("ROOM_CHAT_SRNO")===n||MessengerApi.reloadMessages(),!0}()||function(){var e=l.findUp(".js-chat-files-btn");if(0===e.length)return!1;var n=$("#MessengerFileModal");n.is(":visible")?n.fadeOut(200)&&e.removeClass("on"):n.fadeIn(200)&&e.addClass("on");var t=!Often.isFunc(Func.CLOUD.GOOGLEDRIVE_UPLOAD_PREVENT)&&Often.isFunc(Func.CLOUD.GOOGLEDRIVE_UPLOAD),s=!Often.isFunc(Func.CLOUD.DROPBOX_UPLOAD_PREVENT)&&Often.isFunc(Func.CLOUD.DROPBOX_UPLOAD),e=Often.isFunc(Func.CLOUD.IMPORT_FILE_BOX);return n.find("#uploadGoogleDrive").css("display",t?"block":"none"),n.find("#uploadDropbox").css("display",s?"block":"none"),n.find("#uploadImportFile").css("display",e?"block":"none"),!0}()||function(){var e=l.findUp(".js-file-option");if(0===e.length)return!1;if(Often.isFunc(Func.CLOUD.UPLOAD_PREVENT))return Often.toast("info",i18next.t("front.alert.adminRestriction")),!0;e=Often.null2Void(e.attr("data-upload"));if("pc"===e)Upload.uploadFile("any",MessengerSend.sendFile);else if("gdrive"===e)OpenUtil.openSubScreen({CONNECT_ID:SocketControl.getRoomConnectId(),GB:"GOOGLE_DRIVE"});else if("dropbox"===e)DropboxDrive.openDropboxDrive(function(e){FileUtil.isLimitOnMultiUpload(e.length,!0)||e.forEach(MessengerSend.sendFile)});else if("flowdrive"===e){if(LimitGuest.isLimitGuest("flowdrive",!0))return!0;FileUtil.openFlowDrive("CHAT")}return U(),!0}()||(0===l.findUp(".js-chat-meets-btn").length||LimitGuest.isLimitGuest("video",!0)?0!==(n=l.findUp(".js-secret-btn")).length?MessengerSecret.setSecretMode(n):0===l.findUp(".btn-timer").length?(0!==(s=l.findUp(".js-time-value")).length?(MessengerSecret.setSecretTimer(s),1):function(){var e=l.findUp(".js-emoji-btn");if(0===e.length)return!1;var n=e.hasClass("active"),t=$(".emo-send").is(":visible");e.addClass(n&&!t?"":"active").removeClass(n&&!t?"active":""),n?n?MessengerEmoti.closeEmotiListLayer():u.find(".emo-section").css("display",t?"":"none"):MessengerEmoti.setEmotiThumbList(u);return!0}())||(0!==(i=l.findUp("#sendMessageButton")).length?(MessengerSend.sendMessengerMessage(),i.removeClass("on"),1):function(){var e=l.findUp(".js-collection-item");if(0===e.length)return!1;if(!LimitGuest.isLimitGuest("collect",!0)){e=Often.null2Void(e.attr("data-code"),"CI");return OpenUtil.openSubScreen({GB:"CHAT_COLLECTION",ROOM_SRNO:_ROOM_SRNO,SRCH_GB:e}),!0}}())||(0!==(r=l.findUp("#inviteButton")).length?(MessengerApi.createNewChatting("INVITE_CHAT"===r.attr("data-code")),1):function(){var e=l.findUp(".js-participant-list");if(0===e.length)return!1;var n=e.attr("data-user-id"),t=0!==l.findUp(".js-participant-chat").length,e=0!==l.findUp(".js-participant-menu").length;return t?OpenUtil.openMessengerByOneUserId(n):e?Often.toast("info","참여자 내보내기 개발중"):Profile.drawProfilePopup(n),!0}())||function(){if(0===l.findUp("#projectMoveButton").length)return!1;var e=roomInfo.COLABO_SRNO;Electron.isElectronApp()?MiniProject.openProjectPage(e):(e=Often.getLocOrigin()+"/main.act?detail/"+e,OpenUtil.openPopup(e));return!0}()||function(){var e=l.findUp(".js-bottom-setting");if(0===e.length)return!1;var n=e.attr("data-code"),t=_ROOM_SRNO;return e.hasClass("on")?e.removeClass("on"):e.addClass("on"),"update-pin"===n?MessengerApi.setChatPin(t):"chat-alarm"===n?MessengerApi.setChatAlarm(t):"chat-quit"===n?MessengerApi.quitSelfMessenger(t,m):"messenger-setting"!==n||MessengerMenu.showSecondSettingLayer()}()||(o=l.findUp(".js-menu-background"),a=0===l.findUp(".js-menu-area").length,0!==o.length||a?p():0===l.findUp(".js-change-title").length?function(){if(0===l.findUp(".js-close-button").length)return;d()}():MessengerMenu.drawChangeTitlePopup(_ROOM_SRNO)):$(".time-list").toggleClass("on"):VideoConference.isZoomSynchronized(VideoConference.warnAndSendMessage,VideoConference.alertRequiredZoomSync,{isMini:!0,type:"chat"})):MessengerMenu.drawSettingMenu():MessengerSearch.openSearchLayer()}function p(){$("#messengerMenuLayer").css("display","none"),MessengerEvent.checkReadAvailAndFocusInput()}function m(){self.close()}function O(e){e=-1<e.attr("id").indexOf("message-Q");return e&&Often.toast("error",i18next.t("front.common.wait")),e}function M(e){e.shiftKey&&KeyCheck.isKey(e,"ENTER")||KeyCheck.isKey(e,"ENTER")&&(e.preventDefault(),MessengerSend.sendMessengerMessage())}function v(){var e=$("#messengerUl"),n=$("#messengerInput").find(".js-messenger-text-input"),t=n.prop("scrollHeight"),s=$(".write-bottom").innerHeight();i!==t&&(i=t,n.css("overflow",180<t?"scroll":"auto"),e.css("bottom",s).moveToBottom(!1),$(".js-messenger-popup").css("bottom",s-38),n.text()||n.empty())}function h(){var e=0!==$(".js-messenger-text-input").text().trim().length,n="none"!==$(".js-emoti-send-layer").css("display"),t=$("#sendMessageButton");e||n?t.addClass("on"):t.removeClass("on")}function U(){$("#MessengerFileModal").fadeOut(200)}}();
"use strict";var MessengerJsonMaker=function(){return{getAtchRecData:function(_){var R=$.extend({},_,{ORCP_FILE_NM:_.FILE_NM,FILE_NAME:_.FILE_NM,ATCH_URL:Often.null2Void(_.IMG_PATH,_.FILE_DOWN_URL),DOWNLOAD_URL:_.FILE_DOWN_URL,FILE_IDNT_ID:_.RAND_KEY});return(ImageUtil.isImageType(_)?function(_){var R={ATCH_SRNO:E(_.ATCH_SRNO,""),ATCH_URL:E(_.ATCH_URL,""),CLOUD_YN:E(_.CLOUD_YN,"Y"),DRM_MSG:E(_.DRM_MSG,""),DRM_YN:E(_.DRM_YN,"N"),EXPRY_YN:E(_.EXPRY_YN,"N"),FILE_NAME:E(_.FILE_NAME,""),FILE_SIZE:E(_.FILE_SIZE,""),OTPT_SQNC:E(_.OTPT_SQNC,"")};return[_,R].reduce(function(R,E){return Object.keys(E).forEach(function(_){R[_]=E[_]}),R},{});function E(_,R){return void 0===_?R:_}}:function(_){var R={ATCH_SRNO:E(_.ATCH_SRNO,""),ATCH_URL:E(_.ATCH_URL,""),CLOUD_YN:E(_.CLOUD_YN,"Y"),DRM_MSG:E(_.DRM_MSG,""),DRM_YN:E(_.DRM_YN,"N"),EXPRY_YN:E(_.EXPRY_YN,"N"),FILE_NAME:E(_.FILE_NAME,""),FILE_SIZE:E(_.FILE_SIZE,"")};return[_,R].reduce(function(R,E){return Object.keys(E).forEach(function(_){R[_]=E[_]}),R},{});function E(_,R){return null==_?R:_}})(R)},getUserJson:t,makeMsgRecJson:C,makeSpecialMsgRecJson:function(_,R,E){var N=E?Often.null2Void(E.NOT_READ_CNT):"",n=E?Often.null2Void(E.RECEIVE_NAME_RECORD):"",T=E?Often.null2Void(E.SEND_NAME):"",I=E?Often.null2Void(E.RGSR_ID):"",e={A:"back.langConvert.leftProject",A_INVITE:"back.langConvert.inviteProject",C:"back.roomConvert.changeChatRoomName",U:"front.common.setAnnouncement",X:"front.alert.deletedMessage"};T=""!==Often.null2Void(n)&&0<n.length?i18next.t(e[_+"_INVITE"],{inviteUser:T,invitedUser:function(E){var N="";return E.forEach(function(_,R){R=E.length-1===R;N+=R?_.RCVR_USER_NM:i18next.t("front.common.sir",{userName:_.RCVR_USER_NM})+","}),N}(n)}):i18next.t(e[_],{userName:Often.null2Void(T,_USER_NM)});return C($.extend({},t(),{ROOM_CHAT_SRNO:R,ROOM_SRNO:E.ROOM_SRNO,MSG_GB:_,CNTN:T,NOT_READ_CNT:N,RGSR_ID:I}))}};function C(_){return[_,{ATCH_DATA:R(_.ATCH_DATA,""),BOMB_TIMER:R(_.BOMB_TIMER,"0"),BOMB_YN:R(_.BOMB_YN,"N"),CHAT_PREVIEW_CNTN:R(_.CHAT_PREVIEW_CNTN,null),CHAT_PREVIEW_GB:R(_.CHAT_PREVIEW_GB,null),CHAT_PREVIEW_IMG:R(_.CHAT_PREVIEW_IMG,null),CHAT_PREVIEW_LINK:R(_.CHAT_PREVIEW_LINK,null),CHAT_PREVIEW_TTL:R(_.CHAT_PREVIEW_TTL,null),CHAT_PREVIEW_TYPE:R(_.CHAT_PREVIEW_TYPE,null),CHAT_PREVIEW_VIDEO:R(_.CHAT_PREVIEW_VIDEO,null),CNTN:R(_.CNTN,""),CONVT_CNTN:R(_.CNTN,""),CONVT_DTTM:R(_.CONVT_DTTM,""),DVSN_CD:R(_.DVSN_CD,""),EMOTI_PATH:R(_.EMOTI_PATH,null),FILE_REC:R(_.FILE_REC,R(_.FILE_CLOUD_REC,null)),IMG_REC:R(_.IMG_REC,R(_.IMG_CLOUD_REC,null)),JBCL_NM:R(_.JBCL_NM,""),LONG_YN:R(_.LONG_YN,"N"),MSG_GB:R(_.MSG_GB,""),NOT_READ_CNT:""+R(_.NOT_READ_CNT,""),OBJ_CNTS_NM:R(_.OBJ_CNTS_NM,""),PREVIEW_CNTN:R(_.PREVIEW_CNTN,""),PREVIEW_GB:R(_.PREVIEW_GB,""),PREVIEW_IMG:R(_.PREVIEW_IMG,""),PREVIEW_LINK:R(_.PREVIEW_LINK,""),PREVIEW_TTL:R(_.PREVIEW_TTL,""),PREVIEW_TYPE:R(_.PREVIEW_TYPE,""),PREVIEW_VIDEO:R(_.PREVIEW_VIDEO,""),PRFL_PHTG:R(_.PRFL_PHTG,""),RGSN_DTTM:R(_.RGSN_DTTM,Tz.momentConversion("current")),RGSR_CORP_NM:R(_.RGSR_CORP_NM,""),RGSR_DVSN_NM:R(_.RGSR_DVSN_NM,""),RGSR_ID:R(_.RGSR_ID,""),RGSR_NM:R(_.RGSR_NM,""),RGSR_USE_INTT_ID:R(_.RGSR_USE_INTT_ID,""),ROOM_CHAT_SRNO:""+R(_.ROOM_CHAT_SRNO,""),ROOM_SRNO:""+R(_.ROOM_SRNO,""),RSPT_NM:R(_.RSPT_NM,null),SELF_READ_YN:R(_.SELF_READ_YN,""),VC_SRNO:R(_.VC_SRNO,"0")}].reduce(function(R,E){return Object.keys(E).forEach(function(_){R[_]=E[_]}),R},{});function R(_,R){return void 0===_?R:_}}function t(){return{PRFL_PHTG:_PRFL_PHTG,RGSR_NM:_USER_NM,RGSR_ID:_USER_ID,RGSR_USE_INTT_ID:_USE_INTT_ID,RGSR_CORP_NM:_BSNN_NM,RGSR_DVSN_NM:_DVSN_NM}}}();
"use strict";var MiniState=function(){return{updateUserStateData:function(e,t){Ajax.executeApi(RestApi.PUT.COLABO2_USER_PRFL_U002,{STATUS:i(e)},t)},getStatusNumber:i,getStatusName:function(e){return"0"===e?ProfileState.ONLINE:"1"===e?ProfileState.OFFLINE:"2"===e?ProfileState.OUT:"3"===e?ProfileState.BUSINESS:ProfileState.OFFLINE},sendStatusSocket:function(e){SocketControl.sendMessage({CHAT_CODE:SocketAPI.MAIN.CHANGE_STATE,ROOM_SRNO:_USE_INTT_ID,USER_ID:_USER_ID,STATUS:String(e),WEB_USER_ID:_USER_ID})},setProfileStatus:function(e,t){var i=$("#miniFavorite");_USER_ID===t&&$("#profileState").removeClass().addClass("mini-mode-"+e);i.is(":visible")&&i.find('.js-favorite-member-chat .user-id[user-id="'+t+'"]').closest(".js-favorite-member-chat").find(".js-mini-state").removeClass("mini-mode-online mini-mode-offline mini-mode-out mini-mode-business").addClass("mini-mode-"+e)}};function i(e){return e===ProfileState.ONLINE?"0":e===ProfileState.OFFLINE?"1":e===ProfileState.OUT?"2":e===ProfileState.BUSINESS?"3":""}}();
"use strict";var MiniProject=function(){var i={PG_NO:1,PG_PER_CNT:30,NEXT_YN:"Y"};return{initProject:function(e){$("#miniProject").scrollTop(0),AllProject.showList({MODE:AllProject.getProjectMode().MAIN,BADGE_UPDATE:e}),$(".js-non-search-item").css("display","block"),$(".js-search-item").css("display","none")},openProjectPage:function(e,t,c,i){var s=screen.availWidth,n=screen.availHeight,r=screenLeft+(screen.availWidth-s)/2,s=screenTop+(screen.availHeight-n)/2,n="";n=e?Often.getLocOrigin()+"/main.act?detail/"+e:Often.getLocOrigin()+"/main.act";Electron.openElectronProject(n,e,t,c,r,s,i)},showSearchResult:function(e){var t=$(".js-non-search-item"),c=$(".js-search-item");0!==e.trim().length?(ListHelper.initPageData(i),function(e){var t;"N"!==i.NEXT_YN&&((t=e?$("#searchProjectListUl"):$("#projectListUl")).empty(),1===i.PG_NO&&""!==e&&$("#miniSearchListTtl").text("'"+e),Ajax.executeApi(RestApi.GET.COLABO2_L105,$.extend({},i,{SRCH_GB:"M",SRCH_WORD:e.replace(/'/g,"''").replace(/%/g,"\\%")}),function(e){t.empty(),t.drawListHelper({pageData:i,nextYn:e.NEXT_YN,records:e.COLABO_REC,noDataHtml:ListHelper.getNoDataHtml(),targetObj:{focus:$("#miniSearchInput")},callback:{click:AllProject.clickProjectItems,dblclick:AllProject.clickProjectItems,item:AllProject.getProjectItems,final:function(){$(".js-non-search-item").css("display","none"),$(".js-search-item").css("display","block")}}})}))}(e)):(t.css("display","block"),c.css("display","none"),$("#miniSearchListTtl").text(i18next.t("front.searchResult.searchResult")))}}}();
"use strict";var MiniLock=function(){var o,a,r,t,e,c=!1,n=!1,i=!1,l=0,s=0,u=1800,d=3600,f=300;return{isLockMode:function(){return c},initLockData:function(){n=Electron.getLockSettingValue("default"),e=Often.null2Void(Electron.getLockSettingValue("lockSec"),"10"),t=ServerChecker.isKimchang?(n=!0,u):"SOIL_1"===_USE_INTT_ID?f:"BFLOW_210118174434"===_USE_INTT_ID?d:60*e},showLockLayer:S,setLockState:m};function m(e){e?(i=!(l=0),clearInterval(s)):""!==_USER_ID&&i&&(i=!1,s=setInterval(function(){600===++l?(MiniState.sendStatusSocket(ProfileState.OUT),MiniState.updateUserStateData(ProfileState.OUT)):n&&t<=l&&(m(!0),S(),i=!0)},1e3))}function S(){clearInterval(s),MiniState.sendStatusSocket(ProfileState.OUT),MiniState.updateUserStateData(ProfileState.OUT),function(){{var e;(o=$("#miniLock")).css("display","block"),$(".mini-lock-profile").css("background-image","url("+ImageUtil.removeDomain("PROFILE",_PRFL_PHTG)+")"),$(".mini-lock-userNm").text(_USER_NM),function(){var e=o.find("#miniPassInput");e.val("").off("keyup").on("keyup",_),o.off("click").on("click",k),$("#pwdViewBtn").off("mousedown mouseup").on({mouseup:function(){e.attr("type","password")},mousedown:function(){e.attr("type","text")}})}(),Electron.getElectronConfig().b_fullMode?$("#allMainContent").css("display","none"):($("#miniLeft, #miniWrap").css("display","none"),e=Electron.getElectronConfig(),a=e.mainMiniWindowWidth,r=e.mainMiniWindowHeight,Electron.setWindowMinSize(380,600,"logout"))}}(),Electron.lockScreen(),c=!0}function _(){var e,t;13===event.keyCode?p():(t=0<(e=o.find("#miniPassInput")).val().length,$("#pwdViewBtn").css("display",t?"block":"none"),t&&e.removeClass("mini-mode-alert-color-1"))}function k(){var e=$(event.target);(0!==e.findUp("#miniConfirmBtn").length?(p(),1):0===e.findUp("#miniLockLogoutBtn").length)||Often.tryLogout()}function p(){var e,t,n,i=$("#miniPassInput");n=$("#miniPassInput"),e=Validation.checkInput(n),t=e.errorObj,0!==Object.keys(e).length?($("#miniLockErrorMsg").attr("data-error-code",e.errorCode).text(e.errorMessage),t.addClass("mini-mode-alert-color-1").focus(),n.addClass("mini-mode-alert-color-1")):(t=Often.getCookie("SECO_COMPANY_CODE"),n=LocalUtil.getDeviceId(),n={ID_GB:Often.null2Void(Often.getCookie("_ID_GB"),"4"),PWD:$.trim(i.val()),USER_NM:"",PRFL_PHTG:"",EMAIL:"",SUB_DOM:"",CMPN_CD:t,DUID:n,OBJ_CNTS_NM:"desktop"},Ajax.executeApi(RestApi.GET.COLABO2_LOGIN_R003,n,function(e){return null!==e.ERR_MSG&&""!==e.ERR_MSG&&"0000"!==e.ERR_CD?(e=e.ERR_MSG.substr(0,17),$("#miniLockErrorMsg").css("display","inline-block").text(e),void o.find("#miniPassInput").addClass("mini-mode-alert-color-1")):(_IsMini&&window.resizeTo(a,r),location.href=location.origin+(_IsMini?"/miniMain.act":"/main.act"),c=!1,void Electron.unLockScreen())}))}}();
//# sourceMappingURL=main.min.js.map
